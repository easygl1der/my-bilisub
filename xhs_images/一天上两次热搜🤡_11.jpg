(self.webpackChunkxhs_pc_web=self.webpackChunkxhs_pc_web||[]).push([["2980"],{31638:function(e){function webpackEmptyContext(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}webpackEmptyContext.keys=function(){return[]},webpackEmptyContext.resolve=webpackEmptyContext,webpackEmptyContext.id=31638,e.exports=webpackEmptyContext},92569:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDIwIDIwIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik04LjA4MiA5Ljg3N2EuMTcuMTcgMCAwIDAgMCAuMjI0bDUuNDc3IDYuMTQ0YS43Ni43NiAwIDAgMS0uMDUgMS4wNi43MjcuNzI3IDAgMCAxLTEuMDQtLjA1TDYuNDQgMTAuNDkyYS43Ni43NiAwIDAgMSAwLTEuMDFsNi4wMTctNi43MzhhLjcyNy43MjcgMCAwIDEgMS4wNC0uMDUuNzYuNzYgMCAwIDEgLjA0OSAxLjA2eiIvPjwvc3ZnPg=="},75851:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxwYXRoIGQ9Ik0yLjE5NSA1LjUyOWEuNjY3LjY2NyAwIDAgMCAwIC45NDNsNS4zMzQgNS4zMzNjLjI2LjI2LjY4Mi4yNi45NDIgMGw1LjMzNC01LjMzM2EuNjY3LjY2NyAwIDEgMC0uOTQzLS45NDNMOCAxMC4zOSAzLjEzOCA1LjUyOWEuNjY3LjY2NyAwIDAgMC0uOTQzIDAiLz48L3N2Zz4="},61079:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xOS4yMyA0Ljc3MmEuOTIuOTIgMCAwIDEgMCAxLjMwMWwtNS45MjggNS45MjggNS45MjYgNS45MjVhLjkyLjkyIDAgMCAxLTEuMzAyIDEuMzAybC01LjkyNS01LjkyNi01LjkyOCA1LjkyOWEuOTIuOTIgMCAwIDEtMS4yMTQuMDc2bC0uMDg3LS4wNzZhLjkyLjkyIDAgMCAxIDAtMS4zMDJsNS45MjgtNS45MjgtNS45My01LjkzYS45Mi45MiAwIDAgMSAxLjMtMS4zMDFsNS45MzEgNS45MyA1LjkyOC01LjkyOGEuOTIuOTIgMCAwIDEgMS4yMTUtLjA3N3oiLz48L3N2Zz4="},39967:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDIwIDIwIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTYuMDI1IDMuOTc3Yy4zLjI5OS4zLjc4NCAwIDEuMDg0TDExLjA4NSAxMGw0LjkzOCA0LjkzOGEuNzY3Ljc2NyAwIDAgMS0xLjA4NCAxLjA4NEwxMCAxMS4wODVsLTQuOTQgNC45NGEuNzcuNzcgMCAwIDEtMS4wMTIuMDY0bC0uMDcyLS4wNjRjLS4zLS4yOTktLjMtLjc4NCAwLTEuMDg0bDQuOTQtNC45NC00Ljk0Mi00Ljk0MmEuNzY3Ljc2NyAwIDEgMSAxLjA4NC0xLjA4NGw0Ljk0MiA0Ljk0MSA0Ljk0LTQuOTRhLjc3Ljc3IDAgMCAxIDEuMDEyLS4wNjN6Ii8+PC9zdmc+"},59008:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSIjRkRCQzVGIiBkPSJNMTguODY1IDE5LjUwM2ExLjgxIDEuODEgMCAwIDEtLjczNyAxLjY0OSAxLjgyIDEuODIgMCAwIDEtMS44LjE5NkwxMi4yIDE5LjU0NmEuNS41IDAgMCAwLS40IDBsLTQuMTI3IDEuODAyYTEuODIgMS44MiAwIDAgMS0xLjgwMS0uMTk2IDEuODEgMS44MSAwIDAgMS0uNzM3LTEuNjVsLjQ1Mi00LjM4NGEuNS41IDAgMCAwLS4xMjctLjM4NmwtMi45OTQtMy4zMmExLjgxIDEuODEgMCAwIDEtLjM3Ny0xLjc3Yy4yLS42MTUuNzEzLTEuMDc3IDEuMzQ3LTEuMjEzbDQuNDA0LS45NDVhLjUuNSAwIDAgMCAuMzI2LS4yMzVsMi4yNjUtMy44NTNhMS44MiAxLjgyIDAgMCAxIDMuMTM4IDBsMi4yNjUgMy44NTNhLjUuNSAwIDAgMCAuMzI2LjIzNWw0LjQwNC45NDVhMS44MDggMS44MDggMCAwIDEgLjk3IDIuOTg0bC0yLjk5NCAzLjMxOWEuNS41IDAgMCAwLS4xMjcuMzg2eiIvPjwvc3ZnPg=="},9334:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSIjNUI5MkUxIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMiAyMmM1LjUyMyAwIDEwLTQuNDc3IDEwLTEwUzE3LjUyMyAyIDEyIDIgMiA2LjQ3NyAyIDEyczQuNDc3IDEwIDEwIDEwIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTcuMjQ0IDkuNTI2YS44OTQuODk0IDAgMCAwLS4wMi0xLjI3My45MTUuOTE1IDAgMCAwLTEuMjg2LjAyMWwtNS40MTUgNS41NDMtMS45NzItMS45NTNhLjkxNS45MTUgMCAwIDAtMS4yODUgMCAuODk0Ljg5NCAwIDAgMCAwIDEuMjcybDIuNjI1IDIuNmEuOTEzLjkxMyAwIDAgMCAxLjI5Ni0uMDF6Ii8+PC9zdmc+"},39520:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjAgMjAiPjxwYXRoIGQ9Ik04LjEyNSAyLjVoMy43NWEuNjI1LjYyNSAwIDEgMSAwIDEuMjVoLTMuNzVhLjYyNS42MjUgMCAxIDEgMC0xLjI1TTguMTI1IDcuNWEuNjI1LjYyNSAwIDAgMC0uNjI1LjYyNXY2LjI1YS42MjUuNjI1IDAgMSAwIDEuMjUgMHYtNi4yNWEuNjI1LjYyNSAwIDAgMC0uNjI1LS42MjVNMTEuMjUgOC4xMjVhLjYyNS42MjUgMCAxIDEgMS4yNSAwdjYuMjVhLjYyNS42MjUgMCAxIDEtMS4yNSAweiIvPjxwYXRoIGQ9Ik0xNi44NzUgNWEuNjI1LjYyNSAwIDEgMSAwIDEuMjVoLTEuMDQydjcuOTE3QTMuMzMzIDMuMzMzIDAgMCAxIDEyLjUgMTcuNWgtNWEzLjMzMyAzLjMzMyAwIDAgMS0zLjMzMy0zLjMzM1Y2LjI1SDMuMTI1YS42MjUuNjI1IDAgMSAxIDAtMS4yNXpNNS40MTcgNi4yNXY3LjkxN2MwIDEuMTUuOTMyIDIuMDgzIDIuMDgzIDIuMDgzaDVjMS4xNSAwIDIuMDgzLS45MzMgMi4wODMtMi4wODNWNi4yNXoiLz48L3N2Zz4="},15294:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0zLjI2OCAxMS4zNTRhLjkxNC45MTQgMCAwIDAgMCAxLjI5Mmw1LjU4NiA1LjU4NmEuOTE0LjkxNCAwIDAgMCAxLjI5Mi0xLjI5MmwtNC4wMjUtNC4wMjZoMTMuOTY1YS45MTQuOTE0IDAgMCAwIDAtMS44MjhINi4xMmw0LjAyNS00LjAyNmEuOTE0LjkxNCAwIDEgMC0xLjI5Mi0xLjI5MnoiLz48L3N2Zz4="},99522:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSIjRkYyNDQyIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xMiAyMmM1LjUyMyAwIDEwLTQuNDc3IDEwLTEwUzE3LjUyMyAyIDEyIDIgMiA2LjQ3NyAyIDEyczQuNDc3IDEwIDEwIDEwIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMTcuMjQ0IDkuNTI2YS44OTQuODk0IDAgMCAwLS4wMi0xLjI3My45MTUuOTE1IDAgMCAwLTEuMjg2LjAyMWwtNS40MTUgNS41NDMtMS45NzItMS45NTNhLjkxNS45MTUgMCAwIDAtMS4yODUgMCAuODk0Ljg5NCAwIDAgMCAwIDEuMjcybDIuNjI1IDIuNmEuOTEzLjkxMyAwIDAgMCAxLjI5Ni0uMDF6Ii8+PC9zdmc+"},21288:function(e,t,n){"use strict";e.exports=n.p+"resource/svg/group.c2527404.svg"},8846:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjc1IDE1LjVzLTEuNjEyLTMuNzExIDEuMjcxLTYuMjEzTDguODAxIDE1LjVjNS40NSAwIDcuMTA0LTcuNSAzLjg2NC0xMS4yNCAwIDAtLjkwMyAxLjExLTIuMDQyIDIuMjI5IDAgMCAuNzgzLTQuMzQ3LTMuMjE0LTUuOTg5IDAgMC0uNzQyIDMuMDExLTMuMjkgNS4yM0MuMTQyIDkuMTk3IDEuMTYgMTUuNSA2LjI3NiAxNS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4="},69308:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDEyIDEyIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJtMy4zOCA4LjY2Ny0uODE2LjQ3YS4zNzQuMzc0IDAgMSAxLS4zNzYtLjY1bDguMjQ4LTQuNzVhLjM3NC4zNzQgMCAxIDEgLjM3Ni42NWwtLjYzLjM2MnEuMzc2LjQ0My43MzMuOTcyYS41LjUgMCAwIDEgLjAzNC41bC0uMDM0LjA1OC0uMTIuMTc3QzkuMzggOC40ODYgNy43MTYgOS41IDYgOS41Yy0uODk4IDAtMS43OC0uMjc4LTIuNjItLjgzM200LjA4Ny0yLjM1NEw1LjUzNCA3LjQyNlE1Ljc1NSA3LjUgNiA3LjVhMS41IDEuNSAwIDAgMCAxLjQ2Ny0xLjE4N002IDIuNWMxLjA4IDAgMi4xMzcuNDAxIDMuMTI1IDEuMjA1TDcuMDMxIDQuOTFBMS41IDEuNSAwIDAgMCA0LjU0IDYuMzQ1bC0yLjMyNyAxLjM0cS0uNTg2LS42MDItMS4xMjYtMS40MDZhLjUuNSAwIDAgMS0uMDM0LS41bC4wMzQtLjA1OC4xMi0uMTc3QzIuNjIzIDMuNTE0IDQuMjg0IDIuNSA2IDIuNSIvPjwvc3ZnPg=="},70571:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDIwIDIwIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGZpbGwtb3BhY2l0eT0iLjMiIGQ9Ik0xMCAzLjE4MkE2LjgxOCA2LjgxOCAwIDEgMCAxNi44MTYgMTBhLjc1OC43NTggMCAwIDEgMS41MTYgMCA4LjMzMyA4LjMzMyAwIDEgMS04LjMzNC04LjMzMy43NTguNzU4IDAgMCAxIDAgMS41MTUiLz48L3N2Zz4="},38480:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjAgMjAiPjxwYXRoIGQ9Ik01IDEwYTEuMjUgMS4yNSAwIDEgMS0yLjUgMEExLjI1IDEuMjUgMCAwIDEgNSAxME0xMS4yNSAxMGExLjI1IDEuMjUgMCAxIDEtMi41IDAgMS4yNSAxLjI1IDAgMCAxIDIuNSAwTTE2LjI1IDExLjI1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiLz48L3N2Zz4="},23882:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Y29sb3IiIGQ9Ik0yMC4xNiAxMy45di0yLjdjMC0zLjE4LTEuOTktNi4wNy00Ljk4LTcuM0MxNC41OCAyLjc1IDEzLjM1IDIgMTIgMnMtMi41OC43NS0zLjE4IDEuOWMtMyAxLjIzLTQuOTggNC4xMi00Ljk4IDcuM3YyLjY5QzIuNzcgMTQuMjYgMiAxNS4yNiAyIDE2LjQyYzAgMS40OCAxLjI0IDIuNjggMi43NiAyLjY4SDguNWMuMjggMS42NCAxLjczIDIuOSAzLjUgMi45czMuMjItMS4yNiAzLjUtMi45aDMuNzRjMS41MiAwIDIuNzYtMS4yIDIuNzYtMi42OCAwLTEuMTYtLjc3LTIuMTUtMS44NC0yLjUyTTEyIDIwLjJjLS43NCAwLTEuMzYtLjQ2LTEuNi0xLjFoMy4xOWMtLjIzLjY0LS44NSAxLjEtMS41OSAxLjFtNy4yNC0yLjlINC43NmMtLjUgMC0uOS0uMzktLjktLjg4IDAtLjQ4LjQxLS44OC45MS0uODguNTEgMCAuOTMtLjQuOTMtLjlWMTEuMmMwLTIuNTYgMS42Ny00Ljg4IDQuMTQtNS43Ni4yNi0uMDkuNDYtLjI5LjU2LS41NC4yNC0uNjYuODktMS4xIDEuNjEtMS4xczEuMzcuNDQgMS42MSAxLjFjLjA5LjI1LjMuNDUuNTYuNTQgMi40OC44OCA0LjE0IDMuMTkgNC4xNCA1Ljc2djMuNDRjMCAuNS40Mi45Ljk0LjkuNSAwIC45LjM5LjkuODhhLjkxLjkxIDAgMCAxLS45Mi44OCIvPjwvc3ZnPg=="},35528:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI4IiBoZWlnaHQ9IjEwIiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgOCAxMCI+PHBhdGggZmlsbD0iY3VycmVudENvbG9yIiBkPSJNMS4xNjcuMzMzQy41MjIuMzMzIDAgLjg1NiAwIDEuNXY3YTEuMTY3IDEuMTY3IDAgMCAwIDIuMzMzIDB2LTdjMC0uNjQ0LS41MjItMS4xNjctMS4xNjYtMS4xNjdNNi44MzMuMzMzQzYuMTkuMzMzIDUuNjY3Ljg1NiA1LjY2NyAxLjV2N0ExLjE2NyAxLjE2NyAwIDEgMCA4IDguNXYtN0M4IC44NTYgNy40NzguMzMzIDYuODMzLjMzMyIvPjwvc3ZnPg=="},30149:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDEyIDEyIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJtNC40MDEgMi4xMyA1LjE0IDMuMDZhLjk0Ny45NDcgMCAwIDEgMCAxLjYyMUw0LjQwMSA5Ljg3YS45MjQuOTI0IDAgMCAxLTEuMjczLS4zMzRBLjk1Ljk1IDAgMCAxIDMgOS4wNTlWMi45NDFDMyAyLjQyIDMuNDE2IDIgMy45MyAyYy4xNjYgMCAuMzI4LjA0NS40NzEuMTMiLz48L3N2Zz4="},62606:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDEwIDEyIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0yLjAwMi41MTUgOS4zNDUgNC44NWExLjMzNSAxLjMzNSAwIDAgMSAwIDIuMjk3TDIuMDAyIDExLjQ4QTEuMzI2IDEuMzI2IDAgMCAxIDAgMTAuMzMyVjEuNjY0QTEuMzMgMS4zMyAwIDAgMSAyLjAwMi41MTUiLz48L3N2Zz4="},63630:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDEyIDEyIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNNiAxYTIuNDUgMi40NSAwIDAgMC0yLjQ1IDIuNDV2LjFBMiAyIDAgMCAwIDIgNS41djNhMiAyIDAgMCAwIDIgMmg0YTIgMiAwIDAgMCAyLTJ2LTNhMiAyIDAgMCAwLTEuNTUtMS45NXYtLjFBMi40NSAyLjQ1IDAgMCAwIDYgMW0xLjU1IDIuNWgtMy4xdi0uMDVhMS41NSAxLjU1IDAgMCAxIDMuMSAwem0tMS4xIDMuNnYuNjVhLjQ1LjQ1IDAgMSAxLS45IDBWNy4xQS43NDkuNzQ5IDAgMCAxIDYgNS43NWEuNzUuNzUgMCAwIDEgLjQ1IDEuMzUiLz48L3N2Zz4="},17048:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik0xMC43ODMgNy4wNzhhLjkxLjkxIDAgMCAxIC4wODctMS4yODJsMi4xNTYtMS44ODRhNy45OCA3Ljk4IDAgMCAwLTguMTM4IDMuOTEzIDguMDQ0IDguMDQ0IDAgMCAwIDEuODM0IDEwLjE5NC45MDkuOTA5IDAgMSAxLTEuMTYgMS40IDkuODYgOS44NiAwIDAgMS0yLjI1LTEyLjVBOS43OTQgOS43OTQgMCAwIDEgMTQuOTYgMi41MjRjLjc3My4yNjQuOTY2IDEuMjcuMzU0IDEuODAzbC0zLjI0OCAyLjgzOGEuOTEuOTEgMCAwIDEtMS4yODMtLjA4N00xMy4yMTcgMTYuOTIyYS45MS45MSAwIDAgMS0uMDg3IDEuMjgybC0yLjE1NiAxLjg4NGE3Ljk4IDcuOTggMCAwIDAgOC4xMzgtMy45MTMgOC4wNDQgOC4wNDQgMCAwIDAtMS44MzQtMTAuMTk0LjkwOS45MDkgMCAxIDEgMS4xNi0xLjQgOS44NiA5Ljg2IDAgMCAxIDIuMjUgMTIuNUE5Ljc5NCA5Ljc5NCAwIDAgMSA5LjA0IDIxLjQ3NmMtLjc3Mi0uMjYzLS45NjUtMS4yNjUtLjM1NC0xLjgwM2wzLjI0OC0yLjgzOGEuOTEuOTEgMCAwIDEgMS4yODMuMDg3Ii8+PC9zdmc+"},81162:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xMS41IDNhOC41IDguNSAwIDAgMSA2LjYxMyAxMy44NGwzLjAyMyAzLjAyNGEuOS45IDAgMSAxLTEuMjcyIDEuMjcybC0zLjAyNC0zLjAyM0E4LjUgOC41IDAgMSAxIDExLjUgM20wIDE1LjJhNi43IDYuNyAwIDEgMCAwLTEzLjQgNi43IDYuNyAwIDAgMCAwIDEzLjQiLz48L3N2Zz4="},34167:function(e){"use strict";e.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDE0IDE0Ij48cGF0aCBmaWxsPSIjM0Q4QUY1IiBkPSJNNy45MDggMi43MDVhMi4zOSAyLjM5IDAgMCAxIDMuMzkgMGMuOTM2Ljk0LjkzNiAyLjQ2MyAwIDMuNDAybC0zLjk1OSAzLjk3NGEzLjEyIDMuMTIgMCAwIDEtNC40MjMgMCAzLjE0NyAzLjE0NyAwIDAgMSAwLTQuNDRsMy4yNy0zLjI4MmEuNDUuNDUgMCAwIDEgLjYzNyAwIC40NTMuNDUzIDAgMCAxIDAgLjYzOUwzLjU1MyA2LjI4YTIuMjQgMi4yNCAwIDAgMCAwIDMuMTYyYy44Ny44NzMgMi4yOC44NzMgMy4xNSAwbDMuOTU4LTMuOTczYTEuNTA3IDEuNTA3IDAgMCAwIDAtMi4xMjYgMS40OTMgMS40OTMgMCAwIDAtMi4xMTcgMGwtMy43ODcgMy44Yy0uMy4zMDItLjMuNzg5IDAgMS4wOS4zLjMuNzg2LjMgMS4wODUgMGwzLjA5OC0zLjExYS40NS40NSAwIDAgMSAuNjM3IDAgLjQ1My40NTMgMCAwIDEgMCAuNjM5bC0zLjA5OSAzLjExYTEuNjYzIDEuNjYzIDAgMCAxLTIuMzU3IDAgMS42NzcgMS42NzcgMCAwIDEgMC0yLjM2N3oiLz48L3N2Zz4="},94251:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(93328),i=n(66398),a=n(14978),o=n.n(a),u=n(31105),l=n(16337),s={class:"btn-wrapper"},c=(0,r.aZ)({__name:"BackTop",props:{container:{}},setup:function(e){var t=(0,r.iH)(!1),n=o()(function(){var n=e.container?e.container.scrollTop:document.documentElement.scrollTop;t.value=n>200},50);function handleBack2TopClick(){(0,u.ZP)(0,{getContainer:function(){return e.container||document}})}return(0,r.bv)(function(){(0,l.ORN)(e.container||document,"scroll",n)}),function(e,n){return(0,r.wg)(),(0,r.iD)("div",{class:(0,r.C_)(["back-top",{active:(0,r.SU)(t)}]),onClick:handleBack2TopClick},[(0,r._)("div",s,[(0,r.Wm)((0,r.SU)(i.i8),{size:"20",icon:"arrow_top"})]),n[0]||(n[0]=(0,r._)("div",{class:"tip-container"},[(0,r._)("span",{class:"tip-text"},"回到顶部")],-1))],2)}}}),d=(0,n(5010).default)(c,[["__scopeId","data-v-4c0a6200"]])},29642:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(93328),i=n(66398),a=(0,r.aZ)({__name:"ConditionalSticky",props:{permit:{type:Boolean,default:!1},offset:{default:0},container:{default:void 0}},setup:function(e){return function(t,n){return e.permit?((0,r.wg)(),(0,r.j4)((0,r.SU)(i.ow),{key:0,offset:e.offset,container:null==e?void 0:e.container},{default:(0,r.w5)(function(){return[(0,r.WI)(t.$slots,"default")]}),_:3},8,["offset","container"])):(0,r.WI)(t.$slots,"default",{key:1})}}}),o=a},3642:function(e,t,n){"use strict";n.d(t,{Z:function(){return J}});var r=n(70879),i=n(27337),a=n(82726),o=n(93328),u=n(60506),l=n(14978),s=n.n(l),c=n(94251),d=n(1552),v=n(41622),f=n(66993),p=n(377),h=n(66398),g=n(51899),m=n.n(g),y=n(39317);n(17048);var I={class:"btn-wrapper"},_=(0,o.aZ)({__name:"Reload",setup:function(e){var t=this,n=(0,y.NW)(),r=m()((0,v._)(function(){return(0,p.Jh)(this,function(e){switch(e.label){case 0:return[4,n.fetchFeeds(!1,!0)];case 1:return e.sent(),[2]}})}),500,{leading:!0,trailing:!1});return function(e,n){return(0,o.wg)(),(0,o.iD)("div",{class:"reload",onClick:n[0]||(n[0]=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return(0,o.SU)(r)&&(0,o.SU)(r).apply(t,(0,f._)(n))})},[(0,o._)("div",I,[(0,o.Wm)((0,o.SU)(h.i8),{size:"20",icon:"reload"})]),n[1]||(n[1]=(0,o._)("div",{class:"tip-container"},[(0,o._)("span",{class:"tip-text"},"刷新")],-1))])}}}),w=n(5010);let k=(0,w.default)(_,[["__scopeId","data-v-173cc1c4"]]);var S=n(71852),b=n(91663),M=n(51606),L=n(68848),x=n(76643),T=n(99505);n(70571);var D=n(85537),N=n(8048),E=n(66002),R={id:"image-note-filter-el"},U={class:"btn-wrapper"},P={key:0,class:"tip-container"},F={class:"tip-text"},j=(0,o.aZ)({__name:"ImageNoteFilter",setup:function(e){var t,n,r,i,a=(t={},(0,M._)(t,x.T.UNCHECKED,"只看图文"),(0,M._)(t,x.T.CHECKED,"取消只看图文"),(0,M._)(t,x.T.LOADING,null),t),u=(n={},(0,M._)(n,x.T.UNCHECKED,"imgNote"),(0,M._)(n,x.T.CHECKED,"imgNoteSelect"),(0,M._)(n,x.T.LOADING,"loading"),n),l=(0,y.NW)(),s=(0,D.L)(),c=(0,N.r0)(),d=(0,L.Z)().currentPageInstance,f=(0,E.Jk)(l),g=f.imgNoteFilterStatus,m=f.query,I=(0,o.Fl)(function(){return a[g.value?g.value:x.T.UNCHECKED]}),_=(0,o.Fl)(function(){return u[g.value?g.value:x.T.UNCHECKED]});function innerToggleFilterType(e){return _innerToggleFilterType.apply(this,arguments)}function _innerToggleFilterType(){return(_innerToggleFilterType=(0,v._)(function(e){return(0,p.Jh)(this,function(t){switch(t.label){case 0:return null==i||i(),m.value.needFilterImage=e===x.T.UNCHECKED,[4,l.fetchFeeds(!0,!0)];case 1:if(t.sent(),l.isError)return l.setImgNoteFilterStatus(e),[2];return l.setImgNoteFilterStatus(e===x.T.UNCHECKED?x.T.CHECKED:x.T.UNCHECKED),[2]}})})).apply(this,arguments)}function toggleFilterType(){return _toggleFilterType.apply(this,arguments)}function _toggleFilterType(){return(_toggleFilterType=(0,v._)(function(){var e,t;return(0,p.Jh)(this,function(n){switch(n.label){case 0:if(e=g.value,l.setImgNoteFilterStatus(x.T.LOADING),!l.isFetching)return[3,1];return t=function(){return innerToggleFilterType(e)},i=l.$mitt.on("mfApiEnd",t),[3,3];case 1:return[4,innerToggleFilterType(e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})).apply(this,arguments)}function handleClick(){return _handleClick.apply(this,arguments)}function _handleClick(){return(_handleClick=(0,v._)(function(){var e;return(0,p.Jh)(this,function(t){switch(t.label){case 0:if(g.value===x.T.LOADING)return[2];if(null==r||r(),e=g.value,(0,T.uk)(e===x.T.UNCHECKED?47416:47417,{fromPage:d.value}),!s.loggedIn)return[3,2];return[4,toggleFilterType()];case 1:return t.sent(),[3,3];case 2:c.openLogin(N.yC.ImgNoteFilter),r=s.$mitt.on("onLogin",(0,v._)(function(){return(0,p.Jh)(this,function(e){switch(e.label){case 0:if(c.recentFrom!==N.yC.ImgNoteFilter)return[3,2];return[4,toggleFilterType()];case 1:e.sent(),e.label=2;case 2:return[2]}})})),t.label=3;case 3:return[2]}})})).apply(this,arguments)}return(0,o.Jd)(function(){null==r||r(),null==i||i()}),function(e,t){var n;return(0,o.wg)(),(0,o.iD)("div",R,[(0,o._)("div",{class:(0,o.C_)(["graphic-filter",{"checked-border":(0,o.SU)(g)===(0,o.SU)(x.T).CHECKED}]),onClick:handleClick},[(0,o._)("div",U,[(0,o.Wm)((0,o.SU)(h.i8),{size:"20",class:(0,o.C_)({spinner:(0,o.SU)(g)===(0,o.SU)(x.T).LOADING}),icon:(0,o.SU)(_)},null,8,["class","icon"])]),(null===(n=(0,o.SU)(I))||void 0===n?void 0:n.length)?((0,o.wg)(),(0,o.iD)("div",P,[(0,o._)("span",F,(0,o.zw)((0,o.SU)(I)),1)])):(0,o.kq)("",!0)],2)])}}});let O=(0,w.default)(j,[["__scopeId","data-v-a4fa5cbc"]]);var H=n(94186),W=n(85093),z=n(63447),Z=n(28860),q=n(69876),V=n(16337),Y={key:0,style:{display:"none"}},G=(0,o.aZ)({__name:"ExploreFeeds",setup:function(e){var t={like:25361,likeApi:25327,unLike:25362,unLikeApi:25328},n=25302,l=25303,v=25305,f=36579,p=36580,h=(0,y.NW)(),g=(0,Z.E)(),m=(0,D.L)(),I=(0,a._)((0,q.OT)(!1),2),_=I[0],w=I[1],M=(0,o.Fl)(function(){var e,t;return(null===(e=h.feeds)||void 0===e?void 0:e.length)===0&&(null==h?void 0:null===(t=h.placeholderFeeds)||void 0===t?void 0:t.length)?h.placeholderFeeds:h.feeds});function getTrackData(e,t){var n,r,i;return{objectPosition:e.index+1,noteId:e.id,noteType:T.l7[null===(n=e.noteCard)||void 0===n?void 0:n.type]||0,trackId:e.trackId,channelTabName:h.currentChannel,authorId:null===(i=e.noteCard)||void 0===i?void 0:null===(r=i.user)||void 0===r?void 0:r.userId,currentColumnIndex:t.currentColumnIndex,totalColumnNumber:t.totalColumnNumber,impFromCache:+("placeholderFeeds"===h.pageStatus),isLogin:m.loggedIn,filterOptionsStr:h.imgNoteFilterStatus===x.T.CHECKED?"short_note":""}}(0,o.bv)(function(){var e=s()(function(){w(document.documentElement.scrollTop>200)},50);(0,V.ORN)(document,"scroll",e)});var L=(0,S.C)().exploreFeedsGray;function onListEnd(){!h.isFetching&&(0,H.P5)({source:H.vT.MF,flag:2}),h.fetchFeeds(!1)}function impression(e,t){(0,T.Pj)(n,getTrackData(e,t))}function noteClick(e,t){(0,T.Pj)(l,getTrackData(e,t))}function handleLike(e,n,r){(0,T.Pj)(t[n],getTrackData(e,r))}function handleAvatarClick(e,t){(0,T.Pj)(v,getTrackData(e,t))}function handleStartHoverPlay(e,t){(0,T.Pj)(f,getTrackData(e,t))}function handleStopHoverPlay(e,t,n){(0,T.Pj)(p,(0,i._)((0,r._)({},getTrackData(e,t)),{durationMs:n}))}function handleReportLoading(e){(0,H.Nw)({time:e.animateEndTime-e.animateStartTime,source:H.vT.MF,flag:2})}return function(e,t){return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(z.Z,{"feeds-data-source":(0,o.SU)(M),"prev-route":(0,o.SU)(b.Dq).Explore,"get-container":function(){return(0,o.SU)(h).feedsWrapper},"first-screen-gray":(0,o.SU)(L)&&(0,o.SU)(h).currentChannel===(0,o.SU)(y.TX),"container-id":"exploreFeeds","is-ssr-rendering":!(0,o.SU)(g).layoutInfoReady,"loadmore-threshold-columns":1,onOnFeedsEnd:onListEnd,onImpression:impression,onAvatarClick:handleAvatarClick,onNoteClick:noteClick,onLike:handleLike,onVideoStart:handleStartHoverPlay,onVideoStop:handleStopHoverPlay},{loadingMore:(0,o.w5)(function(){return[(0,o.Wm)(W.Z,{active:(0,o.SU)(M).length>0&&(0,o.SU)(h).isFetching&&!(0,o.SU)(h).isError,onLoadingImpression:handleReportLoading},null,8,["active"])]}),backtop:(0,o.w5)(function(){return[(0,o.Wm)(u.Z,null,{default:(0,o.w5)(function(){return[(0,o.Wm)(d.Z,null,{default:(0,o.w5)(function(){return[(0,o.SU)(_)&&(0,o.SU)(h).imgNoteFilterStatus===(0,o.SU)(x.T).UNCHECKED?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(O,{key:0})),(0,o.SU)(_)?((0,o.wg)(),(0,o.j4)(c.Z,{key:1})):(0,o.kq)("",!0),(0,o.Wm)(k)]}),_:1})]}),_:1})]}),_:1},8,["feeds-data-source","prev-route","get-container","first-screen-gray","is-ssr-rendering"]),(0,o.SU)(g).layoutInfoReady?(0,o.kq)("",!0):((0,o.wg)(),(0,o.iD)("div",Y," HOME_FEED_LAYOUT_PLACEHOLDER "))],64)}}}),J=G},85093:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(41622),i=n(82726),a=n(377),o=n(93328),u=n(12115),l=n(8172),s=n(69876),c=(0,o.aZ)({__name:"FeedsLoading",props:{active:{type:Boolean}},emits:["loadingImpression"],setup:function(e,t){var n=t.emit,c=(0,i._)((0,s.OT)(!0),2),d=c[0],v=c[1],f=(0,o.iH)(),p=(0,o.qj)({animateStartTime:0,animateEndTime:0});function initLoadingMetas(){p.animateStartTime=0,p.animateEndTime=0}return(0,o.bv)((0,r._)(function(){var e,t;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return t=(e=(0,l.Z)(function(){return 0},f.value,{autoCleanObserverAfterImpression:!1})).isIntersecting,[4,(0,e.startObserve)()];case 1:return r.sent(),(0,o.YP)(t,function(e,t){e&&!t?(v(!1),p.animateStartTime=Date.now()):!e&&t&&(v(!0),p.animateEndTime=Date.now(),n("loadingImpression",p),initLoadingMetas())}),[2]}})})),function(e,t){return(0,o.wg)(),(0,o.iD)("div",{ref_key:"loadingElement",ref:f,class:(0,o.C_)(["feeds-loading",{active:e.active}])},[(0,o.Wm)(u.Z,{size:30,"is-paused":(0,o.SU)(d)},null,8,["is-paused"]),t[0]||(t[0]=(0,o._)("span",null,"加载中",-1))],2)}}}),d=(0,n(5010).default)(c,[["__scopeId","data-v-820f2ae6"]])},63447:function(e,t,n){"use strict";n.d(t,{Z:function(){return eM}});var r=n(64593);n(87989),n(20266);var i=n(93328),a=n(41622),o=n(70879),u=n(377);n(29112),n(67275),n(59989),n(7099),n(27461),n(23339),n(51109),n(34333),n(55947),n(97553),n(64961),n(12996),n(59564),n(97357),n(7608),n(36277),n(86651),n(42876),n(33933);var l=n(6028),s=n(66398),c=n(8306),d=n(13285),v=n(97397),f=n(8456),p=n(75046),h=n(49791),g=n(82674),m=n(71852),y=n(3553),I=n(52997),_=n(47002),w=n(56834),k=n(44892),S=n(91663),b=n(98413),M=n(58960),L=n(3441),x=n(67156),T=n(44924),D=n(94186),N=n(33114),E=n(63611),R=n(15684),U=n(99505),P=n(91547);n(34167);var F={class:"xhs-file-tag"},j=(0,i.aZ)({__name:"FileTag",setup:function(e){return function(e,t){return(0,i.wg)(),(0,i.iD)("div",F,[(0,i.Wm)((0,i.SU)(s.i8),{icon:"fileAlways",size:"14"}),t[0]||(t[0]=(0,i._)("span",{class:"xhs-file-tag-text"},"文件",-1))])}}}),O=n(5010);let H=(0,O.default)(j,[["__scopeId","data-v-dee852e2"]]);var W=n(7670),z=n(56587);n(30149),n(69308),n(63630);var Z=n(64300),q=n(39317),V=n(28860),Y=n(8048),G=n(85537),J=n(6890),Q=n(68284),K=["data-width","data-height","data-index"],X={key:0},$={key:1},ee={key:2},et={key:3},en={key:4},er=["href"],ei=["target","href","onClick"],ea={key:0,class:"play-icon"},eo={key:1,class:"top-tag-area"},eu={key:2,class:"bottom-tag-area"},el={class:"bottom-wrapper"},es={class:"footer"},ec=["target","onClick"],ed=["target","onClick"],ev={key:2,class:"author-wrapper"},ef={class:"name"},ep=(0,i.aZ)({__name:"Index",props:{note:{},columns:{},responsiveWidth:{},gap:{},getPosition:{type:Function},position:{},prevPosition:{},loggedIn:{type:Boolean},supportWebp:{type:Boolean},targetRoute:{},prevRoute:{},disableAvatarClick:{type:Boolean},staticLayout:{type:Boolean},sticky:{type:Boolean},corner:{},renderListLen:{},gray:{type:Boolean},isSsrRendering:{type:Boolean},openNewTab:{type:Boolean},disableOpenNote:{type:Boolean},preloadThreshold:{}},emits:["impression","avatarClick","noteClick","like","comment","collect","onNotePageShow"],setup:function(e,t){var r,F,j,O,ep,eh,eg=t.emit;(0,i.sj)(function(e){return{"6b664aca":(0,i.SU)(eJ),b7d903e4:(0,i.SU)(eQ),"4cfc604d":(0,i.SU)(eX)}});var em=(0,_.d)(),ey=(0,w._)().userXsecSource,eI=(0,g.l)(e.prevRoute).noteXsecSource,e_=(0,L.i)(),ew={WEB_NOTE:"web_note"};function getRoomPageUrl(e,t){if(!e)return"";var n=new URLSearchParams(t);return"/livestream/".concat(e,"?").concat(n.toString())}var ek=(0,d.tv)(),eS=(0,d.yj)(),eb=(0,Z.dw)(),eC=(0,q.NW)(),eM=(0,V.E)(),eA=(0,Y.r0)(),eL=(0,G.L)(),ex=(0,J.s6)(),eT=(0,Q.R)(),eD=(0,M.V)(),eN=(0,m.C)().disableLikeNotes,eE=(0,i.Fl)(function(){return e.note.exposed&&"placeholderFeeds"!==eC.pageStatus?y.d:void 0}),eR=(0,i.iH)(),eU=(0,i.iH)(!!e.note.exposed),eP=(0,i.qj)({}),eF=(0,i.Fl)(function(){return!!e.preloadThreshold&&e.note.index<e.preloadThreshold}),ej=(0,i.Fl)(function(){var t,n,r;return(null===(r=e.note.noteCard)||void 0===r?void 0:null===(n=r.user)||void 0===n?void 0:null===(t=n.live)||void 0===t?void 0:t.liveStatus)===2&&e_.isLiveMode}),eO=(0,i.Fl)(function(){var t;return(null===(t=e.note.noteCard)||void 0===t?void 0:t.cover)||{}}),eH=(0,I.g2)().getUserPageHref,eW=(0,i.iH)(0),ez=(0,i.Fl)(function(){if(ej.value){var t,n,r,i=null===(r=e.note.noteCard)||void 0===r?void 0:null===(n=r.user)||void 0===n?void 0:null===(t=n.live)||void 0===t?void 0:t.roomId;if(i)return getRoomPageUrl(i,{source:ew.WEB_NOTE,note_id:e.note.id,note_track_id:e.note.trackId})}return targetPath(e.note)});function handleAvatarClick(e){if(ej.value){var t=e.currentTarget;t&&(trackLiveEntryClick(),window.open(t.href,"_blank"),e.preventDefault())}else reportAvatarClick(e)}function trackLiveEntryClick(){var t,n=null===(t=e.note.noteCard)||void 0===t?void 0:t.user,r=null==n?void 0:n.live;(0,U.Pj)(93009,{anchorId:(null==n?void 0:n.userId)||"",liveId:(null==r?void 0:r.roomId)||"",noteId:e.note.id||""})}var eB=(0,h.R)(),eZ=(0,R.w4)(null===(F=e.note.noteCard)||void 0===F?void 0:null===(r=F.cover)||void 0===r?void 0:r.width,null===(O=e.note.noteCard)||void 0===O?void 0:null===(j=O.cover)||void 0===j?void 0:j.height),eq=eZ.rawW,eV=eZ.rawH,eY=(0,i.Fl)(function(){return e.disableOpenNote?"":"".concat(e.targetRoute||b.Z.ExplorePath,"/").concat(e.note.id,"?xsec_token=").concat(e.note.xsecToken,"&xsec_source=").concat(eI.value)}),eG=(0,i.Fl)(function(){var t,n,r,i,a=e.note;if((null===(n=a.noteCard)||void 0===n?void 0:null===(t=n.cover)||void 0===t?void 0:t.width)&&(null===(i=a.noteCard)||void 0===i?void 0:null===(r=i.cover)||void 0===r?void 0:r.height))return(null==e?void 0:e.responsiveWidth)?"".concat(Math.round(e.responsiveWidth/eq*eV),"px"):"".concat(Math.round(S.zB/a.noteCard.cover.width*a.noteCard.cover.height),"px");return"0px"}),eJ=(0,i.Fl)(function(){return(null==e?void 0:e.responsiveWidth)?"".concat(e.responsiveWidth,"px"):S.C4}),eQ=(0,i.Fl)(function(){return e.columns<3?"12px":"16px"}),eK=(0,i.Fl)(function(){return{currentColumnIndex:eW.value,totalColumnNumber:eM.columns}});function targetPath(e){var t,n,r,i,a=null===(n=e.noteCard)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.userId;return(0,E.T)({targetPath:eH(a),pageInstance:eS.meta.pageInstance,isOwnPage:eL.isOwnPage,isOwnBoard:eL.isOwnBoard,xsecToken:(null===(i=e.noteCard)||void 0===i?void 0:null===(r=i.user)||void 0===r?void 0:r.xsecToken)||"",xsecSource:ey.value})}function createObserver(){return new IntersectionObserver(function(t,n){if(t[0].isIntersecting){if(!e.note.exposed)eg("impression",e.note,eK.value),e.note.exposed=!0,P.A.updateState(P.T.noteImpression,function(e){return(null!=e?e:0)+1}),n.disconnect()}},{threshold:[.5,1]})}function reportNoteClick(){var t,n,r,i,a,o,u,l,s,c,d=!(arguments.length>0)||void 0===arguments[0]||arguments[0];eb.prevRoute=e.prevRoute,eb.prevRouteData.trackId=e.note.trackId,eb.prevRouteData.cover=eO.value.urlDefault,eb.prevRouteData.coverIndex=null===(n=e.note.noteCard)||void 0===n?void 0:null===(t=n.imageList)||void 0===t?void 0:t.findIndex(function(e){var t,n;return(null===(n=e.infoList)||void 0===n?void 0:null===(t=n.find(function(e){return"WB_DFT"===e.imageScene}))||void 0===t?void 0:t.url)===eO.value.urlDefault}),eb.prevRouteData.channel=eS.query.channel_id;var v=null===(r=eR.value)||void 0===r?void 0:r.getBoundingClientRect();void 0!==v&&(eb.prevRouteData.position=v),eb.autoOpenNote=!d;var f=[null===(i=e.note.noteCard)||void 0===i?void 0:i.cover],p=(null===(o=e.note.noteCard)||void 0===o?void 0:null===(a=o.imageList)||void 0===a?void 0:a.length)?null===(u=e.note.noteCard)||void 0===u?void 0:u.imageList:f;eb.updateNoteByNoteId(e.note.id,{note:{imageList:eS.name===b.Z.AISearchName?p:f,type:null===(l=e.note.noteCard)||void 0===l?void 0:l.type,title:null===(s=e.note.noteCard)||void 0===s?void 0:s.displayTitle,user:null===(c=e.note.noteCard)||void 0===c?void 0:c.user,noteId:e.note.id,xsecToken:e.note.xsecToken}}),d&&eg("noteClick",e.note,eK.value)}function handleNoteClick(t,n){if(!eL.loggedIn&&!e.note.id){eA.openLogin(Y.yC.UserNotes),t.preventDefault();return}if(reportNoteClick(),!e.openNewTab&&eB.value){t.preventDefault(),eg("onNotePageShow",e.note);return}n(t)}function reportAvatarClick(t){e.disableAvatarClick?t.preventDefault():eg("avatarClick",e.note,eK.value)}function onImgLoaded(){return _onImgLoaded.apply(this,arguments)}function _onImgLoaded(){return(_onImgLoaded=(0,a._)(function(){return(0,u.Jh)(this,function(e){return eO.value.urlDefault&&(0,i.Y3)(function(){eU.value=!0}),[2]})})).apply(this,arguments)}function updateLike(t){var n=e.note.noteCard;if(!!n){if(void 0!==(null===(r=n.interactInfo)||void 0===r?void 0:r.liked)){n.interactInfo.liked=t;var r,i,a=(null==n?void 0:null===(i=n.interactInfo)||void 0===i?void 0:i.likedCount)||0;(0,c.U)(a)&&(n.interactInfo.likedCount="".concat(t?+a+1:+a-1))}}}function updateCollect(t){var n=e.note.noteCard;if(!!n){if(void 0!==(null===(r=n.interactInfo)||void 0===r?void 0:r.collected)){n.interactInfo.collected=t;var r,i,a=(null==n?void 0:null===(i=n.interactInfo)||void 0===i?void 0:i.collectedCount)||0;(0,c.U)(a)&&(n.interactInfo.collectedCount="".concat(t?+a+1:+a-1))}}}function calcPosition(){var t=e.note.index;if(e.staticLayout&&eR.value){var n=e.getPosition(eR.value.clientHeight,t).column;eW.value=n}if(!e.position&&!!eR.value&&!e.staticLayout)if(0===t||e.prevPosition){var r=eR.value.clientHeight;!r&&(0,i.Y3)(function(){var e;(0,D.Qv)("feed_layout_fail",{type:"calcPosition",index:t,noteElHeight:null===(e=eR.value)||void 0===e?void 0:e.clientHeight,extra:JSON.stringify({noteElHeight:r,index:t})})});var a=e.getPosition(r,t),o=a.left,u=a.top,l=a.column;eW.value=l,eP.transform="translate(".concat(o,"px, ").concat(u,"px)")}else(0,i.Y3)(calcPosition)}function trackLiveEntryImpression(){var t,n=null===(t=e.note.noteCard)||void 0===t?void 0:t.user,r=null==n?void 0:n.live;(0,U.Pj)(93008,{anchorId:(null==n?void 0:n.userId)||"",liveId:(null==r?void 0:r.roomId)||"",noteId:e.note.id||""})}(0,i.vl)(function(){var t;(null==e?void 0:null===(t=e.note)||void 0===t?void 0:t.ssrRendered)!==void 0&&(e.note.ssrRendered=!0,eU.value=!0)}),(0,i.wF)(function(){var t;(null==e?void 0:null===(t=e.note)||void 0===t?void 0:t.ssrRendered)&&(eU.value=!0)}),e.position&&(eP.transform="translate(".concat(e.position.left,"px, ").concat(e.position.top,"px)"),eh=+(null==e?void 0:null===(ep=e.position)||void 0===ep?void 0:ep.column),eW.value=void 0!==eh?eh:0),(0,i.bv)((0,a._)(function(){return(0,u.Jh)(this,function(t){switch(t.label){case 0:if(calcPosition(),e.note.exposed)return[3,3];if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype)return[3,2];return[4,n.e("5688").then(n.t.bind(n,15886,23))];case 1:t.sent(),t.label=2;case 2:createObserver().observe(eR.value),t.label=3;case 3:return ej.value&&trackLiveEntryImpression(),[2]}})})),(0,i.YP)(function(){return e.staticLayout},calcPosition),(0,i.wF)(function(){var t=eC.$mitt.on("openNoteDetail",function(t){var n=t.noteId,r=t.report,i=t.query;n===e.note.id&&(reportNoteClick(r),ek.push({path:"".concat(e.targetRoute||b.Z.ExplorePath,"/").concat(n),query:(0,o._)({xsec_source:eI.value},i)}))});(0,i.SK)(function(){t()})});var eX=(0,i.Fl)(function(){return ex.isNIO||"placeholderFeeds"===eC.pageStatus?"unset":"blur(42.5px)"});return function(t,n){var r,a,o,u,c,h,g,m,y,I,_;return(0,i.wg)(),(0,i.iD)("section",{ref_key:"noteEl",ref:eR,class:(0,i.C_)(["note-item",{"static-layout":t.staticLayout,gray:t.gray}]),style:(0,i.j5)((0,i.SU)(eP)),"data-width":(0,i.SU)(eq),"data-height":(0,i.SU)(eV),"data-index":t.note.index},["activity"===e.note.modelType?((0,i.wg)(),(0,i.iD)("div",X,[(0,i.Wm)(v.Z,{type:(0,i.SU)(x.UZ).feedCard},null,8,["type"])])):"hot_query"===e.note.modelType?((0,i.wg)(),(0,i.iD)("div",$,[(0,i.Wm)(z.Z,{"query-note-data":e.note.hotQuery,index:e.note.index,type:e.note.modelType},null,8,["query-note-data","index","type"])])):"rec_query"===e.note.modelType?((0,i.wg)(),(0,i.iD)("div",ee,[(0,i.Wm)(z.Z,{"query-note-data":e.note.recQuery,index:e.note.index,type:e.note.modelType},null,8,["query-note-data","index","type"])])):e.note.modelType===(0,i.SU)(T.B).hotList?((0,i.wg)(),(0,i.iD)("div",et,[(0,i.SU)(eT).canShowHotspotQueryNote?((0,i.wg)(),(0,i.j4)(z.Z,{key:0,"query-note-data":e.note.hotList,index:e.note.index,title:"小红书热点","can-modify":!0,type:e.note.modelType},null,8,["query-note-data","index","type"])):(0,i.kq)("",!0)])):((0,i.wg)(),(0,i.iD)("div",en,[(0,i.wy)((0,i._)("a",{href:"".concat((0,i.SU)(b.Z).ExplorePath,"/").concat(t.note.id)},null,8,er),[[i.F8,!1]]),(0,i.Wm)((0,i.SU)(d.rH),{custom:"",to:(0,i.SU)(eY)},{default:(0,i.w5)(function(r){var a,o,u,c,d,v,f=r.navigate;return[(0,i._)("a",{class:(0,i.C_)(["cover mask",{ld:(0,i.SU)(eU)}]),target:e.openNewTab?"_blank":"_self",style:(0,i.j5)({height:(0,i.SU)(eG)}),href:(0,i.SU)(eY),onClick:function(e){return handleNoteClick(e,f)}},[(0,i.Wm)((0,i.SU)(l.yV),{src:(0,i.SU)(N._1)(null!==(d=null===(a=(0,i.SU)(eO))||void 0===a?void 0:a.urlDefault)&&void 0!==d?d:(0,i.SU)(eO).url),placeholder:e.note.exposed||(0,i.SU)(eU)?void 0:(0,i.SU)(N._1)(null!==(v=null===(o=(0,i.SU)(eO))||void 0===o?void 0:o.urlPre)&&void 0!==v?v:(0,i.SU)(eO).url),preload:(0,i.SU)(eF),"preload-placeholder":(0,i.SU)(eF),loading:(0,i.SU)(eF)?"eager":"lazy",elementtiming:(0,i.SU)(eE),style:{width:"100%",height:"100%","object-fit":"cover"},onPlaceholderLoaded:onImgLoaded},null,8,["src","placeholder","preload","preload-placeholder","loading","elementtiming"]),(null===(u=t.note.noteCard)||void 0===u?void 0:u.type)==="video"?((0,i.wg)(),(0,i.iD)("span",ea,[(0,i.Wm)((0,i.SU)(s.i8),{size:"11",icon:"play-s"})])):(0,i.kq)("",!0),(0,i.WI)(t.$slots,"coverLayer",{note:e.note}),e.sticky?((0,i.wg)(),(0,i.iD)("div",eo,n[1]||(n[1]=[(0,i._)("div",{class:"top-wrapper"},"置顶",-1)]))):(0,i.kq)("",!0),e.corner?((0,i.wg)(),(0,i.iD)("div",eu,[(0,i._)("div",el,[(0,i.Wm)((0,i.SU)(s.i8),{size:"12",icon:null===(c=e.corner)||void 0===c?void 0:c.type,class:"bottom-tag-icon"},null,8,["icon"]),(0,i.Uk)(" "+(0,i.zw)(e.corner.content),1)])])):(0,i.kq)("",!0)],14,ei)]}),_:3},8,["to"]),(0,i._)("div",es,[(0,i.SU)(eD).isFileExp&&((null===(a=t.note.noteCard)||void 0===a?void 0:null===(r=a.recommend)||void 0===r?void 0:r.docId)||(null===(u=t.note.noteCard)||void 0===u?void 0:null===(o=u.noteRecommend)||void 0===o?void 0:o.id)||(null===(h=t.note.noteCard)||void 0===h?void 0:null===(c=h.recommend)||void 0===c?void 0:c.id))?((0,i.wg)(),(0,i.j4)((0,i.SU)(d.rH),{key:0,to:(0,i.SU)(eY),custom:""},{default:(0,i.w5)(function(t){var n=t.navigate;return[(0,i._)("a",{target:e.openNewTab?"_blank":"_self",onClick:function(e){return handleNoteClick(e,n)}},[(0,i.Wm)(H)],8,ec)]}),_:1},8,["to"])):(0,i.kq)("",!0),(null===(g=t.note.noteCard)||void 0===g?void 0:g.displayTitle)?((0,i.wg)(),(0,i.j4)((0,i.SU)(d.rH),{key:1,to:(0,i.SU)(eY),custom:""},{default:(0,i.w5)(function(n){var r,a=n.navigate;return[(0,i._)("a",{target:e.openNewTab?"_blank":"_self",class:"title",onClick:function(e){return handleNoteClick(e,a)}},[(0,i.Wm)(W.Z,{"support-webp":t.supportWebp,content:null===(r=t.note.noteCard)||void 0===r?void 0:r.displayTitle},null,8,["support-webp","content"])],8,ed)]}),_:1},8,["to"])):(0,i.kq)("",!0),t.$slots.cardBottom?(0,i.WI)(t.$slots,"cardBottom",{key:3,note:e.note,authorPath:targetPath(t.note),notePath:(0,i.SU)(eY),loggedIn:e.loggedIn,supportWebp:e.supportWebp,onAvatarClick:reportAvatarClick,onUpdateLike:updateLike,onUpdateCollect:updateCollect,onLike:function(e){eg("like",t.note,e,(0,i.SU)(eK))},onCollect:function(e){eg("collect",t.note,e,(0,i.SU)(eK))},onComment:function(){return eg("comment",t.note,(0,i.SU)(eK))},openNote:handleNoteClick}):((0,i.wg)(),(0,i.iD)("div",ev,[(0,i.Wm)((0,i.SU)(d.rH),{target:(0,i.SU)(em),to:(0,i.SU)(ez),class:"author",onClick:handleAvatarClick},{default:(0,i.w5)(function(){var n,r;return[(0,i.Wm)(f.Z,{"is-living":(0,i.SU)(ej),"badge-width":16,"badge-height":9,width:20,height:20,"badge-font-size":6,"inner-scale":{from:1,middle:1.05,to:1},"outer-scale":{from:1,middle:1.05,to:1.3}},{avatar:(0,i.w5)(function(){var t,n,r,a;return[(null===(n=e.note.noteCard)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.avatar)?((0,i.wg)(),(0,i.j4)((0,i.SU)(l.yV),{key:0,crossorigin:"anonymous",class:"author-avatar",loading:"lazy",width:"20",height:"20",src:"".concat(null===(a=e.note.noteCard)||void 0===a?void 0:null===(r=a.user)||void 0===r?void 0:r.avatar,"?imageView2/2/w/60/format/").concat(e.supportWebp?"webp":"jpg").concat((0,i.SU)(k.tM))},null,8,["src"])):(0,i.kq)("",!0)]}),_:1},8,["is-living"]),(0,i._)("span",ef,(0,i.zw)(null===(r=t.note.noteCard)||void 0===r?void 0:null===(n=r.user)||void 0===n?void 0:n.nickname),1)]}),_:1},8,["target","to"]),t.note.noteCard?((0,i.wg)(),(0,i.j4)(p.Z,{key:0,id:t.note.id||"",type:"note",disabled:null===(m=(0,i.SU)(eN))||void 0===m?void 0:m.includes(t.note.id),liked:null===(y=t.note.noteCard.interactInfo)||void 0===y?void 0:y.liked,count:null===(I=t.note.noteCard.interactInfo)||void 0===I?void 0:I.likedCount,"logged-in":t.loggedIn,size:"16","hide-zero":(null===(_=t.note.noteCard.interactInfo)||void 0===_?void 0:_.likedCount)==="0","disable-sync":!0,onUpdateLike:updateLike,onLike:n[0]||(n[0]=function(e){eg("like",t.note,e,(0,i.SU)(eK))})},null,8,["id","disabled","liked","count","logged-in","hide-zero"])):(0,i.kq)("",!0)]))])]))],14,K)}}});let eh=(0,O.default)(ep,[["__scopeId","data-v-79abd645"]]);var eg=n(415),em=n(62077),ey=n(67547),eI=n(45260),e_=n(6035),ew=n(57623),ek=n(98787),eS=n(66002),eb=["id"],eC=(0,i.aZ)({__name:"Index",props:{feedsDataSource:{},useSkeleton:{type:Boolean,default:!0},supportRefresh:{type:Boolean,default:!1},infinite:{type:Boolean,default:!0},topBuffer:{default:void 0},prevRoute:{},targetRoute:{},getContainer:{type:Function,default:void 0},staticLayout:{type:Boolean,default:!1},feedsBufferRow:{default:3},firstScreenGray:{type:Boolean},containerId:{default:""},isSsrRendering:{type:Boolean},customLayout:{},openNewTab:{type:Boolean,default:!1},loadmoreThresholdColumns:{default:2},disableOpenNote:{type:Boolean},isAISearch:{type:Boolean},preloadThreshold:{default:0},preloadPlaceholder:{type:Boolean},bottomArea:{default:function(){return{type:"default"}}},coverLayer:{default:function(){return{type:"null"}}}},emits:["refresh","onFeedsEnd","feedOnMounted","feedImgLoaded","impression","avatarClick","noteClick","like","comment","collect","renderFinish","onNoteClose"],setup:function(e,t){var n=t.expose,a=t.emit,o=(0,i.BK)(e).feedsBufferRow,u=(0,J.s6)(),l=(0,G.L)();(0,eg.x)();var s=(0,i.iH)(),c=(0,i.iH)([]),d=(0,i.iH)(0),v=(0,i.iH)(0),f=(0,i.iH)(!1),p=(0,eS.Jk)((0,ey.D)()),h=p.columns,g=p.columnWidth,m=p.gap,y=p.minRenderNotes,I=p.bufferRow;I.value=o.value;var _=(0,i.Fl)(function(){var t,n;return null!==(n=null===(t=e.customLayout)||void 0===t?void 0:t.columns)&&void 0!==n?n:h.value}),w=(0,i.iH)(null),k=(0,i.Fl)(function(){return e.feedsDataSource||[]});function onListEnd(){e.infinite&&a("onFeedsEnd")}var S=(0,ew.Z)({minRenderNotes:y,notePositions:c,list:k,columns:_,onListEnd:onListEnd,topBuffer:null==e?void 0:e.topBuffer,getContainer:e.getContainer,loadmoreThresholdColumns:e.loadmoreThresholdColumns,isAISearch:e.isAISearch}),b=S.resetRenderList,M=S.renderList,L=(0,ek.Z)(_,g,m,c,d,(0,i.Fl)(function(){var t;return null==e?void 0:null===(t=e.feedsDataSource)||void 0===t?void 0:t.length})).getItemPosition;function getPosition(e,t){var n=L(e,t),i=n.totalHeight,a=(0,r._)(n,["totalHeight"]);return d.value=i,a}function handleLike(e,t,n){a("like",e,t,n)}function handleComment(e,t){a("comment",e,t)}function handleCollect(e,t,n){a("collect",e,t,n)}function setContainerHeight(e){d.value=e}function shouldBeGray(t){return e.firstScreenGray&&t<y.value-(I.value-1)*_.value}function handleOpenNotePage(e){w.value=e}function handleCloseNotePage(){w.value=null}return(0,i.YP)([_,g],function(){if(!f.value)document.documentElement.scrollTop=0,c.value=[],d.value=0,b()}),e.isAISearch&&(0,i.YP)(function(){return e.feedsDataSource},function(e,t){e!==t&&e.length>0&&(c.value=[],d.value=0,b())},{deep:!1}),(0,i.se)(function(){f.value=!0,v.value=window.innerWidth}),(0,i.dl)(function(){f.value=!1,window.innerWidth!==v.value&&(document.documentElement.scrollTop=0,c.value=[],d.value=0,b())}),n({containerHeight:d,setContainerHeight:setContainerHeight}),function(t,n){var r,o;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",{id:t.containerId,ref_key:"feedsRef",ref:s,class:(0,i.C_)(["feeds-container",{"static-layout":t.staticLayout}]),style:(0,i.j5)({width:t.isSsrRendering?"auto":"100%",height:0===(0,i.SU)(d)?"auto":"".concat((0,i.SU)(d),"px"),visibility:t.isSsrRendering?"hidden":"visible"})},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(M),function(n){var r,o,s;return(0,i.wg)(),(0,i.j4)(eh,{key:n.id+n.index,gray:shouldBeGray(n.index),note:n,columns:(0,i.SU)(_),"responsive-width":(0,i.SU)(g),gap:(0,i.SU)(m),sticky:null===(o=n.noteCard)||void 0===o?void 0:null===(r=o.interactInfo)||void 0===r?void 0:r.sticky,corner:null===(s=n.noteCard)||void 0===s?void 0:s.corner,"render-list-len":(0,i.SU)(M).length,position:(0,i.SU)(c)[n.index],"prev-position":(0,i.SU)(c)[n.index-1],"get-position":getPosition,"logged-in":(0,i.SU)(l).loggedIn,"support-webp":(0,i.SU)(u).supportWebp,"prev-route":e.prevRoute,"target-route":null==e?void 0:e.targetRoute,"static-layout":null==e?void 0:e.staticLayout,"is-ssr-rendering":t.isSsrRendering,"open-new-tab":e.openNewTab,"preload-threshold":e.preloadThreshold,onImpression:function(e,t){return a("impression",e,t)},onNoteClick:function(e,t){return a("noteClick",e,t)},onLike:handleLike,onCollect:handleCollect,onComment:handleComment,onAvatarClick:function(e,t){return a("avatarClick",e,t)},onOnNotePageShow:handleOpenNotePage},(0,i.Nv)({_:2},["default"!==e.bottomArea.type?{name:"cardBottom",fn:(0,i.w5)(function(t){var n=t.note,r=t.notePath,a=t.supportWebp,o=t.loggedIn,u=t.authorPath,l=t.openNote,s=t.onAvatarClick,c=t.onUpdateLike,d=t.onUpdateCollect,v=t.onLike,f=t.onComment,p=t.onCollect;return[(0,i.Wm)(eI.Z,{"engage-type":e.bottomArea.type,note:n,"note-path":r,"author-path":u,"support-webp":a,"logged-in":o,"open-note":l,"on-update-like":c,"on-update-collect":d,"on-like":v,"on-comment":f,"on-collect":p,"on-avatar-click":s},null,8,["engage-type","note","note-path","author-path","support-webp","logged-in","open-note","on-update-like","on-update-collect","on-like","on-comment","on-collect","on-avatar-click"])]}),key:"0"}:void 0,"null"!==e.coverLayer.type?{name:"coverLayer",fn:(0,i.w5)(function(e){var t=e.note;return[(0,i.Wm)(e_.Z,{note:t},null,8,["note"])]}),key:"1"}:void 0]),1032,["gray","note","columns","responsive-width","gap","sticky","corner","render-list-len","position","prev-position","logged-in","support-webp","prev-route","target-route","static-layout","is-ssr-rendering","open-new-tab","preload-threshold","onImpression","onNoteClick","onAvatarClick"])}),128)),(0,i.WI)(t.$slots,"reload"),(0,i.WI)(t.$slots,"backtop"),(0,i.WI)(t.$slots,"emptyNotes"),(0,i.WI)(t.$slots,"emptyCollect"),(0,i.WI)(t.$slots,"emptyLike"),(0,i.WI)(t.$slots,"skeleton")],14,eb),(0,i.WI)(t.$slots,"loadingMore"),(null===(r=(0,i.SU)(w))||void 0===r?void 0:r.id)?((0,i.wg)(),(0,i.j4)(i.lR,{key:0,to:"body"},[(0,i.Wm)(em.Z,{"note-id":null===(o=(0,i.SU)(w))||void 0===o?void 0:o.id,"xsec-token":(0,i.SU)(w).xsecToken,onOnClose:handleCloseNotePage},null,8,["note-id","xsec-token"])])):(0,i.kq)("",!0)],64)}}}),eM=(0,O.default)(eC,[["__scopeId","data-v-5ddf0cb3"]])},2639:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(41622),i=n(377);n(87989);var a=n(93328),o=(0,a.aZ)({__name:"Loading",props:{visible:{type:Boolean}},setup:function(e){(0,a.sj)(function(e){return{c989fa5a:(0,a.SU)(u)}});var t,n=(0,a.iH)(),o=(0,a.iH)(72),u=(0,a.iH)(1),l=(0,a.iH)(!0);return(0,a.m0)((0,r._)(function(){return(0,i.Jh)(this,function(t){return!e.visible&&(o.value=0,u.value=0),[2]})})),(0,a.YP)(function(){return e.visible},(t=(0,r._)(function(e){return(0,i.Jh)(this,function(t){return e&&(o.value=72,u.value=1),[2]})}),function(e){return t.apply(this,arguments)})),function(e,t){return(0,a.SU)(l)?((0,a.wg)(),(0,a.iD)("div",{key:0,id:"feeds-replace-loading",ref_key:"container",ref:n,class:"loading-container",style:(0,a.j5)({height:"".concat((0,a.SU)(o),"px")})},t[0]||(t[0]=[(0,a._)("div",{style:{height:"24px",width:"100%"}},null,-1),(0,a._)("svg",{class:"spinner",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[(0,a._)("path",{d:"M12.0001 4.70002C8.58381 4.70002 5.71358 7.04759 4.91874 10.2188C4.7979 10.7009 4.30908 10.9938 3.82694 10.873C3.34479 10.7521 3.0519 10.2633 3.17275 9.78117C4.16351 5.8283 7.73871 2.90002 12.0001 2.90002C16.2615 2.90002 19.8367 5.8283 20.8274 9.78117C20.9483 10.2633 20.6554 10.7521 20.1733 10.873C19.6911 10.9938 19.2023 10.7009 19.0815 10.2188C18.2866 7.04759 15.4164 4.70002 12.0001 4.70002ZM3.82692 13.127C4.30907 13.0061 4.79788 13.299 4.91872 13.7812C5.71353 16.9524 8.58378 19.3 12.0001 19.3C15.4164 19.3 18.2867 16.9524 19.0815 13.7812C19.2023 13.299 19.6911 13.0061 20.1733 13.127C20.6554 13.2478 20.9483 13.7366 20.8275 14.2188C19.8368 18.1717 16.2615 21.1 12.0001 21.1C7.73867 21.1 4.16344 18.1717 3.17272 14.2188C3.05188 13.7366 3.34478 13.2478 3.82692 13.127Z",fill:"currentColor","fill-opacity":"0.3"})],-1),(0,a._)("div",{style:{height:"24px",width:"100%"}},null,-1)]),4)):(0,a.kq)("",!0)}}}),u=(0,n(5010).default)(o,[["__scopeId","data-v-1c901116"]])},45260:function(e,t,n){"use strict";n.d(t,{Z:function(){return W}}),n(87989),n(87394),n(94941),n(48421),n(97357),n(34333),n(42876),n(33933);var r=n(93328),i=n(6028),a=n(13285),o=n(41622),u=n(66993),l=n(377);n(86651);var s=n(40122),c=n(66398),d=n(8306),v=n(51899),f=n.n(v),p=n(95874),h=n(8048),g=n(40855);n(59008);var m=["id"],y={class:"count"},I=(0,r.aZ)({__name:"CollectWithModal",props:{note:{},id:{},size:{},loggedIn:{type:Boolean}},emits:["updateCollect","collect"],setup:function(e,t){var n=this,i=t.emit,a=(0,g.E)(),v=a.setBoardVisible,I=a.isBoardExp,_=a.setNoteId,w=a.setCover,k=(0,h.r0)(),S=(0,p.h)().handleHttpCatch,b=(0,r.Fl)(function(){var t,n,r,i,a,o,u;return e.loggedIn?(0,d.LG)(null===(u=e.note)||void 0===u?void 0:null===(o=u.noteCard)||void 0===o?void 0:null===(a=o.interactInfo)||void 0===a?void 0:a.collectedCount)||"收藏":(null===(n=e.note.noteCard)||void 0===n?void 0:null===(t=n.interactInfo)||void 0===t?void 0:t.collectedCount)==="0"?"收藏":null===(i=e.note.noteCard)||void 0===i?void 0:null===(r=i.interactInfo)||void 0===r?void 0:r.collectedCount});function postCollect(e){return _postCollect.apply(this,arguments)}function _postCollect(){return(_postCollect=(0,o._)(function(t){return(0,l.Jh)(this,function(n){switch(n.label){case 0:if(!t)return[3,2];return[4,(0,s.LN)({noteIds:e.id})];case 1:return n.sent(),[3,4];case 2:return[4,(0,s.B1)({noteId:e.id})];case 3:n.sent(),n.label=4;case 4:return[2]}})})).apply(this,arguments)}var M=f()((0,o._)(function(){var t,n,r,a,o,u,s;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(r=null===(n=e.note.noteCard)||void 0===n?void 0:null===(t=n.interactInfo)||void 0===t?void 0:t.collected,!e.loggedIn)return k.openLogin(h.yC.Collect),[2];l.label=1;case 1:return l.trys.push([1,3,,4]),i("collect",r?"unCollect":"collect"),i("updateCollect",!r),[4,postCollect(!!r)];case 2:return l.sent(),I.value?!r&&(v(!0),_(e.id),w((null===(u=e.note)||void 0===u?void 0:null===(o=u.noteCard)||void 0===o?void 0:null===(a=o.cover)||void 0===a?void 0:a.urlDefault)||"")):(0,c.zM)(r?"取消收藏成功":"收藏成功"),[3,4];case 3:return s=l.sent(),S(r?"postApiSnsWebV1NoteUncollect":"postApiSnsWebV1NoteCollect",s,function(){i("updateCollect",!!r)}),[3,4];case 4:return[2]}})}),500,{leading:!0,trailing:!1});return function(e,t){var i,a,o;return(0,r.wg)(),(0,r.iD)("span",{id:(0,r.SU)(I)?"note-page-collect-board-guide":"",class:"collect-wrapper",onClick:t[0]||(t[0]=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return(0,r.SU)(M)&&(0,r.SU)(M).apply(n,(0,u._)(t))})},[(0,r.Wm)((0,r.SU)(c.i8),{size:e.size,icon:(null===(o=e.note)||void 0===o?void 0:null===(a=o.noteCard)||void 0===a?void 0:null===(i=a.interactInfo)||void 0===i?void 0:i.collected)?"collected":"collect_small",class:"collect-icon"},null,8,["size","icon"]),(0,r._)("span",y,(0,r.zw)((0,r.SU)(b)),1)],8,m)}}}),_=n(5010);let w=(0,_.default)(I,[["__scopeId","data-v-bcf39b54"]]);var k=n(73009),S=n(64300),b=n(66002),M=["onClick"],L={key:0,class:"count"},x={key:1,class:"count"},T=(0,r.aZ)({__name:"Comment",props:{count:{},size:{},notePath:{},loggedIn:{type:Boolean},hideZero:{type:Boolean},commentCountDisplayText:{},openNote:{type:Function}},emits:["comment"],setup:function(e,t){var n=t.emit,i=(0,S.dw)(),o=(0,b.Jk)(i).forceScrollToComment,u=(0,r.Fl)(function(){return!e.hideZero||e.count&&"0"!==e.count});function onCommentIconClick(t,r){n("comment"),o.value=!0,e.openNote(t,r)}return function(t,n){return(0,r.wg)(),(0,r.j4)((0,r.SU)(a.rH),{to:e.notePath},{default:(0,r.w5)(function(e){var n=e.navigate;return[(0,r._)("span",{class:"comment-wrapper",onClick:function(e){return onCommentIconClick(e,n)}},[(0,r.Wm)((0,r.SU)(c.i8),{size:t.size,icon:"comment",class:"comment-icon"},null,8,["size"]),(0,r.Wm)((0,r.SU)(k.br),null,{default:(0,r.w5)(function(){return[u.value?((0,r.wg)(),(0,r.iD)("span",L,(0,r.zw)(t.loggedIn?(0,r.SU)(d.LG)(t.count):t.count),1)):((0,r.wg)(),(0,r.iD)("span",x,(0,r.zw)(t.commentCountDisplayText||"评论"),1))]}),_:1})],8,M)]}),_:1},8,["to"])}}});let D=(0,_.default)(T,[["__scopeId","data-v-ff8cd160"]]);var N=n(75046),E=n(71852),R=n(47002),U=n(44892),P={class:"card-bottom-wrapper"},F={class:"name-time-wrapper"},j={class:"name"},O={class:"time"},H=(0,r.aZ)({__name:"EngageCardBottomWithTime",props:{note:{},notePath:{},authorPath:{},supportWebp:{type:Boolean},loggedIn:{type:Boolean},engageType:{},onAvatarClick:{type:Function},onUpdateLike:{type:Function},onUpdateCollect:{type:Function},onLike:{type:Function},onComment:{type:Function},onCollect:{type:Function},openNote:{type:Function}},setup:function(e){var t=(0,R.d)(),n=(0,E.C)().disableLikeNotes,o={collect:25359,collectApi:25297,unCollect:25360,unCollectApi:25298,guideBoardClick:48626};return function(u,l){var s,c,d,v,f,p,h,g,m;return(0,r.wg)(),(0,r.iD)("div",P,[(0,r.Wm)((0,r.SU)(a.rH),{target:(0,r.SU)(t),to:u.authorPath,class:"author",onClick:e.onAvatarClick},{default:(0,r.w5)(function(){var t,n,a,o,l,s,c,d,v;return[(null===(n=e.note.noteCard)||void 0===n?void 0:null===(t=n.user)||void 0===t?void 0:t.avatar)?((0,r.wg)(),(0,r.j4)((0,r.SU)(i.yV),{key:0,crossorigin:"anonymous",class:"author-avatar",loading:"lazy",width:"24",height:"24",src:"".concat(null===(o=e.note.noteCard)||void 0===o?void 0:null===(a=o.user)||void 0===a?void 0:a.avatar,"?imageView2/2/w/60/format/").concat(e.supportWebp?"webp":"jpg").concat((0,r.SU)(U.tM))},null,8,["src"])):(0,r.kq)("",!0),(0,r._)("div",F,[(0,r._)("div",j,(0,r.zw)(null===(s=u.note.noteCard)||void 0===s?void 0:null===(l=s.user)||void 0===l?void 0:l.nickname),1),(0,r._)("div",O,(0,r.zw)(null===(v=u.note.noteCard)||void 0===v?void 0:null===(d=v.cornerTagInfo)||void 0===d?void 0:null===(c=d.filter(function(e){return"publish_time"===e.type})[0])||void 0===c?void 0:c.text),1)])]}),_:1},8,["target","to","onClick"]),"like"===e.engageType&&u.note.noteCard?((0,r.wg)(),(0,r.j4)(N.Z,{key:0,id:u.note.id||"",type:"note",disabled:null===(s=(0,r.SU)(n))||void 0===s?void 0:s.includes(u.note.id),liked:null===(c=u.note.noteCard.interactInfo)||void 0===c?void 0:c.liked,count:null===(d=u.note.noteCard.interactInfo)||void 0===d?void 0:d.likedCount,"logged-in":u.loggedIn,size:"16","hide-zero":(null===(v=u.note.noteCard.interactInfo)||void 0===v?void 0:v.likedCount)==="0","disable-sync":!0,onUpdateLike:e.onUpdateLike,onLike:e.onLike},null,8,["id","disabled","liked","count","logged-in","hide-zero","onUpdateLike","onLike"])):"comment"===e.engageType?((0,r.wg)(),(0,r.j4)(D,{key:1,count:null===(p=u.note.noteCard)||void 0===p?void 0:null===(f=p.interactInfo)||void 0===f?void 0:f.commentCount,size:"16","hide-zero":"0"===((null===(m=u.note)||void 0===m?void 0:null===(g=m.noteCard)||void 0===g?void 0:null===(h=g.interactInfo)||void 0===h?void 0:h.commentCount)||0),"logged-in":e.loggedIn,"open-note":e.openNote,"note-path":e.notePath,onComment:e.onComment},null,8,["count","hide-zero","logged-in","open-note","note-path","onComment"])):"collect"===e.engageType?((0,r.wg)(),(0,r.j4)(w,{key:2,id:u.note.id||"",note:u.note,"logged-in":u.loggedIn,points:o,size:"16",onUpdateCollect:e.onUpdateCollect,onCollect:e.onCollect},null,8,["id","note","logged-in","onUpdateCollect","onCollect"])):(0,r.kq)("",!0)])}}}),W=(0,_.default)(H,[["__scopeId","data-v-ab401f42"]])},6035:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}}),n(87394),n(94941),n(48421),n(97357),n(34333);var r=n(93328),i=n(66398),a={key:0,class:"poi-info-wrapper"},o={class:"poi-info-address"},u={class:"poi-info-distance shrink-0"},l=(0,r.aZ)({__name:"POICoverLayer",props:{note:{}},setup:function(e){var t=(0,r.Fl)(function(){var t,n,r,i=null===(r=e.note.noteCard)||void 0===r?void 0:null===(n=r.cornerTagInfo)||void 0===n?void 0:null===(t=n.filter(function(e){return"publish_pos"===e.type}))||void 0===t?void 0:t[0];return i?{textSuffix:i.textSuffix,text:i.text}:null});return function(e,n){return t.value?((0,r.wg)(),(0,r.iD)("div",a,[(0,r.Wm)((0,r.SU)(i.i8),{size:"12",icon:"location",class:"shrink-0"}),(0,r._)("span",o,(0,r.zw)(t.value.text),1),n[0]||(n[0]=(0,r._)("svg",{class:"poi-info-divider shrink-0",xmlns:"http://www.w3.org/2000/svg",width:"2",height:"12",viewBox:"0 0 2 12",fill:"none"},[(0,r._)("path",{d:"M1 1V11",stroke:"white","stroke-opacity":"0.32","stroke-linecap":"round"})],-1)),(0,r._)("span",u,(0,r.zw)(t.value.textSuffix),1)])):(0,r.kq)("",!0)}}}),s=(0,n(5010).default)(l,[["__scopeId","data-v-15bd02fa"]])},35909:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(70879),i=n(27337),a=n(93328),o=n(51401),u=n(44892),l=n(85537),s=n(94186),c={class:"error"},d=["src"],v=(0,a.aZ)({__name:"FetchError",props:{refresh:{type:Function}},setup:function(e){var t=(0,l.L)();return(0,a.bv)(function(){var e,n=(0,i._)((0,r._)({},s.yN.errorInfo),{isLogin:String(t.loggedIn),webId:null!==(e=o.Z.get("webId"))&&void 0!==e?e:""});s.yN.trackFetchErrorPage(n)}),function(e,t){return(0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("section",null,[(0,a._)("img",{src:(0,a.SU)(u.rU).Error,crossorigin:"anonymous"},null,8,d),t[1]||(t[1]=(0,a._)("div",{class:"message"}," 未连接到服务器，刷新一下试试 ",-1)),(0,a._)("div",{class:"button",onClick:t[0]||(t[0]=function(){e.refresh()})}," 点击刷新 ")])])}}}),f=(0,n(5010).default)(v,[["__scopeId","data-v-22d432c2"]])},1552:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(93328),i=n(6890),a=(0,r.aZ)({__name:"FloatingBtnSets",setup:function(e){var t=(0,i.s6)();return function(e,n){return(0,r.wg)(),(0,r.iD)("div",{class:(0,r.C_)(["floating-btn-sets",{"nio-btn-sets":(0,r.SU)(t).isNIO}])},[(0,r.WI)(e.$slots,"default")],2)}}}),o=(0,n(5010).default)(a,[["__scopeId","data-v-2ed9bdf4"]])},86057:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(66993);n(29273),n(87989);var i=n(93328),a=n(66398),o=n(60506);n(39967);var u={key:0,class:"fullscreen-img-viewer fullscreen-glass"},l=["src"],s=(0,i.aZ)({__name:"ImagePreviewBox",props:{isImgFullscreen:{type:Boolean},imageUrl:{}},emits:["onClose"],setup:function(e,t){var n=t.emit;return function(e,t){return(0,i.wg)(),(0,i.iD)(i.HY,null,[e.isImgFullscreen?(0,i.kq)("",!0):(0,i.WI)(e.$slots,"default",{key:0}),(0,i.Wm)(o.Z,null,{default:(0,i.w5)(function(){return[((0,i.wg)(),(0,i.j4)(i.lR,{to:"body"},[(0,i.Wm)(i.uT,{name:"zoom"},{default:(0,i.w5)(function(){return[e.isImgFullscreen?((0,i.wg)(),(0,i.iD)("div",u,[(0,i._)("div",{class:(0,i.C_)(["img-contain",[e.isImgFullscreen?"img-zoom-out":"img-zoom-in"]])},[e.imageUrl?((0,i.wg)(),(0,i.iD)("img",{key:1,src:e.imageUrl,class:"image-pure-upload-preview__image-fullscreen",crossorigin:"anonymous",alt:""},null,8,l)):(0,i.WI)(e.$slots,"default",{key:0})],2),(0,i._)("div",{class:"close-icon-wrapper close-icon-dark",onClick:t[0]||(t[0]=function(e){return n("onClose")})},[(0,i.Wm)((0,i.SU)(a.i8),{icon:"close_b",size:"20"})])])):(0,i.kq)("",!0)]}),_:3})]))]}),_:3})],64)}}}),c=n(5010);let d=(0,c.default)(s,[["__scopeId","data-v-1f7d91f3"]]);n(70571);var v={class:"image-pure-upload-preview"},f=["onClick"],p=["src"],h={key:0,class:"image-pure-upload-preview__mask"},g={key:1,class:"image-pure-upload-preview__mask"},m={key:0,class:"image-pure-upload-preview__mask__msg"},y=["onClick"],I=(0,i.aZ)({__name:"ImagePureUploadPreview",props:{modelValue:{default:function(){return[]}},itemWidth:{default:76},itemHeight:{default:76}},emits:["update:modelValue","click","delete"],setup:function(e,t){var n=t.emit,o=(0,i.iH)((0,r._)(e.modelValue||[])),u=(0,i.iH)(null),l=(0,i.Fl)(function(){return o.value});function handleImageClick(e,t){u.value=e,n("click",e,t)}function handleDelete(e,t){o.value.splice(t,1),updateModelValue(),n("delete",e,t)}function handleClosePreview(){u.value=null}function updateModelValue(){n("update:modelValue",(0,r._)(o.value))}return(0,i.YP)(function(){return e.modelValue},function(e){e&&(o.value=(0,r._)(e))},{deep:!0}),function(e,t){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",v,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(l),function(t,n){return(0,i.wg)(),(0,i.iD)("div",{key:n,class:"image-pure-upload-preview__item",style:(0,i.j5)({width:"".concat(e.itemWidth,"px"),height:"".concat(e.itemHeight,"px")})},[(0,i._)("div",{class:"image-pure-upload-preview__image-wrapper",onClick:function(e){return handleImageClick(t,n)}},[(0,i._)("img",{src:t.url,class:"image-pure-upload-preview__image",crossorigin:"anonymous",alt:""},null,8,p),"uploading"===t.status?((0,i.wg)(),(0,i.iD)("div",h,[(0,i.Wm)((0,i.SU)(a.i8),{icon:"loading",size:"20",class:"image-pure-upload-preview__mask__loading"})])):(0,i.kq)("",!0),"failed"===t.status?((0,i.wg)(),(0,i.iD)("div",g,[(0,i.Wm)((0,i.SU)(a.i8),{icon:"alert",class:"image-pure-upload-preview__mask__fail",size:"20"}),t.message?((0,i.wg)(),(0,i.iD)("p",m,(0,i.zw)(t.message),1)):(0,i.kq)("",!0)])):(0,i.kq)("",!0)],8,f),(0,i._)("div",{class:"image-pure-upload-preview__delete",onClick:(0,i.iM)(function(e){return handleDelete(t,n)},["stop"])},[(0,i.Wm)((0,i.SU)(a.i8),{icon:"close_b",class:"image-pure-upload-preview__delete__icon",size:"12"})],8,y)],4)}),128))]),(0,i.SU)(u)?((0,i.wg)(),(0,i.j4)(d,{key:0,"is-img-fullscreen":"","image-url":(0,i.SU)(u).url,onOnClose:handleClosePreview},null,8,["image-url"])):(0,i.kq)("",!0)],64)}}}),_=(0,c.default)(I,[["__scopeId","data-v-7a098b82"]])},8456:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}}),n(87989);var r=n(93328),i={class:"live-breath"},a={key:1,class:"avatar-container"},o="inner-breathe",u="outer-breathe",l=(0,r.aZ)({__name:"LiveAvatar",props:{isLiving:{type:Boolean},badgeWidth:{},badgeHeight:{},badgeFontSize:{},width:{},height:{},innerScale:{},outerScale:{}},setup:function(e){var t=(0,r.iH)(),n=(0,r.iH)(0),l=(0,r.iH)(0),s=(0,r.Fl)(function(){return"".concat((n.value+1)*e.outerScale.to,"px")}),c=(0,r.Fl)(function(){return"".concat((n.value+1)*e.outerScale.to,"px")}),d=(0,r.Fl)(function(){return"".concat(n.value+1,"px")}),v=(0,r.Fl)(function(){return"".concat(n.value+1,"px")});function getAvatarSize(){if(e.width&&e.height){n.value=e.width,l.value=e.height;return}if(t.value){var r=t.value.getElementsByTagName("img")[0].getBoundingClientRect();r.width>=r.height?(n.value=r.height,l.value=r.height):(n.value=r.width,l.value=r.width)}}var f=(0,r.Fl)(function(){if(0===n.value||0===l.value)return null;var t=e.badgeHeight,r=e.badgeWidth,i=e.badgeFontSize;return t&&r&&i?{height:"".concat(t,"px"),width:"".concat(r,"px"),fontSize:"".concat(i,"px"),borderRadius:"".concat(t/2,"px"),lineHeight:"".concat(t,"px"),bottom:"-".concat(t/4,"px")}:null});function generateInnerKeyframes(){var t=e.innerScale,n=t.from,r=t.middle,i=t.to;injectStyle("\n    @keyframes ".concat(o," {\n      0% {\n        transform: translate(-50%, -50%) scale(").concat(n,");\n      }\n      50% {\n        transform: translate(-50%, -50%) scale(").concat(r,");\n      }\n      100% {\n        transform: translate(-50%, -50%) scale(").concat(i,");\n      }\n    }\n  "),"inner-style-".concat(o))}function generateOuterKeyframes(){var t=e.outerScale,n=t.from,r=t.middle,i=t.to;injectStyle("\n    @keyframes ".concat(u," {\n      0% {\n        transform: translate(-50%, -50%) scale(").concat(n,");\n        opacity: 1;\n      }\n      50% {\n        transform: translate(-50%, -50%) scale(").concat(r,");\n        opacity: 0.5;\n      }\n      100% {\n        transform: translate(-50%, -50%) scale(").concat(i,");\n        opacity: 0;\n      }\n    }\n  "),"outer-style-".concat(u))}function injectStyle(e,t){if("undefined"!=typeof window){var n=document.getElementById(t);n&&n.remove();var r=document.createElement("style");r.id=t,r.textContent=e,document.head.appendChild(r)}}return(0,r.bv)(function(){(0,r.Y3)(function(){getAvatarSize()}),generateInnerKeyframes(),generateOuterKeyframes(),window.addEventListener("resize",getAvatarSize)}),(0,r.SK)(function(){window.removeEventListener("resize",getAvatarSize);var e=document.getElementById("inner-style-".concat(o)),t=document.getElementById("outer-style-".concat(u));e&&e.remove(),t&&t.remove()}),function(e,n){return e.isLiving?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"live-avatar-container",style:(0,r.j5)({width:(0,r.SU)(s),height:(0,r.SU)(c)})},[(0,r._)("div",i,[(0,r._)("div",{class:"breath-ring",style:(0,r.j5)({width:(0,r.SU)(d),height:(0,r.SU)(v),animation:"".concat(o," 1.4s linear infinite")})},null,4),(0,r._)("div",{class:"breath-ring",style:(0,r.j5)({width:(0,r.SU)(d),height:(0,r.SU)(v),animation:"".concat(u," 1.4s linear infinite")})},null,4)]),(0,r._)("div",{ref_key:"avatarWrapper",ref:t,class:"avatar-wrapper",style:(0,r.j5)({width:(0,r.SU)(d),height:(0,r.SU)(v)})},[(0,r.WI)(e.$slots,"avatar"),e.isLiving?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"live-badge",style:(0,r.j5)((0,r.SU)(f))},n[0]||(n[0]=[(0,r._)("span",{class:"live-text"},"直播",-1)]),4)):(0,r.kq)("",!0)],4)],4)):((0,r.wg)(),(0,r.iD)("div",a,[(0,r.WI)(e.$slots,"avatar")]))}}}),s=(0,n(5010).default)(l,[["__scopeId","data-v-ad1b75aa"]])},12115:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(41622),i=n(377);n(36277),n(34333),n(87989);var a=n(93328),o=JSON.parse('{"v":"4.6.10","fr":24,"ip":0,"op":24,"w":50,"h":50,"nm":"loading@1x","ddd":0,"assets":[{"id":"comp_2","layers":[{"ddd":0,"ind":1,"ty":0,"nm":"素材x","refId":"comp_3","ks":{"o":{"a":0,"k":100},"r":{"a":0,"k":270},"p":{"a":0,"k":[50,50,0]},"a":{"a":0,"k":[50,50,0]},"s":{"a":0,"k":[100,100,100]}},"ao":0,"w":100,"h":100,"ip":0,"op":24,"st":0,"bm":0,"sr":1},{"ddd":0,"ind":2,"ty":0,"nm":"素材x","refId":"comp_3","ks":{"o":{"a":0,"k":100},"r":{"a":0,"k":90},"p":{"a":0,"k":[50,50,0]},"a":{"a":0,"k":[50,50,0]},"s":{"a":0,"k":[100,100,100]}},"ao":0,"w":100,"h":100,"ip":0,"op":24,"st":0,"bm":0,"sr":1}]},{"id":"comp_3","layers":[{"ddd":0,"ind":1,"ty":4,"nm":"“元素1”轮廓","ks":{"o":{"a":0,"k":100},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"n":["0p667_1_0p333_0"],"t":0,"s":[90],"e":[810]},{"t":24}]},"p":{"a":0,"k":[50,50,0]},"a":{"a":0,"k":[50,50,0]},"s":{"a":0,"k":[100,100,100]}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[11.577,0],[2.843,-10.682]],"o":[[-2.844,-10.682],[-11.578,0],[0,0]],"v":[[24.157,9.276],[0.001,-9.277],[-24.156,9.277]],"c":false}},"nm":"路径 1","mn":"ADBE Vector Shape - Group"},{"ty":"st","c":{"a":0,"k":[0.8,0.8,0.8,1]},"o":{"a":0,"k":100},"w":{"a":0,"k":6},"lc":2,"lj":1,"ml":10,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke"},{"ty":"tr","p":{"a":0,"k":[50,34.277],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":2,"cix":2,"ix":1,"mn":"ADBE Vector Group"},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"n":["0p667_1_0p333_0"],"t":0,"s":[100],"e":[1]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"n":["0p667_1_0p333_0"],"t":11.6,"s":[1],"e":[100]},{"t":23.2}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"修剪路径 1","mn":"ADBE Vector Filter - Trim"}],"ip":0,"op":24.4,"st":0,"bm":0,"sr":1}]}],"layers":[{"ddd":0,"ind":1,"ty":0,"nm":"loading","refId":"comp_2","ks":{"o":{"a":0,"k":100},"r":{"a":0,"k":0},"p":{"a":0,"k":[25,25,0]},"a":{"a":0,"k":[50,50,0]},"s":{"a":0,"k":[50,50,100]}},"ao":0,"w":100,"h":100,"ip":0,"op":720,"st":0,"bm":0,"sr":1}]}'),u=(0,a.aZ)({__name:"Loading",props:{size:{},isPaused:{type:Boolean,default:!1}},setup:function(e){var t,u=(0,a.iH)();return(0,a.bv)((0,r._)(function(){var r;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,n.e("395").then(n.t.bind(n,48572,23))];case 1:return t=r=i.sent().default,r.loadAnimation({container:u.value,loop:!0,name:"loading",animationData:o}),e.isPaused&&t.pause(),[2]}})})),(0,a.YP)(function(){return e.isPaused},function(e){if(!!t)e?t.pause():t.play()}),function(e,t){return(0,a.wg)(),(0,a.iD)("div",{ref_key:"loading",ref:u,class:"animate",style:(0,a.j5)({width:"".concat(e.size,"px"),height:"".concat(e.size,"px")})},null,4)}}}),l=u},7670:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}}),n(72169),n(58486),n(87989);var r=n(93328),i=n(8306),a=n(48828),o=["innerHTML"],u=(0,r.aZ)({__name:"NoteTitle",props:{content:{},supportWebp:{type:Boolean}},setup:function(e){function getTitle(){var t,n;return null===(t=(0,i.Tp)(null!==(n=e.content)&&void 0!==n?n:""))||void 0===t?void 0:t.replace(/\[(.*?)]/g,function(t){return a[t]?'<img src="'.concat(a[t],"?imageView2/2/w/100/format/").concat(e.supportWebp?"webp":"png",'">'):t})}return function(e,t){return(0,r.wg)(),(0,r.iD)("span",{innerHTML:getTitle()},null,8,o)}}}),l=(0,n(5010).default)(u,[["__scopeId","data-v-51ec0135"]])},56587:function(e,t,n){"use strict";n.d(t,{Z:function(){return G}});var r=n(41622),i=n(70879),a=n(27337),o=n(66993),u=n(377);n(28636),n(7608),n(6045),n(10364),n(67673),n(43648),n(69032),n(93354),n(97357),n(34333),n(86651);var l=n(93328),s=n(38841),c=n(66398),d=n(16337),v=n(51899),f=n.n(v),p=n(81334),h=n(68284),g=n(79612),m=n(66002);function useSearchHotspot(e){var t=(0,h.R)(),n=(0,h.P)(),r=(0,m.Jk)(t),i=r.hotspotQueryNoteStep,a=r.hotspotQueryNoteIndex,o=r.canShowHotspotQueryNote,u=r.forceHotspotSearch,s=r.searchCardHotSpots,c=(0,l.iH)(null==e?void 0:e.slice(0,5)),handleClickHotspotHide=function(e,t){i.value="hide",a.value=t,(0,g.QF)(e.id);var n=Date.now()+36e5*e.hours;(0,d.y$C)(p.Z.SEARCH_HOTSPOT_HIDE_TIME,n).value=n},v=[{name:"隐藏此内容",text:[{title:"今日隐藏",hours:24,hideText:"今日已隐藏",id:"hide_1d"},{title:"隐藏 7 天",hours:168,hideText:"将为你隐藏 7 天",id:"hide_7d"},{title:"隐藏 30 天",hours:720,hideText:"将为你隐藏 30 天",id:"hide_30d"}],clickEvent:function(){i.value="modify"},textClickEvent:handleClickHotspotHide}],y=f()(function(){if("modify"===i.value){i.value="display";return}(0,g.QF)("more"),u.value=!0,n.emitFocus(!0),u.value=!1},500,{leading:!0,trailing:!1});return(0,l.wF)(function(){if(!!(null==e?void 0:e.length))s.value=e,t.checkHotspotStorageStatus()}),{hotspotModifyList:v,hotspotQueryNoteStep:i,currentDisplayHotspot:c,hotspotQueryNoteIndex:a,canShowHotspotQueryNote:o,handleClickMore:y,handleClickHotspotHide:handleClickHotspotHide}}var y=n(98413),I=n(39317),_=n(44924),w=n(8935),k=n(99505);n(81162),n(38480);var S=n(13285),b={key:0,class:"query-note-wrapper"},M={class:"query-note-header"},L={class:"icon-warpper"},x={class:"query-note-header-text"},T={key:0,class:"icon-warpper modify"},D={class:"menu-wrapper"},N=["onClick"],E={key:0,class:"query-note-list"},R=["onClick"],U=["src"],P={class:"item-text"},F={key:1,class:"query-note-list hotspot"},j=["onClick"],O={class:"hotspot-index"},H={class:"hotspot-title"},W={key:0,class:"modify-pad"},z=["onClick"],Z={key:1,class:"modify-pad hide"},q={class:"hide-text"},V={class:"more-hotspot"},Y=(0,l.aZ)({__name:"QueryNoteItem",props:{queryNoteData:{},index:{},type:{},title:{},canModify:{type:Boolean}},setup:function(e){var t,n=this;(0,l.sj)(function(e){return{"974a2752":(0,l.SU)(er),"3a7e981c":(0,l.SU)(en),da723cf4:(0,l.SU)(ei),"77eb6090":(0,l.SU)(ee),"4236ef9c":(0,l.SU)(et)}});var d=(0,h.R)(),v=(0,I.NW)(),f=(0,S.tv)(),p=(0,S.yj)(),g=useSearchHotspot(null===(t=e.queryNoteData)||void 0===t?void 0:t.items),m=g.hotspotModifyList,Y=g.currentDisplayHotspot,G=g.handleClickMore,J=g.handleClickHotspotHide,Q=g.hotspotQueryNoteStep,K=g.hotspotQueryNoteIndex,X=g.canShowHotspotQueryNote;function getTrackData(t,n){var r,i,a={objectPosition:e.index+1,searchWord:d.searchContext.keyword,searchWordFrom:d.keywordFrom,searchWordFromStr:d.sourcePageInstance,noteSortType:w.NC[d.searchContext.sort],filterOptionsStr:t,recommendTitle:t,channelType:_.f[e.type].pointTypeStr};return e.type===_.B.hotList&&(a.recommendSearchWordsId=null==n?void 0:n.id,a.recommendTitle=JSON.stringify((null===(r=e.queryNoteData)||void 0===r?void 0:r.items)?null===(i=e.queryNoteData)||void 0===i?void 0:i.items.map(function(e){return e.title}).slice(0,5):[])),a}var $=(0,l.Fl)(function(){var t,n;return null===(n=e.queryNoteData)||void 0===n?void 0:null===(t=n.queries)||void 0===t?void 0:t.every(function(e){return e.cover})});function search(e,t){return _search.apply(this,arguments)}function _search(){return(_search=(0,r._)(function(t,n){var r,o,l;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(!t)return[2];if(p.name===y.Z.AISearchName)return o=f.resolve({name:y.Z.SearchName,query:{keyword:t,source:"web_ai_search_result"}}).fullPath,window.open(o,"_blank"),[2];return[4,(0,k.O8)(32838,getTrackData(t,n))];case 1:return l=u.sent(),s.Q.push((0,a._)((0,i._)({},l),{page:(0,k.zr)()})),d.updateKeywordFrom(_.f[e.type].pointType),e.type===_.B.hotList&&d.setHotspotSearch(!0),null===(r=v.feedsWrapper)||void 0===r||r.scrollTo(0,0),d.mutateSearchValue(t),f.push({name:y.Z.SearchName,query:{keyword:t,source:p.query.source}}),[2]}})})).apply(this,arguments)}var ee=(0,l.Fl)(function(){return _.f[e.type].bgColor}),et=(0,l.Fl)(function(){return _.f[e.type].foreGroundColor}),en=(0,l.Fl)(function(){return _.f[e.type].activeItemColor}),er=(0,l.Fl)(function(){return _.f[e.type].listItemTextColor}),ei=(0,l.Fl)(function(){return _.f[e.type].listItemTextHoverColor});function handleImageError(e){e.target.src="https://picasso-static.xiaohongshu.com/fe-platform/23e9c53a1905c5cbc66fff148c919f989c2d3560.png"}return function(t,r){var i,a;return e.queryNoteData?((0,l.wg)(),(0,l.iD)("div",b,[(0,l._)("div",M,[(0,l._)("div",L,[(0,l.Wm)((0,l.SU)(c.i8),{icon:(0,l.SU)(_.f)[e.type].icon,size:"20"},null,8,["icon"])]),(0,l._)("span",x,(0,l.zw)(e.queryNoteData.title||e.title),1),e.canModify&&"display"===(0,l.SU)(Q)?((0,l.wg)(),(0,l.iD)("div",T,[(0,l.Wm)((0,l.SU)(c.Lt),{trigger:"click",class:"modify-dropdown force-light"},{items:(0,l.w5)(function(){return[(0,l._)("div",D,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,l.SU)(m),function(e){return(0,l.wg)(),(0,l.iD)("div",{key:e.name,class:"menu-item",onClick:function(t){var n;return null===(n=e.clickEvent)||void 0===n?void 0:n.call(e)}},[(0,l._)("span",null,(0,l.zw)(e.name),1)],8,N)}),128))])]}),default:(0,l.w5)(function(){return[(0,l.Wm)((0,l.SU)(c.i8),{icon:"more",size:"16"})]}),_:1})])):(0,l.kq)("",!0)]),(null===(a=e.queryNoteData)||void 0===a?void 0:null===(i=a.queries)||void 0===i?void 0:i.length)?((0,l.wg)(),(0,l.iD)("div",E,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.queryNoteData.queries,function(t){return(0,l.wg)(),(0,l.iD)("div",{key:t.id,class:"query-note-item",onClick:function(e){return search(t.id)}},[(0,l._)("div",{class:(0,l.C_)(["item-wrapper",{"rec-query":e.type===(0,l.SU)(_.B).recQuery||!(0,l.SU)($)}])},[t.cover&&(0,l.SU)($)?((0,l.wg)(),(0,l.iD)("img",{key:0,crossorigin:"anonymous",class:"item-cover",src:t.cover,onError:handleImageError},null,40,U)):(0,l.kq)("",!0),(0,l._)("span",P,(0,l.zw)(t.id),1)],2)],8,R)}),128))])):(0,l.kq)("",!0),(0,l.SU)(X)&&e.type===(0,l.SU)(_.B).hotList?((0,l.wg)(),(0,l.iD)("div",F,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,l.SU)(Y),function(e,t){return(0,l.wg)(),(0,l.iD)("div",{key:e.id,class:"query-note-item hotspot",onClick:function(t){return search(e.title,e)}},[(0,l._)("span",O,(0,l.zw)(t+1),1),(0,l._)("div",H,(0,l.zw)(e.title),1)],8,j)}),128)),"modify"===(0,l.SU)(Q)?((0,l.wg)(),(0,l.iD)("div",W,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)((0,l.SU)(m)[0].text,function(e,t){return(0,l.wg)(),(0,l.iD)("div",{key:e.title,class:"modify-wrapper",onClick:function(n){return(0,l.SU)(J)(e,t)}},(0,l.zw)(e.title),9,z)}),128))])):"hide"===(0,l.SU)(Q)?((0,l.wg)(),(0,l.iD)("div",Z,[(0,l._)("div",q,(0,l.zw)((0,l.SU)(m)[0].text[(0,l.SU)(K)].hideText),1),r[1]||(r[1]=(0,l._)("div",{class:"hide-text hint"}," 关闭后可在搜索面板查看 ",-1))])):(0,l.kq)("",!0),(0,l._)("div",{class:"footer",onClick:r[0]||(r[0]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.SU)(G)&&(0,l.SU)(G).apply(n,(0,o._)(t))})},[(0,l._)("div",V,(0,l.zw)("display"===(0,l.SU)(Q)?"更多":"返回"),1)])])):(0,l.kq)("",!0)])):(0,l.kq)("",!0)}}}),G=(0,n(5010).default)(Y,[["__scopeId","data-v-0ab24b8a"]])},63850:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}}),n(9557),n(87989),n(34333),n(55947);var r=n(93328),i=n(66398),a=n(66002),o=n(98787),u=n(67547),l={class:"skeleton-container"},s=(0,r.aZ)({__name:"Skeleton",props:{minRenderNotes:{type:Number,default:20},columns:{type:Number,default:5}},setup:function(e){(0,r.sj)(function(e){return{"3be086c8":g.value}});var t=(0,a.Jk)((0,u.D)()),n=t.columns,s=t.columnWidth,c=t.gap,d=["skeleton_s","skeleton_m","skeleton_l"],v=(0,r.iH)([]),f=(0,r.iH)(0),p=(0,o.Z)(n,s,c,v,f).getItemPosition,h=(0,r.Fl)(function(){var e=s.value/200>0?s.value/200:1;return{0:204*e,1:254*e,2:320*e}});function getAttr(e){var t=e%3,n=p(h.value[t],e-1);return{icon:d[t],index:t,style:{transform:"translate(".concat(n.left,"px, ").concat(n.top,"px)")}}}(0,r.YP)([n,s],function(){document.documentElement.scrollTop=0,v.value=[],f.value=0});var g=(0,r.Fl)(function(){return"".concat(s.value,"px")});return function(t,n){return(0,r.wg)(),(0,r.iD)("div",l,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.minRenderNotes,function(e){return(0,r.wg)(),(0,r.j4)((0,r.SU)(i.i8),(0,r.dG)({key:e,class:"img"},{ref_for:!0},getAttr(e),{height:h.value[getAttr(e).index].toString(),width:g.value,style:getAttr(e).style}),null,16,["height","width","style"])}),128))])}}}),c=(0,n(5010).default)(s,[["__scopeId","data-v-4b705e2c"]])},59484:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(93328);n(87989);var i={class:"wrapper"},a=(0,r.aZ)({__name:"SkeletonItem",props:{widthRatio:{},heightRatio:{}},setup:function(e){(0,r.sj)(function(e){return{d49b5fbe:t.value}});var t=(0,r.Fl)(function(){return"calc(var(--columnWidth) * ".concat(e.heightRatio/e.widthRatio,")")});return function(e,t){return(0,r.wg)(),(0,r.iD)("div",i,t[0]||(t[0]=[(0,r._)("div",{class:"cover"},null,-1),(0,r._)("div",{class:"interact"},[(0,r._)("div",{class:"title"}),(0,r._)("div",{class:"author"})],-1)]))}}}),o=n(5010);let u=(0,o.default)(a,[["__scopeId","data-v-56cede88"]]);var l={id:"ssr-skeleton",class:"skeleton-container"},s=(0,r.aZ)({__name:"Skeleton",setup:function(e){var t=[[4,3],[1,1],[4,3],[3,4],[1,1],[3,4],[4,3],[1,1],[4,3],[3,4],[4,3],[4,3],[4,3],[1,1],[3,4]];return function(e,n){return(0,r.wg)(),(0,r.iD)("div",l,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)(t,function(e,t){return(0,r.Wm)(u,{key:t,"height-ratio":e[0],"width-ratio":e[1],class:"skeleton-item"},null,8,["height-ratio","width-ratio"])}),64))])}}}),c=(0,o.default)(s,[["__scopeId","data-v-2001e7e1"]])},28232:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var r=n(93328),i=n(66398),a=n(8456),o=n(3441),u=n(52596);n(99522),n(9334);var l=["src"],s={class:"user-name-box"},c={key:0,class:"verify-icon"},d={key:0,class:"user-tag"},v={key:1,class:"user-tag"},f={key:0,class:"user-desc"},p={class:"user-desc"},h={key:0,class:"user-desc-box"},g={key:1,class:"user-desc-box"},m={key:2,class:"user-desc-box"},y=(0,r.aZ)({__name:"UserItem",props:{type:{},userInfo:{}},emits:["click","impression"],setup:function(e,t){var n=t.emit,y=(0,o.i)(),I=(0,r.Fl)(function(){var t;return(null===(t=e.userInfo.liveInfo)||void 0===t?void 0:t.status)===2&&y.isLiveMode});function handleUserItemClick(){n("click")}function handleImageError(e){e.target.src="https://picasso-static.xiaohongshu.com/fe-platform/23e9c53a1905c5cbc66fff148c919f989c2d3560.png"}return(0,r.bv)(function(){n("impression")}),function(t,n){return(0,r.wg)(),(0,r.iD)("div",{class:(0,r.C_)(["user-item-box",{sug:"sug"===e.type}])},[(0,r.Wm)(a.Z,{"is-living":(0,r.SU)(I),"badge-width":32,"badge-height":16,"badge-font-size":10,"inner-scale":{from:1,middle:1.06,to:1},"outer-scale":{from:1,middle:1.06,to:1.16}},{avatar:(0,r.w5)(function(){return[(0,r._)("div",{class:"avatar",onClick:handleUserItemClick},[(0,r._)("img",{id:"user-image",crossorigin:"anonymous",src:t.userInfo.image,class:(0,r.C_)(["user-image",{sug:"sug"===e.type}]),onError:handleImageError},null,42,l)])]}),_:1},8,["is-living"]),(0,r._)("div",{class:(0,r.C_)(["user-info",{sug:"sug"===e.type}]),onClick:handleUserItemClick},[(0,r._)("div",s,[(0,r._)("div",{class:(0,r.C_)(["user-name",{sug:"sug"===e.type}])},[(0,r.Uk)((0,r.zw)(t.userInfo.name),1),t.userInfo.redOfficialVerifyType&&t.userInfo.redOfficialVerifyType>0?((0,r.wg)(),(0,r.iD)("span",c,[(0,r.Wm)((0,r.SU)(i.i8),{size:"20",icon:t.userInfo.redOfficialVerifyType===(0,r.SU)(u.L4).BlueOfficial?"company":"famous"},null,8,["icon"])])):(0,r.kq)("",!0)],2),t.userInfo.followed?((0,r.wg)(),(0,r.iD)("span",d,"你的关注")):(0,r.kq)("",!0),t.userInfo.updateTime?((0,r.wg)(),(0,r.iD)("span",v,(0,r.zw)(t.userInfo.updateTime),1)):(0,r.kq)("",!0)]),t.userInfo.redId&&"sug"!==t.type?((0,r.wg)(),(0,r.iD)("span",f,"小红书号："+(0,r.zw)(t.userInfo.redId),1)):(0,r.kq)("",!0),(0,r._)("div",p,[t.userInfo.profession?((0,r.wg)(),(0,r.iD)("span",h,[(0,r.Uk)((0,r.zw)(t.userInfo.profession),1),t.userInfo.fans?((0,r.wg)(),(0,r.iD)("span",{key:0,class:(0,r.C_)(["divider",{sug:"sug"===e.type}])},null,2)):(0,r.kq)("",!0)])):(0,r.kq)("",!0),t.userInfo.fans?((0,r.wg)(),(0,r.iD)("span",g,[(0,r.Uk)(" 粉丝・"+(0,r.zw)(t.userInfo.fans),1),t.userInfo.noteCount?((0,r.wg)(),(0,r.iD)("span",{key:0,class:(0,r.C_)(["divider",{sug:"sug"===e.type}])},null,2)):(0,r.kq)("",!0)])):(0,r.kq)("",!0),t.userInfo.noteCount?((0,r.wg)(),(0,r.iD)("span",m,"笔记・"+(0,r.zw)(t.userInfo.noteCount),1)):(0,r.kq)("",!0)])],2),(0,r._)("div",{class:"btn",onClick:n[0]||(n[0]=(0,r.iM)(function(){},["prevent"]))},[(0,r.WI)(t.$slots,"btnRight")])],2)}}}),I=(0,n(5010).default)(y,[["__scopeId","data-v-52179b8e"]])},97397:function(e,t,n){"use strict";n.d(t,{Z:function(){return W}});var r=n(41622),i=n(51606),a=n(377),o=n(93328),u=n(8172),l=n(10409),s=n(67156);n(86651),n(87989);var c=n(38841),d=n(10602),v=n(99505),f={class:"content"},p={class:"title"},h=(0,o.aZ)({__name:"EntryFeedCard",props:{openActivity:{type:Function},data:{}},setup:function(e,t){var n=t.expose,i=(0,o.iH)(null),u=(0,o.Fl)(function(){var t=e.data.cover,n=t.width/t.height;return n>3/4&&n<4/3?"normal":n>=4/3?"wider":n<=3/4?"higher":"normal"});function getData(){return{activityPageId:(0,d.z)(e.data.loadPageUrl),activityAdSlotId:e.data.id,trackId:e.data.id}}function _handleImpression(){return(_handleImpression=(0,r._)(function(){var e;return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,v.O8)(32288,getData())];case 1:return e=t.sent(),c.Q.push(e),[2]}})})).apply(this,arguments)}function handleClick(){return _handleClick.apply(this,arguments)}function _handleClick(){return(_handleClick=(0,r._)(function(){var t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,v.O8)(32289,getData())];case 1:return t=n.sent(),c.Q.push(t),e.openActivity(),[2]}})})).apply(this,arguments)}return n({handleImpression:function handleImpression(){return _handleImpression.apply(this,arguments)},impressionTarget:i}),function(t,n){return(0,o.wg)(),(0,o.iD)("div",{ref_key:"impressionTarget",ref:i,class:(0,o.C_)(["container",[u.value]]),style:(0,o.j5)({backgroundImage:"url(".concat(e.data.cover.url,")")}),onClick:handleClick},[(0,o._)("div",f,[(0,o._)("div",p,[(0,o.Uk)((0,o.zw)(e.data.title)+" ",1),n[0]||(n[0]=(0,o._)("br",null,null,-1)),(0,o.Uk)(" "+(0,o.zw)(e.data.subTitle),1)]),n[1]||(n[1]=(0,o._)("div",{class:"tag"}," 活动 ",-1))])],6)}}}),g=n(5010);let m=(0,g.default)(h,[["__scopeId","data-v-0eb6247e"]]);var y=n(66398),I=n(28860),_=["src"],w={class:"open-area"},k={key:0},S=["src"],b={key:1},M={class:"open-button"},L=(0,o.aZ)({__name:"EntryGlobalModal",props:{openActivity:{type:Function},data:{}},setup:function(e){(0,o.sj)(function(e){return{"25d9dc56":f.value}});var t=(0,o.iH)(e.data.countDownTime),n=(0,o.iH)(!1),i=(0,I.E)(),u=(0,l.j)(),f=(0,o.Fl)(function(){return"".concat(i.gap.horizontal,"px")}),p=null;function getTrackData(e,t){return _getTrackData.apply(this,arguments)}function _getTrackData(){return(_getTrackData=(0,r._)(function(t,n){var r,i;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return r=(0,d.z)(e.data.loadPageUrl),[4,(0,v.O8)(t,{activityPageId:r,activityAdSlotId:e.data.activityId,channelTabName:n})];case 1:return(i=a.sent()).page=v.kw,[2,i]}})})).apply(this,arguments)}function onClose(e){return _onClose.apply(this,arguments)}function _onClose(){return(_onClose=(0,r._)(function(t){var n;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return[4,getTrackData(35127,null!=t?t:"skip")];case 1:return n=r.sent(),c.Q.push(n),u.setEntryInfo({type:s.UZ.globalModal,show:!1,openType:s.B8.panel,link:e.data.loadPageUrl}),clearInterval(p),u.$mitt.emit("closeActivityPopup",t),[2]}})})).apply(this,arguments)}function startCount(){p=setInterval(function(){t.value-=1,0===t.value&&(clearInterval(p),onClose())},1e3)}function onOpen(){onClose("enter"),e.openActivity()}function pauseCountdown(){n.value=!0,clearInterval(p)}function resumeCountdown(){n.value=!1,startCount()}return(0,o.bv)((0,r._)(function(){var e;return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,getTrackData(35126)];case 1:return e=t.sent(),c.Q.push(e),startCount(),[2]}})})),function(r,i){return(0,o.wg)(),(0,o.j4)((0,o.SU)(y.ce),{open:!0,class:"activity-modal"},{default:(0,o.w5)(function(){return[(0,o._)("div",{class:(0,o.C_)(["close-button",{hoverable:n.value}]),onMouseover:pauseCountdown,onMouseleave:resumeCountdown,onClick:i[0]||(i[0]=function(e){return onClose("skip")})},[i[1]||(i[1]=(0,o._)("span",null," 跳过 ",-1)),(0,o._)("span",{class:(0,o.C_)(["countdown",{hoverable:n.value}])},(0,o.zw)(t.value),3)],34),(0,o._)("div",{class:"acrivity-container",onClick:onOpen},[(0,o._)("img",{crossorigin:"anonymous",class:"image",src:e.data.imageUrl},null,8,_),(0,o._)("div",w,[e.data.btnImageUrl?((0,o.wg)(),(0,o.iD)("div",k,[(0,o._)("img",{class:"cta-image",src:e.data.btnImageUrl},null,8,S)])):((0,o.wg)(),(0,o.iD)("div",b,[(0,o._)("div",M,[(0,o.Uk)((0,o.zw)(e.data.btnText)+" ",1),(0,o.Wm)((0,o.SU)(y.i8),{size:"16",icon:"right",class:"icon"})])]))])])]}),_:1})}}});let x=(0,g.default)(L,[["__scopeId","data-v-c1dba808"]]);var T=n(66993),D=(0,o.aZ)({__name:"EntrySearchGuess",props:{openActivity:{type:Function}},setup:function(e){return function(t,n){var r;return(0,o.wg)(),(0,o.iD)("div",{style:{position:"fixed",left:"0",top:"0","z-index":"100000"},onClick:n[0]||(n[0]=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.openActivity&&(r=e).openActivity.apply(r,(0,T._)(n))})}," 入口 ")}}}),N=n(66002),E=n(68284),R=["src"],U={class:"title-wrapper"},P={class:"sub-title"},F={class:"button"},j=(0,o.aZ)({__name:"EntrySearchOnebox",props:{openActivity:{type:Function},data:{}},setup:function(e){var t=(0,E.R)(),n=(0,N.Jk)(t),r=n.searchContext,i=n.keywordFrom,a=n.sourcePageInstance;function getOneboxPointData(){var t=(0,d.z)(e.data.extra.jumpUrl||"");return{searchWord:r.value.keyword,searchWordFrom:i.value,searchWordFromStr:a.value,activityPageId:t,activityAdSlotId:e.data.activityId||""}}function onClick(){(0,v.Fh)(35129,getOneboxPointData()),e.openActivity()}return(0,o.bv)(function(){(0,v.Fh)(35128,getOneboxPointData())}),function(t,n){return(0,o.wg)(),(0,o.iD)("div",{class:"onebox",onClick:onClick},[(0,o._)("img",{crossorigin:"anonymous",src:e.data.extra.previewImage,class:"image",width:"120",height:"80"},null,8,R),(0,o._)("div",U,[(0,o._)("div",null,(0,o.zw)(e.data.extra.title),1),(0,o._)("div",P,(0,o.zw)(e.data.extra.subTitle),1)]),(0,o._)("div",F,(0,o.zw)(e.data.extra.ctaText),1)])}}});let O=(0,g.default)(j,[["__scopeId","data-v-70ee96be"]]);var H=(0,o.aZ)({__name:"Index",props:{type:{}},setup:function(e){var t=(0,o.iH)(null),n=null,c=(0,l.j)(),d=c.getEntryInfo,v=c.openActivity,f=c.isExposed,p=c.setExposed,h=(0,o.Fl)(function(){return d(e.type)});function getEntryComponent(){var t;return(t={},(0,i._)(t,s.UZ.globalModal,x),(0,i._)(t,s.UZ.feedCard,m),(0,i._)(t,s.UZ.onebox,O),(0,i._)(t,s.UZ.placeholderSearch,m),(0,i._)(t,s.UZ.relationSearch,D),t)[e.type]||null}function handleOpenActivity(){v(e.type)}function handleImpression(){var e;if(!!(null===(e=t.value)||void 0===e?void 0:e.handleImpression)&&!!h.value)t.value.handleImpression(),p(h.value.type,h.value.key)}function handleShow(){return _handleShow.apply(this,arguments)}function _handleShow(){return(_handleShow=(0,r._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:if(!t.value||!h.value||f(h.value.type,h.value.key))return[2];return[4,(0,(0,u.Z)(handleImpression,t.value.impressionTarget).startObserve)()];case 1:return n=e.sent(),[2]}})})).apply(this,arguments)}function handleHide(){n&&(n.disconnect(),n=null)}return(0,o.bv)(function(){var e;(null===(e=h.value)||void 0===e?void 0:e.show)&&handleShow()}),(0,o.YP)(function(){var e;return null===(e=h.value)||void 0===e?void 0:e.show},function(e,t){e&&!t?handleShow():!e&&t&&handleHide()}),function(e,n){var r;return(null===(r=h.value)||void 0===r?void 0:r.show)?((0,o.wg)(),(0,o.j4)((0,o.LL)(getEntryComponent()),{key:0,ref_key:"entry",ref:t,"open-activity":handleOpenActivity,data:h.value.extra},null,8,["data"])):(0,o.kq)("",!0)}}}),W=H},49802:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var r=n(93328),i=n(58879),a=n(41622),o=n(66993),u=n(377);n(87989),n(34333),n(55947),n(72169),n(58486),n(86651),n(97553);var l=n(66398),s=n(30418),c=n(23041),d=n(94809),v=n(35307),f=["accept"],p=(0,r.aZ)({__name:"Index",props:{modelValue:{default:function(){return[]}},iconSize:{default:"20"},accept:{default:"image/jpeg,image/jpg,image/png,image/webp,image/gif,image/bmp"},maxSize:{default:10},maxCount:{default:1},disabled:{type:Boolean,default:!1},bizName:{default:"search"},scene:{default:"image"}},emits:["update:modelValue","uploadSuccess","imgUploadClick"],setup:function(e,t){var n=t.emit;function generateUUID(){return"".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9))}var i=(0,r.iH)((0,o._)(e.modelValue||[])),p=(0,r.iH)(null),h=(0,r.iH)(null),g=(0,r.iH)("");function updateModelValue(){n("update:modelValue",(0,o._)(i.value))}function triggerFileInput(){var t;if(!e.disabled){if(i.value.length>=e.maxCount){(0,l.Am)("暂仅支持上传".concat(e.maxCount,"张图片"));return}g.value=generateUUID(),(0,d.wN)({type:d.jL.TRIGGER_CLICK,uuid:g.value,time:Date.now()}),n("imgUploadClick"),null===(t=p.value)||void 0===t||t.click()}}function handleFileChange(e){return _handleFileChange.apply(this,arguments)}function _handleFileChange(){return(_handleFileChange=(0,a._)(function(t){var r,a,o,c,f,p,m,y,I,_,w,k,S,b,M,L;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(!(o=null===(r=(a=t.target).files)||void 0===r?void 0:r[0]))return[2];if(c=g.value||generateUUID(),f=o.size,p=o.type.replace("image/","")||"unknown",f/1048576>e.maxSize)return(0,l.Am)("图片大小不能超过".concat(e.maxSize,"MB")),a&&(a.value=""),[2];u.label=1;case 1:return u.trys.push([1,8,9,10]),[4,(0,s.O2)(o,"dataUrl")];case 2:if(!(m=u.sent()))return(0,l.Am)("图片读取失败"),(0,d.wN)({type:d.jL.ERROR,uuid:c,time:Date.now(),size:f,raw_type:p,error_msg:"图片读取失败"}),a&&(a.value=""),[2];return"jpeg"!==(y=(0,v.T1)(m))&&"jpg"!==y&&(0,d.wN)({type:d.jL.CONVERT,uuid:c,time:Date.now(),size:f,raw_type:p}),[4,(0,v.MO)(m,.9)];case 3:if(I=u.sent(),!(0,v.V1)(I))return(0,l.Am)("图片格式转换失败，请重试"),(0,d.wN)({type:d.jL.ERROR,uuid:c,time:Date.now(),size:f,raw_type:p,error_msg:"图片格式转换失败"}),a&&(a.value=""),[2];if(w={id:_="file_id_".concat(Date.now()),url:I,fileId:"",type:"local",status:"uploading",message:""},i.value.push(w),updateModelValue(),(0,d.wN)({type:d.jL.START,uuid:c,time:Date.now(),size:f,raw_type:p}),!(h.value&&I))return[3,7];u.label=4;case 4:return u.trys.push([4,6,,7]),[4,h.value.uploadImage(I,!0)];case 5:return(null==(k=u.sent())?void 0:k.fileId)&&-1!==(S=i.value.findIndex(function(e){return e.id===_}))&&(i.value[S]={url:I,fileId:k.fileId,type:"cdn",status:"success",message:""},updateModelValue(),(0,d.wN)({type:d.jL.END,uuid:c,time:Date.now(),size:f,raw_type:p,fileId:k.fileId}),n("uploadSuccess",{fileId:k.fileId})),[3,7];case 6:return b=u.sent(),-1!==(M=i.value.findIndex(function(e){return e.id===_}))&&(i.value[M]={url:I,fileId:"",type:"local",status:"failed",message:(null==b?void 0:b.message)||"上传失败"},updateModelValue()),(0,d.wN)({type:d.jL.ERROR,uuid:c,time:Date.now(),size:f,raw_type:p,error_msg:(null==b?void 0:b.message)||"上传失败"}),[3,7];case 7:return[3,10];case 8:return L=u.sent(),(0,l.Am)((null==L?void 0:L.message)||"图片处理失败"),(0,d.wN)({type:d.jL.ERROR,uuid:c,time:Date.now(),size:f,raw_type:p,error_msg:(null==L?void 0:L.message)||"图片处理失败"}),[3,10];case 9:return a&&(a.value=""),[7];case 10:return[2]}})})).apply(this,arguments)}return(0,r.bv)((0,a._)(function(){return(0,u.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,c.ZP)({bizName:e.bizName,scene:e.scene})];case 1:return h.value=t.sent(),[2]}})})),(0,r.YP)(function(){return e.modelValue},function(e){e&&(i.value=(0,o._)(e))},{deep:!0}),function(e,t){return(0,r.wg)(),(0,r.iD)("div",{class:(0,r.C_)(["image-upload",{"image-upload-disabled":e.disabled}])},[(0,r._)("div",{class:"image-upload__upload",onClick:triggerFileInput},[(0,r.Wm)((0,r.SU)(l.i8),{icon:"picture",size:String(e.iconSize)},null,8,["size"])]),(0,r._)("input",{ref_key:"fileInputRef",ref:p,type:"file",accept:e.accept,class:"image-upload__input",onChange:handleFileChange},null,40,f)],2)}}}),h=n(5010);let g=(0,h.default)(p,[["__scopeId","data-v-006a287d"]]);var m={key:0,class:"ai-input-image-uploader"},y=(0,r.aZ)({__name:"AIInputImageUpload",props:{modelValue:{},visible:{type:Boolean},tooltipContent:{},tooltipPosition:{},disabled:{type:Boolean},maxSize:{}},emits:["update:modelValue","uploadSuccess","imgUploadClick"],setup:function(e,t){var n,a=t.emit,o=(0,r.iH)(null!==(n=e.modelValue)&&void 0!==n?n:[]);function handleUploadSuccess(e){a("uploadSuccess",e)}function handleImgUploadClick(){a("imgUploadClick")}return(0,r.YP)(function(){return e.modelValue},function(e){e!==o.value&&(o.value=null!=e?e:[])}),(0,r.YP)(o,function(e){a("update:modelValue",e)}),function(e,t){return e.visible?((0,r.wg)(),(0,r.iD)("div",m,[(0,r.Wm)(i.Z,{position:e.tooltipPosition||"bottom"},{content:(0,r.w5)(function(){return[(0,r.Uk)((0,r.zw)(e.tooltipContent),1)]}),default:(0,r.w5)(function(){return[(0,r.Wm)(g,{modelValue:o.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.value=e}),"max-size":e.maxSize||10,"icon-size":"22",disabled:e.disabled,onUploadSuccess:handleUploadSuccess,onImgUploadClick:handleImgUploadClick},null,8,["modelValue","max-size","disabled"])]}),_:1},8,["position"])])):(0,r.kq)("",!0)}}}),I=(0,h.default)(y,[["__scopeId","data-v-7a216e0b"]])},48001:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(93328),i=n(66398);n(81162);var a={class:"bottom-box-right-submit-button"},o=(0,r.aZ)({__name:"AIInputSubmitButton",props:{disabled:{type:Boolean},status:{}},emits:["submit"],setup:function(e,t){var n=t.emit;function onSubmit(){n("submit")}return function(e,t){return(0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",{class:(0,r.C_)(["submit-button-wrapper",{submitting:"submitting"===e.status}])},[(0,r.Wm)((0,r.SU)(i.i8),{class:"submit-button btn-wrapper",size:"18",icon:"search",onClick:onSubmit})],2)])}}}),u=(0,n(5010).default)(o,[["__scopeId","data-v-74f2c5b6"]])},57975:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(93328),i=n(58879),a=n(66398),o=(0,r.aZ)({__name:"AiWebButton",props:{icon:{default:""},iconSize:{default:"16"},active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["click"],setup:function(e,t){var n=t.emit,i=(0,r.Fl)(function(){return e.active});function handleClick(e){n("click",e)}return function(e,t){return(0,r.wg)(),(0,r.iD)("button",{class:(0,r.C_)(["ai-network-button",{"is-active":i.value,"is-disabled":e.disabled}]),onClick:handleClick},[e.icon?((0,r.wg)(),(0,r.j4)((0,r.SU)(a.i8),{key:0,class:"ai-network-button__icon",icon:e.icon,size:e.iconSize},null,8,["icon","size"])):(0,r.kq)("",!0),(0,r.WI)(e.$slots,"default")],2)}}});let u=(0,n(5010).default)(o,[["__scopeId","data-v-24b94902"]]);var l=(0,r.aZ)({__name:"WebSearchBtn",props:{text:{},visible:{type:Boolean},tooltipContent:{},tooltipPosition:{},active:{type:Boolean},disabled:{type:Boolean}},emits:["click"],setup:function(e,t){var n=t.emit;function handleClick(){n("click")}return function(e,t){return e.visible?((0,r.wg)(),(0,r.j4)(i.Z,{key:0,position:e.tooltipPosition||"bottom","no-tooltip":!e.tooltipContent,style:{display:"inline-flex"}},{content:(0,r.w5)(function(){return[(0,r.Uk)((0,r.zw)(e.tooltipContent),1)]}),default:(0,r.w5)(function(){return[(0,r.Wm)(u,{icon:"web","icon-size":"16",active:e.active,disabled:e.disabled,onClick:handleClick},{default:(0,r.w5)(function(){return[(0,r.Uk)((0,r.zw)(e.text),1)]}),_:1},8,["active","disabled"])]}),_:1},8,["position","no-tooltip"])):(0,r.kq)("",!0)}}}),s=l},14546:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}}),n(6045),n(10364),n(67673),n(87535),n(75204),n(97357),n(34333);var r=n(93328),i=n(13285),a=n(68284),o=n(99505),u=n(79612),l={class:"ai-might-ask"},s={key:0,class:"ai-might-ask__title"},c={class:"ai-might-ask__list"},d=["onClick","onMouseenter"],v=(0,r.aZ)({__name:"AiMightAsk",props:{list:{default:function(){return[]}},showTitle:{type:Boolean,default:!0},fileId:{}},emits:["click","handleKeySelect"],setup:function(e,t){var n=t.emit,v=(0,a.R)(),f=(0,i.yj)(),p=(0,r.iH)(-1);function handleItemClick(t,r,i){var a,l,s;i.stopPropagation(),n("click",t),p.value=-1,(0,o.uk)(u.pD.sug.click,{searchWord:v.searchValue,objectPosition:r+1,recommendSearchWords:e.list.map(function(e){return e.text}),fromPage:f.name,recommendTitle:t.text,searchCplId:null!==(a=v.searchCplId)&&void 0!==a?a:"",wordRequestId:null!==(l=v.wordRequestId)&&void 0!==l?l:"",searchImageFromFileId:null!==(s=e.fileId)&&void 0!==s?s:""})}function handleMouseEnter(e){p.value=e}function handleKeyDown(t){if(0!==e.list.length)switch(t.key){case"ArrowDown":t.preventDefault(),selectNext();break;case"ArrowUp":t.preventDefault(),selectPrev();break;case"Enter":p.value>=0&&(t.preventDefault(),e.list[p.value]&&n("handleKeySelect",e.list[p.value]));break;case"Escape":t.preventDefault(),p.value=-1}}function selectNext(){p.value<e.list.length-1?p.value++:p.value=0}function selectPrev(){p.value>0?p.value--:p.value=e.list.length-1}return(0,r.YP)(function(){return e.list},function(){p.value=-1}),(0,r.bv)(function(){var t;window.addEventListener("keydown",handleKeyDown),null===(t=e.list)||void 0===t||t.forEach(function(t,n){var r,i,a;(0,o.uk)(u.pD.sug.impression,{searchWord:v.searchValue,objectPosition:n+1,recommendSearchWords:e.list.map(function(e){return e.text}),fromPage:f.name,recommendTitle:t.text,searchCplId:null!==(r=v.searchCplId)&&void 0!==r?r:"",wordRequestId:null!==(i=v.wordRequestId)&&void 0!==i?i:"",searchImageFromFileId:null!==(a=e.fileId)&&void 0!==a?a:""})})}),(0,r.SK)(function(){window.removeEventListener("keydown",handleKeyDown)}),function(e,t){return(0,r.wg)(),(0,r.iD)("div",l,[e.showTitle?((0,r.wg)(),(0,r.iD)("div",s," 你可能想问 ")):(0,r.kq)("",!0),(0,r._)("div",c,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.list,function(e,t){return(0,r.wg)(),(0,r.iD)("div",{key:e.id,class:(0,r.C_)(["ai-might-ask__item",{selected:t===p.value}]),onClick:function(n){return handleItemClick(e,t,n)},onMouseenter:function(e){return handleMouseEnter(t)}},(0,r.zw)(e.text),43,d)}),128))])])}}}),f=(0,n(5010).default)(v,[["__scopeId","data-v-5f278182"]])},56946:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(82726);n(43648),n(64091),n(51109),n(1154),n(80013),n(97357),n(34333),n(6045),n(10364),n(67673),n(87535),n(75204);var i=n(93328),a=n(13285),o=n(68284),u=n(99505),l=n(79612),s={class:"sug-list"},c=["onMousedown","onMouseenter"],d={class:"sug-text"},v=(0,i.aZ)({__name:"AiSug",props:{suggestions:{},inputWord:{},visible:{type:Boolean,default:!0},maxLength:{default:8},fileId:{}},emits:["select","close","mouseleave","handleKeySelect"],setup:function(e,t){var n=t.emit,v=(0,a.yj)(),f=(0,o.R)(),p=(0,i.iH)(-1),h=(0,i.Fl)(function(){return e.visible&&e.suggestions.length>0}),g=(0,i.Fl)(function(){return e.suggestions.slice(0,e.maxLength)});function string2Array(e){return Array.from(e||"")}function hasHighlight(e){return!!(e.highlightFlags&&e.highlightFlags.some(function(e){return e}))}function handleSelectSug(t,r){var i,a,o;n("select",t,r),p.value=-1,(0,u.uk)(l.pD.sug.click,{searchWord:e.inputWord,objectPosition:r+1,recommendSearchWords:e.suggestions.map(function(e){return e.text}),fromPage:v.name,recommendTitle:t.text,searchCplId:null!==(i=f.searchCplId)&&void 0!==i?i:"",wordRequestId:null!==(a=f.wordRequestId)&&void 0!==a?a:"",searchImageFromFileId:null!==(o=e.fileId)&&void 0!==o?o:"empty"})}function handleMouseEnter(e){p.value=e}function handleKeyDown(t){if(0!==g.value.length&&!!e.visible)switch(t.key){case"ArrowDown":t.preventDefault(),selectNext();break;case"ArrowUp":t.preventDefault(),selectPrev();break;case"Enter":if(p.value>=0){t.preventDefault();var r=g.value[p.value];r&&handleSelectSug(r,p.value)}break;case"Escape":t.preventDefault(),n("close")}}function selectNext(){p.value<g.value.length-1?p.value++:p.value=0,n("handleKeySelect",g.value[p.value],p.value)}function selectPrev(){p.value>0?p.value--:p.value=g.value.length-1,n("handleKeySelect",g.value[p.value],p.value)}(0,i.YP)(function(){return e.suggestions},function(){p.value=-1});var m=(0,i.iH)("");return(0,i.YP)(function(){return e.visible},function(e){!e&&(p.value=-1,m.value="")}),(0,i.YP)([function(){return e.visible},function(){return f.wordRequestId}],function(t){var n=(0,r._)(t,2),i=n[0],a=n[1];if(i&&a&&a!==m.value){var o=e.suggestions.map(function(e){return e.text});e.suggestions.forEach(function(t,n){var r,i,a;(0,u.uk)(l.pD.sug.impression,{searchWord:e.inputWord,objectPosition:n+1,recommendSearchWords:o,fromPage:v.name,recommendTitle:t.text,searchCplId:null!==(r=f.searchCplId)&&void 0!==r?r:"",wordRequestId:null!==(i=f.wordRequestId)&&void 0!==i?i:"",searchImageFromFileId:null!==(a=e.fileId)&&void 0!==a?a:"empty"})}),m.value=a}},{immediate:!0}),(0,i.bv)(function(){window.addEventListener("keydown",handleKeyDown)}),(0,i.SK)(function(){window.removeEventListener("keydown",handleKeyDown)}),function(e,t){return h.value?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"ai-sug-container",onMouseleave:t[0]||(t[0]=function(e){return n("mouseleave")})},[(0,i.WI)(e.$slots,"header"),(0,i._)("div",s,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(g.value,function(e,t){return(0,i.wg)(),(0,i.iD)("div",{key:e.text||t,class:(0,i.C_)(["sug-item",{selected:t===p.value,"has-highlight":hasHighlight(e)}]),onMousedown:(0,i.iM)(function(n){return handleSelectSug(e,t)},["prevent","stop"]),onMouseenter:function(e){return handleMouseEnter(t)}},[(0,i._)("div",d,[e.highlightFlags&&e.highlightFlags.length>0?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:0},(0,i.Ko)(string2Array(e.text),function(t,n){return(0,i.wg)(),(0,i.iD)("span",{key:n,class:(0,i.C_)({highlight:e.highlightFlags[n]})},(0,i.zw)(t),3)}),128)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[(0,i.Uk)((0,i.zw)(e.text),1)],64))])],42,c)}),128))])],32)):(0,i.kq)("",!0)}}}),f=(0,n(5010).default)(v,[["__scopeId","data-v-f3323dbc"]])},75046:function(e,t,n){"use strict";n.d(t,{Z:function(){return L}});var r=n(41622),i=n(66993),a=n(377);n(87989),n(36277),n(34333),n(86651);var o=n(93328),u=n(40122),l=n(66398),s=n(58879),c=n(8306),d=n(51899),v=n.n(d),f=JSON.parse('{"v":"5.1.18","fr":30,"ip":0,"op":18,"w":30,"h":30,"nm":"home_favorite_now_confirm stroke @1x","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"circle","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.03],"y":[1]},"o":{"x":[0.9],"y":[0.2]},"n":["0p03_1_0p9_0p2"],"t":15,"s":[100],"e":[0]},{"t":18}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[14.981,14.501,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.19,0.19,0.03],"y":[1,1,1]},"o":{"x":[0.3,0.3,0.3],"y":[0.1,0.1,0]},"n":["0p19_1_0p3_0p1","0p19_1_0p3_0p1","0p03_1_0p3_0"],"t":4,"s":[0,0,100],"e":[102,102,100]},{"t":15}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[24,24],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"椭圆路径 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"椭圆 1","np":1,"cix":2,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,0.141176477075,0.258823543787,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.3],"y":[0.1]},"n":["0p833_0p833_0p3_0p1"],"t":4,"s":[1],"e":[0]},{"t":18}],"ix":5},"lc":1,"lj":1,"ml":4,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false}],"ip":0,"op":23,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"icon_home_favorite_now_fill","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[15,14.531,0],"ix":2},"a":{"a":0,"k":[7.5,7.5,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.3,0.3,0.3],"y":[0.08,0.08,0]},"n":["0p667_1_0p3_0p08","0p667_1_0p3_0p08","0p667_1_0p3_0"],"t":4,"s":[0,0,100],"e":[120,120,100]},{"i":{"x":[0.538,0.538,0.667],"y":[1,1,1]},"o":{"x":[0.3,0.3,0.3],"y":[0.15,0.15,0]},"n":["0p538_1_0p3_0p15","0p538_1_0p3_0p15","0p667_1_0p3_0"],"t":8,"s":[120,120,100],"e":[80,80,100]},{"i":{"x":[0.38,0.38,0.667],"y":[1,1,1]},"o":{"x":[0.3,0.3,0.3],"y":[0.08,0.08,0]},"n":["0p38_1_0p3_0p08","0p38_1_0p3_0p08","0p667_1_0p3_0"],"t":14,"s":[80,80,100],"e":[100,100,100]},{"t":18}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.975,0],[0.744,-0.741],[0.974,0],[0.744,-0.744],[-1.484,-1.488],[0,0],[-0.164,0.164],[0,0],[1.487,1.487]],"o":[[-0.974,0],[-0.744,-0.741],[-0.975,0],[-1.487,1.487],[0,0],[0.164,0.164],[0,0],[1.488,-1.492],[-0.744,-0.744]],"v":[[2.69,-5.878],[0,-4.766],[-2.691,-5.878],[-5.385,-4.762],[-5.388,0.622],[-0.298,5.714],[0.297,5.714],[5.384,0.626],[5.384,-4.762]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.141176477075,0.258823543787,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"st","c":{"a":0,"k":[1,0.141176477075,0.258823543787,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1,"ix":5},"lc":1,"lj":2,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[7.5,7.878],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":3,"cix":2,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":30,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"icon_home_favorite_now_outline","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.9],"y":[0.2]},"n":["0p833_0p833_0p9_0p2"],"t":0,"s":[100],"e":[0]},{"t":6}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[15,14.531,0],"ix":2},"a":{"a":0,"k":[7.5,7.5,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.9,0.9,0.9],"y":[0.2,0.2,0]},"n":["0p833_0p833_0p9_0p2","0p833_0p833_0p9_0p2","0p833_1_0p9_0"],"t":0,"s":[100,100,100],"e":[0,0,100]},{"t":6}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.975,0],[0.744,-0.741],[0.974,0],[0.744,-0.744],[-1.484,-1.488],[0,0],[-0.164,0.164],[0,0],[1.487,1.487]],"o":[[-0.974,0],[-0.744,-0.741],[-0.975,0],[-1.487,1.487],[0,0],[0.164,0.164],[0,0],[1.488,-1.492],[-0.744,-0.744]],"v":[[2.69,-5.878],[0,-4.766],[-2.691,-5.878],[-5.385,-4.762],[-5.388,0.622],[-0.298,5.714],[0.297,5.714],[5.384,0.626],[5.384,-4.762]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.40000000596,0.40000000596,0.40000000596,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1,"ix":5},"lc":1,"lj":2,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[7.5,7.878],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":2,"cix":2,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":30,"st":0,"bm":0}],"markers":[]}'),p=JSON.parse('{"v":"5.1.18","fr":30,"ip":0,"op":18,"w":30,"h":30,"nm":"home_favorite_now_cancel @1x","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"icon_home_favorite_now_fill","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.9],"y":[0.2]},"n":["0p833_0p833_0p9_0p2"],"t":0,"s":[100],"e":[0]},{"t":6}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[15,14.688,0],"ix":2},"a":{"a":0,"k":[7.5,7.5,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,1]},"o":{"x":[0.9,0.9,0.9],"y":[0.2,0.2,0]},"n":["0p833_0p833_0p9_0p2","0p833_0p833_0p9_0p2","0p833_1_0p9_0"],"t":0,"s":[100,100,100],"e":[0,0,100]},{"t":6}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.975,0],[0.744,-0.741],[0.974,0],[0.744,-0.744],[-1.484,-1.488],[0,0],[-0.164,0.164],[0,0],[1.487,1.487]],"o":[[-0.974,0],[-0.744,-0.741],[-0.975,0],[-1.487,1.487],[0,0],[0.164,0.164],[0,0],[1.488,-1.492],[-0.744,-0.744]],"v":[[2.69,-5.878],[0,-4.766],[-2.691,-5.878],[-5.385,-4.762],[-5.388,0.622],[-0.298,5.714],[0.297,5.714],[5.384,0.626],[5.384,-4.762]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.141176477075,0.258823543787,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"st","c":{"a":0,"k":[1,0.141176477075,0.258823543787,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1,"ix":5},"lc":1,"lj":2,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[7.5,7.878],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":3,"cix":2,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":30,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"icon_home_favorite_now_outline","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[15,14.688,0],"ix":2},"a":{"a":0,"k":[7.5,7.5,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.3,0.3,0.3],"y":[0.08,0.08,0]},"n":["0p667_1_0p3_0p08","0p667_1_0p3_0p08","0p667_1_0p3_0"],"t":5,"s":[0,0,100],"e":[120,120,100]},{"i":{"x":[0.538,0.538,0.667],"y":[1,1,1]},"o":{"x":[0.3,0.3,0.3],"y":[0.1,0.1,0]},"n":["0p538_1_0p3_0p1","0p538_1_0p3_0p1","0p667_1_0p3_0"],"t":9,"s":[120,120,100],"e":[80,80,100]},{"i":{"x":[0.38,0.38,0.667],"y":[1,1,1]},"o":{"x":[0.3,0.3,0.3],"y":[0.08,0.08,0]},"n":["0p38_1_0p3_0p08","0p38_1_0p3_0p08","0p667_1_0p3_0"],"t":13,"s":[80,80,100],"e":[100,100,100]},{"t":17}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.975,0],[0.744,-0.741],[0.974,0],[0.744,-0.744],[-1.484,-1.488],[0,0],[-0.164,0.164],[0,0],[1.487,1.487]],"o":[[-0.974,0],[-0.744,-0.741],[-0.975,0],[-1.487,1.487],[0,0],[0.164,0.164],[0,0],[1.488,-1.492],[-0.744,-0.744]],"v":[[2.69,-5.878],[0,-4.766],[-2.691,-5.878],[-5.385,-4.762],[-5.388,0.622],[-0.298,5.714],[0.297,5.714],[5.384,0.626],[5.384,-4.762]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[0.40000000596,0.40000000596,0.40000000596,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":1,"ix":5},"lc":1,"lj":2,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[7.5,7.878],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":2,"cix":2,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":30,"st":0,"bm":0}],"markers":[]}'),h=n(95874),g=n(73009),m=n(8048),y=n(64300),I=n(91547),_=n(43460),w={class:"xhs-encourage-tip"},k=["src"],S={key:0,class:"count"},b={key:1,class:"count"},M=(0,o.aZ)({__name:"Like",props:{type:{},disabled:{type:Boolean},liked:{type:Boolean},count:{},commentId:{},id:{},size:{},loggedIn:{type:Boolean},hideZero:{type:Boolean},disableSync:{type:Boolean},likeCountDisplayText:{},withLikeTip:{type:Boolean},showLikeTip:{type:Boolean}},emits:["like","updateLike"],setup:function(e,t){var d=this,M=t.emit,L=(0,h.h)().handleHttpCatch,x=(0,_.p)(),T=(0,o.Fl)(function(){return x.mojiData.redmojiMap["[赞R]"]}),D=(0,o.Fl)(function(){return!e.hideZero||e.count&&"0"!==e.count}),N={note:{like:{api:u.HY,name:"postApiSnsWebV1NoteLike"},disLike:{api:u.ny,name:"postApiSnsWebV1NoteDislike"}},comment:{like:{api:u.qV,name:"postApiSnsWebV1CommentLike"},disLike:{api:u._d,name:"postApiSnsWebV1CommentDislike"}}},E=(0,m.r0)(),R=(0,y.dw)(),U=(0,o.qj)({}),P=(0,o.iH)(!1),F=(0,o.iH)(),j=(0,o.iH)();function playLikeAnimation(e){return _playLikeAnimation.apply(this,arguments)}function _playLikeAnimation(){return(_playLikeAnimation=(0,r._)(function(e){var t;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return P.value=!0,[4,n.e("395").then(n.t.bind(n,48572,23))];case 1:return(t=r.sent().loadAnimation({container:F.value,loop:!1,name:"like",animationData:e?f:p})).addEventListener("complete",function(){P.value=!1,t.destroy()}),[2]}})})).apply(this,arguments)}(0,o.bv)(function(){U.width="".concat(e.size,"px"),U.height="".concat(e.size,"px"),listenDispatchLikeEvent()});var O=v()((0,r._)(function(){var t,n,r,i;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(e.disabled||P.value)return[2];if(M("like",(t=e.liked)?"unLike":"like"),!e.loggedIn)return E.openLogin(m.yC.Like),[2];I.A.updateState(I.T.likeCount,function(e){return void 0===e?1:t?e-1:e+1}),playLikeAnimation(!t),M("updateLike",!t),n=N[e.type][t?"disLike":"like"],a.label=1;case 1:return a.trys.push([1,3,,4]),r="note"===e.type?{noteOid:e.id}:{noteId:e.id,commentId:e.commentId},[4,n.api(r)];case 2:return a.sent(),!e.disableSync&&"note"===e.type&&R.$mitt.emit("liked",{liked:!t,noteId:e.id,type:e.type}),M("like",t?"unLikeApi":"likeApi"),[3,4];case 3:return i=a.sent(),L(n.name,i,function(){M("updateLike",!!t)}),[3,4];case 4:return[2]}})}),500,{leading:!0,trailing:!1});function listenDispatchLikeEvent(){if("note"===e.type)R.$mitt.on("dispatchLike",function(t){var n=t.noteId;t.value&&n===e.id&&O()})}return function(t,n){return(0,o.wg)(),(0,o.iD)("span",{class:(0,o.C_)(["like-wrapper",{"like-active":!0!==e.disabled}]),onClick:n[0]||(n[0]=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.SU)(O)&&(0,o.SU)(O).apply(d,(0,i._)(t))})},[(0,o._)("span",{ref_key:"likeEl",ref:F,class:"like-lottie",style:(0,o.j5)(U)},null,4),t.withLikeTip?((0,o.wg)(),(0,o.j4)(s.Z,{key:1,show:t.showLikeTip,trigger:"manual"},{content:(0,o.w5)(function(){return[(0,o._)("div",w,[(0,o._)("img",{style:{width:"16px",height:"16px"},src:T.value},null,8,k),n[1]||(n[1]=(0,o._)("span",null,"鼓励一下作者",-1))])]}),default:(0,o.w5)(function(){return[(0,o.Wm)((0,o.SU)(l.i8),{ref_key:"LikeButtonEl",ref:j,size:t.size,icon:t.liked?"liked":"like",class:(0,o.C_)([{active:P.value},"like-icon"])},null,8,["size","icon","class"])]}),_:1},8,["show"])):((0,o.wg)(),(0,o.j4)((0,o.SU)(l.i8),{key:0,ref_key:"LikeButtonEl",ref:j,size:t.size,icon:t.liked?"liked":"like",class:(0,o.C_)([{active:P.value},"like-icon"])},null,8,["size","icon","class"])),(0,o.Wm)((0,o.SU)(g.br),null,{default:(0,o.w5)(function(){return[D.value?((0,o.wg)(),(0,o.iD)("span",S,(0,o.zw)(t.loggedIn?(0,o.SU)(c.LG)(t.count):t.count),1)):((0,o.wg)(),(0,o.iD)("span",b,(0,o.zw)(t.likeCountDisplayText||"赞"),1))]}),_:1})],2)}}}),L=(0,n(5010).default)(M,[["__scopeId","data-v-84d3c61a"]])},71250:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(93328),i=n(40223),a=n(71852),o=["id","onClick"],u=(0,r.aZ)({__name:"ChannelScrollContainer",props:{channelList:{},activeKey:{},verticalChannelKey:{}},emits:["update:active-key","channelClick"],setup:function(e,t){var n=t.emit,u=(0,a.C)().exploreFeedsGray;function handleChannelClick(e){n("update:active-key",e.key),n("channelClick",e)}return function(t,n){return(0,r.wg)(),(0,r.j4)(i.Z,{id:"channel-container",class:(0,r.C_)(["channel-scroll-container",{gray:(0,r.SU)(u)}]),button:!1,draggable:!0},{default:(0,r.w5)(function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.channelList,function(n){return(0,r.wg)(),(0,r.iD)("div",{id:n.key,key:n.key,class:(0,r.C_)(["channel",{active:n.key===e.activeKey,"vertical-channel-bg":n.key===e.verticalChannelKey}]),onClick:function(){handleChannelClick(n)}},[(0,r.WI)(t.$slots,"icon",{channelKey:n.key}),(0,r.Uk)(" "+(0,r.zw)(n.label),1)],10,o)}),128))]}),_:3},8,["class"])}}}),l=(0,n(5010).default)(u,[["__scopeId","data-v-c69fb658"]])},89929:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(93328),i=n(40223),a=n(71852),o=["id","onClick"],u=(0,r.aZ)({__name:"ChannelScrollContainerAi",props:{channelList:{},activeKey:{},verticalChannelKey:{}},emits:["update:active-key","channelClick"],setup:function(e,t){var n=t.emit,u=(0,a.C)().exploreFeedsGray;function handleChannelClick(e){n("update:active-key",e.key),n("channelClick",e)}return function(t,n){return(0,r.wg)(),(0,r.j4)(i.Z,{id:"channel-container",class:(0,r.C_)(["channel-scroll-container-ai",{gray:(0,r.SU)(u)}]),button:!1,draggable:!0},{default:(0,r.w5)(function(){return[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.channelList,function(n){return(0,r.wg)(),(0,r.iD)("div",{id:n.key,key:n.key,class:(0,r.C_)(["channel",{"vertical-channel-bg":n.key===e.verticalChannelKey}]),onClick:function(){handleChannelClick(n)}},[(0,r._)("div",{class:(0,r.C_)(["channel-content",{active:n.key===e.activeKey}])},[(0,r.WI)(t.$slots,"icon",{channelKey:n.key}),(0,r.Uk)(" "+(0,r.zw)(n.label),1)],2)],10,o)}),128))]}),_:3},8,["class"])}}}),l=(0,n(5010).default)(u,[["__scopeId","data-v-21274fc2"]])},40223:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(93328),i=n(16337),a=n(31105),o={class:"scroll-container"},u=(0,r.aZ)({__name:"Index",props:{button:{type:Boolean,default:!0},scrollBar:{type:Boolean,default:!1},scrollRatio:{default:1},snap:{default:"center"},draggable:{type:Boolean,default:!1},scrollDuration:{default:450}},emits:["onScroll","prev","next"],setup:function(e,t){var n=t.emit,u=(0,r.iH)(),l=(0,r.BK)(e),s=l.button,c=l.scrollRatio,d=l.scrollDuration,v=l.draggable,f=(0,r.iH)(!1),p=(0,r.iH)(!0),h=(0,r.iH)(0),g=(0,r.iH)(0),m=(0,r.iH)(0),y=(0,r.iH)(!1),I=(0,r.iH)(0);function prev(){if(!!u.value){n("prev");var e=u.value.scrollLeft-I.value;(0,a.ZP)(e,{getContainer:function(){return u.value},type:"scrollLeft",duration:d.value})}}function next(){if(!!u.value){n("next");var e=u.value.scrollLeft+I.value;(0,a.ZP)(e,{getContainer:function(){return u.value},type:"scrollLeft",duration:d.value})}}function onScroll(){n("onScroll"),u.value&&(m.value=u.value.scrollLeft,f.value=m.value>0,p.value=u.value.scrollWidth>Math.ceil(m.value+u.value.getBoundingClientRect().width))}function handleMouseDown(e){if(!!v.value)h.value=e.pageX,g.value=m.value,y.value=!0}function handleMouseMove(e){if(!!y.value&&null!=u.value&&!!v.value){var t=e.pageX-h.value,n=g.value-t;u.value.scroll(n,0)}}function handleMouseUp(){y.value=!1}function setSize(){var e,t;p.value=(null===(e=u.value)||void 0===e?void 0:e.clientWidth)!==(null===(t=u.value)||void 0===t?void 0:t.scrollWidth)}return(0,r.bv)(function(){var e,t;setSize(),I.value=c.value*(null!==(t=null===(e=u.value)||void 0===e?void 0:e.clientWidth)&&void 0!==t?t:0),(0,i.ORN)(window,"mouseup",handleMouseUp),(0,i.ORN)(window,"resize",setSize)}),function(e,t){return(0,r.wg)(),(0,r.iD)("div",o,[(0,r.SU)(s)&&f.value?((0,r.wg)(),(0,r.iD)("div",{key:0,onClick:(0,r.iM)(prev,["stop"])},[(0,r.WI)(e.$slots,"btnPrev")])):(0,r.kq)("",!0),(0,r.SU)(s)&&p.value?((0,r.wg)(),(0,r.iD)("div",{key:1,onClick:(0,r.iM)(next,["stop"])},[(0,r.WI)(e.$slots,"btnNext")])):(0,r.kq)("",!0),(0,r._)("div",{ref_key:"containerRef",ref:u,class:"content-container",onScrollPassive:onScroll,onMousemove:(0,r.iM)(handleMouseMove,["stop"]),onMousedown:(0,r.iM)(handleMouseDown,["stop"])},[(0,r.WI)(e.$slots,"default")],544)])}}}),l=(0,n(5010).default)(u,[["__scopeId","data-v-da963056"]])},30757:function(e,t,n){"use strict";n.d(t,{Z:function(){return $}}),n(64091),n(51109);var r,i=n(93328),a=n(16337),o=n(66002),u=n(28232),l=n(68284),s=n(8935),c=n(79612);n(87535),n(75204),n(97357),n(34333);var d=n(66398),v=n(13285),f=n(8172),p=n(70879),h=n(27337),g=n(66993);n(43648),n(87394),n(94941),n(48421),n(6045),n(10364),n(67673),n(74719),n(13396),n(91313),n(27461),n(23339),n(87989);var m=n(33114);function normalizeSugItemsMetaData(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=(0,g._)(e);return e.length>=t&&(n=n.slice(0,10)),n.filter(function(e){return null==e?void 0:e.text}).map(function(e){return(0,h._)((0,p._)({},e),{text:e.text,highlightFlags:e.highlightFlags})})}function fotmatHistoryText(e,t){var n=0,r="",i=!0,a=!1,o=void 0;try{for(var u,l=e[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value,c=(0,m.IS)(s)?1:.5;if(n+c>t)return"".concat(r.slice(0,-1),"...");n+=c,r+=s}}catch(e){a=!0,o=e}finally{try{!i&&null!=l.return&&l.return()}finally{if(a)throw o}}return e}n(39520),n(61079),n(75851),n(95474);var y={class:"header"},I={class:"icon-group"},_={key:0},w=["onMousedown"],k=["onMousedown"],S=(0,i.aZ)({__name:"History",emits:["historyClick","clickHader"],setup:function(e,t){var n=t.emit,r=(0,l.R)(),a=(0,o.Jk)(r),u=a.historyList,s=a.searchValue,p=(0,i.iH)(!1),h=(0,i.iH)([]),g=(0,i.iH)(!1),m=(0,i.iH)(!0),S=(0,i.iH)(!1),b=(0,i.iH)([]),M=(0,i.iH)(),L=(0,v.yj)();function handleHistoryListDlete(){p.value?((0,c.f3)("allDelete"),r.clearHistoryList()):((0,c.f3)("enterDelete"),p.value=!0,m.value=!0,g.value=!0)}function handleHistoryDelete(e){(0,c.f3)("singleDelete",{fromPage:L.name}),r.deleteHistory(e)}function handleHistoryListDone(){p.value=!1,g.value=!1,h.value.forEach(function(e){e.displayInfo=void 0})}function handleHistoryClick(e,t){if(!p.value)s.value=e,(0,c.Wm)("click",{objectPosition:t+1,searchWordFromStr:r.sourcePageInstance,recommendSearchWordsStr:e,componentId:"SugHistory",fromPage:L.name}),n("historyClick",e)}function resetHistoryStatus(){p.value=!1,h.value=[],g.value=!1,m.value=!1,S.value=!1}function isDisplay(e){if(g.value)return!0;var t=h.value[e];if(t){var n,r,i=t.top,a=t.left,o=t.displayInfo;if(void 0!==o)return o;if(0===i)return t.displayInfo=!0,!0;if(i>50)return t.displayInfo=!1,!1;var l=(null!==(r=null===(n=M.value)||void 0===n?void 0:n.offsetWidth)&&void 0!==r?r:0)-32-8-10;return i<=50&&a<l?(m.value=e===u.value.length-1,S.value=e!==u.value.length-1,t.displayInfo=!0,!0):(m.value=!1,S.value=!0,t.displayInfo=!1,!1)}return!0}function handleShowAll(){(0,c.f3)("fold",{componentName:S.value?"unfold":"fold"}),S.value=!S.value,g.value=!S.value}return(0,i.bv)(function(){var e;if(!!M.value&&!!b.value)r.initHistory(),null===(e=b.value)||void 0===e||e.forEach(function(e,t){var n=e.offsetTop,i=e.offsetLeft+e.offsetWidth;h.value[t]={top:n,left:i,displayInfo:void 0},(0,(0,f.Z)(function(){(0,c.Wm)("impression",{objectPosition:t+1,searchWordFromStr:r.sourcePageInstance,recommendSearchWordsStr:u.value[t],componentId:"SugHistory",fromPage:L.name})},e).startObserve)()})}),(0,i.SK)(resetHistoryStatus),function(e,t){return(0,i.SU)(u)&&(0,i.SU)(u).length?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"history",onMousedown:t[0]||(t[0]=function(e){return n("clickHader")})},[(0,i._)("div",y,[t[2]||(t[2]=(0,i._)("span",null," 历史记录 ",-1)),(0,i._)("div",I,[(0,i._)("div",{class:(0,i.C_)(["icon-box",{enableDelete:(0,i.SU)(p)}]),onMousedown:handleHistoryListDlete},[(0,i.Wm)((0,i.SU)(d.i8),{size:"16",icon:"delete",class:"icon"}),(0,i.SU)(p)?((0,i.wg)(),(0,i.iD)("span",_,"清空")):(0,i.kq)("",!0)],34),(0,i.SU)(p)?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,i.C_)(["icon-box",{enableDelete:(0,i.SU)(p)}]),onMousedown:handleHistoryListDone},[(0,i.Wm)((0,i.SU)(d.i8),{size:"16",icon:"check_mark",class:"icon"}),t[1]||(t[1]=(0,i.Uk)("完成 "))],34)):(0,i.kq)("",!0)])]),(0,i._)("div",{ref_key:"historyListEl",ref:M,class:"history-list"},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(u),function(e,t){return(0,i.wg)(),(0,i.iD)("div",{key:t,ref_for:!0,ref_key:"hitoryItemEl",ref:b,class:(0,i.C_)(["history-item",{enableDelete:(0,i.SU)(p)}]),style:(0,i.j5)({display:isDisplay(t)?"":"none"}),onMousedown:function(n){return handleHistoryClick(e,t)}},[(0,i.Uk)((0,i.zw)((0,i.SU)(fotmatHistoryText)(e,10))+" ",1),(0,i.SU)(p)?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"close-box",onMousedown:function(e){return handleHistoryDelete(t)}},[(0,i.Wm)((0,i.SU)(d.i8),{size:"12",icon:"close",class:"close-icon"})],40,k)):(0,i.kq)("",!0)],46,w)}),128)),(0,i.SU)(m)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,i.C_)(["chevron-icon",{canSpand:(0,i.SU)(S)}]),onMousedown:handleShowAll},[(0,i.Wm)((0,i.SU)(d.i8),{size:"12",icon:"chevron_down"})],34))],512)],32)):(0,i.kq)("",!0)}}}),b=n(5010);let M=(0,b.default)(S,[["__scopeId","data-v-2e01257c"]]);var L=n(44892),x={class:"header"},T=["src"],D={class:"hotspot-list"},N=["onMousedown"],E={class:"hotspot-index"},R={class:"hotspot-title"},U={class:"text"},P=["src"],F={class:"hotspot-score"},j=(0,i.aZ)({__name:"HotSpot",emits:["hotspot-click","click-header"],setup:function(e,t){var n=t.emit,r=(0,l.R)(),a=(0,o.Jk)(r),u=a.searchValue,s=a.searchHotSpots,d=(0,i.iH)([]);function handleHotspotClick(e,t){(0,c.LY)("click",(0,c.WU)(t,s.value[t])),u.value=e,r.setHotspotSearch(!0),n("hotspot-click",e)}return(0,i.bv)(function(){var e;if(!!d.value)null===(e=d.value)||void 0===e||e.forEach(function(e,t){(0,(0,f.Z)(function(){!e.reported&&(e.reported=!0,(0,c.LY)("impression",(0,c.WU)(t,s.value[t])))},e).startObserve)()})}),function(e,t){return(0,i.SU)(s)&&(0,i.SU)(s).length?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"hotspots",onMousedown:t[0]||(t[0]=function(e){return n("click-header")})},[(0,i._)("div",x,[(0,i._)("img",{class:"header-img",src:(0,i.SU)(L.rU).searchHotspotTitle,crossorigin:"anonymous"},null,8,T)]),(0,i._)("div",D,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(s),function(e,n){return(0,i.wg)(),(0,i.iD)("div",{key:e.id,ref_for:!0,ref_key:"hotspotRef",ref:d,class:"hotspot-item",onMousedown:function(t){return handleHotspotClick(e.title||"",n)}},[(0,i._)("p",E,(0,i.zw)(n+1),1),(0,i._)("div",R,[(0,i._)("span",U,(0,i.zw)(e.title),1),t[1]||(t[1]=(0,i.Uk)()),e.icon?((0,i.wg)(),(0,i.iD)("img",{key:0,src:e.icon,crossorigin:"anonymous"},null,8,P)):(0,i.kq)("",!0)]),(0,i._)("span",F,(0,i.zw)(e.score),1)],40,N)}),128))])],32)):(0,i.kq)("",!0)}}});let O=(0,b.default)(j,[["__scopeId","data-v-119fe976"]]);var H=n(41622),W=n(82726),z=n(377);n(67930),n(58486),n(42876),n(33933);var Z=((r={}).HIDE="hide",r.SHOW="show",r),useSug=function useSug_useSug(e){var t,n=e.searchInputEl,r=e.sugLength,o=e.searchInputValue,u=e.userInput,l=e.suggestDataSource,s=e.forceHotspotSearch,c=(0,i.iH)(Z.HIDE),d=(0,i.Fl)(function(){return normalizeSugItemsMetaData(l.value||[],r)}),v=(0,i.iH)(0),f=(0,i.Fl)(function(){var e,t;return null!==(t=null===(e=d.value)||void 0===e?void 0:e.length)&&void 0!==t?t:0}),p=(0,i.Fl)(function(){return c.value===Z.SHOW&&f.value>0}),h=(0,i.Fl)(function(){return f.value>0?d.value.map(function(e){return null==e?void 0:e.text}):[]}),g=(0,i.iH)(),m=(0,i.iH)(!0);var y=(t=(0,H._)(function(){var e,t,n,r;return(0,z.Jh)(this,function(a){switch(a.label){case 0:if(!(v.value>0))return[3,2];return r=null!==(n=null===(t=d.value)||void 0===t?void 0:null===(e=t[v.value-1])||void 0===e?void 0:e.text)&&void 0!==n?n:"",v.value=0,[4,(0,i.Y3)()];case 1:a.sent(),(null==r?void 0:r.length)&&(o.value=r),a.label=2;case 2:return[2]}})}),function init(){return t.apply(this,arguments)}),selectPrev=function(){0===v.value?v.value=f.value:v.value-=1},selectNext=function(){v.value<f.value?v.value+=1:v.value=0},processkeyboardContrl=function(e){if(0!==f.value){if(void 0!==e.key)"ArrowUp"===e.key?(e.preventDefault(),selectPrev()):"ArrowDown"===e.key&&(e.preventDefault(),selectNext());else if(void 0!==e.keyCode){if(![38,40].includes(e.keyCode))return;switch(e.preventDefault(),e.keyCode){case 38:selectPrev();break;case 40:selectNext()}}}},searchInputFocusHandler=function(){g.value=(0,a.ORN)(n,"keydown",processkeyboardContrl),e.getSuggestion(u.value,s.value),c.value=Z.SHOW},searchInputBlurHandler=function(){var e,t;if(!m.value){m.value=!0,null==n||null===(t=n.focus)||void 0===t||t.call(n);return}c.value=Z.HIDE,null===(e=g.value)||void 0===e||e.call(g),y()},handleShowSugListener=function(){(0,a.ORN)(n,"focus",searchInputFocusHandler)},handleHideSugListener=function(){(0,a.ORN)(n,"blur",searchInputBlurHandler)};return(0,i.bv)(function(){n===document.activeElement&&u.value&&(e.getSuggestion(u.value,s.value),c.value=Z.SHOW),handleShowSugListener(),handleHideSugListener()}),(0,i.YP)(v,function(e){var t,n;if(0===e){o.value=u.value;return}o.value=null!==(n=null===(t=d.value[e-1])||void 0===t?void 0:t.text)&&void 0!==n?n:""}),(0,i.YP)([d,p],function(t){var n=(0,W._)(t,2),r=n[0],i=n[1];f.value>0&&i&&(v.value=0,r.forEach(function(t,n){var r,i;return null==e?void 0:null===(r=e.impression)||void 0===r?void 0:r.call(e,n,h.value,null!==(i=null==t?void 0:t.text)&&void 0!==i?i:"",t)}))},{immediate:!0,deep:!0}),{isShowSug:p,suggestions:d,selectedIndex:v,processkeyboardContrl:processkeyboardContrl,handleClickSugItem:function(t,r){r.preventDefault(),v.value=t+1,n.blur();var i,a,u,l,s,c=null!==(s=null===(a=d.value)||void 0===a?void 0:null===(i=a[t])||void 0===i?void 0:i.text)&&void 0!==s?s:"";(null==c?void 0:c.length)&&(o.value=c),e.clearSugs(),e.sugClickHook(t+1,h.value,o.value,null===(u=d.value)||void 0===u?void 0:u[t]),e.search(null===(l=d.value)||void 0===l?void 0:l[t])},isEnableSearchInputBlur:m}},q={class:"sug-box"},V={class:"sug-wrapper"},Y=["onMousedown"],G={key:0,class:"sug-text"},J={key:1},Q={key:0},K={key:1},X=(0,i.aZ)({__name:"Sug",props:{searchInputEl:{},maxLength:{default:10},userInput:{},suggestDataSource:{}},emits:["search","getSuggestion","clearSugs"],setup:function(e,t){var n=t.emit,r=(0,l.R)(),d=(0,l.P)(),f=(0,v.yj)(),p=(0,o.Jk)(r),h=p.searchValue,g=p.sugType,m=p.queryTrendingInfo,y=p.queryTrendingFetched,I=p.searchHotSpots,_=p.forceHotspotSearch,w=(0,i.iH)(),k=(0,i.Fl)(function(){return e.userInput}),S=(0,i.Fl)(function(){return e.suggestDataSource}),b=(0,i.iH)();function reportSugClick(e,t,n,r){"queryTrending"===g.value?(0,c._l)("click",(0,c.KU)(e,n,r,f.name),r):(0,c.$I)("click",r,(0,c.IP)(k.value,t,n,e,f.name,r))}function impression(e,t,n,r){"queryTrending"===g.value&&y.value?(0,c._l)("impression",(0,c.KU)(e,n,r,f.name),r):(0,c.$I)("impression",r,(0,c.IP)(k.value,t,n,e,f.name,r))}var L=useSug({searchInputEl:e.searchInputEl,sugLength:e.maxLength,searchInputValue:h,userInput:k,suggestDataSource:S,search:function(e){return n("search",e)},getSuggestion:function(e,t){return n("getSuggestion",e,t)},sugClickHook:reportSugClick,impression:impression,clearSugs:function(){return n("clearSugs")},forceHotspotSearch:_}),x=L.isShowSug,T=L.suggestions,D=L.handleClickSugItem,N=L.selectedIndex,E=L.isEnableSearchInputBlur,R=(0,i.iH)(!1);(0,i.YP)(k,function(e){!e&&!R.value&&r.setQueryTrendingWithBack()});var U=(0,i.iH)(!1),P=(0,i.iH)(!1);function clickHeader(){E.value=!1}return(0,i.bv)(function(){d.onFocus(function(t){var n,i=t.scrollToHotspot;P.value=!0,r.suggestions=[],null===(n=e.searchInputEl)||void 0===n||n.focus(),i&&(U.value=!0)}),e.searchInputEl&&((0,a.ORN)(e.searchInputEl,"compositionstart",function(){R.value=!0}),(0,a.ORN)(e.searchInputEl,"compositionend",function(){R.value=!1}))}),(0,i.YP)(x,function(e){e&&U.value&&(0,i.Y3)(function(){var e,t;null===(t=w.value)||void 0===t||t.scrollTo(0,(null===(e=b.value)||void 0===e?void 0:e.offsetTop)||0),U.value=!1}),!e&&P.value&&(r.suggestions=[],y.value=!1,I.value=[],P.value=!1)}),function(e,t){var r;return(0,i.SU)(x)?((0,i.wg)(),(0,i.iD)("div",{key:0,ref_key:"sugPadRef",ref:w,class:(0,i.C_)(["sug-container-wrapper",{"query-trending":"queryTrending"===(0,i.SU)(g)&&(0,i.SU)(I).length}])},[(0,i._)("div",{class:(0,i.C_)(["sug-container",{"query-trending":"queryTrending"===(0,i.SU)(g)&&(0,i.SU)(I).length}])},["queryTrending"===(0,i.SU)(g)&&(0,i.SU)(T)?((0,i.wg)(),(0,i.j4)(M,{key:0,onHistoryClick:t[0]||(t[0]=function(e){return n("search",{})}),onClickHader:clickHeader})):(0,i.kq)("",!0),(0,i._)("div",q,["queryTrending"===(0,i.SU)(g)&&(0,i.SU)(T)?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"header",onMousedown:clickHeader},(0,i.zw)(null===(r=(0,i.SU)(m))||void 0===r?void 0:r.title),33)):(0,i.kq)("",!0),(0,i._)("div",V,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(T),function(e,t){var n;return(0,i.wg)(),(0,i.iD)("div",{key:e.text,class:(0,i.C_)(["sug-item",{"query-trending":"queryTrending"===(0,i.SU)(g),"query-trending hotspot":"queryTrending"===(0,i.SU)(g)&&(0,i.SU)(I).length,"query-trending selected":"queryTrending"===(0,i.SU)(g)&&t===(0,i.SU)(N)-1,"selected-sug":t===(0,i.SU)(N)-1,"sug-user":"user_detail"===e.type}]),onMousedown:function(e){return(0,i.SU)(D)(t,e)}},["queryTrending"===(0,i.SU)(g)&&e?((0,i.wg)(),(0,i.iD)("div",G,[(0,i.Uk)((0,i.zw)(e.text)+" ",1),e.styleType?((0,i.wg)(),(0,i.iD)("span",{key:0,class:(0,i.C_)(["sug-style",e.styleType])},(0,i.zw)((0,i.SU)(s.TN)[e.styleType]),3)):(0,i.kq)("",!0)])):(0,i.kq)("",!0),"inputSug"===(0,i.SU)(g)&&e?((0,i.wg)(),(0,i.iD)("div",J,["user_detail"===e.type&&e.user?((0,i.wg)(),(0,i.iD)("div",Q,[(0,i.Wm)(u.Z,{type:"sug","user-info":e.user},null,8,["user-info"])])):((0,i.wg)(),(0,i.iD)("div",K,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Array.from(null!==(n=null==e?void 0:e.text)&&void 0!==n?n:""),function(t,n){var r;return(0,i.wg)(),(0,i.iD)("span",{key:n,class:(0,i.C_)({highlight:null==e?void 0:null===(r=e.highlightFlags)||void 0===r?void 0:r[n]})},(0,i.zw)(t),3)}),128))]))])):(0,i.kq)("",!0)],42,Y)}),128))])]),(0,i._)("div",{ref_key:"hotspotRef",ref:b},["queryTrending"===(0,i.SU)(g)?((0,i.wg)(),(0,i.j4)(O,{key:0,onHotspotClick:t[1]||(t[1]=function(e){return n("search",{})}),onClickHeader:clickHeader})):(0,i.kq)("",!0)],512)],2)],2)):(0,i.kq)("",!0)}}}),$=(0,b.default)(X,[["__scopeId","data-v-7e30ebe8"]])},11200:function(e,t,n){"use strict";n.d(t,{Z:function(){return ew}});var r=n(41622),i=n(377);n(85203),n(86651),n(6045),n(10364),n(67673),n(97553),n(97542);var a=n(93328),o=n(60506),u=n(51899),l=n.n(u),s=n(66993),c=n(13285),d=n(86057),v=n(68284),f=n(99505),p=n(75383),h=n(49802),g=n(48001),m=n(10944),y=n(79612),I=n(14546),_=n(56946);n(43648),n(87535),n(75204),n(97357),n(34333),n(87989);var w=n(66398);function useTrackerPoint(e){var t=(0,v.R)(),n=(0,c.yj)();function runReportHistoryImpressionPoint(){if(0!==e.historyList.value.length)e.historyList.value.forEach(function(e,r){(0,y.Wm)("impression",{objectPosition:r+1,searchWordFromStr:t.sourcePageInstance||"AiExploreAiSugHistory",recommendSearchWordsStr:e.text,componentId:"AiSugHistory",fromPage:n.name})})}(0,a.YP)(e.visible,function(e){e&&(0,a.Y3)(function(){runReportHistoryImpressionPoint()})},{immediate:!0})}var k={key:0,class:"ai-sug-history-container"},S={class:"history-header"},b={class:"history-actions"},M={key:1,class:"history-action-btn-group"},L={class:"history-list"},x=["onClick"],T=["title"],D={class:"history-text"},N={class:"suggestion-list"},E=["onClick"],R={class:"suggestion-content"},U={class:"suggestion-content-title"},P=["src","alt"],F=["innerHTML"],j={class:"suggestion-desc"},O=(0,a.aZ)({__name:"AiSugHistory",props:{historyList:{default:function(){return[]}},suggestionList:{},visible:{type:Boolean,default:!1}},emits:["historyClick","suggestionClick","deleteHistory","clearAll"],setup:function(e,t){var n=t.emit,r=(0,c.yj)(),i=(0,v.R)(),o=(0,a.iH)(!1),u=(0,a.Fl)(function(){return e.historyList.slice(0,8)});useTrackerPoint({visible:(0,a.Fl)(function(){return e.visible}),historyList:u});var l=(0,a.Fl)(function(){return u.value.length>0});function getHistoryKey(e,t){var n;return null!==(n=e.id)&&void 0!==n?n:t}function handleHistoryClick(e,t){(0,f.uk)(y.pD.history.click,{objectPosition:t+1,searchWordFromStr:i.sourcePageInstance||"AiExploreAiSugHistory",recommendSearchWordsStr:e.text,fromPage:r.name,componentId:"AiSugHistory"}),n("historyClick",e,t)}function handleSuggestionClick(e,t){(0,y._l)("click",(0,y.KU)(t,e.title,{searchWord:e.searchWord,type:"aiQueryTrending"},r.name,{searchWordFromStr:"AiExploreAiSugHistory",wordRequestId:"wordRequestId_".concat(Date.now())}),{searchWord:e.searchWord,type:"aiQueryTrending"}),n("suggestionClick",e,t)}function handleDeleteHistory(e,t){n("deleteHistory",e,t)}function handleClearAll(){n("clearAll")}return(0,a.YP)(function(){return e.visible},function(t){var n;t&&(null===(n=e.suggestionList)||void 0===n?void 0:n.length)>0&&e.suggestionList.forEach(function(e,t){(0,y._l)("impression",(0,y.KU)(t,e.title,{searchWord:e.searchWord,type:"aiQueryTrending"},r.name,{searchWordFromStr:"AiExploreAiSugHistory",wordRequestId:"wordRequestId_".concat(Date.now())}),{searchWord:e.searchWord,type:"aiQueryTrending"})})},{immediate:!0}),function(e,t){var n,r;return e.visible?((0,a.wg)(),(0,a.iD)("div",k,[l.value?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,a.C_)(["history-section",{"no-suggestion":(null===(n=e.suggestionList)||void 0===n?void 0:n.length)===0}])},[(0,a._)("div",S,[t[3]||(t[3]=(0,a._)("span",{class:"history-title"},"历史记录",-1)),(0,a._)("div",b,[o.value?((0,a.wg)(),(0,a.iD)("div",M,[(0,a._)("span",{class:"action-btn",onClickCapture:(0,a.iM)(handleClearAll,["stop"])},"清空",32),t[2]||(t[2]=(0,a._)("div",{class:"history-action-btn-divider"},null,-1)),(0,a._)("span",{class:"action-btn",onClick:t[1]||(t[1]=(0,a.iM)(function(e){return o.value=!1},["stop"]))},"完成")])):((0,a.wg)(),(0,a.j4)((0,a.SU)(w.i8),{key:0,class:"history-action-icon",size:"20",icon:"delete",onClick:t[0]||(t[0]=(0,a.iM)(function(e){return o.value=!0},["stop"]))}))])]),(0,a._)("div",L,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(u.value,function(e,t){return(0,a.wg)(),(0,a.iD)("div",{key:getHistoryKey(e,t),class:"history-item",onClick:function(n){return handleHistoryClick(e,t)}},[(0,a._)("div",{class:"history-item-content",title:e.text},[(0,a.Wm)((0,a.SU)(w.i8),{class:"history-icon",size:"20",icon:"history"}),(0,a._)("span",D,(0,a.zw)(e.text),1)],8,T),o.value?((0,a.wg)(),(0,a.j4)((0,a.SU)(w.i8),{key:0,class:"history-item-delete-icon",size:"16",icon:"close",title:"删除",onClick:(0,a.iM)(function(n){return handleDeleteHistory(e,t)},["stop"])},null,8,["onClick"])):(0,a.kq)("",!0)],8,x)}),128))])],2)):(0,a.kq)("",!0),(null===(r=e.suggestionList)||void 0===r?void 0:r.length)>0?((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,a.C_)(["suggestion-section",{"full-width":!l.value}])},[t[4]||(t[4]=(0,a._)("div",{class:"suggestion-header"},[(0,a._)("span",{class:"suggestion-title"},"猜你想搜")],-1)),(0,a._)("div",N,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.suggestionList,function(e,t){return(0,a.wg)(),(0,a.iD)("div",{key:t,class:"suggestion-item",onClick:function(n){return handleSuggestionClick(e,t)}},[(0,a._)("div",R,[(0,a._)("div",U,[e.icon?((0,a.wg)(),(0,a.iD)("img",{key:0,src:e.icon,alt:e.title,class:"suggestion-title-img"},null,8,P)):(0,a.kq)("",!0),(0,a._)("span",{class:"suggestion-title-text",innerHTML:e.title},null,8,F)]),(0,a._)("div",j,(0,a.zw)(e.desc),1)])],8,E)}),128))])],2)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)}}}),H=n(5010);let W=(0,H.default)(O,[["__scopeId","data-v-ee78f442"]]);var z={key:0,class:"ai-sug-history-divider"},Z={key:1,class:"ai-dropdown-panel panel"},q=(0,a.aZ)({__name:"AiSugHistoryPanel",props:{visible:{type:Boolean},showGuideWords:{type:Boolean},guideWordsData:{},showSugHistory:{type:Boolean},showSug:{type:Boolean},suggestions:{},isFocused:{type:Boolean},inputWord:{},fileId:{},size:{},handleKeySelect:{type:Function},handleItemClick:{type:Function}},setup:function(e){var t=(0,v.R)(),n=(0,m.K)(),r=(0,c.yj)();function handleDeleteHistory(e){(0,y.f3)("singleDelete",{fromPage:r.name}),n.deleteHistory(e)}return function(e,r){var i,o,u,l;return(0,a.wg)(),(0,a.iD)(a.HY,null,[e.visible?((0,a.wg)(),(0,a.iD)("div",z)):(0,a.kq)("",!0),e.visible?((0,a.wg)(),(0,a.iD)("div",Z,[e.showGuideWords?((0,a.wg)(),(0,a.j4)(I.Z,{key:0,class:"ai-might-ask-container","show-title":!1,title:null===(i=e.guideWordsData)||void 0===i?void 0:i.title,list:(null===(o=e.guideWordsData)||void 0===o?void 0:o.guides.map(function(e){return{text:e,id:e}}))||[],"file-id":e.fileId,onHandleKeySelect:r[0]||(r[0]=function(t){return e.handleKeySelect(null==t?void 0:t.text)}),onClick:r[1]||(r[1]=function(t){return e.handleItemClick(t.text)})},null,8,["title","list","file-id"])):(0,a.kq)("",!0),(0,a.Wm)(_.Z,{visible:e.showSug,suggestions:e.suggestions,"input-word":e.inputWord,"max-length":8,"file-id":e.fileId,onHandleKeySelect:r[2]||(r[2]=function(t){return e.handleKeySelect(null==t?void 0:t.text)}),onSelect:r[3]||(r[3]=function(t){return e.handleItemClick(null==t?void 0:t.text)})},null,8,["visible","suggestions","input-word","file-id"]),(0,a.Wm)(W,{visible:e.showSugHistory,"suggestion-list":(null===(l=(0,a.SU)(t))||void 0===l?void 0:null===(u=l.queryTrendingInfo)||void 0===u?void 0:u.aiWords)||[],"history-list":(0,a.SU)(n).historyList,onSuggestionClick:r[4]||(r[4]=function(t){return e.handleItemClick(t.searchWord)}),onHistoryClick:r[5]||(r[5]=function(t){return e.handleItemClick(t.text)}),onDeleteHistory:r[6]||(r[6]=function(e){return handleDeleteHistory(e.text)}),onClearAll:(0,a.SU)(n).clearHistory},null,8,["visible","suggestion-list","history-list","onClearAll"])])):(0,a.kq)("",!0)],64)}}});let V=(0,H.default)(q,[["__scopeId","data-v-1a00e049"]]);var Y=n(65315),G=n(44243),J=n(63176),Q=n(70879),K=n(27337);n(87394),n(94941),n(48421);var X=n(18879),$=n(66002);function useSugHistory(e,t){var n=(0,v.R)(),r=(0,m.K)(),i=(0,$.Jk)(n).suggestions,o=(0,X.W)((0,K._)((0,Q._)({},t),{isGenerating:(0,a.iH)(!1),aiInputInHeader:(0,a.iH)(!0)})),u=o.showGuideWords,l=o.guideWordsData,s=(0,a.Fl)(function(){return t.inputWord.value.trim().length>0||t.imageList.value.filter(function(e){return!!e.fileId}).length>0}),c=(0,a.Fl)(function(){var e=i.value.length>0;return!u.value&&t.isFocused.value&&t.inputWord.value.trim().length>0&&e}),d=(0,a.Fl)(function(){var i,a;return"large"===e.size&&!c.value&&t.isFocused.value&&!s.value&&e.showSugHistory&&(!!(null==n?void 0:null===(a=n.queryTrendingInfo)||void 0===a?void 0:null===(i=a.aiWords)||void 0===i?void 0:i.length)||!!r.historyList.length)}),f=(0,a.Fl)(function(){return t.showSugHistoryProp.value&&(u.value||c.value||d.value)});return{suggestions:i,showSug:c,showSugHistory:d,guideWordsData:l,showGuideWords:u,showPanel:f}}var ee=n(57975),et=n(6890),en={key:0,class:"ai-search-img-preview-wrapper"},er={class:"textarea-wrapper"},ei=["value","placeholder"],ea={class:"bottom-box"},eo={class:"bottom-box-left"},eu={class:"bottom-box-right"},el={class:"bottom-box-right-submit-button"},es=(0,a.aZ)({__name:"AiHeaderInput",props:{modelValue:{default:""},placeholder:{default:"搜索或输入任何问题"},inputId:{default:"search-input"},size:{default:"large"},showSugHistory:{type:Boolean}},emits:["update:modelValue","focus","input","submit","blur"],setup:function(e,t){var n=this,r=t.expose,i=t.emit,u=(0,a.BK)(e),l=u.size,m=u.showSugHistory,y=u.modelValue,I=(0,c.yj)(),_=(0,a.iH)(null),w=(0,et.s6)(),k=(0,a.Fl)(function(){var e;return null==w?void 0:null===(e=w.appSettings)||void 0===e?void 0:e.aiSearchConfig}),S=(0,v.R)(),b=(0,Y.L)().imageList,M=(0,J.a)({imageList:b}),L=M.acrosssWebText,x=M.webOptTooltipContent,T=M.imageOptTooltipContent,D=(0,p.F)({imageList:b,inputWord:y,textareaEl:_}),N=D.isDragOver,E=D.handleDragOver,R=D.handleDrop,U=D.handleFileUploadData,P=D.handleDragLeave,F=D.handleImgUploadSuccess,j=(0,G.y)(e,{textareaEl:_,imageList:b,emit:i,handleFileUploadData:U}),O=j.textareaContainerEl,H=j.isSubmitting,W=j.isFocused,z=j.inputWord,Z=j.handleInput,q=j.handleFocus,Q=j.handleBlur,K=j.handleItemClick,X=j.handleKeySelect,$=j.onKeyDown,es=j.handlePaste,ec=j.submit,ed=j.handleImgUploadClick,ev=j.handleContainerClick,ef=useSugHistory(e,{inputWord:z,isFocused:W,imageList:b,showSugHistoryProp:m}),ep=ef.showPanel,eh=ef.showSugHistory,eg=ef.showSug,em=ef.showGuideWords,ey=ef.guideWordsData;function handleAcrosssWebClick(){S.aiAcrosssWebActivedFromHeaderInput=!S.aiSearchAcrosssWeb,S.aiSearchAcrosssWeb=!S.aiSearchAcrosssWeb,(0,f.uk)(89834,{fromPage:I.name})}return r({focus:function(){_.value&&_.value.focus()},blur:function(){_.value&&_.value.blur()}}),(0,a.bv)(function(){_.value&&(_.value.value=e.modelValue||"")}),function(e,t){var r,i,u,c,v,f;return(0,a.wg)(),(0,a.iD)("div",{ref_key:"textareaContainerEl",ref:O,class:(0,a.C_)(["textarea-container",{"textarea-container-small":"small"===(0,a.SU)(l),"textarea-container-mini":"mini"===(0,a.SU)(l),"textarea-container-when-history-visible":(0,a.SU)(ep),"textarea-container-drag-over":(0,a.SU)(N)}]),onClick:t[10]||(t[10]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.SU)(ev)&&(0,a.SU)(ev).apply(n,(0,s._)(t))})},["large"===(0,a.SU)(l)&&(null===(r=(0,a.SU)(b))||void 0===r?void 0:r.length)>0?((0,a.wg)(),(0,a.iD)("div",en,[(0,a.Wm)(d.Z,{modelValue:(0,a.SU)(b),"onUpdate:modelValue":t[0]||(t[0]=function(e){return(0,a.dq)(b)?b.value=e:null})},null,8,["modelValue"])])):(0,a.kq)("",!0),(0,a._)("div",er,[(0,a._)("textarea",{ref_key:"textareaEl",ref:_,value:(0,a.SU)(z),name:"aiSearchTextarea",class:"textarea",placeholder:e.placeholder,onKeydown:t[1]||(t[1]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.SU)($)&&(0,a.SU)($).apply(n,(0,s._)(t))}),onInput:t[2]||(t[2]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.SU)(Z)&&(0,a.SU)(Z).apply(n,(0,s._)(t))}),onFocus:t[3]||(t[3]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.SU)(q)&&(0,a.SU)(q).apply(n,(0,s._)(t))}),onBlur:t[4]||(t[4]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.SU)(Q)&&(0,a.SU)(Q).apply(n,(0,s._)(t))}),onPaste:t[5]||(t[5]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.SU)(es)&&(0,a.SU)(es).apply(n,(0,s._)(t))}),onDragover:t[6]||(t[6]=(0,a.iM)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.SU)(E)&&(0,a.SU)(E).apply(n,(0,s._)(t))},["prevent"])),onDrop:t[7]||(t[7]=(0,a.iM)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.SU)(R)&&(0,a.SU)(R).apply(n,(0,s._)(t))},["prevent"])),onDragleave:t[8]||(t[8]=(0,a.iM)(function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.SU)(P)&&(0,a.SU)(P).apply(n,(0,s._)(t))},["prevent"]))},null,40,ei)]),(0,a._)("div",ea,[(0,a._)("div",eo,[(0,a.Wm)(ee.Z,{visible:"large"===(0,a.SU)(l)&&!!(null===(u=k.value)||void 0===u?void 0:null===(i=u.acrosssWebConfig)||void 0===i?void 0:i.enable),"tooltip-content":(0,a.SU)(x),active:null===(c=(0,a.SU)(S))||void 0===c?void 0:c.aiSearchAcrosssWeb,text:(0,a.SU)(L),disabled:(0,a.SU)(b).length>0,onClick:handleAcrosssWebClick},null,8,["visible","tooltip-content","active","text","disabled"])]),(0,a._)("div",eu,[(0,a.Wm)(h.Z,{modelValue:(0,a.SU)(b),"onUpdate:modelValue":t[9]||(t[9]=function(e){return(0,a.dq)(b)?b.value=e:null}),visible:"large"===(0,a.SU)(l),"tooltip-content":(0,a.SU)(T),disabled:null===(v=(0,a.SU)(S))||void 0===v?void 0:v.aiSearchAcrosssWeb,onUploadSuccess:(0,a.SU)(F),onImgUploadClick:(0,a.SU)(ed)},null,8,["modelValue","visible","tooltip-content","disabled","onUploadSuccess","onImgUploadClick"]),(0,a._)("div",el,[(0,a.Wm)(g.Z,{disabled:!(null===(f=(0,a.SU)(z))||void 0===f?void 0:f.length)&&0===(0,a.SU)(b).length,status:(0,a.SU)(H)?"submitting":"idle",onSubmit:(0,a.SU)(ec)},null,8,["disabled","status","onSubmit"])])])]),(0,a.Wm)(o.Z,null,{default:(0,a.w5)(function(){var e,t;return[(0,a.Wm)(V,{visible:(0,a.SU)(ep),"show-sug-history":(0,a.SU)(eh),"show-sug":(0,a.SU)(eg),suggestions:(0,a.SU)(S).suggestions,"show-guide-words":(0,a.SU)(em),"guide-words-data":(0,a.SU)(ey),"input-word":(0,a.SU)(z),"is-focused":(0,a.SU)(W),size:(0,a.SU)(l),"file-id":null===(t=(0,a.SU)(b))||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.fileId,"show-sug-history-prop":(0,a.SU)(m),"handle-item-click":(0,a.SU)(K),"handle-key-select":(0,a.SU)(X)},null,8,["visible","show-sug-history","show-sug","suggestions","show-guide-words","guide-words-data","input-word","is-focused","size","file-id","show-sug-history-prop","handle-item-click","handle-key-select"])]}),_:1})],2)}}});let ec=(0,H.default)(es,[["__scopeId","data-v-1d0f3bc7"]]);var ed=n(30757),ev=n(71852),ef=n(98413),ep=n(10409),eh=n(8048),eg=n(67156),em=n(91547),ey=n(92141);n(81162),n(61079),n(8846);var eI=n(85537),e_=(0,a.aZ)({__name:"AISearch",props:{inputId:{},isSearchBoxInContent:{type:Boolean},forceSize:{},showSugHistory:{type:Boolean}},emits:["toShowOtherHeaderElement","focus","blur"],setup:function(e,t){var n,u=t.expose,s=t.emit,d=(0,a.BK)(e),p=d.inputId,h=d.isSearchBoxInContent,g=(0,eI.L)(),m=(0,eh.r0)(),I=(0,v.R)(),_=(0,et.s6)(),w=(0,ep.j)(),k=(0,v.P)(),S=(0,$.Jk)(I),b=S.searchContext,M=S.searchValue,L=S.userInputSugTrigger,x=S.suggestions,T=S.hintWord,D=S.sugType,N=S.queryTrendingFetched,E=(0,c.yj)(),R=(0,c.tv)(),U=(0,ev.C)().disableSearchHint,P=(0,a.iH)(),F=(0,a.iH)(),j=(0,a.iH)(!1),O=(0,a.iH)("");(0,ey.n)(O);var H=(0,a.Fl)(function(){var e;return U.value?"":g.loggedIn?null===(e=T.value)||void 0===e?void 0:e.title:"登录探索更多内容"});function handleInputFocus(){L.value=M.value,s("focus"),g.loggedIn?(0,f.uk)(30357,{fromPage:E.name}):(0,f.uk)(30356,{fromPage:E.name})}function handleInputBlur(){s("blur")}function handleSearchActivity(e){if("artificial"===e.type&&!!e.link){var t=e.link;if(w.getJumpType(t)===eg.jU.default)var n=setTimeout(function(){w.openActivityPanel(t),clearTimeout(n)},2e3);else window.open(e.link)}}function setEmptySearchValue(){var e;return M.value=null!==(e=T.value.searchWord)&&void 0!==e?e:"小红书网页版",M.value}var W=l()((n=(0,r._)(function(e,t){var n,r;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return r=""===e.trim()?setEmptySearchValue():e,L.value=M.value,[4,g.getUserInfo()];case 1:if(i.sent(),!g.loggedIn)return m.openLogin(eh.yC.SearchBox),[2];if(I.initSuggestions(),null===(n=P.value)||void 0===n||n.blur(),em.A.updateState(em.T.searchCount,function(e){return(null!=e?e:0)+1}),handleSearchActivity(t),E.name===ef.Z.AISearchName&&I.searchContext.keyword===r)return k.emitSearchStart(r),[2];return b.value.keyword=r,I.isSearchFromAiInput=!0,R.push({name:ef.Z.AISearchName,query:{keyword:encodeURIComponent(r),source:_.currentPageInstance}}).then(function(){_.aiSearchMode=et.L9.LARGE}),D.value=null,[2]}})}),function(e,t){return n.apply(this,arguments)}),500,{leading:!0,trailing:!1});function reportSugRelatedInfo(e,t){"queryTrending"===D.value?(0,y._l)("click",(0,y.KU)(e,M.value,t,E.name),t):(0,y.$I)("click",t,(0,y.IP)(M.value,x.value.map(function(e){return null==e?void 0:e.text}),M.value,e,E.name,t))}function userActiveSearch(e){var t=x.value.findIndex(function(e){return e.text===M.value}),n=t>=0?x.value[t]:{};if(t>=0)n=x.value[t],reportSugRelatedInfo(t,n);else if(M.value){var r,i=null!==(r=M.value)&&void 0!==r?r:"小红书网页版";(0,y.Pp)(e,i,E.name)}else n=T.value,(0,y.km)("click",(0,y.z7)(E.name),n);W(e,n)}function handleSubmit(e){userActiveSearch(e)}function handleUserInput(e,t){var n;k.emitInput(null!==(n=null==t?void 0:t.trim())&&void 0!==n?n:"")}function setupLoginEmitter(){if(g.loggedIn){I.isSearchFromAiInput=!0,I.getSuggestions(M.value);return}var e=g.$mitt.on("onLogin",(0,r._)(function(){return(0,i.Jh)(this,function(t){switch(t.label){case 0:return I.isSearchFromAiInput=!0,[4,g.getUserInfo()];case 1:return t.sent(),I.getSuggestions(M.value),m.recentFrom===eh.yC.SearchBox&&E.name!==ef.Z.AISearchName&&userActiveSearch(M.value),e(),[2]}})}));!g.loggedIn&&(0,f.uk)(30355,{fromPage:E.name})}function initializeSearchValue(){if(E.path.startsWith(ef.Z.AISearchPath))try{var e,t;M.value=null!==(t=decodeURIComponent(null===(e=E.query)||void 0===e?void 0:e.keyword))&&void 0!==t?t:""}catch(e){M.value=""}E.name===ef.Z.AISearchName&&(O.value=M.value)}return(0,a.YP)(function(){return E.name},function(e){if(e===ef.Z.AISearchName||e===ef.Z.AISearchNoteName){var t,n=(null==E?void 0:E.query.keyword)||b.value.keyword;if(n)try{M.value=null!==(t=decodeURIComponent(n))&&void 0!==t?t:""}catch(e){M.value=""}b.value.keyword=M.value;return}M.value=""}),(0,a.bv)(function(){setupLoginEmitter(),initializeSearchValue(),k.emitBeforeFocus(),h.value&&(0,f.uk)(89833,{fromPage:E.name})}),(0,c.ao)(function(e,t,n){e.name===ef.Z.AISearchName&&(I.searchPageHasPrevRoute=!0),I.initSuggestions(),N.value=!1,n()}),u({get el(){return F.value}}),function(e,t){return(0,a.wg)(),(0,a.iD)("div",{ref_key:"inputWrapperEl",ref:F,class:(0,a.C_)(["input-box",{"search-box-in-content":(0,a.SU)(h)}])},[(0,a.Wm)(ec,{id:(0,a.SU)(p)||"search-input",ref_key:"inputEl",ref:P,modelValue:(0,a.SU)(M),"onUpdate:modelValue":t[0]||(t[0]=function(e){return(0,a.dq)(M)?M.value=e:null}),type:"text",class:(0,a.C_)(["search-input",{minWidthShowSearchClass:(0,a.SU)(j),large:"large"===e.forceSize}]),size:e.forceSize,placeholder:(0,a.SU)(H),"show-sug-history":e.showSugHistory,autocomplete:"off",onFocus:handleInputFocus,onBlur:handleInputBlur,onSubmit:handleSubmit,onInput:handleUserInput},null,8,["id","modelValue","size","class","placeholder","show-sug-history"]),(0,a.Wm)(o.Z,null,{default:(0,a.w5)(function(){return[(0,a.Wm)(ed.Z,{class:(0,a.C_)(["sug-pad",{minWidthShowSearchClass:(0,a.SU)(j)}]),"suggest-data-source":(0,a.SU)(I).suggestions,"max-length":10,"user-input":(0,a.SU)(O),"search-input-el":(0,a.SU)(P),onSearch:t[1]||(t[1]=function(e){return(0,a.SU)(W)((0,a.SU)(M),e)}),onGetSuggestion:t[2]||(t[2]=function(e,t){return(0,a.SU)(I).getSuggestions(e,t)}),onClearSugs:(0,a.SU)(I).initSuggestions},null,8,["class","suggest-data-source","user-input","search-input-el","onClearSugs"])]}),_:1})],2)}}}),ew=(0,H.default)(e_,[["__scopeId","data-v-ad959626"]])},36942:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(66993);n(29112),n(67275),n(59989),n(7099),n(27461),n(23339),n(51109),n(34333),n(67930),n(58486);var i=n(93328),a=n(64732),o=n(41622),u=n(377);n(36277);var l=n(66398),s=n(51899),c=n.n(s);n(62606),n(35528);var d={class:"course-video"},v={class:"course-content"},f={class:"flex-center"},p=(0,i.aZ)({__name:"CouserPlay",setup:function(e){var t=(0,i.iH)(),r=(0,i.iH)(),a=(0,i.iH)(!1),s=c()(function(e){var t,n;e?null===(t=r.value)||void 0===t||t.play():null===(n=r.value)||void 0===n||n.goToAndStop(0,!1),a.value=e},250,{leading:!0,trailing:!0});return(0,i.bv)((0,o._)(function(){var e;return(0,u.Jh)(this,function(i){switch(i.label){case 0:return[4,n.e("395").then(n.t.bind(n,48572,23))];case 1:if(r.value=i.sent(),!t.value)return[2];return null===(e=r.value)||void 0===e||e.loadAnimation({container:t.value,loop:!0,autoplay:!1,name:"scan_tutorial",path:"https://fe-video-qc.xhscdn.com/fe-platform/24efe715cd80441a3571b1202e87c152dbfbc160.json?attname=fe-platform/24efe715cd80441a3571b1202e87c152dbfbc160.json.json"}),[2]}})})),function(e,n){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.wy)((0,i._)("div",d,[(0,i._)("div",{ref_key:"tutorialRef",ref:t,class:"animate"},null,512)],512),[[i.F8,a.value]]),(0,i.wy)((0,i._)("div",v,[(0,i.WI)(e.$slots,"default")],512),[[i.F8,!a.value]]),(0,i._)("div",f,[(0,i._)("div",{class:(0,i.C_)(["course-trigger",{tutorial:a.value}]),onClick:n[0]||(n[0]=function(e){return(0,i.SU)(s)(!a.value)}),onMouseenter:n[1]||(n[1]=function(e){return(0,i.SU)(s)(!0)}),onMouseleave:n[2]||(n[2]=function(e){return(0,i.SU)(s)(!1)})},[(0,i.Wm)((0,i.SU)(l.i8),{size:"11",icon:a.value?"pause":"play",class:"play"},null,8,["icon"]),n[3]||(n[3]=(0,i.Uk)(" 小红书如何扫码 "))],34)])])}}}),h=n(5010);let g=(0,h.default)(p,[["__scopeId","data-v-23ff9ac6"]]);n(86651),n(72169),n(87989);var m=n(47658),y=n(98413);function getNoteType(e){return a.dJ.get("/api/sns/h5/v1/note_info",{params:{noteId:e}})}var I=n(94186),_=n(33114),w=n(99505),k=n(13285);function logImpression(e){(0,I.Qv)("pcweb_acceess_lmit",e)}function useLog(e){(0,i.bv)(function(){logImpression({env:window.__SSR__?"ssr":"csr",id:e.noteId||e.userId||"",page_type:window.location.href,qrcode_type:e.noteId?"note":"userProfile"})})}function useQrcode(e){var t=(0,i.iH)(""),n=(0,i.iH)("normal"),r=(0,i.Fl)(function(){return e.userId?(0,_.Ox)(e.userId,"pcweb_access_limit"):e.noteId?(0,_.j2)(e.noteId,n.value,"pcweb_access_limit"):_.$1});function updateNoteType(){if(!!e.noteId)getNoteType(e.noteId).then(function(e){n.value=e.noteType})}function drawQrcode(){return _drawQrcode.apply(this,arguments)}function _drawQrcode(){return(_drawQrcode=(0,o._)(function(){var e,n;return(0,u.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,m.toDataURL(r.value,{margin:0})];case 1:return t.value=i.sent(),[3,3];case 2:return e=i.sent(),(0,l.zM)(null!==(n=null==e?void 0:e.message)&&void 0!==n?n:"生成二维码失败"),[3,3];case 3:return[2]}})})).apply(this,arguments)}return(0,i.YP)(function(){return n.value},function(){drawQrcode()}),updateNoteType(),(0,i.wF)(function(){drawQrcode()}),{qrcodeImg:t}}function useGoHome(e){var t=(0,k.tv)();return{goHome:function goHome(){t.replace("".concat(y.Z.ExplorePath,"?source=404")),(0,w.A6)(44638,{noteId:e.noteId})}}}var S={class:"access-container"},b={class:"access-wrapper"},M={class:"title"},L={class:"qrcode-box"},x={class:"qrcode-img-box"},T=["src"],D={class:"bottom-btn-group"},N=(0,i.aZ)({__name:"AccessLimitComp",props:{type:{},title:{},noteId:{},userId:{},verifyUuid:{},onClose:{type:Function}},setup:function(e){var t=this,n=(0,i.BK)(e).title,o=useQrcode(e).qrcodeImg,u=useGoHome(e).goHome;useLog(e);var l=(0,i.Fl)(function(){if(n.value)return n.value;var e=new URLSearchParams(window.location.search).get("error_msg");return e?decodeURIComponent(e):"当前内容暂时不可访问"});function showFeedback(){var t,n,r=window,i=new URLSearchParams(window.location.search);null===(n=r.FeCaptcha)||void 0===n||null===(t=n.showFeedbackForm)||void 0===t||t.call(n,{pageId:81,http:a.dJ,verifyUuid:e.verifyUuid||i.get("uuid")})}return function(e,n){var a;return(0,i.wg)(),(0,i.iD)("div",S,[(0,i._)("div",b,[n[3]||(n[3]=(0,i._)("div",{class:"text"},null,-1)),(0,i._)("div",M,(0,i.zw)((0,i.SU)(l)),1),(0,i.Wm)(g,null,{default:(0,i.w5)(function(){return[(0,i._)("div",L,[(0,i._)("div",x,[(0,i.SU)(o)?((0,i.wg)(),(0,i.iD)("img",{key:0,class:"qrcode-img",src:(0,i.SU)(o)},null,8,T)):(0,i.kq)("",!0)]),n[2]||(n[2]=(0,i._)("div",{class:"title tip-text"}," 请打开小红书App扫码查看 ",-1))])]}),_:1}),(0,i._)("div",D,[(0,i._)("div",{class:"feedback-btn",onClick:showFeedback}," 问题反馈 "),"dialog"===e.type?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"btn-close",onClick:n[0]||(n[0]=function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.onClose&&(a=e).onClose.apply(a,(0,r._)(n))})}," 关闭 ")):((0,i.wg)(),(0,i.iD)("div",{key:1,class:"btn-close",onClick:n[1]||(n[1]=function(){for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];return(0,i.SU)(u)&&(0,i.SU)(u).apply(t,(0,r._)(n))})}," 返回首页 "))])])])}}}),E=(0,h.default)(N,[["__scopeId","data-v-7aee5252"]])},60641:function(e,t,n){"use strict";n.d(t,{Z:function(){return k}}),n(9557),n(15066);var r=n(93328),i=n(96144),a=n(60506),o=n(97397),u=n(29642),l=n(2639),s=n(35909),c=n(71250),d=n(59484),v=n(29953),f=n(94101),p=n(73993),h=n(49666),g=n(39317),m=n(66002),y=n(28860),I=["data-start","data-time","data-cache-exp","data-cache-hit","data-css-downgrade","data-render-status"],_={class:"channel-container"},w=(0,r.aZ)({__name:"Feeds",setup:function(e){var t=(0,g.NW)(),n=(0,m.Jk)(t),w=n.mfRequestMetaData,k=n.ssrRequestStatus,S=(0,y.E)();(0,v.Z)();var b=(0,i.$T)("requestExp"),M=(0,r.iH)(!1),L=(0,p.M)(),x=L.EntryType,T=L.pageStatus,D=L.showFeeds,N=L.refresh,E=L.permitSticky,R=L.exploreChannels,U=L.handleChannelClick,P=L.currentChannel,F=L.channelReducer;return function(e,n){var i,v;return(0,r.wg)(),(0,r.iD)("div",{id:"mfContainer",ref:"feedsWrapper",class:"feeds-page","data-start":(0,r.SU)(w).start,"data-time":(0,r.SU)(w).lasting,"data-cache-exp":(0,r.SU)(t).feedsCacheLogInfo.flag,"data-cache-hit":Number((0,r.SU)(t).feedsCacheLogInfo.isHitMfCache),"data-css-downgrade":null===(v=(0,r.SU)(b))||void 0===v?void 0:null===(i=v.flags)||void 0===i?void 0:i.cssDowngrade,"data-render-status":(0,r.SU)(k)},[(0,r.Wm)(o.Z,{type:(0,r.SU)(x).globalModal},null,8,["type"]),(0,r._)("div",_,[(0,r.Wm)(u.Z,{offset:72,permit:(0,r.SU)(E)},{default:(0,r.w5)(function(){var e;return[(null===(e=(0,r.SU)(R))||void 0===e?void 0:e.length)?((0,r.wg)(),(0,r.j4)(c.Z,{key:0,"active-key":(0,r.SU)(P),"onUpdate:activeKey":n[0]||(n[0]=function(e){return(0,r.dq)(P)?P.value=e:null}),"vertical-channel-key":"homefeed.pet","channel-list":(0,r.SU)(F)((0,r.SU)(R)),onChannelClick:n[1]||(n[1]=function(e){return(0,r.SU)(U)(e)})},{icon:(0,r.w5)(function(e){return["homefeed.pet"===e.channelKey?((0,r.wg)(),(0,r.j4)(f.Z,{key:0,"icon-rendered":(0,r.SU)(M),"change-icon-rendered":function(){return M.value=!0},class:"channel-icon"},null,8,["icon-rendered","change-icon-rendered"])):(0,r.kq)("",!0)]}),_:1},8,["active-key","channel-list"])):(0,r.kq)("",!0)]}),_:1},8,["permit"])]),"error"===(0,r.SU)(T)?((0,r.wg)(),(0,r.j4)(s.Z,{key:0,refresh:(0,r.SU)(N)},null,8,["refresh"])):(0,r.kq)("",!0),(0,r.Wm)(a.Z,null,{default:(0,r.w5)(function(){return[(0,r.Wm)(l.Z,{visible:"placeholderFeeds"===(0,r.SU)(T)&&(0,r.SU)(D)&&(0,r.SU)(t).isUsingPlaceholderFeeds||"update"===(0,r.SU)(T)},null,8,["visible"])]}),_:1}),"loading"===(0,r.SU)(T)?((0,r.wg)(),(0,r.j4)(d.Z,{key:1,columns:(0,r.SU)(S).columns},null,8,["columns"])):(0,r.kq)("",!0),(0,r.Wm)(h.Z,{"show-feeds":(0,r.SU)(D)},null,8,["show-feeds"])],8,I)}}}),k=(0,n(5010).default)(w,[["__scopeId","data-v-811a7fa6"]])},49666:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(41622),i=n(70879),a=n(27337),o=n(377);n(19077),n(75973),n(42876),n(33933),n(6045),n(10364),n(67673),n(92519);var u=n(93328),l=n(3642),s=n(36370),c=n(88588),d=n(39317),v=n(66002),f=(0,u.aZ)({__name:"WrappedExploreFeeds",props:{showFeeds:{type:Boolean}},setup:function(e){var t=(0,d.NW)();function parseUnreadParams(e){if(!e)return{unreadBeginNoteId:"",unreadEndNoteId:"",unreadNoteCount:0};try{var t=JSON.parse(unescape(e));return{unreadBeginNoteId:t.ub,unreadEndNoteId:t.ue,unreadNoteCount:t.uc}}catch(e){return{unreadBeginNoteId:"",unreadEndNoteId:"",unreadNoteCount:0}}}var n=(0,v.Jk)(t),f=n.pageStatus,p=n.feeds,h=(0,s.f7)().requestUnderTakeNoteData,g=(0,s.rI)(),m=g.needOpenUndertakeNote,y=g.noteId;return(0,u.vl)((0,r._)(function(){var e,n,r,l,d,v,f,g,I;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(d=(0,u.Zq)(),!m.value)return[3,2];return[4,h()];case 1:o.sent(),o.label=2;case 2:return[4,t.fetchFeedsOnServer({supportWebp:null!==(v=null==d?void 0:null===(n=d.headers)||void 0===n?void 0:null===(e=n.accept)||void 0===e?void 0:e.includes("webp"))&&void 0!==v&&v,unread:parseUnreadParams((0,c.Z)(null!==(f=null==d?void 0:null===(r=d.headers)||void 0===r?void 0:r.cookie)&&void 0!==f?f:"","unread"))})];case 3:return o.sent(),m.value&&(null===(l=t.feeds)||void 0===l?void 0:l.length)>0&&t.undertakeNote&&(p.value=t.feeds.map(function(e){return(0,a._)((0,i._)({},e),{index:e.index+1})}),p.value.unshift((0,a._)((0,i._)({},(0,s.Fx)(null===(I=t.undertakeNote)||void 0===I?void 0:null===(g=I.items)||void 0===g?void 0:g[0])),{index:0,exposed:!1,trackId:y||"",ssrRendered:!1}))),[2]}})})),function(t,n){return("feeds"===(0,u.SU)(f)||"placeholderFeeds"===(0,u.SU)(f)||"update"===(0,u.SU)(f))&&e.showFeeds?((0,u.wg)(),(0,u.j4)(l.Z,{key:0})):(0,u.kq)("",!0)}}}),p=f},94101:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(41622),i=n(377);n(36277),n(34333);var a=n(93328),o=(0,a.aZ)({__name:"VerticalChannelIcon",props:{iconRendered:{type:Boolean},changeIconRendered:{type:Function}},setup:function(e,t){var o=t.expose,u=(0,a.iH)(),l=(0,a.iH)();return(0,a.bv)((0,r._)(function(){var t;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(!u.value)return[2];return[4,n.e("395").then(n.t.bind(n,48572,23))];case 1:return t=r.sent().default,l.value=t.loadAnimation({container:u.value,loop:!1,autoplay:!e.iconRendered,name:"verticalChannelIcon",path:"https://picasso-static.xiaohongshu.com/predy/104102q0313k9ibiv380678gtks7tu70004en2n1vhn92c"}),e.changeIconRendered(),[2]}})})),o({lottieIns:l}),function(e,t){return(0,a.wg)(),(0,a.iD)("div",{ref_key:"verticalChannelIconEl",ref:u},null,512)}}}),u=o},9445:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(41622),i=n(377);n(86651),n(87535),n(75204),n(97357),n(34333);var a=n(93328),o=n(66398),u=n(91547),l={class:"back-icon-tip-container"};function render(e,t){return(0,a.wg)(),(0,a.iD)("div",l,t[0]||(t[0]=[(0,a._)("span",null,"关闭",-1),(0,a._)("span",{class:"esc"},"Esc",-1)]))}var s=n(5010);let c=(0,s.default)({},[["render",render],["__scopeId","data-v-d33abd98"]]);n(15294),n(21288),n(61079);var d=n(6890),v=(0,a.aZ)({__name:"Back",emits:["onClose","onTipImpression"],setup:function(e,t){var n=t.emit,l=(0,a.iH)(!1),s=(0,a.iH)(!1),v=[],f=(0,d.s6)(),p={indicate:u.T.oneDayTriggerCount,operator:"<=",value:2},h={indicate:u.T.loginStatus,operator:"===",value:!1},g={indicate:u.T.inContinued,operator:"===",value:!0};function init(){return _init.apply(this,arguments)}function _init(){return(_init=(0,r._)(function(){return(0,i.Jh)(this,function(e){return v.push(u.A.register("backTip",{rules:[[p,h,g]],priority:1,manualUpdateTrigger:!0,taskExecutor:function(e,t,r,i){t(),e(),l.value=!0,n("onTipImpression"),v.push(i)}})),[2]})})).apply(this,arguments)}function close(){n("onClose",l.value)}function handleIconVisible(){s.value=!0}function handleIconHidden(){s.value=!1}return(0,a.wF)(init),(0,a.Jd)(function(){v.forEach(function(e){null==e||e()})}),function(e,t){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:(0,a.C_)(["close-circle",{"force-hidden":(0,a.SU)(f).isNIO}]),onClick:close},[(0,a._)("div",{class:"close close-mask-dark",onMousemove:handleIconVisible,onMouseout:handleIconHidden},[(0,a.Wm)((0,a.SU)(o.i8),{size:"20",icon:"close"}),s.value?((0,a.wg)(),(0,a.j4)(c,{key:0})):(0,a.kq)("",!0)],32)],2),(0,a._)("div",{class:(0,a.C_)(["close-box",{"force-visible":(0,a.SU)(f).isNIO}]),onClick:close,onMousemove:handleIconVisible,onMouseout:handleIconHidden},[(0,a.Wm)((0,a.SU)(o.i8),{size:"18",icon:"close"}),s.value?((0,a.wg)(),(0,a.j4)(c,{key:0})):(0,a.kq)("",!0)],34)],64)}}}),f=(0,s.default)(v,[["__scopeId","data-v-6c30aded"]])},62077:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var r=n(41622),i=n(377);n(36277),n(34333),n(87989),n(86651);var a=n(93328),o=n(37107),u=n(38841),l=n(4659),s=n(82674),c=n(98413),d=n(24373),v=n(87355),f=n(33716),p=n(83616),h=n(13285),g=n(64300),m=n(16337),y=(0,a.aZ)({__name:"index",props:{noteId:{},title:{},xsecToken:{}},emits:["onClose"],setup:function(e,t){var y=t.emit,I=(0,a.RC)(function(){return Promise.all([n.e("9147"),n.e("568"),n.e("4730"),n.e("9149"),n.e("3691"),n.e("606"),n.e("8996"),n.e("8896"),n.e("7044")]).then(n.bind(n,61442))}),_=(0,h.yj)(),w=(0,g.dw)(),k=(0,v.Z)({noteId:(0,a.Fl)(function(){return e.noteId})}).notePageType,S=(0,s.l)(w.prevRoute).noteXsecSource,b=0,M=(0,a.Fl)(function(){var t=_.query;return(0,d.Nv)("".concat(c.Z.ExplorePath,"/").concat(e.noteId),{xsec_token:e.xsecToken,xsec_source:S.value,m_source:t.m_source,note_flow_source:t.note_flow_source,source:t.source},{keep:!1})}),L=(0,f.dv)(M.value);function pointPV(){return _pointPV.apply(this,arguments)}function _pointPV(){return(_pointPV=(0,r._)(function(){var e,t;return(0,i.Jh)(this,function(n){switch(n.label){case 0:if(b=Date.now(),!(null===(e=L.meta)||void 0===e?void 0:e.getTrackerData))return[3,2];return[4,L.meta.getTrackerData(L)];case 1:t=n.sent();try{t.page.value.initiatorType=1}catch(e){}u.Q.push(t),n.label=2;case 2:return[2]}})})).apply(this,arguments)}function pointPE(){return _pointPE.apply(this,arguments)}function _pointPE(){return(_pointPE=(0,r._)(function(){var e,t,n,r;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(t=Date.now()-b,!(null===(e=L.meta)||void 0===e?void 0:e.getPageEnd))return[3,2];return[4,null===(n=L.meta)||void 0===n?void 0:n.getPageEnd(L)];case 1:r=i.sent();try{r.page.value.durationMs=t,r.page.value.initiatorType=1}catch(e){}u.Q.push(r),i.label=2;case 2:return[2]}})})).apply(this,arguments)}function handleClose(){return _handleClose.apply(this,arguments)}function _handleClose(){return(_handleClose=(0,r._)(function(){return(0,i.Jh)(this,function(e){return pointPE(),y("onClose"),[2]})})).apply(this,arguments)}return(0,a.wF)(function(){var e={back:_.path,current:L.path};window.history.pushState(e,"",M.value),u.Q.extend({browser:{type:"Browser",value:{matchedPath:c.Z.ExploreNotePath,route:window.location.href,userAgent:window.navigator.userAgent,sessionId:(0,l.Z)()}}},"Tracker"),o.Z.updateMeta({route:L})}),(0,a.bv)(function(){p.s.setBackMetrics({version:"new"}),pointPV()}),(0,m.ORN)("popstate",function(){handleClose()}),(0,m.ORN)(document,"visibilitychange",function(){"visible"===document.visibilityState?pointPV():pointPE()}),(0,f.aH)({noteId:e.noteId,close:handleClose,useNoteRoute:function(){return(0,f.dv)(M.value)}}),function(e,t){return(0,a.wg)(),(0,a.j4)((0,a.SU)(I),{"note-page-type":(0,a.SU)(k)},null,8,["note-page-type"])}}}),I=y},72769:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(51606),i=n(93328),a=n(18068),o=n(7503),u=(0,i.aZ)({__name:"FragmentRenderer",props:{fragment:{},html:{}},emits:["imageClick","imageLoad"],setup:function(e,t){var n=t.emit;function handleImageClick(e,t){n("imageClick",e,t)}function handleImageLoad(e,t){n("imageLoad",e,t)}var u=(0,r._)({},a.E.ImageList,o.Z),l=(0,i.Fl)(function(){return u[e.fragment.fragmentType]||"div"}),s=(0,i.Fl)(function(){if(e.fragment.fragmentType===a.E.ImageList)return{images:e.fragment.images||[]};return e.html?{innerHTML:e.html}:{}});return function(e,t){return(0,i.wg)(),(0,i.j4)((0,i.LL)(l.value),(0,i.dG)(s.value,{onImageClick:handleImageClick,onImageLoad:handleImageLoad}),null,16)}}}),l=u},7503:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}}),n(63235),n(15368),n(12970),n(8503),n(32207),n(13598),n(23541),n(63827),n(30488),n(82236),n(51938),n(33913),n(94949),n(17891),n(44258),n(38609),n(4787),n(44211),n(29338),n(73405),n(98754),n(31832),n(88402),n(56712),n(27461),n(23339),n(51109),n(34333),n(43648),n(87989),n(9557),n(96118),n(64091),n(87394),n(94941),n(48421),n(97357);var r=n(93328),i=["onClick","onMouseenter"],a=["src","alt","data-width","data-height","data-user-id","data-note-id","data-source-avatar","data-source-nickname","data-url-size-large","onLoad"],o={key:0,class:"ai-msg-image-count-badge"},u=(0,r.aZ)({__name:"ImageList",props:{images:{}},emits:["imageClick","imageLoad"],setup:function(e,t){var n=t.emit,u=(0,r.iH)(new Set),l=(0,r.iH)(new Set),s=(0,r.iH)(null),c=(0,r.iH)(515),d=(0,r.iH)(515),v=(0,r.iH)(0),f=(0,r.Fl)(function(){return e.images.slice(0,3)}),p=(0,r.Fl)(function(){return e.images.length}),h=(0,r.Fl)(function(){return p.value>3}),g=(0,r.Fl)(function(){return 1===f.value.length}),m=(0,r.Fl)(function(){if(0===f.value.length)return!1;var e=f.value[0];return e.width>e.height}),y=(0,r.iH)(18),I=(0,r.Fl)(function(){return"".concat(v.value*y.value,"px")});function getActualUlPaddingLeft(){if(!s.value)return 18;var e=s.value.previousElementSibling;if(e&&e.classList.contains("markdown-block")){var t=e.querySelector("ul");if(t)return Number.parseFloat(window.getComputedStyle(t).paddingLeft)||18}return 18}function updateContainerWidth(){if(!!s.value){var e=v.value*y.value,t=s.value.clientWidth;t>0&&(d.value=Math.max(0,Math.min(t-e,470)));for(var n=s.value.parentElement;n;){if(n.classList.contains("ai-chat-section")){var r=n.offsetWidth||n.clientWidth;if(r>0){var i=r-e;c.value=Math.max(0,Math.min(i,470)),515===d.value&&(d.value=c.value);return}break}n=n.parentElement}var a=s.value.parentElement;if(a){var o=a.offsetWidth||a.clientWidth;o>0&&(c.value=Math.max(0,Math.min(o-e,470)),515===d.value&&(d.value=c.value))}}}function getSingleImageStyle(){var e=c.value;return m.value?{width:"".concat(2/3*e,"px"),height:"".concat(e/2,"px")}:{width:"".concat(e/2,"px"),height:"".concat(2/3*e,"px")}}function getMultipleImageStyle(){var e=d.value,t=f.value.length,n=(t-1)*8;return{width:"".concat((e-n)/t,"px"),height:"".concat(4/9*(e-n),"px")}}function getImageItemStyle(){return g.value?getSingleImageStyle():getMultipleImageStyle()}var _=null;function checkUlLevel(){if(!!s.value){var e=s.value.previousElementSibling;if(e&&e.classList.contains("markdown-block")){var t=Array.from(e.children).filter(function(e){return"ul"===e.tagName.toLowerCase()});if(0===t.length){v.value=0;return}for(var n=t[t.length-1],r=1;;){var i=n.lastElementChild;if(!i)break;if("ul"===i.tagName.toLowerCase())r++,n=i;else if("li"===i.tagName.toLowerCase()){var a=i.lastElementChild;if(a&&"ul"===a.tagName.toLowerCase())r++,n=a;else break}else break}v.value=r}else v.value=0}}function handleImageLoad(e,t){u.value.add(t),n("imageLoad",e,t)}function handleImageClick(e,t){n("imageClick",e,t)}function handleImageHover(e){var t=e.urlSizeLarge;if(!(!t||l.value.has(t))){l.value.add(t);var n=new Image;n.crossOrigin="anonymous",n.src=t,n.onerror=function(){l.value.delete(t)}}}return(0,r.bv)(function(){requestAnimationFrame(function(){if(updateContainerWidth(),y.value=getActualUlPaddingLeft(),checkUlLevel(),updateContainerWidth(),s.value&&"undefined"!=typeof ResizeObserver){_=new ResizeObserver(function(){updateContainerWidth()}),s.value&&_.observe(s.value);for(var e,t=null===(e=s.value)||void 0===e?void 0:e.parentElement,n=null;t;){if(t.classList.contains("ai-chat-section")){n=t;break}t=t.parentElement}n&&_.observe(n)}})}),(0,r.Jd)(function(){_&&(_.disconnect(),_=null)}),function(e,t){return(0,r.wg)(),(0,r.iD)("div",{ref_key:"containerRef",ref:s,class:(0,r.C_)(["ai-msg-image-container",{"single-image":g.value,"multiple-images":!g.value,horizontal:g.value&&m.value,vertical:g.value&&!m.value,"has-ul-above":v.value>0}]),style:(0,r.j5)({"padding-left":I.value})},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(f.value,function(e,t){return(0,r.wg)(),(0,r.iD)("div",{key:e.noteId+t,class:(0,r.C_)(["ai-msg-image-item",{"image-loaded":u.value.has(t)}]),style:(0,r.j5)(getImageItemStyle()),onClick:function(n){return handleImageClick(e,t)},onMouseenter:function(t){return handleImageHover(e)}},[(0,r._)("img",{crossorigin:"anonymous",src:e.url,alt:e.noteId,"data-width":e.width,"data-height":e.height,"data-user-id":e.userId,"data-note-id":e.noteId,"data-source-avatar":e.sourceAvatar,"data-source-nickname":e.sourceNickname,"data-url-size-large":e.urlSizeLarge,class:(0,r.C_)({loaded:u.value.has(t)}),onLoad:function(n){return handleImageLoad(e,t)}},null,42,a),h.value&&2===t?((0,r.wg)(),(0,r.iD)("div",o," 共"+(0,r.zw)(p.value)+"张 ",1)):(0,r.kq)("",!0)],46,i)}),128))],6)}}}),l=(0,n(5010).default)(u,[["__scopeId","data-v-4a69e01e"]])},7471:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}}),n(87989);var r=n(93328),i={class:"icon-btn-wrapper"},a=(0,r.aZ)({__name:"IconButton",props:{width:{default:40},height:{default:40}},setup:function(e){(0,r.sj)(function(e){return{"54fadfd9":t.value,0x1d7d5be:n.value}});var t=(0,r.Fl)(function(){return"".concat(e.width,"px")}),n=(0,r.Fl)(function(){return"".concat(e.height,"px")});return function(e,t){return(0,r.wg)(),(0,r.iD)("div",i,[(0,r.WI)(e.$slots,"default")])}}}),o=a},58879:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(41622),i=n(70879),a=n(27337),o=n(377);n(87989);var u=n(93328),l=n(53861),s=n(60506),c={class:"reds-tooltip__content"},d=(0,u.aZ)({__name:"Tooltip",props:{show:{type:Boolean,default:void 0},trigger:{default:"hover"},position:{default:"top"},gap:{default:8},noTooltip:{type:Boolean,default:!1},style:{type:[Boolean,null,String,Object,Array]}},emits:["onShow"],setup:function(e,t){var n=t.emit,d=(0,u.iH)(),v=(0,u.iH)(),f=(0,u.iH)(!1),p=(0,u.iH)({position:"fixed",left:"0",top:"0",transform:"translate(0, 0)",zIndex:9999}),h=(0,u.Fl)(function(){return void 0!==e.show?e.show:f.value}),g=(0,u.Fl)(function(){return void 0!==e.show});function setVisible(e){g.value?n("onShow",e):f.value=e}function updatePosition(){return _updatePosition.apply(this,arguments)}function _updatePosition(){return(_updatePosition=(0,r._)(function(){var t,n,r,l,s,c,f;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!d.value||!v.value)return[2];return[4,(0,u.Y3)()];case 1:switch(o.sent(),t=d.value.getBoundingClientRect(),n=v.value.getBoundingClientRect(),r=e.gap||8,l=0,s=0,e.position){case"top":l=t.left+t.width/2-n.width/2,s=t.top-n.height-r;break;case"bottom":l=t.left+t.width/2-n.width/2,s=t.top+t.height+r;break;case"left":l=t.left-n.width-r,s=t.top+t.height/2-n.height/2;break;case"right":l=t.right+r,s=t.top+t.height/2-n.height/2}return c=window.innerWidth,f=window.innerHeight,l<0?l=8:l+n.width>c&&(l=c-n.width-8),s<0?s=8:s+n.height>f&&(s=f-n.height-8),p.value=(0,a._)((0,i._)({},p.value),{left:"".concat(l,"px"),top:"".concat(s,"px"),transform:"translate(0, 0)"}),[2]}})})).apply(this,arguments)}function handleTriggerMouseEnter(){if("manual"!==e.trigger)"hover"===e.trigger&&!g.value&&(setVisible(!0),(0,u.Y3)(function(){updatePosition()}))}function handleTriggerMouseLeave(){if("manual"!==e.trigger)"hover"===e.trigger&&!g.value&&setVisible(!1)}function handleTriggerClick(){if("manual"!==e.trigger)"click"===e.trigger&&!g.value&&(setVisible(!f.value),!f.value&&(0,u.Y3)(function(){updatePosition()}))}function handleResize(){h.value&&updatePosition()}function handleScroll(){h.value&&updatePosition()}return(0,l.i9H)(v,function(){"click"===e.trigger&&!g.value&&setVisible(!1)}),(0,u.bv)(function(){window.addEventListener("resize",handleResize),window.addEventListener("scroll",handleScroll,!0)}),(0,u.Jd)(function(){window.removeEventListener("resize",handleResize),window.removeEventListener("scroll",handleScroll,!0)}),(0,u.YP)(function(){return e.position},function(){h.value&&updatePosition()}),(0,u.YP)(function(){return e.show},function(e){void 0!==e&&e&&(0,u.Y3)(function(){updatePosition()})}),(0,u.YP)(h,function(e){e&&(0,u.Y3)(function(){updatePosition()})}),function(e,t){return e.noTooltip?(0,u.WI)(e.$slots,"default",{key:0}):((0,u.wg)(),(0,u.iD)("div",{key:1,class:"reds-tooltip-container",style:(0,u.j5)(e.style)},[(0,u._)("div",{ref_key:"triggerRef",ref:d,class:"reds-tooltip__trigger",onMouseenter:handleTriggerMouseEnter,onMouseleave:handleTriggerMouseLeave,onClick:handleTriggerClick},[(0,u.WI)(e.$slots,"default")],544),(0,u.Wm)(s.Z,null,{default:(0,u.w5)(function(){return[((0,u.wg)(),(0,u.j4)(u.lR,{to:"body"},[(0,u.Wm)(u.uT,{name:"reds-tooltip-fade"},{default:(0,u.w5)(function(){return[h.value?((0,u.wg)(),(0,u.iD)("div",{key:0,ref_key:"tooltipRef",ref:v,class:(0,u.C_)(["reds-tooltip",["reds-tooltip--".concat(e.position)]]),style:(0,u.j5)(p.value)},[t[0]||(t[0]=(0,u._)("div",{class:"reds-tooltip__arrow"},null,-1)),(0,u._)("div",c,[(0,u.WI)(e.$slots,"content")])],6)):(0,u.kq)("",!0)]}),_:3})]))]}),_:3})],4))}}}),v=(0,n(5010).default)(d,[["__scopeId","data-v-254667c5"]])},64704:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}}),n(87989);var r=n(93328),i=["width","height","viewBox","innerHTML"],a=["width","height"],o=["xlink:href"];function render(e,t,n,u,l,s){return e.objIcon?((0,r.wg)(),(0,r.iD)("svg",{key:0,width:e.width||e.size,height:e.height||e.size,viewBox:e.objIcon.viewBox,class:"reds-icon",innerHTML:e.objIcon.content},null,8,i)):((0,r.wg)(),(0,r.iD)("svg",{key:1,class:"reds-icon",width:e.width||e.size,height:e.height||e.size},[(0,r._)("use",{"xlink:href":"#".concat(e.icon)},null,8,o)],8,a))}n(34885);var icon_getSvgFromIcon=function getSvgFromIcon(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewBox,n=e.content,r=void 0===n?"":n,i=r.indexOf("<path"),a=r.indexOf("</symbol>");return{viewBox:void 0===t?"":t,content:r.substring(i,a)}},u=n(56362),l=(0,r.aZ)({name:"RedsIcon",props:u.Z,setup:function(e){return{objIcon:(0,r.Fl)(function(){return"string"==typeof e.icon?null:icon_getSvgFromIcon(e.icon)})}}}),s=(0,n(5010).default)(l,[["render",render],["__scopeId","data-v-55b36ac6"]])},60506:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(93328),i=(0,r.aZ)({__name:"ClientOnly",setup:function(e){var t=(0,r.iH)(!1);return(0,r.bv)(function(){t.value=!0}),function(e,n){return t.value?(0,r.WI)(e.$slots,"default",{key:0}):(0,r.kq)("",!0)}}}),a=i},10116:function(e){let t=console,n={scroll:"scroll",fixed:"fixed"},r={DEFAULT:"DEFAULT",NOT_SUPPORT:"NOT_SUPPORT",NO_CANVAS:"NO_CANVAS",NO_ADAPTER:"NO_ADAPTER",NO_DEVICE:"NO_DEVICE",NO_CONTEXT:"NO_CONTEXT",INIT_FAILED:"INIT_FAILED"},i={fontSize:20,fontFamily:"PingFang SC",color:"#fff",duration:8e3,trackHeight:52,trackGap:16,trackCount:3,speed:140,pixelRatio:1,emojis:{},trackList:[]},a={WEBGPU:"WEBGPU",CANVAS_2D:"CANVAS_2D"};class o{constructor(e,t,r,i){let a=t?.type||n.scroll,o=this.parseRichText(e),u=this.computeDanmakuWidth(o,t,r,i,e),l=t.showBorder?u+24:u,s=t.speed||r.speed;this.id=this.getDanmakuId(),this.text=e,this.type=a,this.speed=a===n.scroll?s:0,this.parts=o,this.width=u,this.boxWidth=l,this.x=this.getDanmakuX(l,a,r),this.timestamp=Date.now(),this.color=t.color||r.color,this.duration=t.color||r.duration,this.fontFamily=t.color||r.fontFamily,this.fontSize=t.fontSize||r.fontSize,this.priority=t.priority||0,this.showBorder=t.showBorder||!1}getDanmakuId=()=>"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16));parseRichText(e){let t=[],n=0,r=[...e.matchAll(/\[([^\]]+)\]/g)];if(0===r.length)return[];for(let i of r){if(i.index>n){let r=e.slice(n,i.index);t.push({type:"text",content:r})}t.push({type:"emoji",content:i[0]}),n=i.index+i[0].length}return n<e.length&&t.push({type:"text",content:e.slice(n)}),t}computeDanmakuWidth=(e,t,n,r,i)=>{let a=t?.fontSize||n.fontSize,o=0;if(!e||0===e.length)return this.measureTextWidth(i,t,n,r);for(let i of e)"emoji"===i.type&&n.emojis[i.content]?o+=a:o+=this.measureTextWidth(i.content,t,n,r);return o};measureTextWidth(e,t,n,r){if(!e)return 0;let i=t?.fontSize||n.fontSize,a=t?.fontFamily||n.fontFamily;if(!r)return i*e.length;let o=r.font;r.font=`${i}px ${a}`;let u=r.measureText(e).width;return r.font=o,u}getDanmakuX(e,t,r){return t===n.scroll?r.canvasWidth+36:r.canvasWidth/2-e/2}}class u{constructor(e,t){this.config=e,this.ctx=t,this.ctx.strokeStyle="rgba(0, 0, 0, 0.15)",this.ctx.lineWidth=.5}render(e){e.forEach(e=>{e.showBorder?this.drawDanmakuWithBorder(e):this.renderRichDanmaku(e)})}renderRichDanmaku(e){this.setupCanvasContext(e);let t=this.calculateStartX(e),n=this.getYPosition(e);if(!e.parts||0===e.parts.length){this.renderSimpleDanmaku(e.text,t,n);return}this.renderParts(e,t,n)}renderSimpleDanmaku(e,t,n){this.ctx.strokeText(e,t,n),this.ctx.fillText(e,t,n)}setupCanvasContext(e){this.ctx.strokeStyle="rgba(0, 0, 0, 0.15)",this.ctx.lineWidth=.5,this.ctx.textAlign="left",this.ctx.textBaseline="middle",this.ctx.font=`${e.fontSize}px ${e.fontFamily}`,this.ctx.fillStyle=e.color}calculateStartX(e){return e.x}renderParts(e,t,n){let r=t;for(let t of e.parts){let{content:i,type:a}=t||{};i&&(r="emoji"===a?this.renderEmoji(i,e,r,n):this.renderText(i,e,r,n))}}renderText(e,t,n,r){return this.ctx.strokeText(e,n,r),this.ctx.fillText(e,n,r),n+this.measureTextWidth(e,t).width}renderEmoji(e,n,r,i){try{let t=this.config.emojis[e]?.bitmap;if(!t)return this.renderText(e,n,r,i);let a=n.fontSize,o=i-a/2;return this.ctx.drawImage(t,r,o,a,a),r+n.fontSize}catch(a){return t.warn("Error rendering emoji:",a),this.renderText(e,n,r,i)}}getYPosition(e){return e.type===n.fixed?e.y+4:e.y}drawRoundedRect(e,t,n,r){let i=this.ctx,a=Math.min(n/2,r/2);a=Math.round(a),i.translate(.5,.5),i.beginPath(),i.moveTo(e+a,t),i.lineTo(e+n-a,t),i.arc(e+n-a,t+a,a,-Math.PI/2,0),i.lineTo(e+n,t+r-a),i.arc(e+n-a,t+r-a,a,0,Math.PI/2),i.lineTo(e+a,t+r),i.arc(e+a,t+r-a,a,Math.PI/2,Math.PI),i.lineTo(e,t+a),i.arc(e+a,t+a,a,Math.PI,3*Math.PI/2),i.closePath(),i.translate(-.5,-.5)}drawDanmakuWithBorder(e){let t=1.4*e.fontSize,n=e.boxWidth,r=t+8,{x:i,y:a}=this.calculateBorderPosition(e,n,t);this.drawBorder(i,a,n,r);let o=e.x,u=e.y;this.adjustDanmakuPosition(e,i,a,r),this.renderRichDanmaku(e),e.x=o,e.y=u}calculateBorderPosition(e,t,r){let i,a;return e.type===n.fixed?i=this.config.canvasWidth/2-t/2:i=e.x,{x:i,y:a=e.y-r/2-4}}drawBorder(e,t,n,r){this.ctx.strokeStyle="rgba(255, 255, 255, 0.80)",this.ctx.fillStyle="rgba(0, 0, 0, 0.4)",this.ctx.lineWidth=1,this.drawRoundedRect(e,t,n,r),this.ctx.fill(),this.ctx.stroke()}adjustDanmakuPosition(e,t,r,i){e.type,n.fixed,e.x=t+12,e.y=r+i/2}measureTextWidth(e,t){if(!e)return{width:0};let n=t.fontSize,r=t.fontFamily;if(!this.ctx)return{width:n*e.length};let i=this.ctx.font;this.ctx.font=`${n}px ${r}`;let a=this.ctx.measureText(e);return this.ctx.font=i,a}}let l=new class e{constructor(){this.danmakuList=[],this.penddingList=[],this.usedTrackIds=new Set,this.config=i,this.state="closed",this.animationId=null,this.offScreenCanvas=null,this.webgpuCanvas=null,this.ctx=null,this.errWebGpuType=r.DEFAULT,this.renderType=a.CANVAS_2D,this.initWebGpuErrMsg="",this.lastUpdateTime=0,this.initHandler()}initHandler=()=>{};init=async e=>{t.log("DanmakuWorker init with data:",e),this.initConfig(e.config),this.initOffScreenCanvas(e.offScreenCanvas);let n=!1,r=e.renderType||"canvas2d";("webgpu"===e.danmuRenderType||"webgpu"===r)&&(n=await this.initWebGpu(),t.log("DanmakuWorker initWebGpu result:",n)),!n&&(t.log("DanmakuWorker fallback to 2d context"),this.ctx=this.offScreenCanvas.getContext("2d")),this.initRenderer()};initConfig=e=>{this.config={...this.config,...e},this.config.trackList=this.createTrackList()};initOffScreenCanvas=e=>{let{canvasWidth:t,canvasHeight:n,pixelRatio:r}=this.config;e.width=t*r,e.height=n*r,this.offScreenCanvas=e};initRenderer=()=>{this.renderer=new u(this.config,this.ctx)};createTrackList(){let{trackCount:e,trackHeight:t,trackGap:n}=this.config;return Array.from({length:e},(e,r)=>({id:`${r}-track`,height:t*(r+1)+n/2}))}async initWebGpu(){if(!navigator.gpu)return this.errWebGpuType=r.NOT_SUPPORT,!1;let e=await navigator.gpu.requestAdapter();if(!e)return this.errWebGpuType=r.RENDER_FAILED,!1;let t=await e.requestDevice();if(!t)return this.errWebGpuType=r.NO_DEVICE,!1;this.device=t;let n=this.offScreenCanvas,i=n?.getContext("webgpu");if(!i)return this.errWebGpuType=r.NO_CONTEXT,!1;this.context=i;let o=new OffscreenCanvas(this.offScreenCanvas.width,this.offScreenCanvas.height),u=o?.getContext("2d");if(!u)return this.errWebGpuType=r.NO_CONTEXT,!1;this.webgpuCanvas=o,this.ctx=u,this.ctx.scale(this.config.pixelRatio,this.config.pixelRatio);try{let e=navigator.gpu.getPreferredCanvasFormat();i?.configure({device:t,format:e,alphaMode:"premultiplied"}),this.sampler=t.createSampler({magFilter:"linear",minFilter:"linear"});let n=`
        // 顶点着色器代码（WGSL）
        struct VertexOutput {
            @builtin(position) position: vec4f,
            @location(0) uv: vec2f,
        };

        @vertex
        fn main(@location(0) position: vec2f, @location(1) uv: vec2f) -> VertexOutput {
            var output: VertexOutput;
            output.position = vec4f(position, 0.0, 1.0);
            output.uv = uv;
            return output;
        }
      `,o=`
        // 片段着色器代码（WGSL)
        @group(0) @binding(0) var textureSampler: sampler;
        @group(0) @binding(1) var texture: texture_2d<f32>;

        @fragment
        fn main(@location(0) uv: vec2f) -> @location(0) vec4f {
            let flippedUV = vec2<f32>(uv.x, 1.0 - uv.y);
            return textureSample(texture, textureSampler, flippedUV);
        }
      `,u=t.createRenderPipeline({layout:"auto",vertex:{module:t.createShaderModule({code:n}),entryPoint:"main",buffers:[{arrayStride:20,attributes:[{shaderLocation:0,offset:0,format:"float32x2"},{shaderLocation:1,offset:12,format:"float32x2"}]}]},fragment:{module:t.createShaderModule({code:o}),entryPoint:"main",targets:[{format:e}]},primitive:{topology:"triangle-strip"}});if(!u)return this.errWebGpuType=r.INIT_FAILED,!1;return this.pipeline=u,this.renderType=a.WEBGPU,!0}catch(e){return this.errWebGpuType=r.INIT_FAILED,this.initWebGpuErrMsg=e?.message||"",!1}}render2D=()=>{if(!this.offScreenCanvas||!this.ctx||!this.renderer||!this.danmakuList||0===this.danmakuList.length)return;let{pixelRatio:e,canvasWidth:t,canvasHeight:n}=this.config,r=t*e,i=n*e;this.offScreenCanvas.width=r,this.offScreenCanvas.height=i,this.ctx.clearRect(0,0,r,i),this.ctx.save(),this.ctx.scale(e,e),this.renderer.render(this.danmakuList),this.ctx.restore()};async renderWebgpu(){let e=this.webgpuCanvas;if(!this.danmakuList||0===this.danmakuList.length)return;let{canvasWidth:n,canvasHeight:r,pixelRatio:i}=this.config;this.ctx.clearRect(0,0,n*i,r*i),this.ctx.save(),this.renderer.render(this.danmakuList),this.ctx.restore();let a=this.context,o=this.device,u=this.pipeline;this.ensureTextureAndBindGroup(e);try{o.queue.copyExternalImageToTexture({source:e},{texture:this.texture},{width:e.width,height:e.height});let t=o.createCommandEncoder(),n=t.beginRenderPass({colorAttachments:[{view:a.getCurrentTexture().createView(),loadOp:"clear",clearValue:[0,0,0,0],storeOp:"store"}]});this.pass=n,n.setPipeline(u),n.setVertexBuffer(0,this.vertexBuffer),n.setBindGroup(0,this.bindGroup),n.draw(4),n.end();let r=t.finish();o.queue.submit([r])}catch(e){t.warn("WebGPU rendering failed:",e)}}ensureTextureAndBindGroup(e){let t=e.width,n=e.height,r=!this.texture||this.texture.width!==t||this.texture.height!==n;r&&(this.texture&&this.texture.destroy(),this.texture=this.device.createTexture({size:{width:t,height:n},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT}),this.textureView=this.texture.createView()),(!this.bindGroup||r)&&(this.bindGroup=this.device.createBindGroup({layout:this.pipeline.getBindGroupLayout(0),entries:[{binding:0,resource:this.sampler},{binding:1,resource:this.textureView}]})),(!this.vertexBuffer||this.canvasWidth!==this.context.canvas.width||this.canvasHeight!==this.context.canvas.height||r)&&(this.canvasWidth=this.context.canvas.width,this.canvasHeight=this.context.canvas.height,this.updateVertexBuffer(t,n,this.canvasWidth,this.canvasHeight))}updateVertexBuffer(e,t,n,r){this.vertexBuffer&&this.vertexBuffer.destroy(),this.vertexBuffer=this.getVertexBuffer(this.device,e,t,n,r,this.objectFit)}getVertexBuffer(e,t,n,r,i,a="contain"){let o,u;let l=t/n,s=r/i;switch(a){case"cover":l>s?(o=l/s,u=1):(o=1,u=s/l);break;case"fill":o=1,u=1;break;default:l>s?(o=1,u=s/l):(u=1,o=l/s)}let c=new Float32Array([-o,-u,0,0,0,o,-u,0,1,0,-o,u,0,0,1,o,u,0,1,1]),d=e.createBuffer({size:c.byteLength,usage:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST});return e.queue.writeBuffer(d,0,c),d}update=e=>{if("playing"!==this.state)return;let t=e-this.lastUpdateTime;if(this.lastUpdateTime=e,t<=0){this.animationId=requestAnimationFrame(this.update);return}this.updateDanmakuX(t),this.renderType===a.WEBGPU?this.renderWebgpu():this.render2D(),this.tryAddPendingDanmaku(),this.animationId=requestAnimationFrame(this.update)};updateDanmakuX=e=>{this.danmakuList=this.danmakuList.filter(t=>{let r=e;r>=20&&(r=20),e<20&&e>15&&(r=16),t.type===n.scroll&&t.trackId&&(t.x-=t.speed*(r/1e3));let i=this.isDanmakuVisible(t);return!i&&this.clearCanvas(),i})};tryAddPendingDanmaku=()=>{if(!this.penddingList.length)return;let e=this.penddingList[0],t=this.assignTrack(e);t&&(this.usedTrackIds.add(t.id),e.trackId=t.id,e.y=t.height,e.timestamp=Date.now(),this.danmakuList.push(e),this.penddingList.splice(0,1))};isDanmakuVisible(e){return e.type===n.scroll?e.x+e.boxWidth+36>0:Date.now()-e.timestamp<e.duration}clearInvisibleDanmaku=()=>{this.danmakuList=this.danmakuList.filter(e=>{let t=this.isDanmakuVisible(e);if(!t&&e.trackId){let t=this.config.trackList.find(t=>t.id===e.trackId);t&&!this.danmakuList.some(t=>t.trackId===e.trackId&&this.isDanmakuVisible(t))&&this.usedTrackIds.delete(t.id)}return t})};updateConfig=({newConfig:e})=>{let t=this.config?.canvasWidth,n=e.canvasWidth;this.config={...this.config,...e};let r=e.canvasWidth*this.config.pixelRatio,i=e.canvasHeight*this.config.pixelRatio;this.offScreenCanvas&&(this.offScreenCanvas.width=r,this.offScreenCanvas.height=i);let o=this.webgpuCanvas;o&&this.renderType===a.WEBGPU&&(o.width=r,o.height=i),this.ctx.scale(this.config.pixelRatio,this.config.pixelRatio),this.adjustDanmakuX(t,n,this.danmakuList),this.adjustDanmakuX(t,n,this.penddingList)};adjustDanmakuX=(e,t,r)=>{r.forEach(r=>{r.type===n.scroll?r.x+=t-e:r.x=this.config.canvasWidth/2-r.boxWidth/2})};assignTrack(e){let t=this.config.trackList;if(this.usedTrackIds.size<t.length)return t.find(e=>!this.usedTrackIds.has(e.id));for(let n of t)if(this.isTrackAvailable(n,e))return n;return null}isTrackAvailable(e,t){if(t.type!==n.scroll)return 0===this.danmakuList.filter(t=>t.type!==n.scroll&&t.trackId===e.id).length;let r=this.danmakuList.filter(t=>t.type===n.scroll&&t.trackId===e.id);if(0===r.length)return!0;let i=r[r.length-1],a=i.x+i.boxWidth;return this.config.canvasWidth-a>=36}createDanmaku=({message:e,options:t})=>{if("closed"===this.state)return;let n=new o(e,t,this.config,this.ctx);if("playing"!==this.state){this.addToPenddingList(n);return}this.addDanmaku(this.getHighPriorityDanmaku(n))};clearPendingList=e=>{this.penddingList=this.penddingList.filter(t=>t.id!==e.id)};addToPenddingList=e=>{-1===this.penddingList.findIndex(t=>t.id===e.id)&&(this.penddingList.length>=100&&(this.penddingList=this.penddingList.filter(e=>e.id===this.getEarlyDanmaku(this.penddingList).id)),this.penddingList.push(e))};getEarlyDanmaku=(e=[])=>e.length?e.reduce((e,t)=>t.timestamp<e.timestamp?t:e):null;getHighPriorityDanmaku=e=>{if(e.showBorder||!this.penddingList.length)return e;let t=[];return(this.penddingList.forEach(n=>{n.priority>e.priority&&t.push(n)}),t.length)?(this.penddingList.push(e),this.getEarlyDanmaku(t)):(this.penddingList.push(e),this.getEarlyDanmaku(this.penddingList))};addDanmaku=e=>{if(!e)return;let t=this.assignTrack(e);if(!t){this.addToPenddingList(e);return}this.clearPendingList(e),this.usedTrackIds.add(t.id),e.y=t.height,e.timestamp=Date.now(),e.trackId=t.id,this.danmakuList.push(e)};clearCanvas(){if(!this.offScreenCanvas||!this.ctx)return;let{pixelRatio:e,canvasWidth:n,canvasHeight:r}=this.config,i=n*e,o=r*e;if(this.renderType===a.WEBGPU){if(this.context&&this.device)try{let e=this.device.createCommandEncoder();e.beginRenderPass({colorAttachments:[{view:this.context.getCurrentTexture().createView(),loadOp:"clear",clearValue:[0,0,0,0],storeOp:"store"}]}).end();let t=e.finish();this.device.queue.submit([t])}catch(e){t.warn("WebGPU clear failed:",e),this.ctx&&"function"==typeof this.ctx.clearRect&&this.ctx.clearRect(0,0,i,o)}}else this.ctx.clearRect(0,0,i,o)}play(){this.state="playing",this.lastUpdateTime=Date.now(),this.animationId=requestAnimationFrame(this.update)}pause(){this.state="paused",this.lastUpdateTime=0}clear(){this.danmakuList=[],this.penddingList=[],this.usedTrackIds.clear()}start(){this.state="playing",!this.animationId&&(this.lastUpdateTime=Date.now(),this.animationId=requestAnimationFrame(this.update))}close(){this.state="closed",this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null,this.lastUpdateTime=0),this.clear(),this.clearCanvas()}};e.exports=function(e){e.onmessage=e=>{let{type:t,data:n}=e.data;switch(t){case"INIT":l.init(n);break;case"UPDATE_CONFIG":l.updateConfig(n);break;case"ADD_DANMAKU":l.createDanmaku(n);break;case"CLEAR":l.clear();break;case"START":l.start();break;case"CLOSE":l.close();break;case"PAUSE":l.pause();break;case"PLAY":l.play()}}}},18223:function(e){let t=0,n=1;e.exports=function(e){e.postMessage({type:t}),setInterval(()=>{e.postMessage({type:n})},10)}},41782:function(e,t,n){"use strict";n.d(t,{C:function(){return getPromptRecommendation}});var r=n(70879),i=n(64732),a=n(64695);function getPromptRecommendation(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.dJ.get("GET_PROMPT_RECOMMENDATION",(0,r._)({baseURL:(0,a.q)(),params:(0,r._)({businessType:"stream",source:"web_ask"},e),transform:!0},t))}},40855:function(e,t,n){"use strict";n.d(t,{E:function(){return useBoardModalStateWithDefaultValue},m:function(){return u}});var r=n(82726),i=n(69876),a=n(93328),o=(0,r._)((0,i.BE)(function(e){var t=(0,a.iH)(!1),n=(0,a.iH)(""),r=(0,a.iH)(""),i=(0,a.Fl)(function(){return!e.isNio.value&&!0});return{boardVisible:t,setBoardVisible:function(e){t.value=e},isBoardExp:i,cover:r,noteId:n,setNoteId:function(e){n.value=e},setCover:function(e){r.value=e}}}),2),u=o[0],l=o[1];function useBoardModalStateWithDefaultValue(){var e;return null!==(e=l())&&void 0!==e?e:{boardVisible:(0,a.iH)(!1),setBoardVisible:function(){return null},isBoardExp:(0,a.iH)(!1),cover:(0,a.iH)(""),noteId:(0,a.iH)(""),setNoteId:function(){return null},setCover:function(){return null}}}},57623:function(e,t,n){"use strict";n.d(t,{Z:function(){return useVirtualList}}),n(43648),n(41593),n(97553);var r=n(14978),i=n.n(r),a=n(93328),o=n(66993),u=n(16337),composables_useKeepAliveEventListener=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(0,a.iH)(),i=(0,a.iH)(!1),registerEventListener=function(){if(!i.value)r.value=u.ORN.apply(void 0,(0,o._)(t)),i.value=!0},removeEventListener=function(){var e;null===(e=r.value)||void 0===e||e.call(r),i.value=!1};(0,a.bv)(function(){registerEventListener()}),(0,a.se)(function(){removeEventListener()}),(0,a.dl)(function(){registerEventListener()})};function useVirtualList(e){var t=e.minRenderNotes,n=e.notePositions,r=e.list,o=e.columns,u=e.onListEnd,l=e.topBuffer,s=void 0===l?700:l,c=e.getContainer,d=e.loadmoreThresholdColumns,v=e.isAISearch,f=void 0!==v&&v,p=(0,a.iH)(0),h=(0,a.iH)(t.value+0*o.value),g=(0,a.Fl)(function(){if(Array.isArray(r.value))return r.value.slice(p.value,h.value);throw TypeError("list should be array")});f&&(0,a.YP)(function(){return r.value.length},function(e,t){e>t&&(h.value=Math.max(h.value,e))});var m=i()(function(){var e=(null==c?void 0:c())||document.documentElement,i=e.scrollTop;if(f){var a=e.scrollHeight,l=e.clientHeight,v=Math.max(n.value.findIndex(function(e){return e.top+s>=i}),0),g=r.value.length-(v+t.value),m=o.value*d;Array.isArray(r.value)&&(a-(i+l)<100||g<m)&&u(),p.value=v;var y=p.value+t.value;h.value=Math.max(y,h.value,r.value.length)}else{var I=Math.max(n.value.findIndex(function(e){return e.top+s>=i}),0);Array.isArray(r.value)&&r.value.length-(I+t.value)<o.value*d&&u(),p.value=I,h.value=p.value+t.value}},50);return f?composables_useKeepAliveEventListener(function(){return(null==c?void 0:c())||document},"scroll",m):composables_useKeepAliveEventListener((null==c?void 0:c())||document,"scroll",m),{renderList:g,resetRenderList:function(){p.value=0,h.value=0,(0,a.Y3)(function(){h.value=t.value+0*o.value})}}}},98787:function(e,t,n){"use strict";n.d(t,{Z:function(){return useWaterfallLayout}});var r=n(70879),i=n(27337),a=n(82726);n(21608);var o=n(93328),u=n(94186),l=n(83966);function getShortestColumn(e){for(var t=0,n=1;n<e.length;n++)e[n]<e[t]&&(t=n);return t}function useWaterfallLayout(e,t,n,s,c,d){var v,f,p,h=Array(e.value).fill(0);return(0,o.YP)([function(){return e.value},function(){return t.value},function(){return n.value.horizontal}],function(e){h=Array((0,a._)(e,1)[0]).fill(0),v=void 0,f=void 0,p=void 0}),{getItemPosition:function(a,o){if(s.value[o])return(0,i._)((0,r._)({},s.value[o]),{totalHeight:c.value});p=void 0!==d&&d.value%e.value!=0&&d.value-o<=d.value%e.value?o%e.value:getShortestColumn(h),v=h[p],f=p*(t.value+n.value.horizontal),h[p]=h[p]+a+n.value.vertical,s.value[o]={left:f,top:v,column:p+1};var g,m=v+a+n.value.vertical;return!a&&(0,u.Qv)("feed_layout_fail",{type:"getItemPosition",index:o,noteElHeight:a,extra:null!==(g=(0,l.u)({index:o,height:a,nextTop:v,nextLeft:f,shortestColumn:p,colHeights:h,count:null==d?void 0:d.value,notePositions:s.value,gap:n.value}))&&void 0!==g?g:""}),{left:f,top:v,totalHeight:Math.max(m,c.value),column:p+1}}}}},65315:function(e,t,n){"use strict";n.d(t,{L:function(){return useAiInputImage}});var r=n(66002),i=n(93328),a=(0,r.Q_)("AiInputImageStore",function(){return{imageList:(0,i.iH)([])}});function useAiInputImage(){var e=a();return{imageList:(0,r.Jk)(e).imageList}}},44243:function(e,t,n){"use strict";n.d(t,{y:function(){return useAiInputMain}});var r=n(41622),i=n(66993),a=n(377);n(85203),n(87394),n(94941),n(48421),n(97357),n(34333),n(87989);var o=n(16337),u=n(66398),l=n(66002),s=n(93328),c=n(13285),d=n(51948),v=n(32335),f=n(68284),p=n(99505);function useAiInputMain(e,t){var n=(0,s.iH)(null),h=t.textareaEl,g=(0,s.iH)(!1),m=(0,s.iH)(!1),y=(0,s.iH)(e.modelValue),I=(0,c.yj)(),_=(0,f.R)(),w=(0,l.Jk)(_),k=w.suggestions,S=w.userInputSugTrigger,b=(0,d.t)();function updateInputWord(e){y.value=e,t.emit("update:modelValue",e)}function handleInput(e){var n,r=e.target;updateInputWord((null==r?void 0:r.value)||""),t.emit("input",e,y.value);var i=y.value.trim();i?(S.value=i,_.getSugRecommend(i,null===(n=t.imageList)||void 0===n?void 0:n.value.filter(function(e){return!!e.fileId}))):(S.value="",k.value=[])}function _handleFocus(){return(_handleFocus=(0,r._)(function(e){var n,r,i;return(0,a.Jh)(this,function(a){return m.value=!0,t.emit("focus",e),(n=(0,v.t)()).agent&&n.agent.checkHealthy(),(r=y.value.trim())&&_.getSugRecommend&&(S.value=r,_.getSugRecommend(r,null===(i=t.imageList)||void 0===i?void 0:i.value.filter(function(e){return!!e.fileId}))),[2]})})).apply(this,arguments)}function clearInputBeforeSubmit(){t.imageList.value.length>0?_.aiSearchImageList=(0,i._)(t.imageList.value):_.aiSearchImageList=[],(0,s.Y3)(function(){y.value="",t.imageList.value=[]})}function handleItemClick(e){h.value&&h.value.blur(),updateInputWord(e),m.value=!1,t.emit("submit",e,e),clearInputBeforeSubmit()}function handleImgUploadSuccess(e){var t;y.value.trim().length>0?_.getSugRecommend(y.value.trim(),[e]):b.getGuideWordsData({imageList:[{fileId:e.fileId}]}),null===(t=h.value)||void 0===t||t.focus()}function handlePaste(e){e.preventDefault();var n=(e.clipboardData||window.clipboardData).getData("text/plain");if(n&&h.value){var r=h.value.selectionStart||0,i=h.value.selectionEnd||0,a=h.value.value||"",o=a.substring(0,r)+n+a.substring(i);h.value.value=o;var u=r+n.length;h.value.setSelectionRange(u,u),h.value.scrollTop=h.value.scrollHeight,updateInputWord(o);var l=new Event("input",{bubbles:!0});h.value.dispatchEvent(l)}t.handleFileUploadData(e)}function submit(){return _submit.apply(this,arguments)}function _submit(){return(_submit=(0,r._)(function(){var e,n;return(0,a.Jh)(this,function(r){return g.value||y.value.length<=0&&0===t.imageList.value.length?[2]:y.value.length>1e3?((0,u.Am)("内容不能超过 1000 字哦"),[2]):((e=(0,v.t)()).agent&&e.agent.checkHealthy(),n=y.value.trim(),g.value=!0,clearInputBeforeSubmit(),t.emit("submit",n,n),h.value&&h.value.blur(),setTimeout(function(){g.value=!1},1e3),[2])})})).apply(this,arguments)}function handleContainerClick(){h.value&&h.value.focus()}return(0,o.i9H)(n,function(){m.value=!1}),(0,s.YP)(function(){return e.modelValue},function(e){y.value=e},{immediate:!0}),{textareaContainerEl:n,textareaEl:h,isSubmitting:g,isFocused:m,inputWord:y,suggestions:k,userInputSugTrigger:S,handleInput:handleInput,handleFocus:function handleFocus(e){return _handleFocus.apply(this,arguments)},handleBlur:function handleBlur(e){t.emit("blur",e)},handleItemClick:handleItemClick,handleKeySelect:function handleKeySelect(e){updateInputWord(e)},onKeyDown:function onKeyDown(e){if(!e.isComposing)if("Enter"!==e.key||e.shiftKey){if("Enter"===e.key&&e.shiftKey){e.preventDefault();var t=e.target;if(t){var n=t.selectionStart||0,r=t.selectionEnd||0,i=t.value||"",a="".concat(i.substring(0,n),"\n").concat(i.substring(r));t.value=a;var o=n+1;t.setSelectionRange(o,o),updateInputWord(a);var u=new Event("input",{bubbles:!0});t.dispatchEvent(u)}}}else e.preventDefault(),submit()},handlePaste:handlePaste,submit:submit,handleImgUploadSuccess:handleImgUploadSuccess,handleImgUploadClick:function handleImgUploadClick(){(0,p.uk)(89835,{fromPage:I.name})},handleContainerClick:handleContainerClick}}},18879:function(e,t,n){"use strict";n.d(t,{W:function(){return useGuideWords}}),n(87394),n(94941),n(48421),n(97357),n(34333),n(85203);var r=n(48667),i=n(51948),a=n(93328);function useGuideWords(e){var t=(0,i.t)(),n=(0,r.y)(),o=(0,a.Fl)(function(){var n,r,i=e.imageList.value.filter(function(e){return!!e.fileId}).length>0;return e.isFocused.value&&i&&0===e.inputWord.value.trim().length&&!!(null===(r=t.guideWordsData)||void 0===r?void 0:null===(n=r.guides)||void 0===n?void 0:n.length)&&!e.isGenerating.value}),u=(0,a.Fl)(function(){if(e.aiInputInHeader.value)return!1;var t,r,i=e.imageList.value.filter(function(e){return!!e.fileId}).length>0;return e.isFocused.value&&!i&&0===e.inputWord.value.trim().length&&!!(null===(r=n.guideWords)||void 0===r?void 0:null===(t=r.guides)||void 0===t?void 0:t.length)});return{guideWordsData:(0,a.Fl)(function(){return u.value?n.guideWords:t.guideWordsData}),showGuideWords:(0,a.Fl)(function(){return o.value||u.value})}}},63176:function(e,t,n){"use strict";n.d(t,{a:function(){return useOptTooltip}});var r=n(6890),i=n(68284),a=n(93328);function useOptTooltip(e){var t=(0,r.s6)(),n=(0,i.R)(),o=(0,a.Fl)(function(){var e;return null==t?void 0:null===(e=t.appSettings)||void 0===e?void 0:e.aiSearchConfig}),u=(0,a.Fl)(function(){var e,t;return(null==o?void 0:null===(t=o.value)||void 0===t?void 0:null===(e=t.acrosssWebConfig)||void 0===e?void 0:e.text)||"联网搜索"}),l=(0,a.Fl)(function(){if(null==n?void 0:n.aiSearchAcrosssWeb){var t,r;return(null==o?void 0:null===(r=o.value)||void 0===r?void 0:null===(t=r.searchInputImageConfig)||void 0===t?void 0:t.disableTextWhenAcrossWeb)||"联网搜索暂不支持上传图片"}return e.imageList.value.length,"暂仅支持上传1张图片"});return{acrosssWebText:u,webOptTooltipContent:(0,a.Fl)(function(){var t,r,i,a;return e.imageList.value.length>0?(null==o?void 0:null===(a=o.value)||void 0===a?void 0:null===(i=a.acrosssWebConfig)||void 0===i?void 0:i.disableTextWhenInputImage)||"图片搜索暂不支持联网搜索":n.aiSearchAcrosssWeb?"":(null==o?void 0:null===(r=o.value)||void 0===r?void 0:null===(t=r.acrosssWebConfig)||void 0===t?void 0:t.onTooltipContent)||"开启后将搜索全网内容"}),imageOptTooltipContent:l}}},75383:function(e,t,n){"use strict";n.d(t,{F:function(){return useFileDataModel}});var r=n(41622),i=n(377);n(72169),n(58486),n(87989),n(86651),n(41593),n(85203);var a=n(66398),o=n(30418),u=n(23041),l=n(93328);function useUploadImage(){var e=(0,l.iH)(null);function _uploadImage(){return(_uploadImage=(0,r._)(function(t,n){var r,a,o;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(e.value)return[3,2];return[4,(0,u.ZP)({bizName:"search",scene:"image"})];case 1:e.value=i.sent(),i.label=2;case 2:if(!(e.value&&t))return[3,6];r={url:t,type:"local",fileId:"",status:"uploading",message:""},null==n||n(r),i.label=3;case 3:return i.trys.push([3,5,,6]),[4,e.value.uploadImage(t)];case 4:if(null==(a=i.sent())?void 0:a.fileId)return[2,r={url:a.previewUrl||t,fileId:a.fileId,type:"cdn",status:"success",message:""}];return[3,6];case 5:return[2,r={url:t,type:"local",fileId:"",status:"failed",message:null==(o=i.sent())?void 0:o.message}];case 6:return[2]}})})).apply(this,arguments)}return(0,l.bv)((0,r._)(function(){return(0,i.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,u.ZP)({bizName:"search",scene:"image"})];case 1:return e.value=t.sent(),[2]}})})),{uploadImage:function uploadImage(e,t){return _uploadImage.apply(this,arguments)},checkImgSize:function checkImgSize(e,t){return!(e.size/1048576>t.maxSize)&&!0}}}var s=n(51948),c=n(6890),d=n(68284),v=n(94809),f=n(33114),p=n(35307);function useFilePaste(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{maxCount:1,maxSize:10},t=useUploadImage(),n=t.checkImgSize,u=t.uploadImage;function _handleFilePaste(){return(_handleFilePaste=(0,r._)(function(t,r){var l,s,c,d,h,g,m,y,I,_,w,k,S,b,M,L,x,T,D;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(!(h=(null==t?void 0:null===(s=t.clipboardData)||void 0===s?void 0:null===(l=s.files)||void 0===l?void 0:l[0])||(null==t?void 0:null===(d=t.dataTransfer)||void 0===d?void 0:null===(c=d.files)||void 0===c?void 0:c[0])))return[3,7];if(m=(0,f.DO)(),y=h.size,I=h.type.replace("image/","")||"unknown",_=t instanceof ClipboardEvent?v.jL.TRIGGER_PASTE:v.jL.TRIGGER_DRAG,(0,v.wN)({type:_,uuid:m,time:Date.now(),size:y,raw_type:I}),!(0,p.CO)(h))return(0,a.Am)("暂仅支持上传1张图片"),[2];if((null==r?void 0:null===(g=r.onBeforeCheck)||void 0===g?void 0:g.call(r))===!1)return(0,v.wN)({type:v.jL.ERROR,uuid:m,time:Date.now(),size:y,raw_type:I,error_msg:"前置检查失败"}),[2];if(!n(h,{maxSize:e.maxSize}))return(0,a.Am)("图片大小不能超过".concat(e.maxSize,"MB")),[2];i.label=1;case 1:return i.trys.push([1,6,,7]),[4,(0,o.O2)(h,"dataUrl")];case 2:if(!(w=i.sent()))return(0,a.Am)("图片读取失败"),(0,v.wN)({type:v.jL.ERROR,uuid:m,time:Date.now(),size:y,raw_type:I,error_msg:"图片读取失败"}),[2];if(S="jpeg"!==(k=(0,p.T1)(w))&&"jpg"!==k,b=w,!S)return[3,4];return(0,v.wN)({type:v.jL.CONVERT,uuid:m,time:Date.now(),size:y,raw_type:I}),[4,(0,p.MO)(w,.9)];case 3:b=i.sent(),i.label=4;case 4:if(!(0,p.V1)(b))return(0,a.Am)("图片格式转换失败，请重试"),(0,v.wN)({type:v.jL.ERROR,uuid:m,time:Date.now(),size:y,raw_type:I,error_msg:"图片格式转换失败"}),[2];return(0,v.wN)({type:v.jL.START,uuid:m,time:Date.now(),size:y,raw_type:I}),[4,u(b,null==r?void 0:r.onBeforeUpload)];case 5:return(M=i.sent())?((0,v.wN)({type:v.jL.END,uuid:m,time:Date.now(),size:y,raw_type:I,fileId:M.fileId}),null==r||null===(L=r.onSuccess)||void 0===L||L.call(r,M)):((0,v.wN)({type:v.jL.ERROR,uuid:m,time:Date.now(),size:y,raw_type:I,error_msg:"上传出错"}),null==r||null===(x=r.onError)||void 0===x||x.call(r,Error("上传出错"),M)),[3,7];case 6:return T=i.sent(),(0,a.Am)((null==T?void 0:T.message)||"图片处理失败"),(0,v.wN)({type:v.jL.ERROR,uuid:m,time:Date.now(),size:y,raw_type:I,error_msg:(null==T?void 0:T.message)||"图片处理失败"}),null==r||null===(D=r.onError)||void 0===D||D.call(r,T),[3,7];case 7:return[2]}})})).apply(this,arguments)}return{handleFilePaste:function handleFilePaste(e,t){return _handleFilePaste.apply(this,arguments)}}}function useFileDataModel(e){var t=useFilePaste().handleFilePaste,n=(0,l.iH)(!1),r=(0,d.R)(),i=(0,c.s6)(),o=(0,s.t)(),u=(0,l.Fl)(function(){var e;return null==i?void 0:null===(e=i.appSettings)||void 0===e?void 0:e.aiSearchConfig});function handleImgUploadSuccess(t){var n;e.inputWord.value.trim().length>0?r.getSugRecommend(e.inputWord.value.trim(),[t]):o.getGuideWordsData({imageList:[{fileId:t.fileId}]}),null===(n=e.textareaEl.value)||void 0===n||n.focus()}function handleFileUploadData(n){t(n,{onBeforeCheck:function(){if(r.aiSearchAcrosssWeb){var t,n,i=(null==u?void 0:null===(n=u.value)||void 0===n?void 0:null===(t=n.searchInputImageConfig)||void 0===t?void 0:t.disableTextWhenAcrossWeb)||"联网搜索暂不支持上传图片";return(0,a.Am)(i),!1}return!(e.imageList.value.length>0)||((0,a.Am)("暂仅支持上传1张图片"),!1)},onSuccess:function(t){e.imageList.value=[t],handleImgUploadSuccess(t)},onError:function(t,n){if(n)e.imageList.value=[n];else{var r=e.imageList.value[0]||{fileId:"",url:"",type:"local",status:"failed",message:""};r.status="failed",r.message=(null==t?void 0:t.message)||"上传出错",e.imageList.value=[r]}}})}function handleDragOver(){n.value=!0}function handleDrop(e){n.value=!1,handleFileUploadData(e)}function handleDragLeave(){n.value=!1}return{isDragOver:n,handleDragOver:handleDragOver,handleDrop:handleDrop,handleFileUploadData:handleFileUploadData,handleDragLeave:handleDragLeave,handleImgUploadSuccess:handleImgUploadSuccess}}},49791:function(e,t,n){"use strict";n.d(t,{R:function(){return useNewNoteRouteExp}});var r=n(98413),i=n(13285),a=n(6890),o=n(93328);function useNewNoteRouteExp(){var e=(0,i.yj)(),t=(0,a.s6)();return(0,o.Fl)(function(){return e.name===r.Z.AISearchName||"pwa"!==e.query.m_source&&!t.isNIO})}},2516:function(e,t,n){"use strict";n.d(t,{Z:function(){return useAppSettings},h:function(){return u}});var r=n(70879),i=n(93328),a=n(74741),o=n(6890),u={retryFeeds:!1,notificationInterval:30,searchBonus:{activityDateRange:[["2024-01-29 10:00:00","2024-02-02 23:59:59"],["2024-02-05 10:00:00","2024-02-09 18:00:00"]],kvFrontUrl:"//picasso-static.xiaohongshu.com/fe-platform/c9046f1cca77a4ed46f2c45bd160938e75eb1577.png",kvBackUrl:"//picasso-static.xiaohongshu.com/fe-platform/bf30b7031656a72bd458ba909c4637783acad745.png",titleWin:"//picasso-static.xiaohongshu.com/fe-platform/2b2dd805766b59500b63b39c537970db8daa5928.png",titleLose:"//picasso-static.xiaohongshu.com/fe-platform/19c62fe39d69657c5a6de9bf5741922df301e027.png",titleShare:"//picasso-static.xiaohongshu.com/fe-platform/d43b174d1256e3343a70c792b5ac0e876b9788a8.png",coverNormal:"//picasso-static.xiaohongshu.com/fe-platform/95f1365983deb84a713fd37c1e387b47a5e13cf8.png",coverSpecial:"//picasso-static.xiaohongshu.com/fe-platform/bcaaf05a5ca6b42c9b8754a3c66f627fe684adbd.png",buttonWin:"//picasso-static.xiaohongshu.com/fe-platform/af6a9b27db8df6227989ae426b254836b692194d.png",buttonLose:"//picasso-static.xiaohongshu.com/fe-platform/bcc28783250a7d85f4aec6e1aff078f8139fc633.png",rehearsal:!1,whiteList:[],disableAnimation:[]},ICPInfoList:a.zj,disableBanAlert:"false",searchFilterGuideConfig:{maxDailyShow:1,maxTotalShow:3,showInterval:1,validDays:15,autoCloseDelay:5e3},aiSearchConfig:{searchInputImageConfig:{disableTextWhenAcrossWeb:"联网搜索暂不支持上传图片"},acrosssWebConfig:{enable:!1,text:"联网搜索",icon:"",disableTextWhenInputImage:"图片搜索暂不支持联网搜索",offTooltipContent:"",onTooltipContent:"开启后将搜索全网内容"},searchHintConfig:{homePageSearchInputHint:"搜索或输入任何问题"},sugConfig:{maxSugCount:10}}};function useAppSettings(){var e=(0,o.s6)();(0,i.vl)(function(){var t,n,a=(0,i.Zq)(),o=(0,r._)({},null==a?void 0:null===(n=a.state)||void 0===n?void 0:null===(t=n.store)||void 0===t?void 0:t.apolloData);delete o.allCSR,e.updateAppSettings(o)})}},32602:function(e,t,n){"use strict";n.d(t,{$G:function(){return unSupportPwa},MN:function(){return useRegisterServiceWorker}}),n(25069),n(58486),n(74719),n(13396),n(34333),n(91313),n(27461),n(23339),n(51109);var r=n(93328),i=n(52997),a=n(6890),o=n(16337);function unSupportPwa(){return!("serviceWorker"in navigator&&/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9.]+)/.test(navigator.userAgent))}function useRegisterServiceWorker(){var e=(0,a.s6)(),screenChangeListener=function(){var e=window.matchMedia("(display-mode: minimal-ui)"),t=(0,i.bq)(),onMediaQueyChange=function(){e.matches&&t("pwa")};onMediaQueyChange(),e.onchange=onMediaQueyChange},registerServiceWorker=function(){if(!unSupportPwa())navigator.serviceWorker.register("/web-static/sw.js",{scope:"/"}).then(function(e){console.log("Service Worker registered success with scope:",e.scope)}).catch(function(e){navigator.serviceWorker.getRegistrations().then(function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=e[Symbol.iterator]();!(t=(i=a.next()).done);t=!0)i.value.unregister()}catch(e){n=!0,r=e}finally{try{!t&&null!=a.return&&a.return()}finally{if(n)throw r}}}).catch(function(e){console.error(e)}),console.error("Service Worker registration failed:",e)})},addSupportPromptListener=function(){(0,o.ORN)(window,"beforeinstallprompt",function(t){t.preventDefault(),e.pwaAddDesktopPrompt=t})};(0,r.bv)(function(){addSupportPromptListener(),registerServiceWorker(),screenChangeListener()})}},36370:function(e,t,n){"use strict";n.d(t,{Fx:function(){return traverseDetailDataToCard},f7:function(){return useEnhancedAutoOpenNote},oQ:function(){return openUnderTakeNote},rI:function(){return useNeedOpenUndertakeNote}});var r=n(41622),i=n(70879),a=n(64593),o=n(377);n(58051),n(72169),n(58486);var u=n(40122),l=n(35547),s=n(91547),c=n(39317),d=n(13285),v=n(93328),f=n(6890),p=n(85537),h=n(66002);function traverseDetailDataToCard(e){if(null==e?void 0:e.noteCard){var t;Object.assign(e.noteCard,{cover:null===(t=e.noteCard.imageList)||void 0===t?void 0:t[0],displayTitle:e.noteCard.title})}return(0,i._)({},e)}function openUnderTakeNote(e,t){var n=t.noteFlowSource,r=t.xsecToken,i=t.xsecSource;(0,c.NW)().$mitt.emit("openNoteDetail",{noteId:e,report:!1,query:{note_flow_source:n,xsec_token:r,xsec_source:i}})}function useNeedOpenUndertakeNote(){var e,t,n,r=(0,d.yj)(),i=(0,v.iH)(!1),a=null==r?void 0:null===(e=r.query)||void 0===e?void 0:e.target_note_id,o=null===(t=r.query)||void 0===t?void 0:t.note_flow_source,u=null===(n=r.query)||void 0===n?void 0:n.xsec_token;return a&&(i.value=!0),{needOpenUndertakeNote:i,noteFlowSource:o,noteId:a,xsecToken:u}}function useEnhancedAutoOpenNote(){var e,t=(0,d.yj)(),n=(0,d.tv)(),i=(0,c.NW)(),g=(0,f.s6)(),m=(0,p.L)(),y=useNeedOpenUndertakeNote(),I=y.noteId,_=y.noteFlowSource,w=y.needOpenUndertakeNote,k=y.xsecToken,S=(0,h.Jk)(i),b=S.undertakeNote,M=S.feeds;var L=(e=(0,r._)(function(){var e,t,n,r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(!w.value)return[2];return t={sourceNoteId:I,imageFormats:g.imageFormatParams},[4,(0,u.an)(t,{headers:{"xy-direction":(0,l.$)(null!==(n=null===(e=m.userInfo)||void 0===e?void 0:e.userId)&&void 0!==n?n:"")}})];case 1:return r=i.sent(),b.value=r,[2]}})}),function requestUnderTakeNoteData(){return e.apply(this,arguments)});return w.value&&((0,v.bv)(function(){s.A.updateState(s.T.inContinued,function(){return w})}),(0,v.YP)(t,function(){var e=t.query,r=e.target_note_id,i=(e.note_flow_source,e.xsec_token,e.xsec_source,(0,a._)(e,["target_note_id","note_flow_source","xsec_token","xsec_source"]));if(!!r)n.replace({query:i})})),(0,v.bv)(function(){var e,t;w.value&&(null===(t=M.value)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.id)===I&&setTimeout(function(){return openUnderTakeNote(I,{noteFlowSource:_,xsecToken:k})},1e3)}),{requestUnderTakeNoteData:L,openUnderTakeNote:openUnderTakeNote}}},73251:function(e,t,n){"use strict";n.d(t,{B:function(){return useServerFeedsCache},c:function(){return useFeedsCacheStore}});var r=n(41622),i=n(82726),a=n(377);n(7608);var o=n(94186),u=n(81933),l=n(93328),s=n(69876),c=n(39317),d=n(66002);function useFeedsCacheStore(){var e=(0,l.iH)([]),t=(0,l.qj)({flag:"unknown",errorCode:0,isHitMfCache:!1,SSRDocumentChecked:!1,SSRDocumentCheckedSuccess:!1}),n=(0,i._)((0,s.OT)(!1),2),r=n[0],a=n[1],o=(0,i._)((0,s.OT)(!1),2),u=o[0],c=o[1];return{placeholderFeeds:e,feedsCacheLogInfo:t,clearPlaceholderFeeds:function(){e.value=[]},isUsingPlaceholderFeeds:r,setIsUsingPlaceholderFeeds:a,placeholderFeedsConsumed:u,setPlaceholderFeedsConsumed:c}}function useFeedsCacheClientBootStrap(){var e=(0,c.NW)(),t=(0,d.Jk)(e).feedsCacheLogInfo,checkSSRDocument=function(){t.value.SSRDocumentChecked=!0;var e=void 0!==document.querySelector(".note-item");t.value.SSRDocumentCheckedSuccess=e};(0,l.wF)((0,r._)(function(){return(0,a.Jh)(this,function(t){return(0,u.Z)(e.prefetchId)&&checkSSRDocument(),(0,o.L_)({msg:JSON.stringify(e.feedsCacheLogInfo)}),[2]})}))}function useServerFeedsCache(){useFeedsCacheClientBootStrap()}},29953:function(e,t,n){"use strict";n(7608);var r=n(69876),i=n(51401),a=n(66002),o=n(81334),u=n(39317);function getFirstUnexposedFeedIndex(e){for(var t=e.length,n=t-1;n>=0;n--){var r=e[n],i=r.exposed,a=r.ignore;if(i&&!a)return n!==t-1?n+1:-1}return -1}function useTrackUnreadFeed(){var e=(0,u.NW)(),t=(0,a.Jk)(e),n=t.unreadInfo,l=t.feeds,s=t.query;(0,r.B_)(l,function(e){if(!!(null==e?void 0:e.length)&&"homefeed_recommend"===s.value.category){var t=getFirstUnexposedFeedIndex(e);if(t>-1&&(null==n?void 0:n.value)){n.value.unreadBeginNoteId=null===(r=e[t])||void 0===r?void 0:r.id;for(var r,a,u,l,c=t,d=t;d<e.length;d++)!(null===(l=e[d])||void 0===l?void 0:l.ignore)&&(c=d);n.value.unreadEndNoteId=null===(a=e[c])||void 0===a?void 0:a.id,n.value.unreadNoteCount=c-t+1,null===(u=window)||void 0===u||u.localStorage.setItem(o.Z.UNREAD_NOTE_INFO,JSON.stringify(n.value)),i.Z.set("unread",JSON.stringify({ub:n.value.unreadBeginNoteId,ue:n.value.unreadEndNoteId,uc:n.value.unreadNoteCount}),{domain:".xiaohongshu.com"})}}},{deep:!0,debounce:500})}t.Z=useTrackUnreadFeed},95874:function(e,t,n){"use strict";n.d(t,{h:function(){return useHandleHttpCatch}});var r,i=n(41622),a=n(70879),o=n(377);n(42876),n(33933),n(7608),n(86651);var u=n(66398),l=n(8048),s=n(85537),c=n(52504),d=n(94186);function toast(e,t,n){(0,u.zM)(e.message||(null!=t?t:"薯队长遇到了点小麻烦"),{extra:n})}function handle104(e,t){null==t||t();var n=(0,l.r0)();if(e.code===c.o.Activated){n.openLogin(l.yC.NoAuth);return}toast(e)}function handleJustToast(e,t,n){toast(e,void 0,n)}function handleSearchToast(e){if([c.o.Activated,c.o.UnLogin,c.o.UnActivate].includes(e.code)){(0,u.zM)("登录后查看搜索结果");return}if((e.message||e.msg).includes("timeout")){(0,u.zM)("薯队长遇到了点小麻烦");return}toast(e)}function handleJustCallback(e,t){null==t||t()}var ignore=function(){return null},v={getApiSnsWebV2CommentPage:console.log,getApiSnsWebV2CommentSubPage:console.log,postApiSnsWebV1CommentDelete:handleJustToast,postApiSnsWebV1CommentPost:handleJustToast,postApiSnsWebV1CommentLike:handle104,postApiSnsWebV1CommentDislike:handle104},f={postApiSnsWebV1NoteMetricsReport:console.warn,postApiSnsWebV1NoteCollect:handle104,postApiSnsWebV1NoteUncollect:handle104,postApiSnsWebV1NoteLike:handle104,postApiSnsWebV1NoteDislike:handle104};var p={getApiSnsWebV1LoginCheckCode:function(e){e.code===c.o.CommonError?toast(e):"HTTPBizError"===e.name?(0,l.r0)().errors.authCode=e.message:toast(e)},getApiSnsWebV1LoginSendCode:function(e){if(e.status!==c.o.InAntiSpamChecking&&e.code!==c.o.InAntiSpamChecking)e.code,c.o.CommonError,toast(e)},getApiSnsWebV1LoginQrcodeStatus:function(e,t){e.code===c.o.RiskIntercept?toast(e):e.code===c.o.CommonError?toast(e):null==t||t()},getApiSnsWebV2UserMe:(r=(0,i._)(function(e,t){return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,null==t?void 0:t()];case 1:if(n.sent(),e.code===c.o.CommonError)throw toast(e),e;return[2]}})}),function(e,t){return r.apply(this,arguments)}),postApiSnsWebV1LoginQrcodeCreate:handleJustToast,postApiSnsWebV1LoginCode:handleJustToast},h=(0,a._)({},p,v,{getApiImRedmojiVersion:handleJustCallback,getApiImRedmojiDetail:handleJustCallback},f,{getApiSnsWebV1UserSelfinfo:handleJustCallback,getApiSnsWebV1UserOtherinfo:handleJustCallback,postApiSnsWebV1UserFollow:handleJustToast,postApiSnsWebV1UserUnfollow:handleJustToast},{getApiSnsWebV1UserPosted:handleJustToast,getApiSnsWebV2NoteCollectPage:handleJustToast,getApiSnsWebV1NoteLikePage:handleJustToast,postApiSnsWebV1Feed:function(e,t){t?t():toast(e,e.msg||"笔记加载失败")},postApiSnsWebV1Homefeed:function(e,t){e.code===c.o.Expired?((0,u.zM)(e.message||e.msg||"登录已过期"),setTimeout(function(){window.location.reload()},1e3)):(toast(e),null==t||t())}},{getApiSnsWebV1SearchFilters:ignore,postApiSnsWebV1SearchNotes:handleSearchToast,getApiSnsWebV1SearchRecommend:ignore,getApiSnsWebV1SearchQuerytrending:ignore,postApiSnsWebV1SearchOnebox:ignore,postApiSnsWebV1SearchUsersearch:ignore,getApiSnsWebV1SearchHotlist:ignore},{postApiSnsWebV1LoginSocial:handleJustCallback},{fetchNotificationList:handleJustToast,fetchUnreadCount:ignore},{getApiSnsWebGlobalConfig:ignore,postApiSnsWebActivityUserTaskPackage:ignore,postApiSnsWebActivityToNextStage:ignore,postApiSnsWebActivitySubmitAssistance:ignore,postApiSnsWebActivityReportEvent:ignore,postApiSnsWebActivityDrawLottery:ignore},{getApiSnsWebV1BoardNote:ignore,postApiSnsWebV1Board:ignore,deleteApiSnsWebV1Board:ignore,putApiSnsWebV1Board:handleJustCallback,getApiSnsWebV1BoardByBoardId:ignore,getApiSnsWebV1BoardUser:handleJustCallback,postApiSnsWebV1NoteMove:ignore},{getApiSnsRedLiveWebFeedV1Squarefeed:function(e,t){toast(e,e.msg||"加载失败"),null==t||t()}});function useHandleHttpCatch(){var e,t=(0,s.L)(),handleBan=function(e,n){var r,i;(0,d.Qv)("accountBanned",{type:"api",info:JSON.stringify({error:e,api:n})}),t.bannedInfo.code=e.code,t.bannedInfo.reason=e.message,t.bannedInfo.showAlert=!0,t.bannedInfo.api=n,(null===(i=e.data)||void 0===i?void 0:null===(r=i.data)||void 0===r?void 0:r.user_id)&&(t.bannedInfo.userId=e.data.data.user_id)};return{handleHttpCatch:(e=(0,i._)(function(e,t,n){var r,i;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(![c.o.AccountBanned,c.o.CommentForbidden,c.o.InteractionForbidden].includes(t.code))return[3,5];console.log("Account Banned",e,t),handleBan(t,e),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,null==n?void 0:n()];case 2:return i.sent(),[3,4];case 3:return i.sent(),(0,d.jF)("SnsPcCommonError",{type:"handleHttpCatch",pageName:"",noteType:"",error:t.code}),[3,4];case 4:return[2];case 5:return[4,null===(r=h[e])||void 0===r?void 0:r.call(h,t,n,e)];case 6:return i.sent(),[2]}})}),function handleHttpCatch(t,n,r){return e.apply(this,arguments)})}}},1801:function(e,t,n){"use strict";n.d(t,{EV:function(){return h},OX:function(){return useOnBoardingState},X9:function(){return useGetRegisterFusingConfig},vt:function(){return useOnBoardingClientBootstrap}});var r,i=n(41622),a=n(82726),o=n(377);n(7608),n(87989),n(86651),n(19077),n(75973),n(42876),n(33933);var u=n(40122),l=n(5977),s=n(81334),c=n(85537),d=n(69876),v=n(93328),f=n(8048),p=n(66002);var h=((r=h||{}).Gender="100",r.Age="101",r.Hobby="102",r.Download="103",r);function useOnBoardingState(){var e,t,n,r,l,f,p,h=(0,c.L)(),g=(0,a._)((0,d.OT)(!1),2),m=g[0],y=g[1],I=(0,a._)((0,d.OT)(null),2),_=I[0],w=I[1],k=(0,a._)((0,d.OT)(void 0),2),S=k[0],b=k[1],M=(0,v.iH)(void 0),L=(0,v.iH)("21"),x=(0,v.iH)([]);var T=(e=(0,i._)(function(e){var t,n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,h.getUserInfo({disableCache:!0,reloadOnFail:!1,disableChangeLoggedIn:!0})];case 1:return r.sent(),t=h.userInfo.userId,n=JSON.stringify({currentObPage:e,gender:M.value,age:L.value}),window.localStorage.setItem("".concat(t,"_").concat(s.Z.OB_PAGES),n),[2]}})}),function syncObCache(t){return e.apply(this,arguments)});var D=(t=(0,i._)(function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,h.getUserInfo({disableCache:!0,reloadOnFail:!1,disableChangeLoggedIn:!0})];case 1:return t.sent(),e=h.userInfo.userId,window.localStorage.removeItem("".concat(e,"_").concat(s.Z.OB_PAGES)),[2]}})}),function clearObCache(){return t.apply(this,arguments)});var N=(n=(0,i._)(function(e,t){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return n=t,"web_age"===e&&"50+"===t&&(n="50"),[4,(0,u.R6)({key:e,value:n})];case 1:return r.sent(),[2]}})}),function reportUserInfo(e,t){return n.apply(this,arguments)});var E=(r=(0,i._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,u.Qy)({params:{gender:M.value,age:L.value}})];case 1:return[2,e.sent()]}})}),function getHobbyRecList(){return r.apply(this,arguments)});var R=(l=(0,i._)(function(e){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,u.Rx)({ids:e})];case 1:return t.sent(),[2]}})}),function reportHobby(e){return l.apply(this,arguments)});return{isObPagesVisible:m,setIsObPagesVisible:y,obPageFillInProgress:_,setObPageFillInProgress:w,beforeFillInGender:function(){T("100")},beforeFillInHobby:function(){return T("102")},beforeFillInAge:function(){return T("101")},afterFillInHobby:(f=(0,i._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return D(),[4,h.getUserInfo()];case 1:return e.sent(),[2]}})}),function afterFillInHobby(){return f.apply(this,arguments)}),genderSelectValue:M,ageSelectValue:L,hobbySelectValue:x,reportUserInfo:N,getHobbyRecList:E,reportHobby:R,isRegFusing:S,getRegisterFusingConfig:(p=(0,i._)(function(){var e,t,n;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,u.K4)()];case 1:return b(null!==(t=null==(e=n.sent())?void 0:e.downgradeUserRegister)&&void 0!==t&&t),[3,3];case 2:return n.sent(),[3,3];case 3:return[2]}})}),function getRegisterFusingConfig(){return p.apply(this,arguments)})}}function useOnBoardingClientBootstrap(){var e=(0,f.r0)(),t=(0,c.L)(),n=(0,p.Jk)(e),r=n.showLogin,a=n.genderSelectValue,u=n.ageSelectValue;(0,v.bv)((0,i._)(function(){var n,i,l;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,t.getUserInfo()];case 1:if(o.sent(),!t.loggedIn)return[2];if(n=t.userInfo.userId,i=window.localStorage.getItem("".concat(n,"_").concat(s.Z.OB_PAGES)))try{l=JSON.parse(i),["100","101","102"].includes(l.currentObPage)&&(a.value=l.gender,u.value=l.age,e.setObPageFillInProgress(l.currentObPage),e.setIsObPagesVisible(!0),r.value=!0)}catch(e){}return[2]}})}))}function useGetRegisterFusingConfig(){var e=(0,f.r0)(),t=(0,p.Jk)(e).isRegFusing;(0,l.X)(t,e.getRegisterFusingConfig)}},82674:function(e,t,n){"use strict";n.d(t,{l:function(){return useNoteXsecSource}});var r,i=n(51606),a=n(93328),o=n(13285),u=n(91663),l=n(64300),s=(r={},(0,i._)(r,u.Dq.Explore,"pc_feed"),(0,i._)(r,u.Dq.User,"pc_user"),(0,i._)(r,u.Dq.Board,"pc_user"),(0,i._)(r,u.Dq.Search,"pc_search"),r),c={note:"pc_user",fav:"pc_collect",liked:"pc_like"};function useNoteXsecSource(e){var t=(0,o.yj)(),n=(0,l.dw)();return{noteXsecSource:(0,a.Fl)(function(){return e===u.Dq.Explore&&n.prevRouteData.channel&&"homefeed_recommend"!==n.prevRouteData.channel?"pc_cfeed":e===u.Dq.User?c[t.query.tab]||"pc_user":s[n.prevRoute]||""})}}},14759:function(e,t,n){"use strict";n.d(t,{y:function(){return useOpenNote}}),n(86651),n(87989);var r=n(13285),i=n(64300);function useOpenNote(){var e=(0,r.tv)(),t=(0,i.dw)();return{openNote:function(n){var r,i=n.noteId,a=n.prevRoute,o=n.prevRoutePath,u=n.topCommentId,l=n.imageList,s=n.query,c=n.type;t.prevRoute=a,t.topCommentId=u||"",(null==l?void 0:l.length)&&(null===(r=l[0])||void 0===r?void 0:r.url)&&(t.prevRouteData.cover=l[0].url),t.updateNoteByNoteId(i,{note:{imageList:(null==l?void 0:l.length)?l:[],type:c}}),e.push({path:"".concat(o,"/").concat(i),query:s})}}}},71852:function(e,t,n){"use strict";n.d(t,{C:function(){return useGrayMode}}),n(42876),n(33933);var r=n(8306),i=n(66002),a=n(98413),o=n(6890),u=n(93328),l=n(13285);function useGrayMode(){var e=(0,i.Jk)((0,o.s6)()),t=e.serverTime,n=e.appSettings,s=(0,u.Fl)(function(){return n.value.grayModeConfig}),c=(0,l.yj)(),d=(0,u.Fl)(function(){var e;return(0,r.tA)(t.value,null===(e=s.value)||void 0===e?void 0:e.dateRange)});return{globalGray:(0,u.Fl)(function(){var e;return d.value&&(null===(e=s.value)||void 0===e?void 0:e.global)}),LayoutGray:(0,u.Fl)(function(){var e,t;return!!d.value&&(null===(e=s.value)||void 0===e?!!void 0:!!e.greyRule.layout.enable)&&(null===(t=s.value)||void 0===t?void 0:t.greyRule.layout.pages.includes(c.name))}),exploreFeedsGray:(0,u.Fl)(function(){var e;return!!d.value&&(null===(e=s.value)||void 0===e?void 0:e.greyRule.pages.includes(a.Z.ExploreName))}),noteDetailGray:(0,u.Fl)(function(){var e;return!!d.value&&(null===(e=s.value)||void 0===e?void 0:e.greyRule.pages.includes(a.Z.ExploreNoteName))}),disableLikeNotes:(0,u.Fl)(function(){var e,t;return d.value?Array.isArray(null===(e=s.value)||void 0===e?void 0:e.disableLikeNotes)?null===(t=s.value)||void 0===t?void 0:t.disableLikeNotes:[]:[]}),disableSearchHint:(0,u.Fl)(function(){var e;return d.value&&(null===(e=s.value)||void 0===e?void 0:e.disableSearchHint)})}}},6707:function(e,t,n){"use strict";n.d(t,{L:function(){return collectElementTiming},V:function(){return u}}),n(42876),n(33933),n(87989);var r,i=n(13285),a=n(16337),o=n(93328);var u=((r={})[r.Success=1]="Success",r[r.Interacted=-1]="Interacted",r[r.NotSupportPerformanceObserver=-2]="NotSupportPerformanceObserver",r[r.NotSupportElementTiming=-3]="NotSupportElementTiming",r[r.NoTargetElement=-4]="NoTargetElement",r[r.RouteChange=-5]="RouteChange",r);function collectElementTiming(e){var t,n,r=e.elementKey,u=e.timeout,l=void 0===u?2e4:u,s=e.onReady,c=e.onFail,d=(0,i.tv)(),v=!1,f=Date.now(),onFailed=function(e){v=!0,c(e)};(!("PerformanceObserver"in window)||!("supportedEntryTypes"in PerformanceObserver))&&onFailed(-2),!(null===(n=PerformanceObserver)||void 0===n?void 0:null===(t=n.supportedEntryTypes)||void 0===t?void 0:t.includes("element"))&&onFailed(-3);var p=(0,a.ORN)(document,["scroll","click"],function(){onFailed(-1),p()},!0);d.beforeEach(function(e,t,n){onFailed(-5),n()});var listenTargetElementMount=function(){requestAnimationFrame(function(){if(!v){if(Date.now()-f>l){onFailed(-4);return}if(document.querySelectorAll('[elementtiming="'.concat(r,'"]')).length>0){s();return}listenTargetElementMount()}})};(0,o.bv)(listenTargetElementMount)}},3553:function(e,t,n){"use strict";n.d(t,{d:function(){return s},I:function(){return useFirstFeedsMonitor}});var r=n(70879);n(82427),n(36062),n(57057),n(97357),n(34333),n(86651),n(87989),n(87394),n(94941),n(48421),n(42876),n(33933),n(23329),n(75973),n(87535),n(75204),n(63712);var i=n(43819),a=n(94186),o=n(66993);n(28636);var validMetrics=function(e){return Array.isArray(e)&&e.length>0};function getAvg(e){return validMetrics(e)?e.reduce(function(e,t){return e+t},0)/e.length:-1}function getP50(e){return validMetrics(e)?e.sort(function(e,t){return e-t})[Math.floor(e.length/2)]:-1}function getMax(e){var t;return validMetrics(e)?(t=Math).max.apply(t,(0,o._)(e)):-1}var u=n(6707),l=n(39317),s="card-exposed";function useFirstFeedsMonitor(){var e=(0,l.NW)(),t=!1,n=null,o=0,c={},d={},getMetrics=function(e){return e.reduce(function(e,t){return e.startTime.push(t.startTime),e.loadTime.push(t.loadTime),e},{startTime:[],loadTime:[]})},getImageMetrics=function(e){return(window.performance.resourcesBufferCache||[]).concat(window.performance.getEntriesByType("resource")).filter(function(t){return e.includes(t.name)}).reduce(function(e,t){return e.duration.push(t.duration),e.connect.push(t.duration-(t.responseEnd-(t.requestStart||t.startTime))),e},{duration:[],connect:[]})},report=function(n){var u=getMetrics(Object.values(c)),l=getImageMetrics(Object.keys(c)),s=getMetrics(Object.values(d)),v=getImageMetrics(Object.keys(d)),f=(0,i.eB)(),p=(0,i.Ru)(),h=(0,r._)({prv_firstScreen:getMax(u.startTime),prv_firstScreenLoad:getMax(u.loadTime),prv_halfScreen:getP50(u.startTime),prv_firstScreenImg:getMax(l.duration),prv_halfScreenImg:getP50(l.duration),prv_imageDuration:getAvg(l.duration),prv_imageConnect:getAvg(l.connect),firstScreen:getMax(s.startTime),firstScreenLoad:getMax(s.loadTime),halfScreen:getP50(s.startTime),firstScreenImg:getMax(v.duration),halfScreenImg:getP50(v.duration),imageDuration:getAvg(v.duration),imageConnect:getAvg(v.connect),state:n,cardNum:o,prefetchExp:f.s3,cacheExp:f.s5,cacheHit:f.s6,login:p.i4,holdout:p.i5,streamed:f.s10,renderStatus:e.ssrRequestStatus,renderExtra:e.ssrRenderExtra,initLoadEnhance:f.s15,cssDowngrade:f.s16},i.HA);t=!0,(0,a.Qv)("first_feeds",h)},collectEntries=function(e){e.filter(function(e){return e.identifier===s}).forEach(function(e){e.url.endsWith("prv_1")?!c[e.url]&&(c[e.url]=e):!d[e.url]&&(d[e.url]=e)})},handleElementTiming=function(e){if(0===o&&(o=document.querySelectorAll('[elementtiming="'.concat(s,'"]')).length),Object.keys(d).length>=o){null==n||n.disconnect();return}collectEntries(e.getEntries()),Object.keys(d).length>=o&&report(u.V.Success)};(0,u.L)({elementKey:s,onReady:function(){(n=new PerformanceObserver(handleElementTiming)).observe({type:"element",buffered:!0})},onFail:function(e){!t&&(report(e),null==n||n.disconnect())}})}},73240:function(e,t,n){"use strict";n.d(t,{E:function(){return useNoteFmpMonitor},X:function(){return l}});var r=n(70879),i=n(27337);n(87989),n(64961),n(12996),n(59564),n(97357),n(34333),n(87535),n(75204);var a=n(43819),o=n(94186),u=n(6707),l="note-cover";function useNoteFmpMonitor(){var e=!1,t=null,n=null,s="",report=function(t){var u,l,c=(0,a.Ru)(),d=(0,a.AW)();var v=(0,r._)((0,i._)((0,r._)({fmp:(null==n?void 0:n.startTime)||0,resourceUrl:s},(u={resourceDuration:0,resourceConnect:0,resourceSize:0},(l=(window.performance.resourcesBufferCache||[]).concat(window.performance.getEntriesByType("resource")).find(function(e){return e.name===s}))&&(u.resourceDuration=l.duration,u.resourceConnect=l.duration-(l.responseEnd-(l.requestStart||l.startTime)),u.resourceSize=null==l?void 0:l.transferSize),u)),{state:t,login:c.i4,holdout:c.i5,noteType:d.ext1,renderStatus:d.i1,videoType:d.s5,origin:d.s7,imgExp:d.s11}),a.HA);e=!0,(0,o.I3)(v)},collectEntries=function(e){e.forEach(function(e){e.identifier===l&&(n=e,s=e.url)})},handleElementTiming=function(e){collectEntries(e.getEntries()),n&&(report(u.V.Success),null==t||t.disconnect())};(0,u.L)({elementKey:l,onReady:function(){(t=new PerformanceObserver(handleElementTiming)).observe({type:"element",buffered:!0})},onFail:function(n){!e&&(report(n),null==t||t.disconnect())}})}},55697:function(e,t,n){"use strict";n.d(t,{$:function(){return isSsrRender},Z:function(){return __WEBPACK_DEFAULT_EXPORT__}}),n(87989),n(75973);var r=n(94186),i=n(13285),a=n(64300),o=n(93328),isSsrRender=function(){return!!document.head.querySelector('meta[name="'.concat("server-rendered",'"]'))},isInjectedServerState=function(){var e,t,n;return Object.keys(null!==(n=null===(t=window)||void 0===t?void 0:null===(e=t.__INITIAL_STATE__)||void 0===e?void 0:e.note)&&void 0!==n?n:{}).length>0};function testDomRenderSuccess(){var e,t,n,r,i,a,o,u,l;return(null!==(o=null===(t=document.querySelector("#detail-title"))||void 0===t?void 0:null===(e=t.innerHTML)||void 0===e?void 0:e.length)&&void 0!==o?o:0)>0||(null!==(u=null===(r=document.querySelector("#detail-desc"))||void 0===r?void 0:null===(n=r.innerHTML)||void 0===n?void 0:n.length)&&void 0!==u?u:0)>0||(null!==(l=null===(a=document.querySelector("#detail-user"))||void 0===a?void 0:null===(i=a.innerHTML)||void 0===i?void 0:i.length)&&void 0!==l?l:0)>0}function __WEBPACK_DEFAULT_EXPORT__(e){var t,n,u=(0,i.yj)(),l=(0,a.dw)(),s=l.getNoteDetailByNoteId(e).note,c=(0,o.qj)({type:r.An.Unknown,error:"",id:null!==(n=null===(t=u.params)||void 0===t?void 0:t.noteId)&&void 0!==n?n:"",extra:""}),setReportPayload=function(){var e,t,n,i;isSsrRender()?isInjectedServerState?"fail"===l.serverRequestInfo.state?(c.type=r.An.REQUEST_FAIL,c.error="".concat(l.serverRequestInfo.errorCode),c.extra=l.serverRequestInfo.errMsg):(null!==(n=null==s?void 0:null===(e=s.title)||void 0===e?void 0:e.length)&&void 0!==n?n:0)<=0&&(null!==(i=null===(t=s.desc)||void 0===t?void 0:t.length)&&void 0!==i?i:0)<=0?c.type=r.An.RESPONSE_NULL:testDomRenderSuccess()?c.type=r.An.SSR_SUCCESS:c.type=r.An.RENDER_ERROR:c.type=r.An.STORE_INJECT_FAIL:c.type=r.An.CSR_DOWNGRADE};return(0,o.bv)(function(){setReportPayload(),(0,r.ZQ)(c)}),{renderInfo:c}}},415:function(e,t,n){"use strict";n.d(t,{x:function(){return useCancelScrollRestoration}});var r=n(93328);function useCancelScrollRestoration(){(0,r.wF)(function(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual")})}},61883:function(e,t,n){"use strict";n(25069),n(58486),n(42876),n(33933),n(95477);var r=n(93328);function useEnv(){var e=null;return{isBrowser:!0,isWechat:(0,r.Fl)(function(){return/micromessenger/i.test(navigator.userAgent)}),isMobile:(0,r.Fl)(function(){var e,t,n,r,i=null!==(n=null===(e=navigator)||void 0===e?void 0:e.userAgent)&&void 0!==n?n:"";return i.includes("discover")||i.match(/.*android/i)||i.match(/(iPhone|iPod|iPad)/i)||i.match(/.*mobile/i)}),isElectron:(0,r.Fl)(function(){return navigator.userAgent.includes("xhs-pc-electron")})}}t.Z=useEnv},66687:function(e,t,n){"use strict";var r=n(16337),i=n(51899),a=n.n(i),o=n(93328);function useEsc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=a()(e,t,{leading:!0,trailing:!1});(0,o.bv)(function(){(0,r.ORN)(document,"keyup",function(r){var i;(null===(i=r.key)||void 0===i?void 0:i.toLowerCase())==="escape"&&(t>0?n():e())})})}t.Z=useEsc},8172:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var r=n(41622),i=n(82726),a=n(377);n(58051),n(36277),n(34333),n(6045),n(10364),n(67673);var o=n(93328),u=n(69876),l={autoCleanObserverAfterImpression:!0};function useIntersectionObserver(e,t,s){var c,d=(0,i._)((0,u.OT)(!1),2),v=d[0],f=d[1],p="IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype,h=Object.assign(l,s).autoCleanObserverAfterImpression,g=null,m=(0,o.iH)();var y=(c=(0,r._)(function(){var r;return(0,a.Jh)(this,function(i){switch(i.label){case 0:if(p)return[3,2];return[4,n.e("5688").then(n.t.bind(n,15886,23))];case 1:i.sent(),i.label=2;case 2:if(g=new IntersectionObserver(function(t,n){t[0].isIntersecting?(f(!0),null==e||e(),h&&n.disconnect()):f(!1)},{threshold:[.5,1]}),!(r=t||m.value))return[2,null];return g.observe(r),[2,g]}})}),function startObserve(){return c.apply(this,arguments)});return(0,o.SK)(function(){if(!!g)g.disconnect(),g=null}),{observeTarget:m,startObserve:y,isIntersecting:v}}var s=(0,o.aZ)({name:"Impr",props:{autoCleanObserverAfterImpression:{type:Boolean,default:!0},onImpression:{type:Function,default:function(){return null}}},setup:function(e,t){var n=(0,o.iH)();return(0,o.bv)(function(){(0,useIntersectionObserver(function(){var t;null===(t=e.onImpression)||void 0===t||t.call(e)},n.value,{autoCleanObserverAfterImpression:e.autoCleanObserverAfterImpression}).startObserve)()}),function(){var e,r,i=null===(e=(r=t.slots).default)||void 0===e?void 0:e.call(r);return null==i?void 0:i.map(function(e){return(0,o.Ho)(e,{ref:n})})}}});t.Z=useIntersectionObserver},52997:function(e,t,n){"use strict";n.d(t,{bq:function(){return useUpdateMSource},g2:function(){return useGoToUserWithMSource},rA:function(){return useGoToLiveRoom}});var r=n(70879);n(29112),n(67275),n(59989),n(7099),n(27461),n(23339),n(51109),n(34333),n(87989),n(55947),n(86651);var i=n(93328),a=n(13285),o=n(98413);function useMSource(){(0,a.tv)().beforeEach(function(e,t,n){t.query.m_source&&!e.query.m_source?(e.query.m_source=t.query.m_source,n(e)):n()})}function useGoToUserWithMSource(){var e=(0,a.yj)();return{getUserPageHref:function(t,n){var r=new URLSearchParams(n);return e.query.m_source&&r.append("m_source",e.query.m_source),"".concat(o.Z.ProfilePath,"/").concat(t,"?").concat(r.toString())},mSource:(0,i.Fl)(function(){return e.query.m_source})}}function useUpdateMSource(){var e=(0,a.tv)(),t=(0,a.yj)();return function(n){null==e||e.push({query:(0,r._)({m_source:n},null==t?void 0:t.query)})}}function useGoToLiveRoom(){var e=(0,a.yj)();return{getUserPageHref:function(t,n){var r=new URLSearchParams(n);return r.append("keyword",e.query.keyword),"/livestream/".concat(t,"?").concat(r.toString())}}}t.ZP=useMSource},68848:function(e,t,n){"use strict";n.d(t,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}});var r=n(93328),i=n(13285),a=n(98413),o=n(85537);function __WEBPACK_DEFAULT_EXPORT__(){var e=(0,i.yj)(),t=(0,o.L)();return{currentPageInstance:(0,r.Fl)(function(){return(null==e?void 0:e.name)?e.name===a.Z.ExploreName?"web_explore_feed":e.name===a.Z.SearchName||e.name===a.Z.AISearchName?"web_search_result_notes":e.name===a.Z.ExploreNoteName?"web_note_detail_r10":e.name===a.Z.ActivityName?"web_may_day_travel_tips_activity_page":e.name===a.Z.UserPageName&&t.isOwnPage?"web_profile_page":e.name!==a.Z.UserPageName||t.isOwnPage?e.name===a.Z.LiveListName?"web_live_list":e.name===a.Z.LiveRoomName?"web_live_room":"":"web_user_page":"unknown"})}}},55783:function(e,t,n){"use strict";n.d(t,{p:function(){return useRouteMatchSSRCsr}});var r=n(93328),i=n(95509),a=n(98413),o=n(13285);function useRouteMatchSSRCsr(){i.j||(0,r.Zq)();var e=(0,o.yj)();function getCurrentRoutePath(){return null==e?void 0:e.path}return{isExploreRoute:(0,r.Fl)(function(){return(null==e?void 0:e.name)===a.Z.ExploreName}),isAiSearchRoute:(0,r.Fl)(function(){return(null==e?void 0:e.name)===a.Z.AISearchName}),isLiveListRoute:(0,r.Fl)(function(){return(null==e?void 0:e.name)===a.Z.LiveListName}),getCurrentRoutePath:getCurrentRoutePath}}},5977:function(e,t,n){"use strict";n.d(t,{X:function(){return useSSRRequest}});var r=n(41622),i=n(377),a=n(93328);function useSSRRequest(e,t){(0,a.vl)((0,r._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return[4,t()];case 1:return e.sent(),[2]}})})),(0,a.wF)((0,r._)(function(){return(0,i.Jh)(this,function(n){switch(n.label){case 0:if((0,a.dq)(e)?e.value:e)return[3,2];return[4,t()];case 1:n.sent(),n.label=2;case 2:return[2]}})}))}},73009:function(e,t,n){"use strict";n.d(t,{br:function(){return u},lp:function(){return o},zh:function(){return useSelectWordSearch}});var r=n(51606);n(64091),n(51109),n(74719),n(13396),n(34333),n(91313),n(27461),n(23339),n(6045),n(10364),n(67673),n(55947),n(85203);var i=n(93328),a=n(16337);function getRangesFromSelection(e){var t;return Array.from({length:null!==(t=e.rangeCount)&&void 0!==t?t:0},function(t,n){return e.getRangeAt(n)})}function getTextRealLength(e){var t=0,n=!0,r=!1,i=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)a.value,t+=1}catch(e){r=!0,i=e}finally{try{!n&&null!=o.return&&o.return()}finally{if(r)throw i}}return t}var o="selected-disabled-search",u=(0,i.aZ)({name:"DisabledSelectWordSearch",setup:function(e,t){return function(){var e,n,a=null===(e=(n=t.slots).default)||void 0===e?void 0:e.call(n);return Array.isArray(a)?a.map(function(e){return(0,i.Ho)(e,(0,r._)({},o,""))}):null}}});function useSelectWordSearch(e){var t=e.container,n=e.beforeSelect,r=void 0===n?function(){return!0}:n,o=e.maxLength,u=void 0===o?17:o,l=(0,i.iH)(!1),s=(0,i.iH)(""),c=(0,i.iH)({}),d=(0,i.iH)({}),getSelection=function(){var e=window.getSelection();if(e&&t.value){var n,i=e.toString();if(!i.trim()||!r(e))return{};var a=document.createRange();a.selectNodeContents(t.value);var o=e.getRangeAt(0),u=null===(n=t.value)||void 0===n?void 0:n.getBoundingClientRect(),l=getRangesFromSelection(e).map(function(e){return e.getBoundingClientRect()});if(l[0]&&o.compareBoundaryPoints(Range.START_TO_START,a)>=0&&0>=o.compareBoundaryPoints(Range.END_TO_END,a))return{text:i,rect:l[0],selection:e,containerRect:u}}return{}};return(0,i.bv)(function(){(0,a.ORN)("resize",function(){l.value=!1}),(0,a.ORN)(document,"mouseup",function(){setTimeout(function(){var e=getSelection(),t=e.text,n=e.rect,r=e.containerRect,i=(null==t?void 0:t.trim())||"";(null==i?void 0:i.length)>0&&getTextRealLength(i)<=u&&n?(s.value=i,c.value=n,l.value=!0,d.value=r):(l.value=!1,c.value={})},10)})}),{rect:c,text:s,visible:l,containerRect:d,setVisible:function(e){l.value=e}}}},56573:function(e,t,n){"use strict";n.d(t,{F:function(){return useTheme},f:function(){return u}});var r,i=n(64732),a=n(93328),o=n(16337);var u=((r={}).dark="dark",r.light="light",r.system="system",r),l={light:"rgb(255, 255, 255)",dark:"rgb(10, 10, 10)",system:""},s=(0,a.iH)("system"),c=(0,a.iH)("system");function useTheme(){(0,i.Kf)({meta:[{name:"theme-color",content:"rgb(255, 255, 255)"}],script:[{type:"text/javascript",children:'(e=>{const t=localStorage.getItem("xhs-pc-theme")||"",o=null===(e=window.matchMedia("(prefers-color-scheme: dark)"))||void 0===e?void 0:e.matches;var r;(t&&"system"!==t?"dark"===t:o)&&(null===(r=document)||void 0===r||null===(r=r.querySelector("meta[name=\'theme-color\']"))||void 0===r||r.setAttribute("content","rgb(10, 10, 10)"),document.documentElement.setAttribute("dark",""))})();'}]});var setTheme=function(e,t){var n,r,i,a;return"light"===e||"dark"!==e&&"dark"!==c.value?(document.documentElement.removeAttribute("dark"),null===(r=document)||void 0===r||null===(n=r.querySelector('meta[name="theme-color"]'))||void 0===n||n.setAttribute("content","light"===e?l[e]:l[c.value])):(document.documentElement.setAttribute("dark",""),null===(a=document)||void 0===a||null===(i=a.querySelector('meta[name="theme-color"]'))||void 0===i||i.setAttribute("content",l.dark)),window.localStorage.setItem("xhs-pc-theme",t?"system":e),e},getUserPreferredTheme=function(){return window.localStorage.getItem("xhs-pc-theme")||setTheme("system",!0)};return(0,a.bv)(function(){var e=window.matchMedia("(prefers-color-scheme: dark)");if(!!e&&!!e.addEventListener)c.value=e.matches?"dark":"light",s.value=getUserPreferredTheme(),(0,o.ORN)(e,"change",function(){if(s.value=getUserPreferredTheme(),c.value=e.matches?"dark":"light","system"===s.value)setTheme(e.matches?"dark":"light",!0)})}),{setTheme:setTheme,getUserPreferredTheme:getUserPreferredTheme,systemTheme:c,preferredTheme:s}}},23041:function(e,t,n){"use strict";var r=n(41622),i=n(70879),a=n(377);n(36277),n(34333),n(86651),n(41593);var o=n(64732),u=n(33114),l=o.dJ.get;function getToken(e){return l("/api/sns/web/upload/permit",{params:(0,i._)({version:"1"},e),withCredentials:!0,transform:!0})}function useUploader(e){return _useUploader.apply(this,arguments)}function _useUploader(){return(_useUploader=(0,r._)(function(e){var t;return(0,a.Jh)(this,function(i){switch(i.label){case 0:return[4,n.e("1264").then(n.bind(n,44696))];case 1:var o;return t=new(i.sent()).default({bizName:(null==e?void 0:e.bizName)||"sns",scene:(null==e?void 0:e.scene)||"explore_fankui",getToken:getToken}),o=(0,r._)(function(e,n){var r,i;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,(0,u.MX)(e)];case 1:r=a.sent(),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,t.post({Body:r})];case 3:if(!1===(i=a.sent()).success||!i.data){if(n)throw Error(i.msg||"上传失败");throw Error}return[2,i.data];case 4:throw Error(a.sent());case 5:return[2]}})}),[2,{uploader:t,uploadImage:function uploadImage(e,t){return o.apply(this,arguments)}}]}})})).apply(this,arguments)}t.ZP=useUploader},47002:function(e,t,n){"use strict";n.d(t,{d:function(){return useGoToUserPageType}});var r=n(93328),i=n(13285),a=n(11142);function useGoToUserPageType(){var e=(0,i.yj)(),t=navigator.userAgent;return(0,r.Fl)(function(){var n;return(0,a.Jk)(t)||(null==e?void 0:null===(n=e.query)||void 0===n?void 0:n.m_source)==="pwa"?"_self":"_blank"})}},56834:function(e,t,n){"use strict";n.d(t,{_:function(){return useUserXsecSource}});var r=n(93328),i=n(13285);function useUserXsecSource(){var e=(0,i.yj)(),t={web_board_page:"pc_board",web_explore_feed:"pc_feed",web_profile_page:"pc_user",web_search_result_notes:"pc_search"},n={note:"pc_note",fav:"pc_collect",liked:"pc_like"};return{userXsecSource:(0,r.Fl)(function(){var r=e.meta.pageInstance;return"web_profile_page"===r?n[e.query.tab||"note"]||"":t[r]||""})}}},43819:function(e,t,n){"use strict";n.d(t,{Ru:function(){return addGlobal},AW:function(){return addNoteDetailData},ZP:function(){return flushApm},eB:function(){return addExploreData},HA:function(){return f}});var r=n(70879),i=n(27337);n(9557),n(96118),n(87989),n(42876),n(33933);var a=n(90405),o=n(41622),u=n(46490),l=n(90251),s=n(51606),c=n(377);n(63235),n(15368),n(12970),n(8503),n(32207),n(13598),n(23541),n(63827),n(30488),n(82236),n(51938),n(33913),n(94949),n(17891),n(44258),n(38609),n(4787),n(44211),n(29338),n(73405),n(98754),n(31832),n(88402),n(56712),n(27461),n(23339),n(51109),n(34333),n(86651),n(36277),n(55947);var d=n(94186),v=new(function(){function CollectImageError(){(0,u._)(this,CollectImageError),(0,s._)(this,"list",void 0),this.list=new Set}return(0,l._)(CollectImageError,[{key:"collect",value:function collect(e){var t=this;return(0,o._)(function(){var n;return(0,c.Jh)(this,function(r){switch(r.label){case 0:if(t.list.has(e))return[2];return t.list.add(e),[4,t.fetchMetrics(e)];case 1:return n=r.sent(),(0,d.Qv)("imageErrorMetrics",n),[2]}})})()}},{key:"fetchMetrics",value:function fetchMetrics(e){return(0,o._)(function(){var t,n,r;return(0,c.Jh)(this,function(i){switch(i.label){case 0:t={imgUrl:e,status:"unknown",cdnIp:"",clientIp:"",length:"unknown",errMsg:""},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,fetch(e,{method:"HEAD"})];case 2:return n=i.sent(),t.status=n.status.toString(),t.cdnIp=n.headers.get("x-xhs-cache")||"",t.clientIp=n.headers.get("x-xhs-client-ip")||"",t.length=n.headers.get("content-length")||"unknown",[2,t];case 3:return r=i.sent(),t.errMsg=r.message,t.status="-1",[2,t];case 4:return[2]}})})()}}]),CollectImageError}()),getDeviceCpuStaticMetric=function(){var e,t,n;return null!==(n=null===(t=window)||void 0===t?void 0:null===(e=t.navigator)||void 0===e?void 0:e.hardwareConcurrency)&&void 0!==n?n:0},getDeviceMemoryStaticMetric=function(){var e,t,n;return null!==(n=null===(t=window)||void 0===t?void 0:null===(e=t.navigator)||void 0===e?void 0:e.deviceMemory)&&void 0!==n?n:0},getMemoryDymaticMetric=function(){var e,t,n,r;return Math.round((null!==(r=null===(n=window)||void 0===n?void 0:null===(t=n.performance)||void 0===t?void 0:null===(e=t.memory)||void 0===e?void 0:e.usedJSHeapSize)&&void 0!==r?r:0)/1024/1024)},f={isRiskUser:"unknown",isRiskReason:""};function addNoteDetailData(){var e,t,n,r,i,a,o,u,l=document.querySelector("#noteContainer"),s=document.querySelector("#note-detail-origin"),c=document.querySelector(".xhs-slider-container[data-xhsimg]");return l&&s?{ext1:null===(e=l.dataset)||void 0===e?void 0:e.type,i1:null===(t=l.dataset)||void 0===t?void 0:t.renderStatus,s2:null==c?void 0:null===(n=c.dataset)||void 0===n?void 0:n.xhsimg,s5:null===(r=l.dataset)||void 0===r?void 0:r.videoStyle,s7:null==s?void 0:null===(i=s.dataset)||void 0===i?void 0:i.origin,s9:null==s?void 0:null===(a=s.dataset)||void 0===a?void 0:a.undertakeFlag,s11:null===(o=l.dataset)||void 0===o?void 0:o.imgExp,s16:null===(u=l.dataset)||void 0===u?void 0:u.cssFlag}:{}}function addExploreData(){var e,t,n,r,i,a,o,u=document.querySelector("#mfContainer");return u?{f1:Number.parseFloat((+((null===(e=u.dataset)||void 0===e?void 0:e.start)||0)).toFixed(3)),f2:Number.parseFloat((+((null===(t=u.dataset)||void 0===t?void 0:t.time)||0)).toFixed(3)),s5:null===(n=u.dataset)||void 0===n?void 0:n.cacheExp,s6:null===(r=u.dataset)||void 0===r?void 0:r.cacheHit,s10:"".concat(Number(null===(i=window)||void 0===i?void 0:i.MF_STREAM_RENDERED)),i6:null===(a=u.dataset)||void 0===a?void 0:a.renderStatus,s16:null===(o=u.dataset)||void 0===o?void 0:o.cssDowngrade}:{}}function getPlayerMetrics(){var e,t,n,r=document.querySelector("#noteContainer");if("video"!==(null==r?void 0:null===(e=r.dataset)||void 0===e?void 0:e.type))return{};var i=document.querySelector(".player-container");return{f3:Number(Number(null==i?void 0:null===(t=i.dataset)||void 0===t?void 0:t.loadPlayerTime).toFixed(3)),f4:Number(Number(null==i?void 0:null===(n=i.dataset)||void 0===n?void 0:n.loadPosterTime).toFixed(3))}}function addWindowInfo(){return"undefined"!=typeof window?{i2:window.innerWidth,i3:window.innerHeight}:{}}function addUserExpInfo(){var e,t,n,r=document.querySelector("#userPageContainer");return{s8:null==r?void 0:null===(e=r.dataset)||void 0===e?void 0:e.csrExp,s12:null==r?void 0:null===(t=r.dataset)||void 0===t?void 0:t.xhsImg,s13:null==r?void 0:null===(n=r.dataset)||void 0===n?void 0:n.spaLoad}}function addGlobal(){var e,t,n=document.querySelector("#global");return{i4:+(null!==(t=null==n?void 0:null===(e=n.dataset)||void 0===e?void 0:e.logged)&&void 0!==t?t:0)}}(0,a.default)().then(function(e){f.isRiskUser=e.pass,f.isRiskReason=e.reason});var p={httpRequestTiming:.5,infraBrowserResourceTiming:.5,browserResourceError:.5};function isReportApm(e){try{if(!e.measurement_name)return!0;var t=p[e.measurement_name];if(!t)return!0;return Math.random()<=t}catch(e){return console.log("isReportApm error:",e),!0}}function flushApm(e){try{if(e.measurement_data){if(e.measurement_data=(0,i._)((0,r._)({},e.measurement_data,f),{i12:getDeviceCpuStaticMetric(),i13:getDeviceMemoryStaticMetric(),i14:getMemoryDymaticMetric()}),"paintTiming"===e.measurement_name)e.measurement_data=(0,r._)({},e.measurement_data,addNoteDetailData(),addExploreData(),getPlayerMetrics(),addWindowInfo(),addUserExpInfo(),addGlobal());else{var t,n,a=document.querySelector("#noteContainer");a&&(e.measurement_data=(0,i._)((0,r._)({},e.measurement_data),{ext1:null==a?void 0:null===(n=a.dataset)||void 0===n?void 0:n.type}))}if("interactiveTiming"===e.measurement_name&&(e.measurement_data=(0,i._)((0,r._)({},e.measurement_data),{i4:+(null!==(t=window)&&void 0!==t&&!!t.VIRTUAL_LIST_ENHANCE)})),"browserResourceError"===e.measurement_name&&"img"===e.measurement_data.initiatorType){if(e.measurement_data.name.includes("23e9c53a1905c5cbc66fff148c919f989c2d3560"))return;v.collect(e.measurement_data.name)}}}catch(e){console.log("flushApm error:",e)}if(!!isReportApm(e))return e}},64695:function(e,t,n){"use strict";n.d(t,{q:function(){return getAiSearchBaseUrl}}),n(87989),n(42876),n(33933),n(67930),n(58486);var r=n(64732),i=n(95509),a="".concat(r.ZP.isBrowser?"":"http:","//logan.devops.xiaohongshu.com/proxy/pcfile");function getProductionBaseUrl(){var e=window.location.origin.includes("beta"),t=window.location.search.includes("forceProd=true");if(e)return window.location.origin.includes("sl.beta")?a:t?"//edith.xiaohongshu.com":"//edith.beta.xiaohongshu.com";return"//edith.xiaohongshu.com"}function getAiSearchBaseUrl(){if("production"===i.V.Development)return"www.beta.xiaohongshu.com"===window.location.host?window.location.search.includes("forceProd=true")?"//so.xiaohongshu.com":"//so.beta.xiaohongshu.com":a;var e=window.location.origin.includes("beta"),t=window.location.search.includes("forceProd=true");if(e)return window.location.origin.includes("sl.beta")?a:t?"//so.xiaohongshu.com":"//so.beta.xiaohongshu.com";return"//so.xiaohongshu.com"}function getTestBaseUrl(){return"www.beta.xiaohongshu.com"===window.location.host?window.location.search.includes("forceProd=true")?"//edith.xiaohongshu.com":"//edith.beta.xiaohongshu.com":a}var o={BASE_URL:{development:function getDevelopmentBaseUrl(){return"www.beta.xiaohongshu.com"===window.location.host?window.location.search.includes("forceProd=true")?"//edith.xiaohongshu.com":"//edith.beta.xiaohongshu.com":a}(),test:getTestBaseUrl(),production:getProductionBaseUrl()},API_LIST:{NOTE_USER_INFO:"https://logan.devops.xiaohongshu.com/proxy/grwoth/fe_api/burdock/v2/user/${userId}",NOTE_EXPLORE:"https://logan.devops.xiaohongshu.com/proxy/grwoth/fe_api/burdock/v2/homefeed/notes",NPS_CONFIG:"https://pages.xiaohongshu.com/data/xhs_pc_nps",HOMEFEED_PREFETCH:"/explore/prefetch",HOMEFEED_CACHE:"/explore/mfCache",CHAT_SEND_AI:"/api/sns/web/search/send/ai",CHAT_AI_STREAM_TOKENS:"/api/sns/web/v1/search/dqa/stream/tokens",GET_PROMPT_RECOMMENDATION:"/api/sns/web/v1/search/ask/guide/words",WEB_AI_SEARCH_QUERY_TRENDING:"/api/sns/web/v1/search/trending/query",WEB_AI_SEARCH_NOTES_V2:"/api/sns/web/v2/search/notes",WEB_AI_SEARCH_WEB_PAGE_LIST:"/api/sns/web/v1/search/pc/websearch",WEB_AI_SEARCH_INTERRUPT_CONVERSATION:"/api/sns/web/search/signal",WEB_LAB:"/web/lib"},BASE_CONFIG:{defaults:{transform:!0,withCredentials:!0,timeout:6e3,timeoutErrorMessage:"薯队长遇到了点小麻烦",traceHosts:["www.beta.xiaohongshu.com","edith.xiaohongshu.com","edith.beta.xiaohongshu.com","so.xiaohongshu.com","so.beta.xiaohongshu.com"],useXRayHeader:!0}}};t.Z=o},74741:function(e,t,n){"use strict";n.d(t,{Xb:function(){return getNavInfoItems},TX:function(){return getBottomInfoItems},zj:function(){return ef},qK:function(){return em},rN:function(){return useSideBarConfig},kx:function(){return ey}});var r,i,a=n(70879),o=n(27337),u=n(66993);n(87989),n(6045),n(10364),n(67673);var l=n(23755),s=n(93328),c=n(13285);n(97553);var d=n(56573),v=n(99505),f=n(66398),p={class:"multistage-toggle"},h=["onClick","onMouseenter","onMouseleave"],g={key:0,class:"icon-wrapper"},m={key:1},y=(0,s.aZ)({__name:"Index",props:{items:{},activeIndex:{},hoverText:{type:Boolean}},emits:["click"],setup:function(e,t){var n=t.emit;function handleItemClick(e){n("click",e.label)}function handleMouseEvent(e,t){e.showDesc.value=t}function calcLeft(t){var n=(t-1)/e.items.length*100;return"calc(".concat(n,"% + ").concat(2/3*8,"px)")}return function(t,n){return(0,s.wg)(),(0,s.iD)("div",p,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.items,function(t){return(0,s.wg)(),(0,s.iD)("button",{key:t.index,class:(0,s.C_)(["toggle-item",[{active:t.index===e.activeIndex}]]),onClick:function(e){return handleItemClick(t)},onMouseenter:function(e){return handleMouseEvent(t,!0)},onMouseleave:function(e){return handleMouseEvent(t,!1)}},[t.icon?((0,s.wg)(),(0,s.iD)("div",g,[(0,s.Wm)((0,s.SU)(f.i8),{size:"12",icon:t.icon},null,8,["icon"]),t.showDesc.value&&e.hoverText?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,s.C_)(["method-desc",t.label]),style:(0,s.j5)({left:calcLeft(t.index)})},(0,s.zw)(t.value),7)):(0,s.kq)("",!0)])):((0,s.wg)(),(0,s.iD)("div",m,(0,s.zw)(t.value),1))],42,h)}),128))])}}}),I=n(5010);let _=(0,I.default)(y,[["__scopeId","data-v-f17b9244"]]);var w=(0,s.aZ)({__name:"DarkModeToggle",setup:function(e){var t=[{index:0,label:d.f.system,value:"跟随系统",icon:"setting",showDesc:(0,s.iH)(!1)},{index:1,label:d.f.light,value:"浅色模式",icon:"light_mode",showDesc:(0,s.iH)(!1)},{index:2,label:d.f.dark,value:"深色模式",icon:"dark_mode",showDesc:(0,s.iH)(!1)}],n=(0,d.F)(),r=n.preferredTheme,i=n.setTheme;function handleDarkMode(e){r.value=e,i(e),(0,v.uk)(36989,{componentName:e})}return function(e,n){return(0,s.wg)(),(0,s.j4)(_,{items:t,"active-index":t.findIndex(function(e){return e.label===(0,s.SU)(r)}),"hover-text":!0,onClick:n[0]||(n[0]=function(e){return handleDarkMode(e)})},null,8,["active-index"])}}}),k=n(51606);n(97542),n(42876),n(33933);var S=n(98413),b=n(85537),M=[S.Z.ExploreName,S.Z.UserPageName,S.Z.NotificationName,S.Z.BoardPageName,S.Z.LiveListName],L=(i={},(0,k._)(i,S.Z.ExploreName,S.Z.ExploreName),(0,k._)(i,S.Z.UserPageName,S.Z.UserPageName),(0,k._)(i,S.Z.NotificationName,S.Z.NotificationName),(0,k._)(i,S.Z.LiveListName,S.Z.LiveListName),i),composables_useChangeSideBar=function useChangeSideBar(){var e=(0,c.yj)(),t=(0,s.iH)(L[e.name]),n=(0,b.L)(),updateChannel=function(){if(e.path.startsWith(S.Z.ProfilePath)){t.value=n.isOwnPage?L[S.Z.UserPageName]:"";return}if(e.path.startsWith(S.Z.BoardPath)){t.value=n.isOwnBoard?L[S.Z.UserPageName]:"";return}t.value=L[e.name]},handleChannelChange=function(){M.includes(e.name)?updateChannel():t.value=""};return(0,s.bv)(function(){handleChannelChange()}),(0,s.YP)(function(){return n.isOwnPage},handleChannelChange),(0,s.YP)(function(){return e},handleChannelChange,{deep:!0,immediate:!0}),t},x=n(61883),T=n(94895),D=n(41622),N=n(377);n(72169),n(58486),n(67930);var E=n(40122),R=n(94186);function useLogOut(){var e,t=(0,c.yj)();return{onLogout:(e=(0,D._)(function(){return(0,N.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,E.IJ)()];case 1:if(e.sent(),(0,R.Iq)({type:"logout",api:"getApiSnsWebV1LoginLogout",reportType:"logout",status:"success",time:Date.now(),extra:""}),t.path.startsWith(S.Z.ProfilePath))return window.location.replace("".concat(S.Z.ExplorePath).concat(window.location.search)),[2];return window.location.reload(),[2]}})}),function onLogout(){return e.apply(this,arguments)})}}var U=n(8048),P=n(32535);n(23882);var F=n(6890),j=n(97611),O={key:0,class:"text channel"},H={key:1,class:"text channel"},W=(0,s.aZ)({__name:"Notification",props:{active:{type:Boolean}},emits:["click"],setup:function(e,t){var n=t.emit,r=(0,b.L)(),i=(0,U.r0)(),a=(0,F.s6)(),o=(0,P.Gu)(),u=(0,j.q)();function onNotificationClick(e){!r.loggedIn&&(i.openLogin(U.yC.Notification),e.preventDefault()),n("click",e)}return function(t,n){var r=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("li",{class:(0,s.C_)(["link-wrapper bottom-channel",{"bg-active":e.active,"initial-bg":(0,s.SU)(a).isNIO}]),onClickCapture:onNotificationClick},[(0,s.Wm)(r,{to:"/notification",class:"link-wrapper bottom-channel",title:"通知"},{default:(0,s.w5)(function(){var t;return[(0,s.Wm)((0,s.SU)(f.Ct),{count:(0,s.SU)(o).notificationCount.unreadCount||0},{default:(0,s.w5)(function(){return[(0,s.Wm)((0,s.SU)(f.i8),{icon:"notification",size:"24",class:(0,s.C_)(["text-active",{active:e.active,"tertiary-label":(0,s.SU)(a).isNIO&&!e.active}])},null,8,["class"])]}),_:1},8,["count"]),(null===(t=(0,s.SU)(u))||void 0===t?void 0:t.isAIMode)?(0,s.SU)(a).sideCollapse?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",H,"通知")):((0,s.wg)(),(0,s.iD)("span",O,"通知"))]}),_:1})],34)}}});let z=(0,I.default)(W,[["__scopeId","data-v-38d0d6ad"]]);var Z=n(16337),q=n(31907),V={key:0,class:"text channel"},Y={key:1,class:"text channel"},G=(0,s.aZ)({__name:"NotificationAi",props:{active:{type:Boolean}},emits:["click"],setup:function(e,t){var n=t.emit,r=(0,b.L)(),i=(0,U.r0)(),a=(0,F.s6)(),o=(0,P.Gu)(),u=(0,j.q)(),l=(0,Z.iPe)().width,c=(0,s.Fl)(function(){return l.value<q.n4.SM});function onNotificationClick(e){!r.loggedIn&&(i.openLogin(U.yC.Notification),e.preventDefault()),n("click",e)}return function(t,n){var r=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)("li",{class:(0,s.C_)({"bg-active":e.active,"initial-bg":(0,s.SU)(a).isNIO}),onClickCapture:onNotificationClick},[(0,s.Wm)(r,{to:"/notification",title:"消息",class:"link-wrapper bottom-channel"},{default:(0,s.w5)(function(){var t;return[(0,s.Wm)((0,s.SU)(f.Ct),{count:(0,s.SU)(o).notificationCount.unreadCount||0},{default:(0,s.w5)(function(){return[(0,s.Wm)((0,s.SU)(f.i8),{icon:"notification",size:"24",class:(0,s.C_)(["text-active",{active:e.active,"tertiary-label":(0,s.SU)(a).isNIO&&!e.active}])},null,8,["class"])]}),_:1},8,["count"]),(null===(t=(0,s.SU)(u))||void 0===t?void 0:t.isAIMode)?!(0,s.SU)(a).sideCollapse||(0,s.SU)(c)?((0,s.wg)(),(0,s.iD)("span",Y,"消息")):(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",V,"消息"))]}),_:1})],34)}}});let J=(0,I.default)(G,[["__scopeId","data-v-8b85ee76"]]);var Q=n(66002),K=n(52997),X=n(44892),$=n(34348),ee={key:0,class:"channel"},et={key:1,class:"channel"},en={key:1,class:"side-bar-component login-btn"},er=(0,s.aZ)({__name:"User",props:{active:{type:Boolean}},emits:["click"],setup:function(e,t){var n=t.emit,r=(0,s.iH)(!1),i=(0,b.L)(),a=(0,c.yj)(),o=(0,F.s6)(),u=(0,Q.Jk)(i).loggedIn,l=(0,U.r0)(),d=(0,j.q)(),p=(0,K.g2)().getUserPageHref;(0,s.wF)((0,D._)(function(){return(0,N.Jh)(this,function(e){switch(e.label){case 0:return[4,i.getUserInfo({disableCache:!0})];case 1:return e.sent(),r.value=!0,[2]}})}));var h=(0,s.Fl)(function(){return o.currentLayout===$.G.NIO});function handleProfileClick(e){a.name===S.Z.UserPageName&&a.params.id===i.userInfo.userId&&e.preventDefault(),n("click",e)}function toLogin(){!u.value&&((0,v.uk)(30386),l.openLogin(U.yC.ClickLogin))}function formatUserImage(){var e=i.userInfo.images;return o.supportWebp?e:(null==e?void 0:e.replace(/webp$/,"jpg"))+X.tM}return function(t,n){var r=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.SU)(h)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.SU)(u)?((0,s.wg)(),(0,s.iD)("li",{key:0,class:(0,s.C_)([{"active-channel":e.active},"user side-bar-component"])},[(0,s._)("div",{class:"link-wrapper",onClickCapture:handleProfileClick},[(0,s.Wm)(r,{to:(0,s.SU)(p)((0,s.SU)(i).userInfo.userId),class:"link-wrapper",title:"我"},{default:(0,s.w5)(function(){var e;return[(0,s.Wm)((0,s.SU)(f.qE),{src:formatUserImage(),size:24},null,8,["src"]),(null===(e=(0,s.SU)(d))||void 0===e?void 0:e.isAIMode)?(0,s.SU)(o).sideCollapse?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",et,"我")):((0,s.wg)(),(0,s.iD)("span",ee,"我"))]}),_:1},8,["to"])],32)],2)):((0,s.wg)(),(0,s.iD)("div",en,[(0,s.Wm)((0,s.SU)(f.zx),{id:"login-btn",class:"login-btn",onClick:toLogin},{default:(0,s.w5)(function(){return n[0]||(n[0]=[(0,s._)("span",{class:"login-btn"},"登录",-1)])}),_:1,__:[0]})]))],64)),(0,s._)("div",{class:"bottom-channel bottom-menu-component",onClickCapture:handleProfileClick},[(0,s.SU)(u)?((0,s.wg)(),(0,s.j4)(r,{key:0,class:(0,s.C_)(["bottom-channel",{active:e.active}]),to:(0,s.SU)(p)((0,s.SU)(i).userInfo.userId)},{default:(0,s.w5)(function(){return[(0,s.Wm)((0,s.SU)(f.i8),{size:"24",icon:"me"}),n[1]||(n[1]=(0,s._)("span",{class:"text"},"我",-1))]}),_:1,__:[1]},8,["class","to"])):(0,s.kq)("",!0),(0,s.SU)(u)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:1,class:(0,s.C_)(["bottom-channel",{active:e.active}]),onClick:toLogin},[(0,s.Wm)((0,s.SU)(f.i8),{size:"24",icon:"me"}),n[2]||(n[2]=(0,s._)("span",{class:"text"},"我",-1))],2))],32)],64)}}});let ei=(0,I.default)(er,[["__scopeId","data-v-52aa5da0"]]);var ea={key:0,class:"channel"},eo={key:1,class:"channel"},eu={key:1,class:"side-bar-component login-btn"},el=(0,s.aZ)({__name:"UserAi",props:{active:{type:Boolean}},emits:["click"],setup:function(e,t){var n=t.emit,r=(0,s.iH)(!1),i=(0,b.L)(),a=(0,c.yj)(),o=(0,F.s6)(),u=(0,Q.Jk)(i).loggedIn,l=(0,U.r0)(),d=(0,j.q)(),p=(0,K.g2)().getUserPageHref;(0,s.wF)((0,D._)(function(){return(0,N.Jh)(this,function(e){switch(e.label){case 0:return[4,i.getUserInfo({disableCache:!0})];case 1:return e.sent(),r.value=!0,[2]}})}));var h=(0,s.Fl)(function(){return o.currentLayout===$.G.NIO});function handleProfileClick(e){a.name===S.Z.UserPageName&&a.params.id===i.userInfo.userId&&e.preventDefault(),n("click",e)}function toLogin(){!u.value&&((0,v.uk)(30386),l.openLogin(U.yC.ClickLogin))}function formatUserImage(){var e=i.userInfo.images;return o.supportWebp?e:(null==e?void 0:e.replace(/webp$/,"jpg"))+X.tM}return function(t,n){var r,a=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[h.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s.SU)(u)?((0,s.wg)(),(0,s.iD)("li",{key:0,class:(0,s.C_)([{"active-channel":e.active,"user-side-bar-component-collapse":null===(r=(0,s.SU)(o))||void 0===r?void 0:r.sideCollapse},"user side-bar-component"])},[(0,s._)("div",{onClickCapture:handleProfileClick},[(0,s.Wm)(a,{to:(0,s.SU)(p)((0,s.SU)(i).userInfo.userId),class:"link-wrapper"},{default:(0,s.w5)(function(){var e;return[(0,s.Wm)((0,s.SU)(f.qE),{src:formatUserImage(),size:24},null,8,["src"]),(null===(e=(0,s.SU)(d))||void 0===e?void 0:e.isAIMode)?(0,s.SU)(o).sideCollapse?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("span",eo,"我")):((0,s.wg)(),(0,s.iD)("span",ea,"我"))]}),_:1},8,["to"])],32)],2)):((0,s.wg)(),(0,s.iD)("div",eu,[(0,s.Wm)((0,s.SU)(f.zx),{id:"login-btn",class:"login-btn",onClick:toLogin},{default:(0,s.w5)(function(){return n[0]||(n[0]=[(0,s._)("span",{class:"login-btn"},"登录",-1)])}),_:1,__:[0]})]))],64)),(0,s._)("div",{class:"bottom-channel bottom-menu-component",onClickCapture:handleProfileClick},[(0,s.SU)(u)?((0,s.wg)(),(0,s.j4)(a,{key:0,class:(0,s.C_)(["bottom-channel",{active:e.active}]),to:(0,s.SU)(p)((0,s.SU)(i).userInfo.userId)},{default:(0,s.w5)(function(){return[(0,s.Wm)((0,s.SU)(f.i8),{size:"24",icon:"me"}),n[1]||(n[1]=(0,s._)("span",{class:"text"},"我",-1))]}),_:1,__:[1]},8,["class","to"])):(0,s.kq)("",!0),(0,s.SU)(u)?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",{key:1,class:(0,s.C_)(["bottom-channel",{active:e.active}]),onClick:toLogin},[(0,s.Wm)((0,s.SU)(f.i8),{size:"24",icon:"me"}),n[2]||(n[2]=(0,s._)("span",{class:"text"},"我",-1))],2))],32)],64)}}});let es=(0,I.default)(el,[["__scopeId","data-v-fc5473fe"]]);var ec=n(39317),ed=n(3441),ev=[{name:"关于我们",href:S.Z.AboutPath,routeName:"AboutPath"},{name:"新闻中心",href:S.Z.NewsPath,routeName:"NewsPath"},{name:"社会责任",href:S.Z.LiabilityPath,routeName:"LiabilityPath"},{name:"加入我们",href:"//job.xiaohongshu.com/?source=official",routeName:"job"},{name:"English",href:"//www.xiaohongshu.com/en?source=official",routeName:"English"}],ef=[{label:"沪ICP备13030189号",link:"//beian.miit.gov.cn/",title:"小红书_沪ICP备"},{label:"营业执照",link:"//fe-video-qc.xhscdn.com/fe-platform/1315dcf7990709473005051f944bafcc641a879b.pdf",title:"小红书_营业执照"},{label:"".concat(new Date().getFullYear(),"沪公网安备31010102002533号"),link:"//www.beian.gov.cn/portal/registerSystemInfo?recordcode=31010102002533",title:"小红书_沪公网安备"},{label:"增值电信业务经营许可证：沪B2-20150021",link:"//fe-video-qc.xhscdn.com/picasso-editor/c081c205c927d605c959e3d6e1b22975c8a4b64f.pdf",title:"小红书_网文"},{label:"医疗器械网络交易服务第三方平台备案：(沪)网械平台备字[2019]第00006号",link:"//fe-video-qc.xhscdn.com/fe-platform/410dce57bc12a6d7e5808060e47644fbe46f68ff.pdf",title:"小红书_医疗器械网络交易服务"},{label:"互联网药品信息服务资格证书：(沪)-经营性-2023-0144",link:"//fe-video-qc.xhscdn.com/fe-platform/f37a08cacc088061beb38329c387c32fc48fc6fe.pdf",title:"小红书_互联网药品信息服务"},{label:"违法不良信息举报电话：4006676810",link:"//www.shjbzx.cn",title:"小红书_上海市互联网举报中心"},{label:"上海市互联网举报中心",link:"//www.shjbzx.cn",title:"小红书_上海市互联网举报中心"},{label:"网上有害信息举报专区",link:"//www.12377.cn",title:"网上有害信息举报专区"},{label:"自营经营者信息",link:"//dc.xhscdn.com/06c2adb0-b353-11e9-9d0c-7be9ff8961c1/自营经营者信息公示.pdf",title:"小红书_沪公网安备"},{label:"网络文化经营许可证：沪网文[2021]1545-113号",link:"//fe-video-qc.xhscdn.com/fe-platform/10428eb6a94cd23bd63446b9991cfa3a5ff6f151.pdf",title:"小红书_网络文化经营许可"},{label:"个性化推荐算法 网信算备310101216601302230019号"}],ep=[{name:"用户协议",href:"//agree.xiaohongshu.com/h5/terms/ZXXY20220331001/-1",routeName:"UserAgreement",icon:"arrow_right_top"},{name:"隐私政策",href:"//agree.xiaohongshu.com/h5/terms/ZXXY20220509001/-1",routeName:"PrivacyPolicy",icon:"arrow_right_top"},{name:"侵权投诉指引",href:"//agree.xiaohongshu.com/h5/terms/ZXXY20230215001/-1",routeName:"Complaints",icon:"arrow_right_top"},{name:"热点规则",href:"//fe.xiaohongshu.com/ditto/vincent/c45978d1a53d4dec963167ebd6f1802e?naviHidden=yes&fullscreen=true",routeName:"HotlistRule",icon:"arrow_right_top"},{name:"社区规范",href:"//agree.xiaohongshu.com/h5/terms/ZXXY20221213003/-1",routeName:"CommunityGuidelines",icon:"arrow_right_top"},{name:"下载小红书 App",routePath:S.Z.DownloadPath,routeName:S.Z.DownloadName,href:S.Z.DownloadPath,icon:"arrow_right_top"}],eh=[{name:"专业号",href:"//pro.xiaohongshu.com",routeName:"pro"},{name:"推广合作",href:S.Z.BrandPath,routeName:"BrandPath"},{name:"蒲公英",href:"//pgy.xiaohongshu.com/solar/to-home?source=official&type=0",routeName:"pgy"},{name:"商家入驻",href:"//zhaoshang.xiaohongshu.com/merchant/login?from=xhsweb",routeName:"gaia"},{name:"MCN入驻",href:"//creator.xiaohongshu.com/mcn-introduce?source=official",routeName:"mcn"}],eg=[{name:"创作服务",href:"//creator.xiaohongshu.com/?source=official",routeName:"creator"},{name:"直播管理",href:"//redlive.xiaohongshu.com?source=official",routeName:"redlive"},{name:"电脑直播助手",href:"//www.xiaohongshu.com/zhibo/robs?source=official",routeName:"robs"}],em=[{name:"创作中心",children:eg,routeName:"creator"},{name:"业务合作",children:eh}];function getSettingMenu(){var e=(0,b.L)(),t=useLogOut().onLogout;return{name:"设置",group:[{name:"深色模式",children:[],icon:"",customComponent:{component:(0,s.Xl)(w)}},{name:"退出登录",children:[],icon:"",clickEvent:t,visible:(0,s.Fl)(function(){return e.loggedIn})}]}}function getFeedbackMenu(){var e=(0,F.s6)().setFeedbackPopupVisible,t=(0,c.yj)();return{name:"帮助与客服",clickEvent:function(){e(!0),(0,v.uk)(39252,{fromPage:t.name})},visible:!0,icon:""}}function getNavInfoItems(){var e=(0,b.L)(),t=(0,F.s6)(),n=useLogOut().onLogout;return t.isNIO?[{group:[{name:"深色模式",children:[],icon:"",customComponent:{component:(0,s.Xl)(w)}},{name:"退出登录",children:[],icon:"",clickEvent:n,visible:(0,s.Fl)(function(){return e.loggedIn})}]}]:[getSettingMenu(),getVisitMenu(),{group:[{name:"创作中心",icon:"right",children:[{name:"创作中心",group:eg}]},{name:"业务合作",icon:"right",children:[{name:"业务合作",group:eh}]}]},{group:[getFeedbackMenu(),{name:"隐私、协议",icon:"right",children:[{name:"隐私、协议",group:ep}]},{name:"关于小红书",icon:"right",children:[{name:"关于小红书",group:ev}]}]}]}var ey=((r={}).Keyboard="键盘快捷键",r.AddCollect="添加到收藏夹",r.AddDesktop="添加小红书到桌面",r.MiniWindow="打开小窗模式",r);function getVisitMenu(){var e=(0,x.Z)().isElectron;return e.value?null:{name:"访问方式",group:[{name:"键盘快捷键",id:"access-keyboard",children:[],icon:"",visible:!0},{name:"添加到收藏夹",id:"access-collect",children:[],icon:"",visible:!1},{name:"添加小红书到桌面",id:"access-desktop",children:[],icon:""},{name:"打开小窗模式",id:"access-min-window",children:[],icon:"",visible:!0}]}}var eI=[{group:[{name:"创作中心",icon:"right",children:[{name:"创作中心",group:eg}]},{name:"业务合作",icon:"right",children:[{name:"业务合作",group:eh}]}]}];function getBottomInfoItems(e){return[{group:[{name:"关于小红书",icon:"right",children:[{name:"关于小红书",group:ev}]},{name:"隐私、协议",icon:"right",children:[{name:"隐私、协议",group:ep}]},getFeedbackMenu()]}].concat((0,u._)(e?eI:[]),[getVisitMenu(),getSettingMenu()])}function useSideBarConfig(){var e=(0,ec.NW)(),t=(0,l.aR)(),n=(0,F.s6)(),r=(0,c.yj)(),i=composables_useChangeSideBar(),u=(0,j.q)(),d=(0,ed.i)(),reportClick=function(e,t){(0,v.uk)(30385,{fromPage:e,gotoPage:t})},handleExploreClick=function(){r.name===S.Z.ExploreName&&(e.reset(),n.$mitt.emit("refreshGuideDestroy")),i.value=S.Z.ExploreName},f=[];return f=d.isLiveMode?[{name:S.Z.ExploreName,label:u.isAIMode?"首页":"发现",icon:"home",visible:!0,onClick:handleExploreClick,path:S.Z.ExplorePath,active:(0,s.Fl)(function(){return i.value===S.Z.ExploreName}),target:"_self"},{name:S.Z.LiveListName,label:"直播",icon:"live",visible:!0,onClick:function(){r.name===S.Z.LiveListName&&t.reset(),i.value=S.Z.LiveListName,(0,v.eJ)(93033)},path:S.Z.LiveListPath,active:(0,s.Fl)(function(){return i.value===S.Z.LiveListName}),target:"_self"},{name:"publish",label:"发布",icon:"creator",visible:(0,s.Fl)(function(){return!n.isNIO}),href:T.n.CREATOR_CENTER,target:"_blank",active:(0,s.Fl)(function(){return!1})},{name:S.Z.NotificationName,component:(0,s.Xl)((null==u?void 0:u.isAIMode)?J:z),label:(null==u?void 0:u.isAIMode)?"消息":"通知",active:(0,s.Fl)(function(){return i.value===S.Z.NotificationName}),visible:!0},{name:S.Z.ProfileName,component:(0,s.Xl)((null==u?void 0:u.isAIMode)?es:ei),label:"我",visible:!0,active:(0,s.Fl)(function(){return i.value===S.Z.UserPageName})}]:[{name:S.Z.ExploreName,label:u.isAIMode?"首页":"发现",icon:"home",visible:!0,onClick:handleExploreClick,path:S.Z.ExplorePath,active:(0,s.Fl)(function(){return i.value===S.Z.ExploreName}),target:"_self"},{name:"publish",label:"发布",icon:"creator",visible:(0,s.Fl)(function(){return!n.isNIO}),href:T.n.CREATOR_CENTER,target:"_blank",active:(0,s.Fl)(function(){return!1})},{name:S.Z.NotificationName,component:(0,s.Xl)((null==u?void 0:u.isAIMode)?J:z),label:(null==u?void 0:u.isAIMode)?"消息":"通知",active:(0,s.Fl)(function(){return i.value===S.Z.NotificationName}),visible:!0},{name:S.Z.ProfileName,component:(0,s.Xl)((null==u?void 0:u.isAIMode)?es:ei),label:"我",visible:!0,active:(0,s.Fl)(function(){return i.value===S.Z.UserPageName})}],(0,s.iH)(f.map(function(e){return(0,o._)((0,a._)({},e),{onClick:function(){if("onClick"in e){var t;null===(t=e.onClick)||void 0===t||t.call(e)}reportClick(r.name,e.name)}})}))}},95509:function(e,t,n){"use strict";n.d(t,{V:function(){return i},j:function(){return a}});var r,i=((r={}).Development="development",r.Production="production",r),a=!0},74369:function(e,t,n){"use strict";n.d(t,{n:function(){return i}});var r,i=((r={})[r.ACTIVE=1]="ACTIVE",r[r.PASSIVE=2]="PASSIVE",r[r.LOAD_MORE=3]="LOAD_MORE",r)},44892:function(e,t,n){"use strict";n.d(t,{Ln:function(){return u},Zm:function(){return o},rU:function(){return i},tM:function(){return a}});var r,i=((r={}).nioLogo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAAA1CAYAAABP0LXxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAdySURBVHgB7Zw9bBRHFMffrI7K2LgLkpHiCFtKKBKnCQUpznwo6YJJmQiTNhIQUoQiBSZFFBJFMSDRciYhVTCUIebjkKCABtOAJYzkwkhJd8ZQ4dvJ/HdvfHO7s7cfM3e3xvuTznc3uzve2/+8N+/NzC4jy/DR8hhxp0ycDxNjbxMx8c4HaTPBWY3IFS+80yPxfZ7q9Xm2VF0iizAyhA+XB2mLc1CINSmqGxNFm0uoNDBaEn+rQtiz7Gl1ngzJLJ4nWsk5Lj5+Q4VgGRDWyLgQ8VaFMpJavEI0y/jWeDqLiKnE4zv3HSSH/0achqnALowq9No9naZfTCRew9pOkW9tBZ0CVuiyE+zZzWvJdo+Bv1sepjUHlX1ABd1iii3eOh23U1vxPOHqzu3CTfaEWAEjxSuEywVtBdSK18jdHhbC5YJIAR3t7lvYdCFcbpjiI+WybkPI8vjovuNitGSaCvJEjdbcd0QaUVMLS+oXP7LkU7RR2C0C4KHtrWVPnonXIlnn0Cfhstnr1CWQql0U7xNqYYvl8dHxihhEnaROgItcvdxa9vxfovIXlBnUFxQP9aFem+jOHYzuo+7ijrPFalV+W7c83+o6JFwngCUEhZu71yrcwFai/XsoMarVvreT6MCeZj06jh1ufn4sjl0Qr2VNw4GHwGv5P0NrZRgoqcpvTbdZZ1O0kVAvnGTmSuv3fnHRz3xHiTk/o4g3QnQ0pi3rtqMB/XihKSIamXoO+P7lt5QNVkbwIq3PizY9q+M9sLr+rZQJndWhVd9/RD0H1vrHr0Q7GucX7CthgTveoux41ufhpwprzhHqBQMG4gWB1eQFNKyfGta2Y3t4e9ZG6yGsD3k4red57DPaKOwa8VuvinFf0gFwjjqRKlf8vtWEkm9spUZ6MEamyE5ZBW4sjSuDy0GgoII+RP2xk4fCx62+DFsjjkP57N/NskOfho+du+vvBx4r/wd9n7RmeIjJz1uPeyGOuXG3+X3/x2FPskv8lspfzXLUf+MemcNhbNMlMX5ZJhvg4oXc2Uw68RAZ6lyiFA8uSLcdgqtBgez/EHme/EU5R414M7P6c/QiT7XRBMSD4GrdZ1j43NC3VWbJPt5yE+E2XQtWB3T9V9p8S7e/6nqOHqZEPJi3n+vli0Es9HJEmm5nnk7n32EBadDtrzYKhO9JOHeJ3nycsRIxJtIEyi9qo0BQ8v3X7ffHPqZWlzSUV/fTeZ7+fr/8xUuyDqfBEv6QDXQhcdqT1l30gb7mZ0RqCETkRbvwQ/iimVodwvzblxPu92f7fdDQ8MLvQr96/pJ+BCYLnA0jVbAjXn9fuCyt21x9FS4LNgp5IXDxgsLdz2lfN9QItNTk3RSHb3PIFjq3sZrS8lZS7K9N1HPe16nJuwXsiDdkwWUCndXo6o5K1PMwPBZHVPKeFpetlLzlZqaz5tssWF078GPV+qISdTlYbTriouuXbLk7ry7RZz8xvD6M10r+TRGG4aa2v8vY9zwXF34oEO1t62uK1y5Rl6MzJ3+mzMD6xzVzjE9vhsvi5vMwYoSgKsiABcsTRifyPNfc12jd5ivKxHKM6/woJi3Nk/sMDu3ZhLtCPNx+ZMoBzYTng4zVLmiWMKj920AftSVvoyudyPHAGs2LPs+tEjeMW5B/BWess7Z+tNbgOOKcMpiLsUJY9e739cef+53efDju9auVcJ8YH9mLVUnZ8z05eyAtBK4rq7vAcWitsl9A7hasC8FI3qaAugl37uDNXwbB+YwYJjtOJuBiSvEqVygzEO7q9ab1zf7T3Ib6Ub4QsTpMjTJ100s6EPwE046Ls/aiZRvBSRCnXsGbLx7j18QfM/EwT4ULD5cm56xwUWRkmCYXlK4zGPJjzQjqPBCxqEiNMjEsNZQgvI9a0pdFPHl+EgiXpAGlgfEleVetJx4WtPCR8Sqm2CkrEAILgPAuAwa4O/SFUa0van0lXDDqUidHdZO9KqrQujUu3QDB0rEE01Zphw1b4OtL3x1dYWYwKKxOPkoXGIXqEnV1qVansxAV1VUfSzjvZxs0uri+HueZNRr2ra4iv66L5y8n41WyzVzEtH9c0KG61KjEXEW66l5ZnURddhHadt1w1qPVwErhjQauU4c3FTLTHDWRfWKaVAIDQGodQdDaZWtGHtjuAiZhRTPAkHR1GryJ2s9hxAi/GV2EyeBBwOq8ouA+fOf4tHHkWWAf/0aTJbUonJ3X+VTjCQUF+UH7oAH9zZX+fegPqXhURx64xhZvTeg2aMfF2IJQmbnjhPvCCnrJI+Euv4raGDmo6SWCzD1BhYC9AsKVgzdUqsQ/ygMPgiPnanGbczcRKdsan2gnHEj2EJ3iyRDdg7Oz7NnNRA8rSjQX5PWBr90PxQD2WSroFDUh3ERS4UAiy1Mp3GgHENZG9fpUnJsMklq89f83uveIeDtViGhAhofFtR5uiPeMEMaOiNaD246KvDAWjB+zOyKSnE5raUGMxVPxH/biiBduXuHD8lakTQxW5omcmc0Td0XoLxJui48qtiqejsYtuJvRImumlhXH//wn38vMpttQAAAAAElFTkSuQmCC",r.mainLogo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAM0AAABgCAYAAAC+PvZZAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA0KSURBVHgB7Z1LbFTXGce/cz1UlRKc6SqRghRLmAq6Cd0EKa2UwZC2uwRYFhV7SwWEVApSUxW7UqTSRXlYTdVsakdtd7y6ahMeU6lZkE1gA6iA4kog0Z1rg1SBZ07P/94Zezy+j+8+z70z3w+ZGY+vZ65n7v98z3OOohKjtzfGqOU0SFOdFL1OWplbvdP7IY2RUF0ULZjPc9Hc63zpW+b7m+Q4C+re5zepxCgqEXp8b4OobUSh3jHfQRx1EoYU1TRfEM9ldf9Kk0qEddF4QiEjkvYkiUgEfxZdESl9Wd27NkeWsSIaPfZunWpLx8zd90iEIsRjkZS6RCObZtTdvy2QBQoVjWdV9Enz1SBBSI1rfeaLtj6FiEbEIuQKkgpEM0WJJ1fRuG7YpuXTpPUkCULuGMtT2zSVt9uWm2j0tj3HjFimSWIWoXimaWX0rFq4tEg5kLlo9PYfjdHK8z+KKyZYxXXZRvblUfNxKENc67Ly7CsRjGAdFL916ys9PnGSMiYzS2NO7jR5KWRBKBnZxjqpRdNxxy52KviCUE7gro18Y3cWwkklGlcwrWfXpQ9MqAimMDqyO22ckzimEcEIFaTuxjnf3nOIUpDI0ohghMrjqEn1r6vzlIDYohHBCAODVvvUg6uXKCaxRCOCEQaMRDEOO6ZxW2JEMMJgUSdqXXSNQQz4iYDa0kkRjDBw4Jo2JRPXKDBhiaZTVZXCpTCgmBpj7Qm7cyAypvGKl8++JkEYfI6r+9fORB0UbWkQxwjCcHCSE9+EisZ1yySOEYaHutehH06ge1Ypt2z0RaIdW6OPu3GLCuXDnxLt/V74MXfuEx3+JZWWyQNEhw6EH/PoMdHB92lgiKjf1AJ/ceXZaaoKEMyffht93LY9VBhbXjEX3P7o42YTFaWLY/ML5m95OfwYpWmgcPRpk01rBk1i83XP9LaJSXPzLgnJ2ffD6GMemhH6wt9JKBkISWpLgdniIEuT+cSdoePAD6KPmf00/OdvG9du84uUKXceeC5hP/uNyF/1sSi7GDM+cI77AwYJuG54zaUnxGa083ywco/+Q/TlLW+AKZZjxtqc8bM2G0TjWhkJ/tPhXoCvRB8XFWP9/LDn5mXJuflg0ex6nRKBi/zUB+HHfP4F0ZUvoi0rYqgPD69/DII7ZwaY+fNUIPWOtZnu/8FG90yrVG3TguHoT6KPwcXzqPDR0x6wmhBW88/BA4GfYABE+YvDyUWdnGN+nQLrRNNZn6xBQnK4VubcpzSU4L25/Af/bGdU4uRI4eM5rM1k/4PrLY3SYmXSsp+RABg2K9MPLAeynb0WB1YkarDBMaMZx3iRYDH+9ayKRo816rKoX0rwoXJcCMmYeRf/rz+g8qMbnUX6V1mzNJuc6qaYCx99AuBYmRs3iy+ylhXuINMFGbQ4Wbis0HqdNtZEU+UEwOYSiAauBss1+4yEHqK6DXqZtRQH9oUtrmhc10wSAOk4wsiYSTFzI1xLg84Je+9dvddF8+o0IyMNlEGtEtWqAZae5mOe074218oAZI2Wn/BeJyhZwKnd4Dn8znf5qf/xbu3G5xpAcB71ekGvxTlPuNY4Dud1w2fWMd4DWGfrLm27Yf5r4l6nuFkCK3P5k+jY5MSpfNwbTmMlRrkTv/H/GcfKAFwcf/0k/JjGj9cuwIM/8z/m3lWKBIXEoPP146OP/R/H33b0ULLXghXh9ASC2/eD/95SoN7q3vNiGrX2gDU4wfzSU8oFjvUKipsghCjBccFIO0ipaK51KENMGonJonUKnU4nnrG7pCw3+7WcU+aE09c0+oL/429kWDuYu0BDSdB7WzZqT1ydOFSr2V+DmTvS5GVpOGIM8s+PMl2zKCBcuDlCiWl3RNO5YxVOIA7ycl2SivE747yWGQ6zQ9pWUyUUuak+p1IdzXkVtjiWxk8c2xmzRTlIKroaaP0t3DgmCfAa2eZVZgo1LzBng0N/7HL3AWVC1a3Mq0xPoeoo5VoapJzt74nJCQSXcxTNf5nPDdH0ihdpUhTd0nTf4vls1SDw90S995xaC2LSLSmEA9Hh9x8yBy9bdLyyGik9ZruuyUoEPCxBKtbvPNHif/6zzizLvgsQ80OiMmsI/m2lmT/+VTZzVBDbXf8LJebUibX7eC9uP/Dc1RImRpB2rhnBlMDSWM7Tcy9ajIh+sx7x+3N9swpxMR5lWKBhnVcTBFx1fGEQwvuK96dM8d43F+soblZDNI9yNt1pajV+yLya9EA8mO15pFy9xJnu7pwY24kALtx6ErcXbViLmXFBLSxON3SetKheDtFwyFs0HEvGdSM5vWhomfFz9QR/IJwyzJvStZKIhpOyzNuN4Tw/50ODlWHN3pR5NbHAe3+Isfhi3tRWFiCaRbKNzWbNOHDO8w3GXHcpZiZjl/3mFWCKmxURzXLO7hknEcCJaTi9aHOFrt81OBS/hNNG/ldfNClntWh1Atqo5WbNOES5kdzlm6YOeLWNfiCmOxl1GQwqcH8t1uyw4qYpbrZvGeHYs3vcFSRzj2kYiYCXIgQ+yfS5Iaz9fX/3w8fF12ywW0FUGn3v9/0X8OsFSZqkOx90YxWu64WBy5ZoFC3gpkZtY2lib4yeIZuZtY+8s2fLKSaiAbgOO8YpMVivuOiaTdA05f5jolhO2QqEJWuxgmZZ0spBaLWAG8f8i7UddOZw3LPbBaRmbzPcIrdXK+B8uWsEBDHsnQFVyCZqckcGkz0bsSsazlThRwU08nFH+aDNo3akmCYgnQH8plmbKL2AG4eeP18gm3AyIkUVATmvE2RR0sxzl/6ziuC4BsZRC02TPVP2rA0ncfdlQa3zafzy+YQtMYO2mMYAo+5faeLW6wjQ+h9kC86eI0XNN+GIM8gqIF2MZYziWkWZ5lwRVLN7r7b2gD5GNkAAiC7WoAD7RoFGEOJEtijsXMKsAmITqfQPKGuGxbM0rVaTbLXT4CINq5AXmVXBuYQVF6VfbIhxmqv38J/1uAbxQFA9oOipwEGWIqxfrCy7Fgj5YIqa3XgG9Oy5qS+b/xpkAwgGF+RkX3HLRioWU2z9XLSg2APZNEyUgrgRz8QpwsKq9U/pRYF075uUGjxP1BQFv9e3xUulHniavd+siWalPUc1B7s625nJiQlZ/aLhNjZm2cjXdRd7pyqHWZlu60zcvVbAwfc3Pvb7mWzWUkPdKKp2hE1rixANZwGPIxktupgH2pnv/XZVNHDR9NaJeWOK7CQEYFEwWncvPFyk/fEFRvX+qa/4MLJ2j+YvrF8U42KAYNK0zjx8vNH15DZ8VpE0C2/YBK7ZvTXXDPTtuelcIpvM9gjaL7WLUXHLy+u/uIKJ04rTn5w4H5AASDN33c/dS9uKU1ayXKaq+C7wmf4H1onGC3bW8tGFgzcWXxCPXyzTjX2SEHdhP1ibrlvmdy7cGZp++Ll7Sdy7KjE7T6lByr/ItSJcK3Ntrv/hms+RM1b3q0GBMKoWkmREjruIBT6csP1S0vjgw2RlunQHxDQDQ9Epf02+St+wRoB1axOVLeu++XFw46ME/Ws4lyArk/Qi97MyaZ6vSlz5JyUG7nKRhWPMnamZ5JgPAQtrqBkqM3FMfR6Tu9JYGb+kQpkzR1kCS5HEvYJYgnZqywtjZdTd5oLfj3xFY93aRAFLw5m9Bx8YLlaWtZ60VqE/qTAsVgZEdX/4Hf/R7+Jtg5gFbjHz2nTQj2uBv1hrTdGK8zWVFcQFfiM0ZhHCFctrc1OIFR/i22/Gnw7gNzsT84luWGrG4MxTcmdlRpxfnEEJCZawuAavh4XQkSlFpszOIpGhnlboRGc9PjFtbk6SIAwLiuZMxmwq7JDwxQJX2me6iwkIwsCDa32kHRnPh4rGa+Rs7yNBGA5mgoL/XiKXpVX3mnBoj5MgDDJanfUrZPrBWsvZZBKMm6YyKOkKQgmBW9ZqTXMP5y+A/rz1ntU5N4KQB14cs9sLRXiwReM+aa21TxIDwgDhxuycOKaXWFttuE9uVCnCEQYCraY6MXssYu9PI8IRBgJFU+rB1URTYRKv4qy3N8ao5VzvbhMtCJUBgmFmyvx/PQUiHKFiLJIyQX8Cl6yXVNsHrrpqklUTyo7X6v/dtILxnioj9NaJM9bWFxCEUFQTDchxs2SBz0YZoscnTC2H7K1oIwgbmQlr809C5ts5SZwjlAK4Y9qZ6l3kL7unzgnX6sBdE/EIRaPVWbTFxKnyxyHXjQM9q6OmzR+RYq0jQeBiYhfVOp5FsB/6KlQAIh4hXzA1X83k4Yr5vhoViIhHyJZixbL6qmSBVfGQektiHiEmi+56ZMq5VLRYutjcDN1Fj+9tGD90UgQkhICAvmk8lHnspZRXgM/Fumh6cQVE7Z3mtN4x35lbqfcMKd5+SVrfctcXX1m5aVsovZRKNP3obY2d1B4ZI2UEpOg1M9KMEYSkdF2sUsXpdslrteBuNa7p395j7Zt5Z7/S8n8dgsfPv/PfFwAAAABJRU5ErkJggg==",r.loginLogo="https://picasso-static.xiaohongshu.com/fe-platform/6ce4fe3655df6e6d1e0955479967e7a553949d1a.jpg",r.loginText="https://picasso-static.xiaohongshu.com/fe-platform/4be8f3703a739fae4d72f1015b6cd629b9dbb6b7.png",r.loginIcon="https://picasso-static.xiaohongshu.com/fe-platform/fdb37dfb3627d918f5eac10eaf8f25eb6e0668c8.png",r.unLogin="https://picasso-static.xiaohongshu.com/fe-platform/6e51e38fc6001e7d1b55aca54a5bbc1db0194556.png",r.Error="https://picasso-static.xiaohongshu.com/fe-platform/0ae9b1c96962eda280d1f8495ad134d6afe6cde5.png",r.noComments="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAB3TSURBVHgB7d1bchTnFcDxg5BkJ44LQRxSJA8eVmApEqryk4cVACtgtALMCiytALECSytArIDxU6pkEeQFpBhXHqhgbOSH+KIbOWf4xhaj/r6+THdPX/6/KpXwdI8sTXefPt/5Li0CAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAtNEFAcY8e/Zs4ZdfflmYnZ3tzMzMdE5PTxf05QX99yX7HvP2A93/R/uu+9u/B2/evDmYm5sbLC0tHQgwAQJWi1lgOjk56WpAscD0iX5flLcBqSPFsIC1b9/1//WNfu8fHx8PPv3004EACRCwWuTrr7/u6rfFCxcufGbfpbjAlNYwkGkQ+0q/92/cuNEXIAIBq8H++c9/drRZd1sD1C15G6DimnNV0tcA9li/+qurq/sCCAGrcSyL0ubdZ3qh35a3QaoJBhp0+1oP2yb7ajcCVgNYLUov5nsapLr6n11ptmHwOjw83KD21T4ErBqzbEov3i+kmCA10K8D/fnD5pgGxG/tu2Zvg9CbdL+Ofdf3WfPzY/m9iN+R/A2zLm0ybglagYBVM2eyqc8ln5rUqLn1jX4fHB0d7ReVuezu7i66QLZoPZLWMyn5NFvJulqCgFUTOQWqUW/cY/uuBfn9KoyNGuu9tH9nDsT6M7YIXM1FwKq4HALVQL+st22nKgEqjgtg3TMBLDUCVzMRsCpqwkBlQwK+Oj4+3qr7BWtDM+bn521w613JELwIXM1CwKqgvb29e/ptXdIFKsucti2TamrXvxtX1tMgZMGrk+a9+p51rZk9ZHpQvRGwKsT1+n0p6S7Gvn49vHjxYr9NF6P7rCyw307xtoFmrRv0KtYXAasC3Jy+B/rPXoq3WbNvo+0DKS3r0mBt2dPdFG/b0d7Q+zQT64eANWVPnz7taeCxYJWo+UdNJlqWwGXNxOXl5Q1BbRCwpsRlVdb8S9qkIStIIEPg2tfP9Q6faz0QsKYgZa2Kpl8GKQOXrdt1n9pW9RGwSqZNwAduqEKcgX7dX1lZ2RFklubmoPttaoDboCexughYJbE7/tzcnF043QS7W6/fOhdOfjRwrbt5l3FsetJNmojVRMAqgc2h0zv3I4m/y9tywms0/4qR4qYxELLbSiJgFWxvb89qKJsS3wtIVlWSpNkWvYjVQ8AqkNarvtCMaT1mN7KqKXDZ1hOJyXoJWtVCwCpIwuJ6X7OqO2RV0+GGlqzrP++F9rOxb9qkv89xmj4CVgG0GWh1kl5oHzdUYV0wddpE/FyD0oOY3fb15nKToDVdBKwcuTu2Fde7gd3shF+joFstCTtGCFpTRsDKiQtWVhMJraBJl3mFJaxrcQynaEaQC4JV/dmx0QxqSd4+7NXHgtoju0EJSkeGlYMENSuaEjWjTcStmGk9HNMpIMOakPUGSiBY2VNdOLHrZ3V1taffHgZ2WXT1SpSIDGsCceOs3COoeoLaihtkakMelpeX1wSlIMPKiGDVDm7oiTfT0nOgZ+eCoBRkWBm4FQCeBHbZX1lZWRI0RoKaVk+P+bagUGRYKVnXt1uuxGdYjBU0isuW+4FdNm0sl6BQBKwUrCs7ZpyODV1gqk1D2TQq8Q95WLCBpwx3KBYBKwWtS1mtouPZzDirhrMbkd2Q5O3yM1E69BwWi4CVkD0rMDSZWYMZ64K3gB1jO9bydopVlK7NTRQUgqJ7Am7KxjPxrGnFROb20XpVT5uA3lqmBrUlrXvtC3JFhpWAq1v5ahMPCVbt4x5Y4R3uQD2rGASsGG6MTcez2eaerQtaaWVlxZp+fc/mjqt5IkcErABrCoYGh1qRnR7BdtNzwEa5R54DVvO0MXuC3BCwAlxTMJKejDzUFKMi/H3f9gQLAyIFApaHPUJe/E3BHa1bbQogv9WzfAsyLtp8REEuCFgRXFPQV3+w8Vb3BThDa5nepqFmWffsnBJMjIAVQZuC3kK7BrKHNAUxztUyfas22AwJmoY5YBzWGDfm6rln80B7hq4L4LG3t2d1z27UNr3Z3eRxbpMhwxoTuhNar6AAAa7XMFKSh7cijIB1huuCvh21zRZqoymIOHaO2MwHz+YuwxwmQ8A6I9AFPTg8POTpv0hkdnbWepB9BXiyrAkQsBx354tcz0jvmNtkV0jKCvDWOePZTJY1AQKWE7jzDZgriLRcljWI2kaWlR0BS37LrrpR205PT2kKIjXLsjQwUcvKGQFLhnc831rdAzeKGUhteXl5S8iyctX6gOVGIPeitpFdYVJW//Rs6rIGfHqtD1huVHuUwcnJSV+ACYR6DGdmZnqCVGgSempXmrL36RnEpGJ6DO+yyF86rQ5YoRUZGHeFvLgsK8rC8fFxT5BYqwOW3vnuel5/THaFvLiJ0f2obZrJ3xIk1tqA5Yrt3ahtNg1HgByFpuvQLEyutQFrfn6+69lkKzLsCJAjt0pDZPFdm4U8Fiyh1gYsX3PQiu0CFMBXfNdz7jNBIq0MWKHm4Onp6bYAxeh7Xu/+61//+lgQq5UBK9QcZIE1FMWdW4OobScnJ3cEsVoZsGgOYlp8I9/pLUymrTWsbtSLNAdRgr7n9UV6C+O1LmAFZskf0BxE0QK9hTaIlLmFMVoXsDT1jlwCWVP1rwQox+OoF33nJn7XxibhJ1EvasBi7BVKEaiVMrwhRhsDVtfz+r4AJTg8POx7NlHHitGqgBWqX62urhKwUAo3T9U36p06VkDbMizfyUCwQtkee14nYAW0KmBp7cBXv6LgjlLpORd5k5yZmflE4NW2DKsT9aIGMjIslM13znUFXjQJZThgdCBAiWZnZyMDlmZeHYFXawKWm/Ac1QNDwR2lc4v6RRbemQjt15qApXe0jmcTwQrTEnnuaca/JIjUmoClxcxO1Ouagv8owHR8G/UizUK/1gQsvWt1PJvIsDAVvp5C7QTqCCK1JmAFToIDAaZAs/7Ic48My69NvYS+QiYZFqbC1zutN1eK7h5tCljM0UKlHB8fD6Je14DFueoxK+0ReRJcvHjxuTSETZzVu/Y9bVJ05fdBsgNbmHB1dXVLasD+Bnu4qHsww2jc3MCeFamv7zTpeZHvv//+wcnJybnX9W8lYHlckJbY29t7LRFBSwPWZTcmptb077un39bFn0la4LpT5TFnNjldA9WX4pmRoOyx7xs3btzYlIbQ4/Ym6vWVlZXWXJtptL5J2IRg9fTp0y/0m13EoTtzR4u8zwIrVkyVXri3NVg9EX+wMgu6zwP39zZF5PnHMjPRWv2o+ibQi7enWcd60v31gn9UtYvBzUJ4kHR/+3urGngz8PUUXhKc04qA1eS7lZ7Y91K+ZaFqTxqem5uzjKmT5j0aeJuUZSGhWhbdnz9/vvDBBx9YE2fRja+6pP+2oNSJ2v/w8PDgP//5z7nX9b0DqTGXmaReP0k/K3vM2bpUR1fS69qNqAlN+jgvXrzoaFAfnesfu3N99DVuOEdR65Xfuu/7elM7uHr1aiOG79QiYH333XddC076New5ihpYp695368HWprITmLJwD6/qlzs9ntoT1lHMtD3dfXbjjTQ3//+9/XXr1939FjZMX4nMIXO9ZHROa+dSsPvP/zww3AteRfAvjo6Otq/du3aQGqmkgHLMqgPP/zwtn7Yt1wX/fCAJTlQbWLjdbJ+Jq5GMvWA9csvvyxo4JUs9OJrbFNfj20v7/PdriX9ufb1+XvvvScaEPf1M+xr4N+uSwZWqYBlmdTs7OwXo7tKXgdMf2bk63WfAmGpvmT0j3/841upAN9YpCTq3qSfNrvO9DNc1Ovjc83ABvrvLb2BbFc585p60d2yKY30X+gH9lozqidnMyqE6efVl2z6UhGuWdqXDHyL4CETa36ua+b1/Pvvv//SkgepoKkFrFGgunTp0nPXLU+QSinrxW4j36VC9M6e+vexbKAhBffI817rtTIt1hy15EGvzydVC1ylfyrTClS+OkndV3fU4umapKtF7Vdtms7y8vKWpJuEPtCe3w1phsoFrBFr7YwCl/VUSgWU+qlYtNZA9YyMKj82t04zppuSLGgNNMDdkQpyv9cgwa7WVX+nCXMKfeMDqxCszrLANWoqTjtwlfLJWFalNapHFq0l5QDBvPiGNmjB97rUnM0P1AveltXtB3Z7qJ//UlUvdPu99G+4GdNc7dvf2ZQ1+PVv6US9XrWANWJNRQ1cT169etWTKSl8gJJlVXqhhCa0luK///2v/O9//zv3ul4ga3VZySCJ3d3dRdd13bH/tkeY6QWwU6d6jw2InZ+f77reYrvD22oN/aY9LMRN9n4y/vof/vAH0Z46qTI9Hpt6Xm1cvny51POq0GENVqtKM8+tSL67VtPWHnIXda0vbJcFbknD+c69qmZYZ9lYLr22b2sT8WaZwyAK+WRcYf1JVYKV0Tt25Ousn41pGWWQ43zjBiuoo03EZ9pEvC0lyT1gWVHOFda7UiG+uxbrZ2NafBlWjQKWWdBr65G1pqQEuQYsC1ZWlJMp16ui+DIs/bA/EWA6Is+9rFOVpslaU2UErdwC1suXLxctPZQKBivjOwlGE4EFKF/dm4TvKCNo5RKwLLPSD9kyq8pe+NYk9AUtX/cyUBR3k4y8XnytgTooOmhNHLDONAMrn6UEToRMy7QAWR0fH0eec7aKQt0VGbQmClhVrllF8aXattaWAOVqVHNwXFFBa6KApcHqkdQkWJlAhvWZACVyjzE75/3335emsKCV95CHzAFLo6c9NKBWmYmNIPZYpPCOkkVeO3WuX0XR1kuu8w8zBSybS6TR83OpGUu3feOxfDUFIG9uLf5O1LYm1LDGLFhLTBOcXBKC1AHLoqVe9IkfyVQ1gSyrK0AJbJ5k1OsWrOowLSeDxdPT01zqWak/HW1j20Tm2jaffDUCX00ByJu2Thpfvxpncw/zWAwwVcDStO5e1abcpPXBBx/4NnWpY6Ek3agXA9l/I9iqLZM2DRMHLGsK1rFuNS5Uxzo6OiptEifayT2xuhO1rckZltPRpuFEMSRxwNJ2d+qn81bVhx9+GPm6pq0ELBTKd45ZdtXQ+tU79O+/N0mvYaJPyP4HttqgNMQf//jHyNetjkWzEAW7FfWi75xsIOs1/FIyShSwXHbVGIHemAWGN6AothqseFopgdpqE3WzFuBjA1bTsitjwcp3gujf2qjgjOrQ8+5e1Ot2A23KlJyktACf6TqLDVhNy65G/vSnP/k20VuIonSjXgyci03WtSWpJKVgwGpidjUSGqSnzcLa94aiWkK9gy1rDv5Gs6yepBQMWE3NrowFq0Bv4S0BcqTn1N2o1613sG3NwRH7TNKOy5qJ+YFdabBAz8yiuyMCE3NzB3tR21raHBxZOD097aV5gzdguWUhOtJgdncLTNWh+I5caEslsthumZUvy2+LtK2Zmbx+UF2Fpuq4OyMwEXt+X9TrLRjZnkT3559//jjpzqGA1YpR33aH8xXf5+bmKL5jIk+fPu2Jp6Vy5coVgchPP/10J+m+kVeqG9TViq59C1aXLl3ybb7LEAdMQrOryNJCm4vt49K05iIDll7ErZpTFwhYCwxxQFah7GphgfvgGd2kvYW+gNWqh4vGDHG4Ry0LWfiyK8usmr6UTFpJp8SdC1gW6eq+5lUWly9f9m1aaPJ4NBQjlF0FzrXWStqqOxew2jr5N9TFrAG8x7gsJGUZeSi7avtQhijakknUqjsXsNr8jL7QnY9xWUjKjbvqRG0ju/LK1iSUhg8WDbG7X+CE6u7t7bHAH4JcdhXZUWN1K7Irr4UkhfeoDKtVBfdx1mMYWPnxAcMcEDI3N+ddnO4vf/mLIKgTt8O5K1PvDh1psZhxWZ28HleE5nGF9m7UNpszyLirsJOTk9hmIU3CCNYs1Dtl5DZL9ynAY1yo0G43QUa1x9M6cSdun3cCVl5PZ22Cjz76yLtNP9gvaRriLL3BeR/SYjdAsqtEUtewuAgdK5DSNEQS2hljvYK9qG0WqALnEc7QTDT2g3onYB0fH3cEv7E7o68AT9MQxs2CWPdt/9vf/ibIT/MfhDYBC1ahnh1tGj5i2k67aVPwiXhaJjQF00nS4UfAimHrZYUmR+sJ+0jQStor+EA8dauYMX3IiICVQKjXUC26ExctYnUr3wBRQ1OwGO8ELD0AB4JzrGkY6jV09SyWoWkJ90DUTd/2P//5zzQFs/kxbod3ApZmEQQsD+s1tBPRR+tZDyjCN5/VLPUG5i0D2ABRegWz0Wvoddw+401CAlaAnYiBJ+1QhG84O7auyN6J2m5ZVSgTR9jp6Wm6DEtrNRawCFoBV69eDdWzrAj/hKDVPDZQ2HWwdKK2W9nA6laBeaiIFxt7ZrK8qc3shLx27VroxOwQtJrn5OTEJjV757rZjYy61WS0Frwft0/UVRf7prazE/Ovf/1raBeCVoNoj6AFK+/SQtaLHCoVIJkknX5RqzV8K4hlRfiY5UIIWg3gglXPt92CFeOt8qGJQPoMK0lahrdsMbaYk5WgVWNxwSrB8UdyA1dDDzoXsLRST8BKIcEdlqBVM1Zg12D1TALBypqALMiXq2+S7HQuYGnx0AIWhfcUCFrNYcdIC+w2dMFbYH/vvfeGRXbkR1t2/ST7+bq6yLJSShi0nrEufHWdGWcVDFYxvcTIIGnLLvJT12j3lSC1BEHLZvU/evr0KWtpVYzdSOyGIoEVdwlWhTnQ5nU/yY6Rn7xGu74gkyS9RnpDWLcJ06xaWg3uBmKDQr3HwwrsBKvCJE6QLvg2/PDDDzavhwsqo9evXw+/YgyOjo5ufvrppwNB6eyGofUqC1Td0H42JSs0jxST0QRp7aOPPtpKsq/3dqFZwLYgM8uyEvQiDetarPRQPpuorsHKmoDd0H52HAlWxbp48WI/6b7eDOu7777r6g96IpjIr7/+Ki9fvhTNpIL7XbhwYevw8HCDbKtYllXZevyhtayMNf0sUPHg08I9vnLlSuKOKG+G5Ypg9BZOaFSoDUyYHtILqGc9VLu7uz1BIUZZVVywsqlXNpGZYFU8vXnspNn/Qmjj999/v653fnq0cqAHZljT+vHH2BU0yLZyljSrMqMpV0xkLsVAs6vrad4Q7PLQtNhWVWQQaQ5GTQz7iutpctnWM4Y/TM6exqxZ1fMkwWp+fn7HsmGCVTmy1MkvxO1AlpW/4+NjefHiRWxdyxlodrCxurq6JUjMmn/uvO0m2H2gF8/ajRs3+to7/iThezAhPT7XtVNjkOo9cTvY06D1YD4XhjjkLuHQh5HfLiqBV8pAZXa0c2ltaWlp2JKgs6kcVvbQYLUmKcUGLEOWVZyU2Zbpa+DaIHC9K0OgsgC1trKycq7oS5ZVvCzZ1fB9SXYiyyrc/r///e/HKW8KNBUlU6AyDzWLWh9lVePIsoplN1yt5a5LBokCliHLKs7obuMm39ozDtNMkB7o16ZmaI/b0qtovX6amfb0c7srgYnKERJnp2RZhRnocbuZJbsyiQOWy7KCk0ORXlRb3nq29LO2m0NH0rHmzXZUM6cJLJvSHta7+tlYQE+T7R+4QLWZ9A16vndcqwI5SjMNJ0rigGVIlXMXvNtMELjs5/b15Niue63LBalbNtRD0pckLFA9nJ2d3fQ1/0JoVeSuf+XKlZsygVQBy+hB3NSDeE8wsaR3mwkCl7EL1YLX45OTk37Vm41ukKdlUJ9lyKRGJgpUZ2nT0FoVaZqdiHagcWMpa1NwJHXAommYD7ugtPCYatLzhIFrZJh9afCyJT32tWg/1elXVrebn5/v6j8/cQGqI9nlFqhGXr58uag/z1oVdDhNQI/LfT3fEzfJfVIHLMNBnNjA3W0yXVQucFnBuSuTs99h35qPZWRgroln2VNX3mYueZxDVkx/rOfkVl6B6ixtVXyux+uBIJOsY64if5ZkxEHMLJfU2Fh2Yt3zFgAkp4xXf7fNw8PDh3kHrozDD0IsMG1roNopo0736tWrLSv4C9Ka6OY8LnPAMtSz0tNM5o7WrXLvxXNZ1y1JNyTCJ7dR9W6ohj0uqyv5KDSb8nGlkOB67zhnoiEMUSYKWEaLkrZiYx4XSeNNMmAuqVFNyAWvrkzQ5LK6Q5qhAON2d3cXNSux86Mj2Q2brNMIUuPcUAcLWh1BLJdZ5VojnThgcedJpoxgFcU1xYa9bpLtGPVWVlZSz6p3mZV1zmQJmAP9eqxffVuNcppBahxBK5lJx1v5TBywDEErbFrBapxbw7wrbzOvTyRZ0ftAT76baXoTzzwuq5Ng92EGpV/faGDd14xsp0oBKgqdTmFFBSuTS8AyBK1oVQlWPpaB2aDMmILyvmZZS5JQ3CPe5W2NbPv4+HirrtOJXNCatLnbOEUGK5NbwDIuaMU+haQtqh6sznJNRws0najtSetZrm71LLDLQw1+qcafVRXNw3dYJn6/yGBlcg1YI/Qe5jdQrkwxdacDrSddj2uuaXZl8+86UdsmLeJXEUFryHoD7+RdYI9SyFMhbQS3ZRfSTgdaJ7pZt2BlrHkWOG7DddFD77ehFeK/cB82LVgZ67K33rAWPxZv3w1dKDxYmUIyrJEWtvP33Z1mIDWmWZJ3aZWjo6PrUXWnmEJ7Kx4Y27bJ0jYNSpv/63kNCk2i0OduX716dRh923D3sYN35cqVpboHKxPKjt0g0HPm5+etaN+J2mYLDbZhrS6rV9raZvJ2WEaTWb3qjrWkygxWptAM66xXr15ZT9SkE3eraKBNwDX3HMfG0OK5dyqKBrSbZ0fBu+zKt3bUQIvs16Vlmppt6d9kszTWyg5UI4VmWGdZ70HDsq3honD2XLWmBSujAch68iJPStebeHZf74Vpd2JpoTPZVim1nRLYjdlqVXemFaxMaRnWWdazoifyulvitnam0Xafhq+//jqUJezotsf6WdgI+l7UDjZLf3l5OZdZ+nVW89bFgVsKaV0qYCoBa8RWMNUD2atJ4Dpw6fBGE+pUSbiR8ZnXPvMV6NuqZoHrwN2YN6t0Y55qwBo5k3HZhN2qTXeo5IErixtQmnpZbLeG+rrgHBe48lrPLG/D1TD099uq4vleiYA1YiPl9Y5+uwIHczi/TX+XjSbWp9IKFeA9WlloT8vdqEctjI5Mj92Ut/V32an6+V6pgHWWHUybqGsPIJAJl0lJyA7ajt1dbIWANmZTPq5pmHTKVSvGXOXNxizqedd1M0Q6UjxbsuerOgSpsyobsMbZAdXgtagH1L6SrjSQVF9/5lpbalNZuSK8LxsYrgAaekApknGr+VqtK6/zeyBvA9S3+tWv8w25NgErijUhj4+PLYAt2JpP+pV6qWArpFtXrSCRs0vU6Gd3SS+AH+uyLEydTPBIvWENSjOnfb02BteuXRtIg9Q6YI2zAOaK90knXue+hCuQl5SDTxs5gHlcaQNHy2BpbpqJ11ZoJFihqqxnWjyDd8cMb7xt6CBqVMAacYPc+jG7HVjXrQAVZTdgG1ITt59lVm258TYyYBkrokvg7uRqVwMBKiwuy7LWRJuG3jQ2YFkwimkatnW9LtSIy7J8828HdVnRNi+NDVjGLaK3M/66exLtQIAacFnWOVa3kpZpdMAy1jQcu0P19eu+ADVhN1d7uIP8vs6WrUfFuMEmsyEP9iVAjb148aIjAAAAAAAAAAAAAAAAAABk1Kj1sICmsYeA2Hr6b9686cjbEe6PV1dXt6SlhgFrb2/PFrxbl+o9sQZokv2jo6M7Sde71+vytn57NP66Bq/7N27c2EzyM9xTue3Bt12pCJvLe3h4uJFl3f8Z96HYH0+wAoq1qMHjiS0znXD/B1Ev2iqkSX+G/f+kYo8T04Dbc0E0NZv8fFsAlKXj1sQPsqag+J9PsKCZWux1u7u7uyjVfWhrN0Xg/k3jV2sAqkYzjINJ99G6VuzP0MDYuIeCzOgHsyUAyjLQ+lM/bidtMg0ksNKoZlj7EsPViPpSQVbHyvKUpRn34dljrmI/AACZ2cXZt4fMJtnZLmbfirn2etKCtf7/1rRncVuSPcyiDAcWrDRDzLQmHcMagAqzOpRe3FZ87+jXcNnvJBlaU/0fWTHRRucPYCUAAAAASUVORK5CYII=",r.noTitle="https://picasso-static.xiaohongshu.com/fe-platform/49e0b4f553690c5528068bc2fb444efd26890cf1.png",r.shield="https://picasso-static.xiaohongshu.com/fe-platform/8f7ea6282473928ac9a8b4fccedc9f2d986a5750.png",r.browser="https://picasso-static.xiaohongshu.com/fe-platform/e9759132650a9e2529b96fa4b7b944b478f20a45.png",r.wechatGuideLogo="https://picasso-static.xiaohongshu.com/fe-platform/d9f7599ee07e2d7c440a6a63a5b613d6c2c5bf2b.png",r.wechatGuideLogoBig="https://picasso-static.xiaohongshu.com/fe-platform/6339d92076bde666dc7f9954cd296fe8f4931a84.png",r.wechatHeaderTipLogo="https://picasso-static.xiaohongshu.com/fe-platform/d8c99ccfcfc3710322493d166c3317786e2a3ab7.png",r.searchHotspotTitle="https://picasso-static.xiaohongshu.com/fe-platform/0c824dd79820e11ad8e3a5c86d56892d6159f0a8.png",r.transparentImg="https://picasso-static.xiaohongshu.com/fe-platform/23e9c53a1905c5cbc66fff148c919f989c2d3560.png",r),a="|imageMogr2/strip",o="?imageView2/2/w/120/format/webp",u="?imageView2/2/w/120/format/webp"},31907:function(e,t,n){"use strict";n.d(t,{AD:function(){return u},J4:function(){return s},J9:function(){return d},Uw:function(){return v},Zv:function(){return a},iR:function(){return f},n4:function(){return i},pw:function(){return c},sg:function(){return o},yd:function(){return l}});var r,i=((r={})[r.SUPER_MAX=1920]="SUPER_MAX",r[r.MAX=1728]="MAX",r[r.LG=1424]="LG",r[r.MID=1192]="MID",r[r.SM=960]="SM",r[r.MIN=696]="MIN",r[r.ZERO=0]="ZERO",r),a={Max:{vertical:16,horizontal:32},LG:{vertical:16,horizontal:32},MID:{vertical:12,horizontal:24},SM:{vertical:12,horizontal:24},MIN:{vertical:12,horizontal:24},ZERO:{vertical:6,horizontal:12}},o={Max:5,LG:5,MID:4,SM:3,MIN:3,ZERO:2},u={Max:6,LG:6,MID:5,SM:4,MIN:3,ZERO:2},l={MAX:440,LG:440,MID:400,SM:360},s=2,c=40,d=72,v=16,f={maskPaper:"mask-paper",headerHide:"header-hide"}},91663:function(e,t,n){"use strict";n.d(t,{C4:function(){return s},DN:function(){return h},Dq:function(){return f},Hx:function(){return c},Lr:function(){return v},dX:function(){return p},mF:function(){return d},wi:function(){return g},zB:function(){return l}});var r,i,a,o,u=n(51606);n(87989);var l=216,s="".concat(l,"px"),c={small:600,large:800},d={small:600,large:800},v=c.small/c.large;var f=((r=f||{}).Empty="Empty",r.Explore="Explore",r.User="User",r.Search="Search",r.Activity="Activity",r.Notification="Notification",r.NoteDetail="NoteDetail",r.NioCollectionList="web_explore_feed_video_collection",r.Board="Board",r.AISearch="AISearch",r),p=(o={},(0,u._)(o,"Empty","link"),(0,u._)(o,"Explore","web_explore_feed"),(0,u._)(o,"Search","web_search_result_notes"),(0,u._)(o,"Activity","web_may_day_travel_tips_activity_page"),(0,u._)(o,"Notification","web_may_day_travel_tips_activity_page"),(0,u._)(o,"NoteDetail","link"),(0,u._)(o,"web_explore_feed_video_collection","web_explore_feed_video_collection"),(0,u._)(o,"AISearch","web_search_result_notes"),o);var h=((i=h||{}).BaiDu="baidu",i.Wechat="wechat",i.Bing="bing",i);var g=((a={})[a.NotFound=-51e4]="NotFound",a[a.UnderReview=-510001]="UnderReview",a[a.Forbidden=-510002]="Forbidden",a[a.PaidCollection=-510009]="PaidCollection",a)},98413:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r,i=((r={}).ActivityPath="/activity",r.ActivityName="Activity",r.ActivityNotePath="/activity/51/:noteId",r.ActivityNoteName="ActivityNote",r.OAuthPath="/oauth/callback",r.OAuthName="OAuth",r.LoginPath="/login",r.LoginName="Login",r.NotificationPath="/notification",r.NotificationName="Notification",r.NotificationNotePath="/notification/:noteId",r.NotificationNoteName="NotificationNote",r.HomePath="/",r.HomeName="Home",r.DownloadPath="/download",r.DownloadName="Download",r.ExplorePath="/explore",r.ExploreName="Explore",r.ExploreNotePath="/explore/:noteId",r.ExploreNoteName="ExploreNote",r.DiscoveryPath="/discovery/item/:id",r.DiscoverySghPath="/discovery/item/sgh/:id",r.DiscoveryItemPath="/discovery/item",r.BrandPath="//e.xiaohongshu.com/require-clue?sourcePage=6&sourceId=994",r.BrandName="Brand",r.NewsPath="/protocols/news",r.NewsName="News",r.ReportsPath="/protocols/reports",r.ReportsName="Reports",r.ActivitiesPath="/protocols/activities",r.ActivitiesName="Activities",r.ActivityItemPath="/protocols/activityitem",r.ActivityItemName="ActivityItem",r.TrophyPath="/protocols/trophy",r.TrophyName="Trophy",r.AboutPath="/protocols/about",r.AboutName="About",r.LiabilityPath="/protocols/liability",r.LiabilityName="Liability",r.LiabilityItemPath="/protocols/liabilityitem",r.LiabilityItemName="LiabilityItem",r.ProfilePath="/user/profile",r.ProfileName="Profile",r.UserPagePath="/user/profile/:id",r.UserPageName="UserPage",r.UserNotePath="/user/profile/:id/:noteId",r.UserNoteName="UserNote",r.BoardPath="/board",r.BoardName="Board",r.BoardPagePath="/board/:id",r.BoardPageName="BoardPage",r.BoardNotePath="/board/:id/:noteId",r.BoardNoteName="BoardNote",r.RootPath="/",r.SearchPath="/search_result",r.SearchName="search",r.SearchNotePath="/search_result/:noteId",r.SearchNoteName="SearchNote",r.AISearchPath="/search_result_ai",r.AISearchName="AISearch",r.AISearchNotePath="/search_result_ai/:noteId",r.AISearchNoteName="AISearchNote",r.RatingTermsPath="/protocols/rating_terms",r.RatingTermsName="RatingTerms",r.contactPath="/contact",r.TermsPath="/terms",r.PrivacyPath="/privacy",r.CommunityRulePath="/protocols/community-rule",r.ContentDisputeViewPath="/content_dispute",r.FilePreviewPath="/file/:docId",r.FilePreviewName="FilePreview",r.LiveRoomName="LiveRoom",r.LiveRoomPath="/livestream/:roomId/:antiBlockAlias?",r.LiveListPath="/livelist",r.LiveListName="LiveList",r.NotFoundPath="404/:antiBannedId?",r.NotFoundName="NotFound",r)},14748:function(e,t,n){"use strict";n.d(t,{GI:function(){return c},I3:function(){return d},NK:function(){return l},_t:function(){return u},ai:function(){return o},eH:function(){return s}});var r,i,a=n(8935),o={SEARCH_WORD_FROM_AUTO_COMPLETE:1,SEARCH_WORD_FROM_CONFIRM:2,SEARCH_WORD_FROM_HISTORY:3,SEARCH_WORD_FROM_TRENDING:4,SEARCH_WORD_FROM_RECOMMEND_QUERY:5,SEARCH_WORD_FROM_DEFAULT:10,SEARCH_WORD_FROM_HOTLIST:35,SEARCH_WORD_FROM_INTEREST_QUERY:40,SEARCH_WORD_FROM_FILTER_OPTIONS:45,SEARCH_WORD_FROM_WEB_DIRECT_OPEN_URL:51,SEARCH_WORD_FROM_DEFAULT_CONFIGURATION:52,SEARCH_WORD_FROM_WEB_QUESTION:53,SEARCH_WORD_FROM_WEB_NOTE_TAGS:54,SEARCH_WORD_FROM_WEB_HOTLIST_CARD:56,SEARCH_WORD_FROM_WEB_HOTLIST_NEXT:57,SEARCH_WORD_FROM_WEB_NOTE_SELECT_TEXTS:66,SEARCH_WORD_FROM_AI_RECOMMEND:101,SEARCH_WORD_FROM_AI_UNDERLINE:102,SEARCH_WORD_FROM_AI_QUOTE:103},u="综合";var l=((r={}).All="all",r.Image="image",r.Video="video",r.User="user",r.WebPage="webPage",r),s=[{key:"all",label:"笔记",type:a.PZ.All},{key:"user",label:"用户"},{key:"webPage",label:"网页"}],c=[{key:"all",label:"全部",type:a.PZ.All},{key:"image",label:"图文",type:a.PZ.NORMAL},{key:"video",label:"视频",type:a.PZ.VIDEO},{key:"user",label:"用户"}];var d=((i={}).startSearch="start_search",i.searchReached="search_reached",i.searchTime="search_time",i)},81334:function(e,t){"use strict";var n,r=((n=r||{}).MF_STATISTICS="MF_STATISTICS",n.NO_NPS_UNTIL="NO_NPS_UNTIL",n.UNREAD_NOTE_INFO="UNREAD_NOTE_INFO",n.HOME_FEED_CURSOR_SCORE="HOME_FEED_CURSOR_SCORE",n.SESSION_ID="sessionId",n.REDMOJI="redmoji",n.RACING_CALL_OLD="RacingCall",n.RACING_CALL_NEW="RacingReport",n.OAUTH="Oauth",n.FIRST_VISIT_URL="firstVisitUrl",n.OB_PAGES="OB_PAGES",n.SEARCH_HOTSPOT_HIDE_TIME="xhs-search-hotspot-hide-time",n.LIVE_PHOTO="NOTE_LIVE_PHOTO",n.RWP_LOGIN_TOKEN="RWP_LOGIN_TOKEN",n.SESSION_DEVICE_ID_KEY="XHS_TAB_DEVICE_ID",n.SESSION_FINGERPRINT_KEY="XHS_RWP_FINGERPRINT",n);t.Z=r},94895:function(e,t,n){"use strict";n.d(t,{n:function(){return i}});var r,i=((r={}).TERMS="https://agree.xiaohongshu.com/h5/terms/ZXXY20220331001/-1",r.PRIVACY="https://agree.xiaohongshu.com/h5/terms/ZXXY20220509001/-1",r.COMMUNITYRULE="https://agree.xiaohongshu.com/h5/terms/ZXXY20221213003/-1",r.CONTENTDISPUTEVIEW="https://agree.xiaohongshu.com/h5/terms/ZXXY20230215001/-1",r.CREATOR_CENTER="https://creator.xiaohongshu.com/publish/publish?source=official",r.TEENS_PROTECT="https://oa.xiaohongshu.com/h5/terms/ZXXY20220516001/-1",r)},80856:function(e,t,n){"use strict";n.d(t,{FR:function(){return l},Lo:function(){return u},eA:function(){return f},g2:function(){return d},rs:function(){return c},u5:function(){return v},w8:function(){return s}});var r,i,a,o,u=["note","fav","like"],l=["fav_note","board"];var s=((r={})[r.Note=0]="Note",r[r.Fav=1]="Fav",r[r.Liked=2]="Liked",r);var c=((i={})[i.Note=0]="Note",i[i.Board=1]="Board",i[i.File=2]="File",i);var d=((a={})[a.Note=0]="Note",a[a.FavNote=1]="FavNote",a[a.Liked=2]="Liked",a[a.FavBoard=3]="FavBoard",a[a.File=4]="File",a);var v=((o={})[o.Feed=0]="Feed",o[o.Board=1]="Board",o[o.File=2]="File",o),f=[{key:0,index:0,query:"note",label:"笔记",lock:!1,subTabs:null,feedType:0},{key:1,index:1,query:"fav",label:"收藏",lock:!0,feedType:0,subTabs:[{index:1,key:0,query:"note",label:"笔记",lock:!0,feedType:0,count:0},{index:3,key:1,query:"board",label:"专辑",lock:!0,feedType:1,count:0},{index:4,key:2,query:"file",label:"文件",lock:!0,feedType:2,count:0}]},{index:2,key:2,query:"liked",label:"点赞",subTabs:null,lock:!1,feedType:0}]},16058:function(e,t,n){"use strict";var r,i,a,o,u,l,s,c,d,v,f,p,h,g=n(41622),m=n(377);n(36277),n(34333),n(87989),n(86651),n(67930),n(58486),n(42876),n(33933);var y=n(37107),I=n(82825),_=n(64732),w=n(96144),k=n(60181),S=n(38841),b=n(19676),M=n(51401);function getWebId(){return new Promise(function(e){var t,n=0;var r=(t=(0,g._)(function(){var t;return(0,m.Jh)(this,function(i){return n>100?(e({gid:"unknown",deviceId:M.Z.get("webId")||"unknown"}),[2]):((t=M.Z.get("gid"))?e({gid:t,deviceId:M.Z.get("webId")||"unknown"}):setTimeout(r,100),n+=1,[2])})}),function read(){return t.apply(this,arguments)});r()})}n(80156),n(50721),n(29112),n(67275),n(59989),n(7099),n(27461),n(23339),n(51109),n(25037),n(87535),n(75204),n(97357),n(55947);var L=n(8306),x=n(85537),T=n(15589),D=n(93328),N=n(70879),E=n(27337),R=n(82726);n(74719),n(13396),n(7608),n(15066),n(41593);var U=n(69876),P=n(25550),F=n(95509),j=n(46490),O=n(90251),H=n(51606);function getLonglinkEnv(){return"production"!==F.V.Production||window.location.origin.includes("beta")?P.EEnv.BETA:P.EEnv.PROD}var W=new(function(){function LonglinkService(){(0,j._)(this,LonglinkService),(0,H._)(this,"instance",null),(0,H._)(this,"sdkConfig",null)}return(0,O._)(LonglinkService,[{key:"getConfig",value:function getConfig(){return this.sdkConfig}},{key:"sdkInit",value:function sdkInit(e){var t=this;return(0,g._)(function(){var r;return(0,m.Jh)(this,function(i){switch(i.label){case 0:return t.instance&&(t.instance.removeAllListeners(),t.instance.close("reinit")),[4,Promise.resolve().then(n.t.bind(n,25550,23))];case 1:return r=i.sent().LonglinkSdk,t.instance=r.create(e),[2]}})})()}},{key:"mountEvent",value:function mountEvent(e,t){return this.instance&&this.instance.on(e,t),this}},{key:"conntect",value:function conntect(){var e=this;return(0,g._)(function(){return(0,m.Jh)(this,function(t){switch(t.label){case 0:if(!e.instance)return[3,2];return[4,e.instance.connect()];case 1:t.sent(),t.label=2;case 2:return[2]}})})()}},{key:"auth",value:function auth(e){var t=this;return(0,g._)(function(){return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(!t.instance)return[3,2];return[4,t.instance.auth(e)];case 1:n.sent(),n.label=2;case 2:return[2]}})})()}},{key:"login",value:function login(e){var t=this;return(0,g._)(function(){return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(!t.instance)return[2];return[4,t.instance.login(e)];case 1:return[2,n.sent()]}})})()}},{key:"reconnect",value:function reconnect(){var e;null===(e=this.instance)||void 0===e||e.reconnect("主动重连")}},{key:"close",value:function close(){var e;null===(e=this.instance)||void 0===e||e.close("主动关闭")}}]),LonglinkService}()),z=n(94186),Z=Symbol("LonglinkProvide");function mountIo(){var e=P.LonglinkSdk.EVENTS;W.mountEvent(e.ERROR,function(e){var t;try{(0,z.qn)({status:null!==(t=null==e?void 0:e.status)&&void 0!==t?t:1,msg:JSON.stringify(e)})}catch(e){}})}function useLonglinkProvider(){var e,t=(0,x.L)(),n=(0,U.Wg)(),r=(0,U.Wg)(),i=(0,R._)((0,U.OT)(!1),2),a=i[0],o=i[1],u=(0,R._)((0,U.OT)(!1),2),l=u[0],s=u[1],c=(0,w.$T)("webExp"),d={status:5,msg:""};var v=(e=(0,g._)(function(){var e,r,i;return(0,m.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,W.sdkInit({app:"xhs-pc-web",version:M.Z.get("webBuild")||"UNKNOWN",env:getLonglinkEnv(),domain:"red",serviceTag:"namespace",bizId:10,protocol:P.EProtocols.Websocket,contentType:P.EContentType.JSON,packetFormat:P.EPacketFormat.STRING,autoReconnect:!0,maxReconnectAttempts:3,connectTimeout:3e3,trackerEnable:(null==c?void 0:null===(e=c.flags)||void 0===e?void 0:e.enableLongLinkLog)==="enable",pingInterval:[15e3,3e4,6e4],device:(0,E._)((0,N._)({},(0,P.getDefaultDeviceInfo)({deviceInfo:null})),{deviceId:M.Z.get("webId")||"UNKNOWN"})})];case 1:return i.sent(),mountIo(),[4,W.login({authType:P.EAuthType.ANONYMOUS,uid:t.userInfo.userId||"unknown"})];case 2:if((null==(r=i.sent())?void 0:r.code)===P.EStatusCodes.SUCCESS)o(!0),n.trigger(!0);else throw d.msg="login fail",Error();return[3,5];case 3:return i.sent(),d.status=4,o(!1),s(!0),[3,5];case 4:return(0,z.xc)(d),[7];case 5:return[2]}})}),function connectLonglink(){return e.apply(this,arguments)});(0,D.bv)((0,g._)(function(){var e;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if("production"===F.V.Production&&!window.location.protocol.includes("https"))return s(!0),d.status=6,d.msg="protocal=http",(0,z.xc)(d),[2];if((null==c?void 0:null===(e=c.flags)||void 0===e?void 0:e.enableLonglink)!=="enable")return s(!0),d.status=1,d.msg="racing disable",(0,z.xc)(d),[2];return[4,t.getUserInfo({disableCache:!0})];case 1:if(n.sent(),!t.loggedIn)return[3,3];return[4,v()];case 2:return n.sent(),[3,4];case 3:t.$mitt.on("onLogin",(0,g._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,t.getUserInfo({disableCache:!0})];case 1:if(e.sent(),!t.loggedIn)return[2];return[4,v()];case 2:return e.sent(),[2]}})})),n.label=4;case 4:return[2]}})}));var f=(0,D.m0)(function(){l.value&&(r.trigger(!0),f())});(0,D.JJ)(Z,{onLonglinkReady:function(e){a.value?null==e||e():n.on(e)},longlinkService:W,onLonglinkDowngrade:function(e){l.value?null==e||e():r.on(e)}})}function useLonglink(){var e=(0,D.f3)(Z);return{longlinkService:e.longlinkService,onLonglinkReady:e.onLonglinkReady,onLonglinkDowngrade:e.onLonglinkDowngrade}}var q=(0,D.aZ)({__name:"LonglinkProvider",setup:function(e){return useLonglinkProvider(),function(e,t){return(0,D.WI)(e.$slots,"default")}}});n(97542),n(72169);var V=n(60506),Y=n(40122),G=n(66398),J=n(66002),Q=n(52504),K=n(6890),X={key:0,class:"banned-title"},$={key:1},ee={key:0,class:"text"},et={key:1,class:"text center"},en={key:2,class:"text center"},er=(0,D.aZ)({__name:"AccountBannedAlert",setup:function(e){var t=(0,x.L)(),n=(0,K.s6)(),r=(0,J.Jk)(t).bannedInfo,i=(0,D.Fl)(function(){return r.value.code===Q.o.AccountBanned?"账号冻结说明":"账号封禁说明"});function explain(){var e=r.value.code===Q.o.AccountBanned?"请前往小红书手机 APP 查看违规详情及解除方式":"目前账号处于封禁状态，请使用小红书手机 APP 进行申诉";(0,G.zM)(e)}function understand(){return _understand.apply(this,arguments)}function _understand(){return(_understand=(0,g._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:if(r.value.showAlert=!1,![Q.o.AccountBanned].includes(r.value.code))return[3,4];e.label=1;case 1:return e.trys.push([1,,3,4]),[4,(0,Y.IJ)()];case 2:return e.sent(),[3,4];case 3:return window.location.reload(),[7];case 4:return[2]}})})).apply(this,arguments)}function handleBan(e){t.bannedInfo.code=e.code,t.bannedInfo.reason=e.message,t.bannedInfo.showAlert=!0}var a=(0,D.m0)((0,g._)(function(){var e,t,n,i,o,u;return(0,m.Jh)(this,function(l){switch(l.label){case 0:if(!r.value.showAlert)return[3,6];(0,z.Qv)("accountBanned",{type:"impression",info:JSON.stringify(r.value)}),e=r.value.serverBanned?"true":"false",t="false",l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,(0,Y.fs)()];case 2:return l.sent(),t="false",[3,5];case 3:return n=l.sent(),[Q.o.AccountBanned,Q.o.CommentForbidden,Q.o.InteractionForbidden].includes(n.code)&&(t="true",handleBan(n)),[3,5];case 4:return a(),[7];case 5:e!==t&&(0,z.Qv)("banError",{serverBanned:e,clientBanned:t,info:JSON.stringify((null===(u=window)||void 0===u?void 0:null===(o=u.__INITIAL_STATE__)||void 0===o?void 0:null===(i=o.user)||void 0===i?void 0:i.userInfo)||{})}),l.label=6;case 6:return[2]}})})),o=(0,D.Fl)(function(){return r.value.code===Q.o.AccountBanned?"查看详情":"我要申诉"});return function(e,t){return(0,D.wg)(),(0,D.j4)((0,D.SU)(G.bZ),{show:(0,D.SU)(r).showAlert&&"true"!==(0,D.SU)(n).appSettings.disableBanAlert,"footer-layout":"vertical","confirm-text":"我知道了","cancel-text":o.value,"is-btn-rounded":!0,onCancel:explain,onConfirm:understand},{title:(0,D.w5)(function(){return[[(0,D.SU)(Q.o).AccountBanned,(0,D.SU)(Q.o).InteractionForbidden].includes((0,D.SU)(r).code)?((0,D.wg)(),(0,D.iD)("div",X,(0,D.zw)(i.value),1)):(0,D.kq)("",!0),(0,D.SU)(r).code===(0,D.SU)(Q.o).CommentForbidden?((0,D.wg)(),(0,D.iD)("div",$," 薯队长提示 ")):(0,D.kq)("",!0)]}),default:(0,D.w5)(function(){return[[(0,D.SU)(Q.o).AccountBanned].includes((0,D.SU)(r).code)?((0,D.wg)(),(0,D.iD)("div",ee,t[0]||(t[0]=[(0,D.Uk)(" 亲爱的小红薯，平台识别到你的账号存在违规行为，已严重违反《小红书社区规范》，现对你的账号进行封禁处理，封禁期间你的账号将无法继续使用。请前往小红书手机 APP 查看违规详情及解除方式。 "),(0,D._)("br",null,null,-1)]))):(0,D.kq)("",!0),(0,D.SU)(r).code===(0,D.SU)(Q.o).InteractionForbidden?((0,D.wg)(),(0,D.iD)("div",et," 因违反社区公约，目前账号处于封禁状态，如有疑问，请使用小红书 APP 进行申诉。 ")):(0,D.kq)("",!0),(0,D.SU)(r).code===(0,D.SU)(Q.o).CommentForbidden?((0,D.wg)(),(0,D.iD)("div",en,t[1]||(t[1]=[(0,D.Uk)(" 因违反社区规范，您当前已被禁言。您可以阅读 "),(0,D._)("a",{target:"_blank",href:"//agree.xiaohongshu.com/h5/terms/ZXXY20221213003/-1",class:"link"}," 《社区公约》 ",-1),(0,D.Uk)(" 了解更多社区规范。 ")]))):(0,D.kq)("",!0)]}),_:1},8,["show","cancel-text"])}}}),ei=n(5010);let ea=(0,ei.default)(er,[["__scopeId","data-v-7a413e2c"]]);var eo=n(16337),eu=n(47658),el=n(10602),es=n(99505),ec={class:"anchor"},ed={class:"share-wrapper"},ev={class:"qrcode-wrapper"},ef={class:"Qr-code"},ep=["src"],eh={class:"share-tools"},eg=(0,D.aZ)({__name:"Share",props:{url:{},handleOpen:{type:Function}},setup:function(e){var t=(0,D.iH)(!1),n=(0,D.iH)("top"),r=(0,D.qj)({image:""}),i=(0,D.iH)();function writeClipBoard(){return _writeClipBoard.apply(this,arguments)}function _writeClipBoard(){return(_writeClipBoard=(0,g._)(function(){return(0,m.Jh)(this,function(t){switch(t.label){case 0:(0,es.uk)(37873,{channelType:"ditto"},(0,el.z)(e.url)),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,navigator.clipboard.writeText(e.url)];case 2:return t.sent(),(0,G.zM)("已复制"),[3,4];case 3:return console.log(t.sent()),(0,G.zM)("复制未成功，请检查剪贴板权限"),[3,4];case 4:return[2]}})})).apply(this,arguments)}function drawQrCode(){return _drawQrCode.apply(this,arguments)}function _drawQrCode(){return(_drawQrCode=(0,g._)(function(){var t,n;return(0,m.Jh)(this,function(i){switch(i.label){case 0:if(!e.url)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),t=e.url,[4,eu.toDataURL(t,{margin:0})];case 2:return r.image=i.sent(),[3,4];case 3:throw n=i.sent(),(0,G.zM)(n.message),n;case 4:return[2]}})})).apply(this,arguments)}function reigsteOffEvent(){(0,eo.i9H)(i,function(){t.value=!1})}function gotoQQ(){(0,es.uk)(37875,{channelType:"ditto"},(0,el.z)(e.url));var t="https://connect.qq.com/widget/shareqq/index.html?url=".concat(encodeURIComponent(e.url));window.open(t,"_blank")}function gotoWB(){(0,es.uk)(37876,{channelType:"ditto"},(0,el.z)(e.url));var t="https://service.weibo.com/share/share.php?url=".concat(encodeURIComponent(e.url));window.open(t,"_blank")}function handleOpenShare(r){r.currentTarget.getBoundingClientRect().y<300?n.value="bottom":n.value="top",t.value=!0,e.handleOpen&&e.handleOpen(),reigsteOffEvent()}return(0,D.wF)(drawQrCode),(0,D.YP)(function(){return e.url},function(e,t){e!==t&&drawQrCode()}),function(e,a){return(0,D.wg)(),(0,D.iD)("div",ec,[(0,D.SU)(t)?((0,D.wg)(),(0,D.iD)("div",{key:0,ref_key:"container",ref:i,class:(0,D.C_)(["share-container",[(0,D.SU)(n)]])},[(0,D._)("div",ed,[a[0]||(a[0]=(0,D._)("div",{class:"share-wrapper-header"}," 扫码分享 ",-1)),(0,D._)("div",ev,[(0,D._)("div",ef,[(0,D.SU)(r).image?((0,D.wg)(),(0,D.iD)("img",{key:0,crossorigin:"anonymous",src:(0,D.SU)(r).image},null,8,ep)):(0,D.kq)("",!0)])]),a[1]||(a[1]=(0,D._)("div",{class:"text"}," 手机扫码分享观看 ",-1)),(0,D._)("div",eh,[(0,D.Wm)((0,D.SU)(G.zx),{type:"icon",icon:"ic_link",onClick:writeClipBoard}),(0,D.Wm)((0,D.SU)(G.zx),{type:"icon",icon:"ic_qq",onClick:gotoQQ}),(0,D.Wm)((0,D.SU)(G.zx),{type:"icon",icon:"ic_weibo",onClick:gotoWB})])])],2)):(0,D.kq)("",!0),(0,D.Wm)((0,D.SU)(G.zx),{type:"icon",icon:"ic_share",class:"share-icon",onClick:handleOpenShare})])}}});let em=(0,ei.default)(eg,[["__scopeId","data-v-5cde0260"]]);var ey=n(10409),eI={class:"header fullscreen-header"},e_={class:"left"},ew={class:"right"},ek={class:"header panel-header"},eS={class:"left"},eb={class:"right"},eC=["src"],eM=(0,D.aZ)({__name:"Index",setup:function(e){var t,n=(0,ey.j)(),r=(0,x.L)(),i=(0,J.Jk)(n),a=i.currentUrl,o=i.isOpen,u=(0,D.iH)(!1),l=(0,D.iH)(0),s=(0,D.iH)(0),c=(0,D.iH)(),d=(0,D.iH)(!0),v=(0,D.Fl)(function(){try{return new URL(a.value).searchParams.get("id")}catch(e){return a.value}}),f=(0,D.Fl)(function(){try{var e=new URL(a.value);return e.searchParams.append("container","pcxhs"),e.searchParams.append("user_id",r.userInfo.userId||""),e.toString()}catch(e){return a.value}}),p=0;function handleDragStart(e){p=e.currentTarget.offsetLeft+e.currentTarget.clientWidth/2+(d.value?-16:16),u.value=!0,s.value=e.x-p}function handleDrag(e){if(!!u.value)s.value=e.x-p}function handleDragEnd(e){if(!!u.value)l.value=0,s.value=0,u.value=!1,d.value=e.x>=document.body.clientWidth/2}function getPageInstance(){return{type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_ditto_activity_page"},instanceId:v.value}}}function handleShare(){return _handleShare.apply(this,arguments)}function _handleShare(){return(_handleShare=(0,g._)(function(){var e;return(0,m.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,es.O8)(35982)];case 1:return e=t.sent(),S.Q.push((0,E._)((0,N._)({},e),{page:getPageInstance()})),[2]}})})).apply(this,arguments)}function handleClose(){return _handleClose.apply(this,arguments)}function _handleClose(){return(_handleClose=(0,g._)(function(){var e;return(0,m.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,es.O8)(35983)];case 1:return e=t.sent(),S.Q.push((0,E._)((0,N._)({},e),{page:getPageInstance()})),n.closePanel(),[2]}})})).apply(this,arguments)}return(0,D.YP)(o,(t=(0,g._)(function(e,t){var n,r;return(0,m.Jh)(this,function(i){switch(i.label){case 0:if(!(e&&!t))return[3,2];return[4,(0,es.O8)(35980)];case 1:return n=i.sent(),S.Q.push((0,E._)((0,N._)({},n),{page:getPageInstance()})),[3,4];case 2:if(!(!e&&t))return[3,4];return[4,(0,es.O8)(35981)];case 3:r=i.sent(),S.Q.push((0,E._)((0,N._)({},r),{page:getPageInstance()})),i.label=4;case 4:return e?(window.addEventListener("mousemove",handleDrag),window.addEventListener("mouseup",handleDragEnd)):(window.removeEventListener("mousemove",handleDrag),window.removeEventListener("mouseup",handleDragEnd)),window.addEventListener("mouseleave",handleDragEnd),[2]}})}),function(e,n){return t.apply(this,arguments)})),function(e,t){return(0,D.wg)(),(0,D.iD)("div",{ref_key:"containerRef",ref:c,class:(0,D.C_)(["container",[(0,D.SU)(o)?"in":"out",d.value?"right":"left"]]),style:(0,D.j5)(u.value?{left:"".concat(s.value,"px"),transition:"none"}:{})},[(0,D._)("div",eI,[(0,D._)("div",e_,[(0,D.Wm)((0,D.SU)(G.zx),{type:"icon",icon:"ic_arrow_left",onClick:handleClose})]),t[0]||(t[0]=(0,D._)("div",{class:"title"}," 活动 ",-1)),(0,D._)("div",ew,[(0,D.Wm)((0,D.SU)(G.zx),{type:"icon",icon:"ic_share"})])]),(0,D._)("div",ek,[(0,D._)("div",eS,[(0,D._)("div",{onMousedown:handleDragStart},[(0,D.Wm)((0,D.SU)(G.zx),{type:"icon",class:(0,D.C_)(["dragger",[u.value?"dragging":""]]),icon:"ic_dragger"},null,8,["class"])],32)]),t[1]||(t[1]=(0,D._)("div",{class:"title"}," 活动 ",-1)),(0,D._)("div",eb,[(0,D.Wm)(em,{url:(0,D.SU)(a),"handle-open":handleShare},null,8,["url"]),(0,D.Wm)((0,D.SU)(G.zx),{type:"icon",icon:"ic_close",class:"close-icon",onClick:handleClose})])]),(0,D._)("iframe",{src:f.value,onMouseenter:handleDragEnd},null,40,eC)],6)}}});let eA=(0,ei.default)(eM,[["__scopeId","data-v-fc1041fa"]]);var eL=(0,D.aZ)({__name:"AdBlockAlert",setup:function(e){var t=(0,K.s6)(),n=(0,D.iH)(!1);function checkAdBlock(){var e=document.querySelector(".ad-wrap");if(!!e)"none"===getComputedStyle(e).display&&(y.Z.reportBlocked({type:"plugin_block",message:"block detected"}),1===t.appSettings.showAdBlockAlert&&(n.value=!0))}function understand(){return _understand.apply(this,arguments)}function _understand(){return(_understand=(0,g._)(function(){return(0,m.Jh)(this,function(e){return n.value=!1,[2]})})).apply(this,arguments)}return(0,D.bv)(function(){setTimeout(checkAdBlock,1e3)}),function(e,t){return(0,D.wg)(),(0,D.iD)(D.HY,null,[t[2]||(t[2]=(0,D._)("div",{class:"ad-wrap"},null,-1)),(0,D.Wm)((0,D.SU)(G.bZ),{show:(0,D.SU)(n),"footer-layout":"vertical","confirm-text":"我知道了","is-btn-rounded":!0,onConfirm:understand},{title:(0,D.w5)(function(){return t[0]||(t[0]=[(0,D._)("div",{class:"title"}," 温馨提示 ",-1)])}),default:(0,D.w5)(function(){return[t[1]||(t[1]=(0,D._)("div",{class:"text"}," 您的浏览器似乎开启了广告屏蔽插件，可能对正常使用造成影响，请移除插件或将小红书加入插件白名单后继续使用。 ",-1))]}),_:1,__:[1]},8,["show"])],64)}}});let ex=(0,ei.default)(eL,[["__scopeId","data-v-50d98839"]]);var eT=n(74741),eD={class:"center-modal-container"},eN={class:"header"},eE={class:"text"},eR={class:"close-container"},eU=(0,D.aZ)({__name:"CenterModal",props:{visible:{type:Boolean},headerText:{}},emits:["close"],setup:function(e,t){var n=t.emit;function handleClose(){n("close",!1)}return function(t,n){return(0,D.wg)(),(0,D.j4)((0,D.SU)(G.ce),{open:e.visible,onClickMask:handleClose},{default:(0,D.w5)(function(){return[(0,D._)("div",eD,[(0,D._)("div",eN,[(0,D._)("div",eE,(0,D.zw)(e.headerText),1),(0,D._)("div",eR,[(0,D.Wm)((0,D.SU)(G.i8),{icon:"close",size:"20",onClick:handleClose})])]),(0,D.WI)(t.$slots,"default")])]}),_:3},8,["open"])}}});let eP=(0,ei.default)(eU,[["__scopeId","data-v-7cccb6db"]]);var eF=(0,D.aZ)({__name:"AddDesktopGuide",setup:function(e){var t=(0,K.s6)();function close(){t.easyAccessModalVisible.addDesktopGuide=!1,(0,es.uk)(38329)}function add(){t.$mitt.emit("easyAccess",{type:"click",name:eT.kx.AddDesktop}),(0,es.uk)(38328)}return function(e,n){return(0,D.wg)(),(0,D.j4)(eP,{visible:(0,D.SU)(t).easyAccessModalVisible.addDesktopGuide,"header-text":"添加小红书到桌面",onClose:close},{default:(0,D.w5)(function(){return[(0,D.Wm)((0,D.SU)(G.iz),{margin:"0"}),(0,D._)("div",{class:"content"},[n[0]||(n[0]=(0,D._)("video",{class:"video",muted:"",src:"https://fe-video-qc.xhscdn.com/fe-platform/184a8aba3dd72bd6f9a7c3b3d5557e225f2dfe5b.mp4",preload:"auto",autoplay:"true",loop:""},null,-1)),n[1]||(n[1]=(0,D._)("div",{class:"desc-container"},[(0,D._)("div",{class:"title"}," 每日灵感就在桌面等你 "),(0,D._)("div",{class:"text"}," 通过浏览器将小红书添加到桌面，可直接从桌面图标打开～ ")],-1)),(0,D._)("div",{class:"btn-container"},[(0,D._)("div",{class:"btn",onClick:add}," 添加到桌面 ")])])]}),_:1},8,["visible"])}}});let ej=(0,ei.default)(eF,[["__scopeId","data-v-4492decc"]]);var eO=n(33114),eH={class:"content"},eW={class:"btn-container"},ez=(0,D.aZ)({__name:"CollectGuide",setup:function(e){var t=(0,K.s6)();function close(){t.easyAccessModalVisible.collectGuide=!1,(0,es.uk)(38333)}function onclick(){(0,G.Am)("请按 ".concat("mac"===(0,eO.Xf)()?"command":"ctrl"," + D"))}return function(e,n){return(0,D.wg)(),(0,D.j4)(eP,{visible:(0,D.SU)(t).easyAccessModalVisible.collectGuide,"header-text":"添加到收藏夹",onClose:close},{default:(0,D.w5)(function(){return[(0,D.Wm)((0,D.SU)(G.iz),{margin:"0"}),(0,D._)("div",eH,[n[0]||(n[0]=(0,D._)("video",{muted:"",class:"video",src:"https://fe-video-qc.xhscdn.com/fe-platform/99455776d65aaa9bb600d2042a47593fad94fb93.mp4",preload:"auto",autoplay:"true",loop:""},null,-1)),n[1]||(n[1]=(0,D._)("div",{class:"desc-container"},[(0,D._)("div",{class:"title"}," 收藏小红书，随时探索生活的美好 "),(0,D._)("div",{class:"text"}," 通过浏览器收藏按钮，或按快捷键将小红书添加到收藏夹 ")],-1)),(0,D._)("div",eW,[(0,D._)("div",null,[(0,D._)("div",{class:"btn",onClick:onclick}," 请按快捷键 "+(0,D.zw)("mac"===(0,D.SU)(eO.Xf)()?"command":"ctrl")+" + D ",1)])])])]}),_:1},8,["visible"])}}});let eB=(0,ei.default)(ez,[["__scopeId","data-v-402e9182"]]);var eZ=(0,D.aZ)({__name:"Keyboard",props:{icon:{},click:{type:Function},text:{},inverted:{type:Boolean},square:{type:Boolean}},setup:function(e){return function(t,n){return e.text?((0,D.wg)(),(0,D.iD)("span",{key:0,class:(0,D.C_)(["keyboard",{inverted:e.inverted,square:e.square}])},(0,D.zw)(e.text),3)):((0,D.wg)(),(0,D.iD)("span",{key:1,class:(0,D.C_)(["keyboard icon-container",{inverted:e.inverted,square:e.square}])},[(0,D.Wm)((0,D.SU)(G.i8),{size:"12",icon:e.icon},null,8,["icon"])],2))}}});let eq=(0,ei.default)(eZ,[["__scopeId","data-v-c42b1888"]]);var eV={class:"content"},eY={class:"desc"},eG={class:"keys-container"},eJ=(0,D.aZ)({__name:"KeyboardList",setup:function(e){var t=(0,K.s6)(),n=[{desc:"上一张图片",keys:[{text:"←",square:!0}]},{desc:"下一张图片",keys:[{text:"→",square:!0}]},{desc:"关闭笔记",keys:[{text:"Esc"}]},{desc:"暂停 / 播放（视频）",keys:[{text:"空格"}]},{desc:"添加到收藏夹",keys:[{text:"mac"===(0,eO.Xf)()?"command":"ctrl"},{icon:"add_b",inverted:!0,square:!0},{text:"D",square:!0}]}];function close(){t.easyAccessModalVisible.keyboardList=!1,(0,es.uk)(38331)}return function(e,r){return(0,D.wg)(),(0,D.j4)(eP,{visible:(0,D.SU)(t).easyAccessModalVisible.keyboardList,"header-text":"键盘快捷键",onClose:close},{default:(0,D.w5)(function(){return[(0,D.Wm)((0,D.SU)(G.iz),{margin:"0"}),(0,D._)("div",eV,[((0,D.wg)(),(0,D.iD)(D.HY,null,(0,D.Ko)(n,function(e,t){return(0,D.wg)(),(0,D.iD)(D.HY,{key:e.desc},[(0,D._)("div",{class:(0,D.C_)(["keyboard-container",{"not-first":0!==t}])},[(0,D._)("span",eY,(0,D.zw)(e.desc),1),(0,D._)("span",eG,[((0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)(e.keys,function(e){return(0,D.wg)(),(0,D.j4)(eq,{key:e.text,icon:e.icon,text:e.text,inverted:e.inverted,square:e.square},null,8,["icon","text","inverted","square"])}),128))])],2),t<n.length-1?((0,D.wg)(),(0,D.j4)((0,D.SU)(G.iz),{key:0,margin:"0"})):(0,D.kq)("",!0)],64)}),64))])]}),_:1},8,["visible"])}}});let eQ=(0,ei.default)(eJ,[["__scopeId","data-v-667f1520"]]);function vp9Support(){return!!window.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9, vorbis"')&&!/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}n(25069);var eK=n(91547),eX=n(13285),e$={class:"container"},e0={key:0,class:"guide",muted:"",src:"//fe-video-qc.xhscdn.com/fe-platform/5028a7c6876111a767c4790b50f71b6e79786ff5.webm",preload:"auto",autoplay:"true",loop:""},e1={key:1,crossorigin:"anonymous",class:"guide",src:"//picasso-static.xiaohongshu.com/fe-platform/c5bd2797c58a9b7ff7ecfc5eaedd9498e4bedc55.gif"},e3=(0,D.aZ)({__name:"MiniWindowGuide",setup:function(e){var t=(0,D.iH)(!1),n=(0,eX.yj)(),r=(0,K.s6)(),guideFinish=function(){};function initStrategyBox(){eK.A.register("miniWindowGuide",{rules:[[]],priority:1,taskExecutor:function(e,t,n){t(),e(),guideFinish=n,r.easyAccessModalVisible.miniWindowGuide=!0}})}function close(){guideFinish(),r.easyAccessModalVisible.miniWindowGuide=!1}return(0,D.bv)(function(){t.value=vp9Support(),(0,eo.ORN)("resize",close),n.query.mini&&initStrategyBox()}),function(e,n){return(0,D.wg)(),(0,D.j4)((0,D.SU)(G.ce),{open:(0,D.SU)(r).easyAccessModalVisible.miniWindowGuide,onClick:close},{default:(0,D.w5)(function(){return[(0,D._)("div",e$,[(0,D.SU)(t)?((0,D.wg)(),(0,D.iD)("video",e0)):((0,D.wg)(),(0,D.iD)("img",e1)),n[0]||(n[0]=(0,D._)("span",{class:"desc"},"拖拽改变窗口大小试试",-1))])]}),_:1},8,["open"])}}});let e2=(0,ei.default)(e3,[["__scopeId","data-v-20b84cf1"]]);var e4=(0,D.aZ)({__name:"EasyAccess",setup:function(e){return function(e,t){return(0,D.wg)(),(0,D.iD)(D.HY,null,[(0,D.Wm)(eQ),(0,D.Wm)(eB),(0,D.Wm)(ej),(0,D.Wm)(e2)],64)}}}),e5=n(1801);function useReportWechatWidMap(){var e,t=(0,eX.yj)(),n=(0,eX.tv)();var r=(e=(0,g._)(function(){var e;return(0,m.Jh)(this,function(r){switch(r.label){case 0:return n.beforeEach(function(e,t,n){t.query.wechatWid&&!e.query.wechatWid?(e.query.wechatWid=t.query.wechatWid,n(e)):n()}),[4,getWebId()];case 1:if(r.sent(),!M.Z.get("webId"))return[2];return e=M.Z.get("webId"),t.query.wechatWid!==e&&n.replace({query:(0,E._)((0,N._)({},t.query),{wechatWid:e,wechatOrigin:"menu"})}),[2]}})}),function handleInWechat(){return e.apply(this,arguments)}),handleInNormalBrowser=function(){var e=t.query.wechatWid,n=t.query.wechatOrigin;if(!!e)getWebId().then(function(){if(!!M.Z.get("webId"))(0,es.uk)(35565,{channelType:n,wechatWid:e,webBrowserWid:M.Z.get("webId")})})};(0,D.wF)(function(){/micromessenger/i.test(navigator.userAgent)&&r(),handleInNormalBrowser()})}var e8=n(66993);n(6045),n(10364),n(67673);var e9=["https://sns-avatar-qc.xhscdn.com","https://picasso-static.xiaohongshu.com","https://sns-img-qc.xhscdn.com","https://sns-img-hw.xhscdn.com","https://sns-img-bd.xhscdn.com","https://sns-img-qn.xhscdn.com"],e6=["https://sns-webpic-qc.xhscdn.com","https://sns-avatar-qc.xhscdn.com","https://picasso-static.xiaohongshu.com"],e7=["https://sns-video-qc.xhscdn.com","https://sns-video-hw.xhscdn.com","https://sns-video-bd.xhscdn.com","https://sns-video-qn.xhscdn.com","https://sns-video-hw.xhscdn.net"],te=n(71852);function useServerHead(e){(0,D.vl)(function(){return(0,_.Kf)(e)})}var tt=[{rel:"apple-touch-icon-precomposed",href:"//picasso-static.xiaohongshu.com/fe-platform/f43dc4a8baf03678996c62d8db6ebc01a82256ff.png"},{rel:"apple-touch-icon",href:"//picasso-static.xiaohongshu.com/fe-platform/f43dc4a8baf03678996c62d8db6ebc01a82256ff.png"}],tn={name:"og:image",content:"//picasso-static.xiaohongshu.com/fe-platform/e6214e4fbfae2cf14d634d4296916e8a5eaefdf4.png"},tr=[{itemprop:"image",content:"//picasso-static.xiaohongshu.com/fe-platform/f43dc4a8baf03678996c62d8db6ebc01a82256ff.png"}],ti={rel:"manifest",href:"//fe-video-qc.xhscdn.com/fe-platform/ebf234fe97561cc2242114a0c5ba836eaf0848f8.json?attname=fe-platform/ebf234fe97561cc2242114a0c5ba836eaf0848f8.json.json"},ta={"http-equiv":"origin-trial",content:"Ai5aoTUJRlMPDTZGpFhanISn119CnYeB318FXkeKTTXsZrWCExmnws7puZII4BBhcTJCKsHnM8AmxvkJJtGNDw0AAAB5eyJvcmlnaW4iOiJodHRwczovL3hpYW9ob25nc2h1LmNvbTo0NDMiLCJmZWF0dXJlIjoiVW5yZXN0cmljdGVkU2hhcmVkQXJyYXlCdWZmZXIiLCJleHBpcnkiOjE3NzkxNDg4MDAsImlzU3ViZG9tYWluIjp0cnVlfQ=="};function useGlobalHead(){var e=(0,w.$T)("webExp").flags,t=(0,D.Fl)(function(){return(null==e?void 0:e.imageLcp)!=="origin"}),n=(0,e8._)(t.value?e6:e9).concat((0,e8._)(e7)).map(function(e){return{rel:"dns-prefetch",href:e}}),r=(0,te.C)().globalGray;(0,_.Kf)({link:(0,e8._)(n).concat([ti],(0,e8._)(tt)),meta:[tn,ta].concat((0,e8._)(tr)),style:{children:(0,D.Fl)(function(){return r.value?"html{filter: grayscale(0.95)}":""})}}),useServerHead({meta:[{name:"server-rendered",content:"true"}]})}var to=n(56573);function updateWebpSupport(){var e,t=(0,K.s6)();(0,D.vl)((0,g._)(function(){var e,n;return(0,m.Jh)(this,function(r){return n=null==(e=(0,D.Zq)())?void 0:e.headers.accept,t.supportWebp=n.includes("webp"),t.supportAVIF=n.includes("avif"),[2]})}));!function(){try{t.supportWebp=document.createElement("canvas").toDataURL("image/webp").includes("image/webp")}catch(e){t.supportWebp=!1}}(),(e=new Image).src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",e.onload=function(){t.supportAVIF=!0},e.onerror=function(){t.supportAVIF=!1}}var tu=n(2516);function useClientInfoReport(){var e=(0,K.s6)(),t=(0,eX.yj)().name,collect=function(t){return e.supportWebp&&e.imgFormatCollect[t?"csr":"ssr"].push("webp"),e.supportAVIF&&e.imgFormatCollect[t?"csr":"ssr"].push("avif"),e.imgFormatCollect};(0,D.bv)(function(){setTimeout(function(){collect(!0),(0,z.Qv)("sns_pc_web_client_info",{extraInfo:"",firstRouteName:null!=t?t:"",imageFormatSsr:e.imgFormatCollect.ssr.join(","),imageFormatCsr:e.imgFormatCollect.csr.join(",")})},1e3)}),(0,D.vl)(function(){collect(!1)})}function useCssDowngrade(){}function useErrorBan(){var e=(0,x.L)(),t,n,r,i,a,o,u,l,s,c=String("guest"in((null===(i=window)||void 0===i?void 0:null===(r=i.__INITIAL_STATE__)||void 0===r?void 0:null===(n=r.user)||void 0===n?void 0:null===(t=n.userInfo)||void 0===t?void 0:t.value)||{})),d=String(!!(null===(s=window)||void 0===s?void 0:null===(l=s.__INITIAL_STATE__)||void 0===l?void 0:null===(u=l.user)||void 0===u?void 0:null===(o=u.bannedInfo)||void 0===o?void 0:null===(a=o.value)||void 0===a?void 0:a.showAlert));(0,z.Qv)("banErrorV2",{isError:String("true"===c&&"true"===d),userInfoSuccess:c,serverBanned:d,banUid:e.bannedInfo.userId,uid:e.userInfo.userId||""})}n(74934);var tl=n(39317);function useHomefeedPrefetchId(){var e=(0,tl.NW)();(0,D.vl)(function(){var t=(0,D.Zq)();e.updatePrefetchId(null==t?void 0:t.state.prefetchId)})}n(29744);var ts=n(94809),tc=n(32335),td=n(97611),tv=!1,tf=!1,tp=null;function setupAiAgent(e,t){return _setupAiAgent.apply(this,arguments)}function _setupAiAgent(){return(_setupAiAgent=(0,g._)(function(e,t){var n,r,i,a,o;return(0,m.Jh)(this,function(u){switch(u.label){case 0:if(!(r=null===(n=e.userInfo)||void 0===n?void 0:n.userId))return[2];tp=i=(0,eO.DO)(),a=Date.now(),(0,ts.mp)(i,a),(0,ts.Sn)({type:ts.oV.INIT,time:a,uuid:i}),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,t.initAgent({uid:r,initUuid:i,requestConfig:{onAgentMessagePush:function(e){var n=t.getLonglinkAdapter();n&&n.handleMessagePush(e)},onAgentSignalPush:function(e){var n=t.getLonglinkAdapter();n&&n.handleSignalPush(e)}}})];case 2:return u.sent(),[3,4];case 3:return o=u.sent(),(0,ts.Sn)({type:ts.oV.LOGIN_FAILED,time:Date.now(),uuid:tp||void 0,msg:{error:null==o?void 0:o.toString(),stage:"setupAiAgent"}}),[3,4];case 4:return[2]}})})).apply(this,arguments)}function useInitAiAgent(){if(!tv&&!tf){var e=(0,x.L)(),t=(0,tc.t)(),n=(0,td.q)();(0,D.bv)(function(){var t=e.$mitt.on("onFetchUserInfo",onFetchUserInfo);e.loggedIn&&n.isAIMode&&onFetchUserInfo(),(0,D.Jd)(function(){null==t||t()})})}function onFetchUserInfo(){if(!tf&&!tv&&!!n.isAIMode){tf=!0;var r=setupAiAgent(e,t).then(function(){tv=!0}).catch(function(e){(0,ts.Sn)({type:ts.oV.LOGIN_FAILED,time:Date.now(),uuid:tp||void 0,msg:{error:null==e?void 0:e.toString(),stage:"global_setup"}}),tv=!0}).finally(function(){tf=!1});t.setSetupPromise(r)}}}function usekeyboardListener_handleCollect(e,t){var handleKeydown=function(){(0,es.uk)(32772,{fromPage:t.name})};e.metaKey&&"d"===e.key&&"mac"===(0,eO.Xf)()&&handleKeydown(),e.ctrlKey&&"d"===e.key&&"win"===(0,eO.Xf)()&&handleKeydown()}function useKeyboardListener(){var e=(0,eX.yj)();(0,D.bv)(function(){var t=(0,K.s6)();(0,eo.ORN)(document,"keydown",function(n){usekeyboardListener_handleCollect(n,e),t.$mitt.emit("keydown",{type:n.key})})})}var th=n(98413),tg=n(8048);function useLoginModalOpenStrategy(){var e=(0,eX.yj)();function registerInNoteDetail(){if(!(0,eO.CL)()&&e.name===th.Z.ExploreNoteName){var t={indicate:eK.T.oneDayTriggerCount,operator:"<=",value:3},n={indicate:eK.T.loginStatus,operator:"===",value:!1};eK.A.register("noteDetailLogin",{rules:[[t,n]],priority:1,manualUpdateTrigger:!1,taskExecutor:function(t,n){if(n(),t(),e.name===th.Z.ExploreNoteName)(0,eO.gQ)(500,tg.yC.NoteDetailAuto);else var r=(0,D.YP)(e,function(){e.name===th.Z.ExploreNoteName&&(r(),(0,eO.gQ)(2e3,tg.yC.NoteDetailAuto))})}})}}(0,D.bv)(function(){registerInNoteDetail()})}var tm=n(9503);function useMonitorFirstInteract(){var e=!1,handleFirstInteract=function(t,n){if(!e){e=!0;var r=t.target,i={elementName:(0,tm.G)(r),InteractType:n,startTime:performance.now()};(0,z.Qv)("firstInteract",i),window.removeEventListener("click",clickHandler),window.removeEventListener("scroll",scrollHandler)}},clickHandler=function(e){return handleFirstInteract(e,"click")},scrollHandler=function(e){return handleFirstInteract(e,"scroll")};(0,D.bv)(function(){window.addEventListener("click",clickHandler,{capture:!0}),window.addEventListener("scroll",scrollHandler,{capture:!0})})}n(19077),n(75973);var ty=n(32535);function useNotificationInterval(){var e,t,n=(0,x.L)(),r=(0,K.s6)(),i=(0,ty.Gu)(),a=(0,J.Jk)(i).notificationCount,o=1e3*(r.appSettings.notificationInterval||30),u=useLonglink(),l=u.onLonglinkReady,s=u.onLonglinkDowngrade,c=u.longlinkService;var d=(e=(0,g._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return t&&clearTimeout(t),[4,i.getNotificationCount()];case 1:return e.sent(),t=setTimeout(d,o),[2]}})}),function pollingNotifications(){return e.apply(this,arguments)}),onMessageDown=function(e){try{var t,n,r,i,o,u,l,s=JSON.parse(e);if(!(null==s?void 0:s.you))return;a.value.unreadCount=null!==(i=null==s?void 0:s.you.total)&&void 0!==i?i:0,(null==s?void 0:null===(t=s.you)||void 0===t?void 0:t.mentions)?a.value.mentions=null===(o=s.you)||void 0===o?void 0:o.mentions:(null==s?void 0:null===(n=s.you)||void 0===n?void 0:n.connections)?a.value.connections=null===(u=s.you)||void 0===u?void 0:u.connections:(null==s?void 0:null===(r=s.you)||void 0===r?void 0:r.likes)&&(a.value.likes=null===(l=s.you)||void 0===l?void 0:l.likes)}catch(e){}};(0,D.bv)((0,g._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,n.getUserInfo()];case 1:if(e.sent(),!n.loggedIn)return[3,3];return[4,i.getNotificationCount()];case 2:e.sent(),l(function(){var e;null===(e=c.instance)||void 0===e||e.subPushTopic("message_center",onMessageDown)}),s(function(){d()}),e.label=3;case 3:return[2]}})})),(0,D.Jd)(function(){t&&clearTimeout(t)})}var tI=n(45634),t_=n.n(tI),tw=n(38165),tk=n.n(tw),tS=n(81334);function useRacingReport(){var e,t=(e=(0,g._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return e=M.Z.get("abRequestId"),[4,getWebId()];case 1:return t=n.sent().deviceId,(0,es.uk)(37294,{webRequestId:e||t,webBrowserWid:t}),[2]}})}),function reportWebGWebABMapping(){return e.apply(this,arguments)});localStorage.getItem(tS.Z.RACING_CALL_NEW)&&localStorage.removeItem(tS.Z.RACING_CALL_NEW),t()}function useRedirectExplore(){var e=(0,eX.yj)(),t=(0,eX.tv)();(0,D.wF)(function(){e.path===th.Z.RootPath&&t.replace({name:th.Z.ExploreName,query:e.query})})}function useRefererReport(){var e=(0,K.s6)();(0,D.bv)((0,g._)(function(){return(0,m.Jh)(this,function(t){return(0,es.uk)(30771,{referer:e.referer||""}),[2]})}))}t_().extend(tk());var tb=n(32602);function useReportBaiduSem(){var e,t,n=(0,x.L)(),r=(0,K.s6)();var i=(e=(0,g._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,n.getUserInfo()];case 1:return e.sent(),(0,I.Fc)("login",{userId:n.userInfo.userId||"unknown"}),[2]}})}),function reportSemLoginSuccess(){return e.apply(this,arguments)});var a=(t=(0,g._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,n.getUserInfo()];case 1:if(e.sent(),!n.loggedIn)return[2];return(0,I.Fc)("login",{userId:n.userInfo.userId||"unknown"}),[2]}})}),function reportSemAlreadyLogin(){return t.apply(this,arguments)}),reportFirstVisitUrl=function(){(0,es.uk)(37754,{contentId:r.firstVisitUrl})},reportFirstVisitUrlFromStorage=function(){var e=window.sessionStorage.getItem(tS.Z.FIRST_VISIT_URL);(0,es.uk)(37754,{contentId:e&&e.length>0?e:r.firstVisitUrl})};(0,D.wF)(function(){r.setFirstVisitUrl(),n.$mitt.on("onLogin",i),n.$mitt.on("onLogin",reportFirstVisitUrlFromStorage),reportFirstVisitUrl(),a()})}function useStatePollution(){var e=(0,eX.yj)(),t=(0,x.L)(),trackUserPollute=function(){(t.notes[0]||[]).some(function(e){var t,n,r;return null===(r=e.noteCard)||void 0===r?void 0:null===(n=r.interactInfo)||void 0===n?void 0:null===(t=n.likedCount)||void 0===t?void 0:t.includes("+")})&&(0,z.Qv)("pcwebStatePollution",{case:"user page note pollute"})};(0,D.bv)(function(){if(!!t.loggedIn)e.path.startsWith("/user/profile/")&&trackUserPollute()})}n(1154),n(80013),n(9557);var tC=n(90853),tM=n(64300),tA=n(68284);function useSyncInteractionState(){var e=(0,ty.Gu)(),t=(0,tM.dw)(),n=(0,tl.NW)(),r=(0,tA.R)(),i=(0,x.L)(),a=(0,J.Jk)(n).feeds,o=(0,J.Jk)(r).feeds,u=(0,J.Jk)(i).notes;e.$mitt.on("followStatusChange",function(t){var n=t.userid,r=t.followed;e.notificationMap.connections.messageList.forEach(function(e){var t;if(void 0!==e.user&&(null===(t=e.user)||void 0===t?void 0:t.userid)===n)e.user.fstatus=(0,tC.$z)(e.user.fstatus,r)})}),t.$mitt.on("liked",function(e){var n=e.noteId,r=e.liked,i=t.getNoteDetailByNoteId(n);if(i.note.interactInfo){i.note.interactInfo.liked=r;var l,s=(null===(l=i.note.interactInfo)||void 0===l?void 0:l.likedCount)||0;(0,L.U)(s)&&(i.note.interactInfo.likedCount="".concat(r?+s+1:+s-1))}var update=function(e){e.forEach(function(e){if(e.id!==n||(null===(t=e.noteCard)||void 0===t?void 0:t.interactInfo)===void 0)return;e.noteCard.interactInfo.liked=r;var t,i=Number(e.noteCard.interactInfo.likedCount);if(!Number.isNaN(i))e.noteCard.interactInfo.likedCount=(r?i+1:i-1).toString()})};update(a.value),update(o.value),u.value.forEach(function(e){update(e)})}),t.$mitt.on("followed",function(e){var n=e.value,r=e.fStatus,a=t.getDefaultNoteId(),o=t.getNoteDetailByNoteId(a);i.updateFollowStatus(r),void 0!==o.note.interactInfo&&(o.note.interactInfo.followed=n,o.note.interactInfo.relation=(0,tC.$z)(o.note.interactInfo.relation,n))}),i.$mitt.on("followed",function(e){i.updateFollowStatus(e)}),t.$mitt.on("collected",function(e){var n=e.collected,r=e.noteId,i=t.getNoteDetailByNoteId(r);if(i.note.interactInfo){i.note.interactInfo.collected=n;var a,o=null===(a=i.note.interactInfo)||void 0===a?void 0:a.collectedCount;(0,L.U)(o)&&(i.note.interactInfo.collectedCount=(n?Number(null!=o?o:0)+1:Number(null!=o?o:0)-1).toString())}}),r.$mitt.on("followStatusChange",function(e){var t,n=e.userid,i=e.followed;"user"===r.oneboxInfo.type&&r.oneboxInfo.userOneBox&&(r.oneboxInfo.userOneBox.followed=i),null===(t=r.userLists)||void 0===t||t.forEach(function(e){if(void 0!==e&&e.id===n)e.followed=i})})}function useTrackStatePollute(){var e=(0,x.L)(),t=(0,eX.yj)();(0,D.wF)((0,g._)(function(){var n,r;return(0,m.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,Y.fs)({})];case 1:return n=i.sent(),e.loggedIn?e.userInfo.nickname===n.nickname&&e.userInfo.userId===n.userId?z.ZD.track(t.name,z.rm.health):z.ZD.track(t.name,z.rm.ServerLoginClientLogin):z.ZD.track(t.name,z.rm.ServerTouristClientLogin),[3,3];case 2:return r=i.sent(),[Q.o.UnLogin,Q.o.UnActivate,Q.o.Activated].includes(r.code)&&(e.loggedIn?z.ZD.track(t.name,z.rm.ServerLoginClientTourist):z.ZD.track(t.name,z.rm.ServerTouristClientTourist)),[3,3];case 3:return[2]}})}))}function useUpdateAiSearchMode(){var e=(0,K.s6)(),t=(0,eX.yj)(),n=(0,tA.R)();if(!!e&&void 0!==e.aiSearchMode)(0,D.YP)(function(){return t.name},function(n){if(!!e&&void 0!==e.aiSearchMode)n===th.Z.ExploreName&&(e.aiSearchMode=K.L9.LARGE),n!==th.Z.ExploreName&&n!==th.Z.AISearchName&&t.meta.showSearchBox&&(e.aiSearchMode=K.L9.SMALL)}),(0,eX.ao)(function(t,r,i){t.name===th.Z.AISearchName?e.sideCollapse=!0:e.sideCollapse=!1,r.name===th.Z.AISearchName&&t.name!==th.Z.AISearchName&&t.name!==th.Z.SearchName&&(n.searchContext.keyword="",n.searchValue=""),i()})}function useUpdateUserId(){var e,t=(0,x.L)();var n=(e=(0,g._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,t.getUserInfo()];case 1:return e.sent(),S.Q.updateUserInfo(t.userInfo.userId||"unknown"),[2]}})}),function updateUserId(){return e.apply(this,arguments)});(0,D.wF)(function(){t.$mitt.on("onLogin",n)})}function useUserInfo(){var e=(0,x.L)(),t=(0,J.Jk)(e),n=t.userInfo,r=t.loggedIn;(0,D.vl)(function(){var t,i,a,o=(0,D.Zq)();n.value=(null==o?void 0:null===(t=o.state)||void 0===t?void 0:t.userInfo)||{},n.value.userId=null===(i=n.value)||void 0===i?void 0:i.user_id,n.value.redId=null===(a=n.value)||void 0===a?void 0:a.red_id,(null==o?void 0:o.state.banned)===!0&&(e.bannedInfo.serverBanned=!0),n.value.userId&&!n.value.guest&&(r.value=!0,eK.A.updateState(eK.T.loginStatus,function(){return r.value}))}),(0,D.wF)((0,g._)(function(){return(0,m.Jh)(this,function(t){switch(t.label){case 0:return[4,e.getUserInfo()];case 1:return t.sent(),[2]}})}))}function appInit(){updateWebpSupport(),useUserInfo(),(0,tu.Z)(),useRedirectExplore(),useTrackStatePollute(),useRefererReport(),useRacingReport(),(0,tb.MN)(),useGlobalHead(),useHomefeedPrefetchId(),useErrorBan(),useNotificationInterval(),(0,D.bv)(useSyncInteractionState),useUpdateUserId(),useReportBaiduSem(),(0,to.F)(),useKeyboardListener(),useLoginModalOpenStrategy(),(0,e5.vt)(),(0,e5.X9)(),useReportWechatWidMap(),useClientInfoReport(),useCssDowngrade(),useStatePollution(),useMonitorFirstInteract(),useUpdateAiSearchMode(),useInitAiAgent()}n(73078);var tL=n(3553),tx=n(73240),tT=n(52997),tD=n(55697);function useTrackMfSSRStatus(){var e=(0,J.Jk)((0,tl.NW)()),t=e.ssrRenderExtra,n=e.ssrRequestStatus;(0,D.wF)(function(){var e,r;t.value=null!==(r=null===(e=window)||void 0===e?void 0:e.MF_STREAM_RENDER_EXTRA)&&void 0!==r?r:"",t.value+="ssr:".concat(window.__SSR__,"stream:").concat(window.__STREAMING__),window.MF_STREAM_RENDERED?n.value=z.e.Success:!(0,tD.$)()&&(n.value=z.e.Csr)})}var tN=n(94895),tE=n(28860),tR=(0,D.aZ)({__name:"App",setup:function(e){appInit(),(0,tT.ZP)();var t=(0,eX.yj)(),n=(0,tE.E)();(t.name===th.Z.ExploreName||t.path===th.Z.RootPath)&&(useTrackMfSSRStatus(),(0,tL.I)()),[th.Z.ExploreNoteName,th.Z.UserNoteName,th.Z.SearchNoteName,th.Z.BoardNoteName].includes(t.name)&&(0,tx.E)(),(0,D.bv)(function(){n.resize(),(0,eo.ORN)(window,"resize",n.resize)}),(0,D.vl)(function(){if("uncaughtException"===t.query.error)throw t.query.empty.includes("empty"),Error("emptyemptyemptyemptyempty");"unhandledRejection"===t.query.error&&Promise.reject(Error("test"));var e=(0,D.Zq)();(null==e?void 0:e.path.startsWith(th.Z.TermsPath))&&e.dangerouslyRedirect(tN.n.TERMS),(null==e?void 0:e.path.startsWith(th.Z.PrivacyPath))&&e.dangerouslyRedirect(tN.n.PRIVACY),(null==e?void 0:e.path.startsWith(th.Z.CommunityRulePath))&&e.dangerouslyRedirect(tN.n.COMMUNITYRULE),(null==e?void 0:e.path.startsWith(th.Z.ContentDisputeViewPath))&&e.dangerouslyRedirect(tN.n.CONTENTDISPUTEVIEW)});function redirectHttps(){"production"===F.V.Production&&!window.location.protocol.includes("https")&&(window.location.href=window.location.href.replace(/^http:/,"https:"))}return t.path.startsWith(th.Z.TermsPath)&&(window.location.href=tN.n.TERMS),t.path.startsWith(th.Z.PrivacyPath)&&(window.location.href=tN.n.PRIVACY),t.path.startsWith(th.Z.CommunityRulePath)&&(window.location.href=tN.n.COMMUNITYRULE),t.path.startsWith(th.Z.ContentDisputeViewPath)&&(window.location.href=tN.n.CONTENTDISPUTEVIEW),(0,D.bv)(function(){redirectHttps()}),function(e,t){var n=(0,D.up)("router-view");return(0,D.wg)(),(0,D.iD)(D.HY,null,[(0,D.Wm)(n),(0,D.Wm)(V.Z,null,{default:(0,D.w5)(function(){return[(0,D.Wm)(ea),(0,D.Wm)(ex),(0,D.Wm)(e4),(0,D.Wm)(eA)]}),_:1})],64)}}}),tU=(0,D.aZ)({__name:"AppContainer",setup:function(e){return function(e,t){return(0,D.wg)(),(0,D.j4)((0,D.SU)(w.jP),null,{default:(0,D.w5)(function(){return[(0,D.Wm)(q,null,{default:(0,D.w5)(function(){return[(0,D.Wm)(tR)]}),_:1})]}),_:1})}}});n(95477);var tP=["chrome-extension://","safari-extension://","moz-extension://"],tF=["Loading chunk","Loading CSS chunk"],tj=["ResizeObserver loop limit exceeded","Failed to execute 'setLocalDescription' on 'RTCPeerConnection': Failed to set local offer sdp: Failed to set remote data description recv parameters."],tO=["Uncaught SyntaxError: Unexpected end of input"],tH=["Can't find variable: commonCallback","No identifiers allowed directly after numeric litera","applyToDesktopMode is not defined","ReferenceError: $ is not defined","Error: Permission denied to access property","jQuery is not defined","The request is not allow","Shadow root cannot be created on a host","variable: jsFinder","KISSY is not defined","_XJSAPI_ is not defined"],tW=["xhh.com"],tz=["headless","phantom","webdriver","selenium","nightmare","sequentum"];function isHeadless(){var e=navigator.userAgent.toLocaleLowerCase();return navigator.webdriver||tz.some(function(t){return e.includes(t)})}function unSupportBrowser(){var e=navigator.userAgent.toLocaleLowerCase(),t=e.match(/Chrome\/(\d+)\./),n=t?Number.parseInt(t[1],10):null;return e.includes("msie")||e.includes("trident")||!!(n&&n<49)}var tB=n(43819),tZ=n(64695),tq=n(23755),tV=n(31907),tY=n(14748),tG=n(11142),tJ=(0,D.aZ)({__name:"Layout",setup:function(e){var t=(0,tG.$Y)().layoutPreset;return function(e,n){return(0,D.wg)(),(0,D.j4)((0,D.LL)((0,D.SU)(t).rootLayout))}}}),tQ={class:"container"},tK={class:"content"},tX={class:"middle"},t$={class:"middle-wrapper"},t0={class:"iphone-wrapper"},t1={class:"description"},t3={class:"qrcodes"},t2={class:"ios-icon"},t4={class:"android-icon"};function render(e,t,n,r,i,a){var o=(0,D.up)("Iphone"),u=(0,D.up)("RedsIcon");return(0,D.wg)(),(0,D.iD)("div",tQ,[t[5]||(t[5]=(0,D._)("div",{class:"video-bg"},[(0,D._)("video",{poster:"//ci.xiaohongshu.com/9e244c50-108b-41df-b649-537f318124a9",muted:"",loop:"loop",class:"my-video",src:"https://dc.xhscdn.com/9379abe0-7ad8-11e9-8794-9320f6c9d557/%E8%83%8C%E6%99%AF%E8%A7%86%E9%A2%91.mp4",preload:"auto"})],-1)),(0,D._)("div",tK,[(0,D._)("div",tX,[(0,D._)("div",t$,[(0,D._)("div",t0,[(0,D.Wm)(o)]),(0,D._)("div",t1,[t[2]||(t[2]=(0,D._)("div",{class:"logo-big"},null,-1)),t[3]||(t[3]=(0,D._)("h2",{class:"lifestyle"}," 你的生活兴趣社区 ",-1)),t[4]||(t[4]=(0,D._)("h5",{class:"lifestyle-english"},null,-1)),(0,D._)("div",t3,[(0,D._)("div",{class:"ios",onMouseenter:t[0]||(t[0]=function(){a.QRCodeImpression("iOS")})},[(0,D._)("span",t2,[(0,D.Wm)(u,{icon:"IOS",size:"24"})]),(0,D.Uk)((0,D.zw)(a.home.ios),1)],32),(0,D._)("div",{class:"Android",onMouseenter:t[1]||(t[1]=function(){a.QRCodeImpression("Android")})},[(0,D._)("span",t4,[(0,D.Wm)(u,{icon:"Android",size:"24"})]),(0,D.Uk)((0,D.zw)(a.home.android),1)],32)])])])])])])}var t5={class:"iphone"},t8={class:"iphone-mp4"},t9=["poster","muted","src"];function Iphonevue_type_template_id_0e6d046c_scoped_true_render(e,t,n,r,i,a){return(0,D.wg)(),(0,D.iD)("div",t5,[(0,D._)("div",t8,[(0,D._)("video",{poster:a.videoSelector.poster,muted:i.ifMuted,loop:"",class:"my-video",src:a.videoSelector.src,preload:"auto"},null,8,t9)]),t[0]||(t[0]=(0,D._)("div",{class:"iphone-case"},null,-1))])}var t6=n(94046);let t7=(0,ei.default)({name:"Iphone",data:function(){return{ifMuted:!0}},computed:{videoSelector:function(){return{poster:"//ci.xiaohongshu.com/700a0de6-c9ee-4c1c-8e02-94e948d9f611",src:"//dc.xhscdn.com/a10d0710-80f1-11e9-9036-5948d2131083/new5.27.mp4"}}},mounted:function(){this.loadPhoneVideo()},methods:{loadPhoneVideo:function(){var e=document.querySelector(".iphone-mp4 .my-video");e.addEventListener("error",console.log),e.addEventListener("loadeddata",function(){e.readyState>=2&&e.play().catch(t6.i)})}}},[["render",Iphonevue_type_template_id_0e6d046c_scoped_true_render],["__scopeId","data-v-0e6d046c"]]);var ne={name:"Main",components:{RedsIcon:G.i8,Iphone:t7},data:function(){return{ifMuted:!0,headerStyle:{color:"#333"}}},computed:{home:function(){return{ios:"iOS 版",android:"Android 版"}}},mounted:function(){this.loadVideo()},methods:{loadVideo:function(){var e=document.querySelector(".video-bg .my-video");e.addEventListener("error",console.log),e.addEventListener("loadeddata",function(){e.readyState>=2&&e.play().catch(t6.i)})},QRCodeImpression:function(e){return(0,g._)(function(){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,es.O8)(29351,{channelType:e})];case 1:return t=n.sent(),S.Q.push(t),[2]}})})()}}};let nt=(0,ei.default)(ne,[["render",render],["__scopeId","data-v-1cdf7708"]]);var nn=[{path:th.Z.DownloadPath,name:th.Z.DownloadName,alias:"index",component:nt,meta:{pageInstance:"web_home_page",transparentHeader:!0,title:"小红书 - 你的生活兴趣社区"}},{path:th.Z.DiscoveryPath,redirect:function(e){var t=e.params.id;return"".concat(th.Z.ExplorePath,"/").concat(t)}},{path:th.Z.DiscoverySghPath,redirect:function(e){var t=e.params.id;return"".concat(th.Z.ExplorePath,"/").concat(t)}},{path:th.Z.BrandPath,name:th.Z.BrandName,component:(0,D.RC)(function(){return n.e("7437").then(n.bind(n,64103))}),meta:{pageInstance:"web_business_cooperation_page",title:"小红书 - 推广合作"}},{path:th.Z.NewsPath,name:th.Z.NewsName,component:(0,D.RC)(function(){return n.e("7437").then(n.bind(n,53760))}),meta:{pageInstance:"web_press_center_page",transparentHeader:!0,title:"小红书 - 新闻中心"}},{path:th.Z.ReportsPath,name:th.Z.ReportsName,component:(0,D.RC)(function(){return n.e("7437").then(n.bind(n,49730))}),meta:{pageInstance:"web_aboutus_page",transparentHeader:!0,title:"小红书 - 热门报道"}},{path:th.Z.ActivitiesPath,name:th.Z.ActivitiesName,component:(0,D.RC)(function(){return n.e("7437").then(n.bind(n,15015))}),meta:{pageInstance:"web_aboutus_page",transparentHeader:!0,title:"小红书 - 近期动态"}},{path:th.Z.ActivityItemPath,name:th.Z.ActivityItemName,component:(0,D.RC)(function(){return n.e("7437").then(n.bind(n,56576))}),meta:{pageInstance:"web_aboutus_page",title:"小红书 - 近期动态"}},{path:th.Z.TrophyPath,name:th.Z.TrophyName,component:(0,D.RC)(function(){return n.e("7437").then(n.bind(n,29378))}),meta:{pageInstance:"web_aboutus_page",transparentHeader:!0,title:"小红书 - 公司荣誉"}},{path:th.Z.AboutPath,name:th.Z.AboutName,component:(0,D.RC)(function(){return n.e("7437").then(n.bind(n,85896))}),meta:{transparentHeader:!0,pageInstance:"web_aboutus_page",title:"小红书 - 关于我们"}},{path:th.Z.LiabilityPath,name:th.Z.LiabilityName,component:(0,D.RC)(function(){return n.e("7437").then(n.bind(n,77868))}),meta:{transparentHeader:!0,pageInstance:"web_social_responsibility_page",title:"小红书 - 社会责任"}},{path:th.Z.LiabilityItemPath,name:th.Z.LiabilityItemName,component:(0,D.RC)(function(){return n.e("7437").then(n.bind(n,98691))}),meta:{pageInstance:"web_social_responsibility_page",getTrackerData:(0,g._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,es.O8)(25308)];case 1:return[2,e.sent()]}})}),title:"小红书 - 社会责任"}},{path:th.Z.RatingTermsPath,name:th.Z.RatingTermsName,component:(0,D.RC)(function(){return n.e("7437").then(n.bind(n,35322))})},{path:th.Z.contactPath,redirect:th.Z.AboutPath},{path:th.Z.ActivityPath,name:th.Z.ActivityName,redirect:th.Z.ExplorePath}],nr=n(95874),ni=(0,D.aZ)({__name:"OAuthLogin",setup:function(e){var t,n,r=(0,eX.tv)(),i=(0,eX.yj)(),a=(0,tg.r0)(),o=(0,x.L)(),u=(0,nr.h)().handleHttpCatch,l=null!==(n=null==i?void 0:null===(t=i.query)||void 0===t?void 0:t.code)&&void 0!==n?n:null,s=(0,D.iH)();function getWechatLoginStatusWithDelay(e,t){clearTimeout(s.value),s.value=setTimeout(e,t)}function redirect(){var e,t=String(null==i?void 0:null===(e=i.query)||void 0===e?void 0:e.redirectTo),n="https://www.xiaohongshu.com";try{var r=new URL(t||n);window.location.href="www.xiaohongshu.com"===r.hostname?r.href:n}catch(e){window.location.href=n}}function getWechatLoginStatus(){return _getWechatLoginStatus.apply(this,arguments)}function _getWechatLoginStatus(){return(_getWechatLoginStatus=(0,g._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(a.inAntiSpamChecking)return getWechatLoginStatusWithDelay(getWechatLoginStatus,1e3),[2];e={type:"oauth",api:"postApiSnsWebV1LoginSocial",reportType:"wechatLogin",time:Date.now()},n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,Y.ho)({type:"wechat_red_web",code:l})];case 2:return n.sent(),(0,G.zM)("登录成功"),(0,z.Iq)((0,E._)((0,N._)({},e),{status:"success"})),(0,es.kj)(30784),o.$mitt.emit("onLogin","oauth"),setTimeout(redirect,1e3),[3,4];case 3:return t=n.sent(),window.localStorage.setItem(tS.Z.OAUTH,"".concat(Date.now())),(0,es.kj)(30785),(0,z.Iq)((0,E._)((0,N._)({},e),{status:"fail"}),JSON.stringify({errMsg:t.data,errorCode:t.status})),u("postApiSnsWebV1LoginSocial",t,function(){if(t.status===Q.o.InAntiSpamChecking){a.inAntiSpamChecking=!0,getWechatLoginStatusWithDelay(getWechatLoginStatus,1e3);return}setTimeout(redirect,1e3)}),[3,4];case 4:return[2]}})})).apply(this,arguments)}return(0,D.wF)((0,g._)(function(){return(0,m.Jh)(this,function(e){return!l&&r.push(th.Z.ExplorePath),getWechatLoginStatusWithDelay(getWechatLoginStatus,1e3),[2]})})),(0,D.Jd)(function(){clearTimeout(s.value)}),function(e,t){return(0,D.wg)(),(0,D.iD)("div")}}});function getNoteDetailMeta(e,t){var n,r;return{pageInstance:"web_note_detail_r10",instanceId:function(){return""},showSideBar:e,showBottomMenu:t,showAIHeader:!1,getPageEnd:(n=(0,g._)(function(e){var t,n,r;return(0,m.Jh)(this,function(i){switch(i.label){case 0:return t=(0,tM.dw)(),n=e.params.noteId,[4,(0,es.O8)(27864,t.getTrackDataByNoteId(n,e))];case 1:return r=i.sent(),[2,(0,E._)((0,N._)({},r),{page:(0,es.mX)()})]}})}),function(e){return n.apply(this,arguments)}),getTrackerData:(r=(0,g._)(function(e){var t,n,r;return(0,m.Jh)(this,function(i){switch(i.label){case 0:return t=(0,tM.dw)(),n=e.params.noteId,[4,(0,es.O8)(25291,t.getTrackDataByNoteId(n,e))];case 1:return r=i.sent(),[2,(0,E._)((0,N._)({},r),{page:(0,es.mX)()})]}})}),function(e){return r.apply(this,arguments)})}}function redirectToNote(e,t,n){if(["/",null,void 0].includes(t.path)){var r=e.query,i=r.m_source,a=r.xsec_token,o=r.xsec_source;n({name:th.Z.ExploreNoteName,params:{noteId:e.params.noteId},query:{m_source:i,xsec_token:a,xsec_source:o}})}n()}var Note=function(){return Promise.all([n.e("9147"),n.e("568"),n.e("4730"),n.e("9149"),n.e("3691"),n.e("606"),n.e("8996"),n.e("8896"),n.e("7044")]).then(n.bind(n,91057))};var na=[{path:th.Z.RootPath,component:tJ,children:[{path:th.Z.ExplorePath,name:th.Z.ExploreName,component:function(){return Promise.all([n.e("606"),n.e("8574")]).then(n.bind(n,14074))},meta:{pageInstance:"web_explore_feed",keepAlive:!0,title:"小红书 - 你的生活兴趣社区",showSideBar:!0,showBottomMenu:!0,headerStyle:tV.iR.maskPaper,showSearchBox:!0,showAIHeader:!0,getTrackerData:(r=(0,g._)(function(e){var t,n;return(0,m.Jh)(this,function(r){switch(r.label){case 0:return t=(0,tl.NW)(),[4,(0,es.O8)(25301,{channelTabName:t.currentChannel,channelType:e.query.channel_type||"link"})];case 1:return n=r.sent(),[2,(0,E._)((0,N._)({},n),{page:es.z$})]}})}),function(e){return r.apply(this,arguments)}),getPageEnd:(0,g._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return e=(0,tl.NW)(),[4,(0,es.O8)(27863,{channelTabName:e.currentChannel})];case 1:return t=n.sent(),[2,(0,E._)((0,N._)({},t),{page:es.z$})]}})})},children:[{path:th.Z.ExploreNotePath,name:th.Z.ExploreNoteName,component:Note,meta:getNoteDetailMeta(!0,!1)}]},{path:th.Z.SearchPath,name:th.Z.SearchName,component:function(){return Promise.all([n.e("568"),n.e("1613"),n.e("3602")]).then(n.bind(n,42283))},meta:{pageInstance:"web_search_result_notes",showSideBar:!0,showBottomMenu:!0,headerStyle:tV.iR.maskPaper,showSearchBox:!0,instanceId:function(){return""},getTrackerData:(0,g._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return e=(0,tA.R)(),[4,(0,es.O8)(30353,{searchWord:e.searchContext.keyword,searchWordFrom:e.keywordFrom,searchWordFromStr:e.sourcePageInstance,channelTabName:e.currentSearchType,instanceId:e.searchContext.searchId})];case 1:return t=n.sent(),[2,(0,E._)((0,N._)({},t),{page:(0,es.zr)()})]}})}),getPageEnd:(0,g._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return e=(0,tA.R)(),[4,(0,es.O8)(30354,{searchWord:e.searchContext.keyword,searchWordFrom:e.keywordFrom,searchWordFromStr:e.sourcePageInstance,channelTabName:e.currentSearchType,instanceId:e.searchContext.searchId})];case 1:return t=n.sent(),[2,(0,E._)((0,N._)({},t),{page:(0,es.zr)()})]}})})},beforeEnter:function(e,t,n){var r;["/",null,void 0].includes(t.path)&&!(null===(r=e.query)||void 0===r?void 0:r.type)&&!e.params.noteId&&n({name:th.Z.SearchName,query:(0,E._)((0,N._)({},e.query),{type:tY.ai.SEARCH_WORD_FROM_WEB_DIRECT_OPEN_URL})}),n()},children:[{path:th.Z.SearchNotePath,name:th.Z.SearchNoteName,component:Note,meta:getNoteDetailMeta(!0,!1),beforeEnter:function(e,t,n){return redirectToNote(e,t,n)}}]},{path:th.Z.AISearchPath,name:th.Z.AISearchName,component:function(){return Promise.all([n.e("9147"),n.e("5914"),n.e("568"),n.e("1613"),n.e("2486"),n.e("5480")]).then(n.bind(n,14502))},meta:{pageInstance:"web_search_result_notes",showSideBar:!0,showBottomMenu:!0,headerStyle:tV.iR.maskPaper,showSearchBox:!0,instanceId:function(){return""},getTrackerData:(0,g._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return e=(0,tA.R)(),[4,(0,es.O8)(30353,{searchWord:e.searchContext.keyword,searchWordFrom:e.keywordFrom,searchWordFromStr:e.sourcePageInstance,channelTabName:e.currentSearchType,instanceId:e.searchContext.searchId})];case 1:return t=n.sent(),[2,(0,E._)((0,N._)({},t),{page:(0,es.zr)()})]}})}),getPageEnd:(0,g._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return e=(0,tA.R)(),[4,(0,es.O8)(30354,{searchWord:e.searchContext.keyword,searchWordFrom:e.keywordFrom,searchWordFromStr:e.sourcePageInstance,channelTabName:e.currentSearchType,instanceId:e.searchContext.searchId})];case 1:return t=n.sent(),[2,(0,E._)((0,N._)({},t),{page:(0,es.zr)()})]}})})},beforeEnter:function(e,t,n){var r;["/",null,void 0].includes(t.path)&&!(null===(r=e.query)||void 0===r?void 0:r.type)&&!e.params.noteId&&n({name:th.Z.AISearchName,query:(0,E._)((0,N._)({},e.query),{type:tY.ai.SEARCH_WORD_FROM_WEB_DIRECT_OPEN_URL})}),n()},children:[{path:th.Z.AISearchNotePath,name:th.Z.AISearchNoteName,component:Note,meta:getNoteDetailMeta(!0,!1),beforeEnter:function(e,t,n){return redirectToNote(e,t,n)}}]},{path:th.Z.UserPagePath,name:th.Z.UserPageName,component:function(){return Promise.all([n.e("568"),n.e("9149"),n.e("3691"),n.e("606"),n.e("8896"),n.e("4868"),n.e("5775")]).then(n.bind(n,29625))},meta:{pageInstance:"web_profile_page",showSideBar:!0,showBottomMenu:!0,headerStyle:tV.iR.maskPaper,showSearchBox:!0,getPageEnd:(0,g._)(function(){var e;return(0,m.Jh)(this,function(t){switch(t.label){case 0:return e=(0,x.L)(),[4,(0,es.U0)(e.isOwnPage?27828:27836)];case 1:return[2,t.sent()]}})}),getTrackerData:(0,g._)(function(){var e;return(0,m.Jh)(this,function(t){switch(t.label){case 0:return e=(0,x.L)(),[4,(0,es.U0)(e.isOwnPage?27827:27835)];case 1:return[2,t.sent()]}})})},children:[{path:th.Z.UserNotePath,name:th.Z.UserNoteName,component:Note,meta:getNoteDetailMeta(!0,!1),beforeEnter:function(e,t,n){return redirectToNote(e,t,n)}}]},{path:th.Z.BoardPagePath,name:th.Z.BoardPageName,component:function(){return Promise.all([n.e("568"),n.e("4730"),n.e("4868"),n.e("9831")]).then(n.bind(n,89637))},meta:{title:"小红书 - 专辑页",pageInstance:"web_board_page",showSideBar:!0,showBottomMenu:!0,headerStyle:tV.iR.maskPaper,showSearchBox:!0,getTrackerData:(i=(0,g._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,es.O8)(48586,{boardId:e.params.id,channelType:e.query.source||"link"})];case 1:return t=n.sent(),[2,(0,E._)((0,N._)({},t),{page:es.UI})]}})}),function(e){return i.apply(this,arguments)}),getPageEnd:(a=(0,g._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,es.O8)(48586,{boardId:e.params.id,channelType:e.query.source||"link"})];case 1:return t=n.sent(),[2,(0,E._)((0,N._)({},t),{page:es.UI})]}})}),function(e){return a.apply(this,arguments)})},children:[{path:th.Z.BoardNotePath,name:th.Z.BoardNoteName,component:Note,meta:getNoteDetailMeta(!0,!1),beforeEnter:function(e,t,n){return redirectToNote(e,t,n)}}]},{path:th.Z.NotificationPath,name:th.Z.NotificationName,component:function(){return Promise.all([n.e("3039"),n.e("568"),n.e("4730"),n.e("851"),n.e("1641")]).then(n.bind(n,7217))},meta:{title:"通知 - 小红书",showSideBar:!0,showBottomMenu:!0,headerStyle:tV.iR.maskPaper,showSearchBox:!0,pageInstance:"web_engagement_notification_page",instanceId:function(){return""},getPageEnd:(0,g._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return e=(0,ty.Gu)(),[4,(0,es.O8)(33960,{channelTabName:e.activeTabName})];case 1:return t=n.sent(),[2,(0,E._)((0,N._)({},t),{page:es.kn})]}})}),getTrackerData:(0,g._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return e=(0,ty.Gu)(),[4,(0,es.O8)(33959,{channelTabName:e.activeTabName})];case 1:return t=n.sent(),[2,(0,E._)((0,N._)({},t),{page:es.kn})]}})})},children:[{path:th.Z.NotificationNotePath,name:th.Z.NotificationNoteName,component:Note,props:{disableScaleAnimation:!0},meta:getNoteDetailMeta(!0,!0)}]},{path:th.Z.FilePreviewPath,name:th.Z.FilePreviewName,component:function(){return Promise.all([n.e("568"),n.e("4730"),n.e("9149"),n.e("3691"),n.e("8996"),n.e("8968")]).then(n.bind(n,75822))},meta:{title:"小红书 - 文件预览",showSideBar:!0,showSearchBox:!1,showBottomMenu:!0,onlyLogo:!0,noHeader:!0,pageInstance:"web_document_preview_page",instanceId:function(){return""},getPageEnd:(o=(0,g._)(function(e){var t,n,r;return(0,m.Jh)(this,function(i){switch(i.label){case 0:return[4,(0,es.O8)(92843,{contentId:null==e?void 0:null===(t=e.params)||void 0===t?void 0:t.docId,noteId:null==e?void 0:null===(n=e.query)||void 0===n?void 0:n.noteId})];case 1:return r=i.sent(),[2,(0,E._)((0,N._)({},r),{page:(0,es.JI)()})]}})}),function(e){return o.apply(this,arguments)}),getTrackerData:(u=(0,g._)(function(e){var t,n,r;return(0,m.Jh)(this,function(i){switch(i.label){case 0:return[4,(0,es.O8)(92842,{contentId:null==e?void 0:null===(t=e.params)||void 0===t?void 0:t.docId,noteId:null==e?void 0:null===(n=e.query)||void 0===n?void 0:n.noteId})];case 1:return r=i.sent(),[2,(0,E._)((0,N._)({},r),{page:(0,es.JI)()})]}})}),function(e){return u.apply(this,arguments)})}},{path:th.Z.LiveRoomPath,name:th.Z.LiveRoomName,component:function(){return n.e("7726").then(n.bind(n,48327))},meta:{pageInstance:"web_view_live",title:"小红书 - 你的生活兴趣社区",showSideBar:!1,showBottomMenu:!1,showSearchBox:!1,headerStyle:tV.iR.headerHide,getTrackerData:(0,g._)(function(){var e,t,n,r;return(0,m.Jh)(this,function(i){switch(i.label){case 0:return e=(0,tq.jl)("RoutesConfig"),[4,(t=(0,tq.mM)()).waitTrackDataReady()];case 1:return i.sent(),[4,(0,es.O8)(93286,t.trackData)];case 2:return(n=i.sent()).page={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_view_live"},instanceId:t.trackData.instanceId||""}},r=(0,N._)({},n),e.log("liveRoom pageView pointData",r,t.trackData),[2,r]}})}),getPageEnd:(0,g._)(function(){var e,t,n,r;return(0,m.Jh)(this,function(i){switch(i.label){case 0:return e=(0,tq.jl)("RoutesConfig"),[4,(t=(0,tq.mM)()).waitTrackDataReady()];case 1:return i.sent(),[4,(0,es.O8)(93287,t.trackData)];case 2:return(n=i.sent()).page={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_view_live"},instanceId:t.trackData.instanceId||""}},r=(0,N._)({},n),e.log("liveRoom pageEnd pointData",r,t.trackData),[2,r]}})})}},{path:th.Z.LiveListPath,name:th.Z.LiveListName,component:function(){return n.e("7392").then(n.bind(n,25370))},meta:{pageInstance:"web_live_tab",title:"小红书 - 你的生活兴趣社区",showSideBar:!0,showBottomMenu:!0,showSearchBox:!0,showAIHeader:!0,headerStyle:tV.iR.maskPaper,getTrackerData:(0,g._)(function(){var e;return(0,m.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,es.O8)(93289)];case 1:return e=t.sent(),[2,(0,E._)((0,N._)({},e),{page:es.e9})]}})}),getPageEnd:(0,g._)(function(){var e;return(0,m.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,es.O8)(93290)];case 1:return e=t.sent(),[2,(0,E._)((0,N._)({},e),{page:es.e9})]}})})}},{path:th.Z.NotFoundPath,component:function(){return n.e("7437").then(n.bind(n,70796))},meta:{title:"小红书 - 你访问的页面不见了",pageInstance:"web_error_page",showSideBar:!0,showBottomMenu:!0,showSearchBox:!0,headerStyle:tV.iR.maskPaper,getTrackerData:(0,g._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return e=(0,eO.Yp)(window.location.href),[4,(0,es.O8)(44636,{noteId:e.noteId,channelType:e.source})];case 1:return t=n.sent(),[2,(0,E._)((0,N._)({},t),{page:es.Kh})]}})}),getPageEnd:(0,g._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return e=(0,eO.Yp)(window.location.href),[4,(0,es.O8)(44637,{noteId:e.noteId,channelType:e.source})];case 1:return t=n.sent(),[2,(0,E._)((0,N._)({},t),{page:es.Kh})]}})})}}].concat((0,e8._)(nn||[]))},{path:th.Z.LoginPath,component:function(){return n.e("7437").then(n.bind(n,54077))},meta:{pageInstance:"web_login_popup_page",title:"小红书 - 你的生活兴趣社区"}},{path:th.Z.OAuthPath,component:ni,meta:{title:"小红书 - 你的生活兴趣社区"}},{path:"/env",component:tJ,children:[{path:"",component:function(){return n.e("8174").then(n.bind(n,26468))},meta:{title:"小红书 - 环境识别",showSideBar:!0,showBottomMenu:!0}}]}],no=n(19736),nu=n(86058),nl=n(31547);n(91313),n(87394),n(94941),n(48421),n(64961),n(12996),n(59564);var ns=n(73656);function isEqual(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if((void 0===e?"undefined":(0,nl._)(e))!=="object"||(void 0===t?"undefined":(0,nl._)(t))!=="object")return e===t;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!isEqual(e[n],t[n]))return!1;return!0}if(Array.isArray(e)!==Array.isArray(t))return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;var a=!0,o=!1,u=void 0;try{for(var l,s=r[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var c=l.value;if(!isEqual(e[c],t[c]))return!1}}catch(e){o=!0,u=e}finally{try{!a&&null!=s.return&&s.return()}finally{if(o)throw u}}return!0}function duplicateRequestInterceptor(e){var t=[];function reportDuplicateRequest(e){t.filter(function(e){return Date.now()-e.timestamp>1e3&&e.count>1}).forEach(function(e){(0,z.Qv)("duplicate_request",{url:e.config.url,data:e.config.data,count:e.count,extra:JSON.stringify({method:e.config.method,params:e.config.params})})});var n=(t=t.filter(function(e){return Date.now()-e.timestamp<1e3})).find(function(t){var n=t.config.url===e.url,r=t.config.method===e.method,i=isEqual(t.config.params,e.params),a=isEqual(t.config.data,e.data);return n&&r&&i&&a});n?n.count++:t.push({config:e,count:1,timestamp:Date.now()})}e.http.interceptors.request.use(function(e){try{var t;(null==ns?void 0:null===(t=ns.env)||void 0===t?void 0:t.BROWSER)&&reportDuplicateRequest(e)}catch(e){}return e})}n(37565),n(43266);n.e("8019").then(n.t.bind(n,38634,23)).catch(),M.Z.set("webBuild",T.i8,{domain:".xiaohongshu.com"});var nc=new _.ZP("#app",{routes:na,http:tZ.Z,appContainer:tU}),nd=new Promise(function(e){p=e,h=setTimeout(function(){e()},2e3)});function getUserInfo(){return _getUserInfo.apply(this,arguments)}function _getUserInfo(){return(_getUserInfo=(0,g._)(function(){var e,t,n;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return[4,nd];case 1:return n.sent(),[4,(e=(0,x.L)()).getUserInfo()];case 2:if(n.sent(),t=e.userInfo.userId)return[3,6];n.label=3;case 3:return n.trys.push([3,5,,6]),[4,e.getUserInfo()];case 4:return n.sent(),t=e.userInfo.userId,[3,6];case 5:return n.sent(),[3,6];case 6:return[2,{user:{type:"User",value:{userId:t||"unknown"}}}]}})})).apply(this,arguments)}nc.use(k.ZP,{appId:"xhs-pc-web",callFrom:"web",captchaInCurrent:!0,forceLoginHook:function(){var e=window.location,t=e.host,n=e.href;window.location.href="//".concat(t,"/login?redirectPath=").concat(encodeURIComponent(n))},spamCallback:function(e){if(e){var t=(0,tg.r0)();t.inAntiSpamChecking=!1,t.inSpamCheckSendAuthCode&&t.setInSpamCheckSendAuthCode(!1),t.inAntiSpamCheckLogin&&t.setInAntiSpamCheckLogin(!1)}},spamInterception:function(e){return(0,no.iS)(nc,e)}}),nc.use(b.ZP,{plugins:[function(e){var t=e.store,n=(0,nu.Z)();t.$mitt={on:function(e,t){return n.on(e,t),function(){n.off(e,t)}},emit:n.emit}}]}),nc.use(S.Z,{tracker:function(){return n.e("2447").then(n.bind(n,88476))},getDeviceInfo:getWebId,getUserInfo:getUserInfo,apm:!1,debug:null===(c=window)||void 0===c?void 0:null===(s=c.location)||void 0===s?void 0:null===(l=s.search)||void 0===l?void 0:l.includes("debug=true")}),nc.use(w.mD,{retry:!0,disableCache:!0,artifactName:T.u2,artifactVersion:T.i8,useMesh:!0,env:"prod",reportUserMapping:!0,requests:[{name:"webExp",domain:"web_ab",type:"WEB_ID",defaultFlags:{usePreload:!1}},{name:"userExp",domain:"web_user",type:"USER_ID",id:(0,g._)(function(){var e;return(0,m.Jh)(this,function(t){switch(t.label){case 0:return[4,nd];case 1:return t.sent(),[4,(e=(0,x.L)()).getUserInfo()];case 2:return t.sent(),[2,e.userInfo.userId||""]}})}),defaultFlags:{}},{name:"requestExp",domain:"web_g",type:"WEB_ID",defaultFlags:{}}]}),nc.use(I.ZP,{sendType:"http",sourceName:"m_source",sourceValue:["baidusem","360_sem"]}),duplicateRequestInterceptor(nc),y.Z.init({debug:!!(null===(f=window)||void 0===f?void 0:null===(v=f.location)||void 0===v?void 0:null===(d=v.search)||void 0===d?void 0:d.includes("debug=true")),app:nc,Launcher:_.ZP,getDeviceInfo:getWebId,getUserInfo:(0,g._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,L._v)(200)];case 1:return e.sent(),[4,(0,L._v)(0)];case 2:return e.sent(),[4,getUserInfo()];case 3:return[2,e.sent()]}})}),jsError:{enableIgnoreDefaultError:!0,ignoreError:function(e){var t,n;return(null===(t=e.errorMessage)||void 0===t?void 0:t.includes("Launcher Auth"))||(null===(n=e.errorMessage)||void 0===n?void 0:n.includes("Script error."))||tP.some(function(t){var n;return null===(n=e.errorStack)||void 0===n?void 0:n.includes(t)})||["",null,void 0].includes(e.errorMessage)||tj.some(function(t){var n;return null===(n=e.errorMessage)||void 0===n?void 0:n.includes(t)})||tO.some(function(t){var n;return null===(n=e.errorMessage)||void 0===n?void 0:n.includes(t)})||tH.some(function(t){var n;return null===(n=e.errorMessage)||void 0===n?void 0:n.includes(t)})||tF.some(function(t){var n;return null===(n=e.errorMessage)||void 0===n?void 0:n.includes(t)})||tW.some(function(t){var n;return null===(n=e.errorFilePath)||void 0===n?void 0:n.includes(t)})||isHeadless()||unSupportBrowser()}},beforeSend:tB.ZP,performance:{getFrameObserve:function(){return(0,K.s6)().trackFps},SPA_LOAD:{type:"LCP"}},network:{open:!0},blankScreen:{threshold:.95,domThreshold:2,maxDepth:3,lines:5,columns:10,autoCheckBS:!0,autoCheckBSTime:3e3,screenshot:!0,rootElementSelector:"#app"},sample:{"xhs-pc-web":{httpRequestTiming:.1,infraBrowserResourceTiming:.1,apm_webplayer_act_metric:.1,apm_webplayer_heartbeat_section:.1}}}),nc.start().then(function(){p(),clearTimeout(h)})},51399:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});var r,i=((r={})[r.ERROR=2]="ERROR",r[r.COMPLETE=3]="COMPLETE",r[r.INTERRUPT=6]="INTERRUPT",r[r.INTERRUPT_NEW=10]="INTERRUPT_NEW",r)},11142:function(e,t,n){"use strict";n.d(t,{cH:function(){return useLayoutPreset},Jk:function(){return isNio},$Y:function(){return useLayout}}),n(74719),n(13396),n(34333),n(42876),n(33933);var r,i=n(93328),a=n(97611),o=n(51606),u=n(6890);n(9557),n(15066);var l=n(96144),s=n(60506),c=n(97397),d=n(2639),v=n(35909),f=n(89929),p=n(59484),h=n(29953),g=n(11200),m=n(94101),y=n(73993),I=n(49666),_=n(39317),w=n(66002),k=n(28860),S=["data-start","data-time","data-cache-exp","data-cache-hit","data-css-downgrade","data-render-status"],b={class:"search-area search-area-opacity"},M={class:"channel-container"},L=(0,i.aZ)({__name:"AIFeeds",setup:function(e){var t=(0,u.s6)(),n=(0,_.NW)(),r=(0,w.Jk)(n),a=r.mfRequestMetaData,o=r.ssrRequestStatus,L=(0,k.E)();(0,h.Z)();var x=(0,l.$T)("requestExp"),T=(0,i.iH)(!1),D=(0,y.M)(),N=D.EntryType,E=D.pageStatus,R=D.showFeeds,U=D.refresh,P=D.exploreChannels,F=D.handleChannelClick,j=D.currentChannel,O=D.channelReducer;return function(e,r){var l,h,y,_,w,k,D,H,W,z,Z,q;return(0,i.wg)(),(0,i.iD)("div",{id:"mfContainer",class:"feeds-page","data-start":null===(l=(0,i.SU)(a))||void 0===l?void 0:l.start,"data-time":null===(h=(0,i.SU)(a))||void 0===h?void 0:h.lasting,"data-cache-exp":null===(_=(0,i.SU)(n))||void 0===_?void 0:null===(y=_.feedsCacheLogInfo)||void 0===y?void 0:y.flag,"data-cache-hit":Number(null===(k=(0,i.SU)(n))||void 0===k?void 0:null===(w=k.feedsCacheLogInfo)||void 0===w?void 0:w.isHitMfCache),"data-css-downgrade":null===(H=(0,i.SU)(x))||void 0===H?void 0:null===(D=H.flags)||void 0===D?void 0:D.cssDowngrade,"data-render-status":(0,i.SU)(o)},[(0,i._)("div",b,[(0,i.Wm)(g.Z,{"force-size":"large","input-id":"search-input-in-feeds","is-search-box-in-content":"","show-sug-history":(null===(W=(0,i.SU)(t))||void 0===W?void 0:W.aiSearchMode)===("AiSearchMode"in e?e.AiSearchMode:(0,i.SU)(u.L9)).LARGE},null,8,["show-sug-history"])]),(0,i.Wm)(c.Z,{type:null===(z=(0,i.SU)(N))||void 0===z?void 0:z.globalModal},null,8,["type"]),(0,i._)("div",M,[(null===(Z=(0,i.SU)(P))||void 0===Z?void 0:Z.length)?((0,i.wg)(),(0,i.j4)(f.Z,{key:0,"active-key":(0,i.SU)(j),"onUpdate:activeKey":r[0]||(r[0]=function(e){return(0,i.dq)(j)?j.value=e:null}),class:"channel-scroll-container-in-ai-feed","vertical-channel-key":"homefeed.pet","channel-list":(0,i.SU)(O)((0,i.SU)(P)),onChannelClick:r[1]||(r[1]=function(e){return(0,i.SU)(F)(e)})},{icon:(0,i.w5)(function(e){return["homefeed.pet"===e.channelKey?((0,i.wg)(),(0,i.j4)(m.Z,{key:0,"icon-rendered":(0,i.SU)(T),"change-icon-rendered":function(){return T.value=!0},class:"channel-icon"},null,8,["icon-rendered","change-icon-rendered"])):(0,i.kq)("",!0)]}),_:1},8,["active-key","channel-list"])):(0,i.kq)("",!0)]),"error"===(0,i.SU)(E)?((0,i.wg)(),(0,i.j4)(v.Z,{key:0,refresh:(0,i.SU)(U)},null,8,["refresh"])):(0,i.kq)("",!0),(0,i.Wm)(s.Z,null,{default:(0,i.w5)(function(){var e;return[(0,i.Wm)(d.Z,{visible:"placeholderFeeds"===(0,i.SU)(E)&&(0,i.SU)(R)&&(null===(e=(0,i.SU)(n))||void 0===e?void 0:e.isUsingPlaceholderFeeds)||"update"===(0,i.SU)(E)},null,8,["visible"])]}),_:1}),"loading"===(0,i.SU)(E)?((0,i.wg)(),(0,i.j4)(p.Z,{key:1,columns:null===(q=(0,i.SU)(L))||void 0===q?void 0:q.columns},null,8,["columns"])):(0,i.kq)("",!0),(0,i.Wm)(I.Z,{"show-feeds":(0,i.SU)(R)},null,8,["show-feeds"])],8,S)}}}),x=n(5010);let T=(0,x.default)(L,[["__scopeId","data-v-4cac268a"]]);var D=n(41622),N=n(70879),E=n(27337),R=n(377);n(36277),n(86651),n(7608),n(87989);var U=n(16337),P=n(66398),F=n(13285),j=n(61883),O=n(55783),H=n(31907);n(87394),n(94941),n(48421),n(97357);var W=n(74741),z=n(34348),Z=n(63611);n(23882);var q=n(85537),V={class:"channel-list"},Y={key:0,class:"bottom-channel"},G={key:1,class:"bottom-channel"},J=["target","href","onClick"],Q={class:"text"},K={class:"text"},X=(0,i.aZ)({__name:"BottomMenuAI",setup:function(e){var t=(0,W.rN)(),n=(0,u.s6)(),r=(0,q.L)(),a=(0,_.NW)(),o=(0,F.yj)();function targetPath(e){var t;return(0,Z.m)({channel:e,isOwnPage:r.isOwnPage,pageInstance:(null===(t=o.meta)||void 0===t?void 0:t.pageInstance)||"",category:a.query.category})}return function(e,r){var a=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",{class:(0,i.C_)(["bottom-menu-ai",{"force-visible":(0,i.SU)(n).currentLayout===(0,i.SU)(z.G).NIO}])},[(0,i._)("div",V,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(t).filter(function(e){return e.visible}),function(e){var t,n;return(0,i.wg)(),(0,i.iD)(i.HY,{key:e.name},[e.component?((0,i.wg)(),(0,i.iD)("div",Y,[((0,i.wg)(),(0,i.j4)((0,i.LL)(e.component),{active:e.active,onClick:e.onClick},null,8,["active","onClick"]))])):((0,i.wg)(),(0,i.iD)("div",G,[e.href?((0,i.wg)(),(0,i.iD)("a",{key:0,target:null!==(t=e.target)&&void 0!==t?t:"_blank",href:e.href,class:"bottom-channel",onClick:e.onClick},[(0,i.Wm)((0,i.SU)(P.i8),{icon:e.icon,size:"24"},null,8,["icon"]),(0,i._)("span",Q,(0,i.zw)(e.label),1)],8,J)):((0,i.wg)(),(0,i.j4)(a,{key:1,target:null!==(n=e.target)&&void 0!==n?n:"_blank",to:targetPath(e),class:"bottom-channel",onClick:e.onClick},{default:(0,i.w5)(function(){return[(0,i.Wm)((0,i.SU)(P.i8),{icon:e.icon,size:"24"},null,8,["icon"]),(0,i._)("span",K,(0,i.zw)(e.label),1)]}),_:2},1032,["target","to","onClick"]))]))],64)}),128))])],2)}}});let $=(0,x.default)(X,[["__scopeId","data-v-70c141ba"]]);var ee=n(58879),et=n(71852),en=n(44892),er=n(98413),ei=n(99505);n(23329);var ea=n(32602);n(87535),n(75204),n(96205);var eo=n(8172);n(92569);var eu={class:"container"},el={key:1},es={key:0,class:"group-navi"},ec=["data-name"],ed={key:0,class:"group-header"},ev=["id","data-name","onClick","onMouseenter","onMouseleave"],ef=["href"],ep={key:1},eh=(0,i.aZ)({__name:"PopoverMenu",props:{items:{},mode:{}},emits:["item-click","impression"],setup:function(e,t){var n=t.emit,r=(0,i.iH)(),a=(0,i.iH)(),o=(0,i.qj)([]),u=(0,i.iH)(e.items);function goBack(){u.value=o.pop()||[]}function handleClick(e){var t;if(!e.customComponent){if((null==e?void 0:e.children)&&(null==e?void 0:null===(t=e.children)||void 0===t?void 0:t.length)){o.push(u.value),u.value=e.children;return}e.clickEvent&&e.clickEvent(),n("item-click",e)}}function handleMouseEvent(e,t){(e.href||e.routeName)&&(e.showIcon=t)}function initObserver(e){e.forEach(function(e){(0,(0,eo.Z)(function(){e.dataset.name&&n("impression",e.dataset.name)},e).startObserve)()})}return(0,i.bv)(function(){var e,t;initObserver(null!==(e=r.value)&&void 0!==e?e:[]),initObserver(null!==(t=a.value)&&void 0!==t?t:[])}),function(t,n){return(0,i.wg)(),(0,i.iD)("div",eu,[(0,i.SU)(o).length?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"back",onClick:goBack},[(0,i.Wm)((0,i.SU)(P.i8),{icon:"back",size:"16"})])):(0,i.kq)("",!0),(0,i.SU)(u)?((0,i.wg)(),(0,i.iD)("div",el,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(u),function(n,l){return(0,i.wg)(),(0,i.iD)("div",{key:l},[n?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[n.name&&(0,i.SU)(o).length?((0,i.wg)(),(0,i.iD)("div",es,(0,i.zw)(n.name),1)):(0,i.kq)("",!0),!1!==n.visible?((0,i.wg)(),(0,i.iD)("div",{key:1,ref_for:!0,ref_key:"groupItemRefs",ref:r,class:(0,i.C_)(["group-wrapper",{"allow-overflow":(0,i.SU)(o).length}]),"data-name":n.name},[n.name&&0===(0,i.SU)(o).length?((0,i.wg)(),(0,i.iD)("div",ed,(0,i.zw)(n.name),1)):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.group,function(t,n){var r,o;return(0,i.wg)(),(0,i.iD)("div",{key:n},[!1!==t.visible?((0,i.wg)(),(0,i.iD)("div",{key:0,id:(o=null!==(r=null==t?void 0:t.id)&&void 0!==r?r:"","mini"===e.mode?"MINI-".concat(o):o),ref_for:!0,ref_key:"groupChildrenRefs",ref:a,class:(0,i.C_)(["menu-item",{"hover-effect":!t.customComponent}]),"data-name":t.name,onClick:function(e){return handleClick(t)},onMouseenter:function(e){return handleMouseEvent(t,!0)},onMouseleave:function(e){return handleMouseEvent(t,!1)}},[t.href&&t.routeName?((0,i.wg)(),(0,i.iD)("a",{key:0,target:"_blank",href:t.href,class:"link"},(0,i.zw)(t.name),9,ef)):((0,i.wg)(),(0,i.iD)("span",ep,(0,i.zw)(t.name),1)),t.customComponent?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:2,class:(0,i.C_)(["icon",[{"hover-effect":t.href||t.routeName,"icon-visible":t.showIcon}]])},[(0,i.Wm)((0,i.SU)(P.i8),{icon:t.href||t.routeName?"arrow_right_top":t.icon,size:"16"},null,8,["icon"])],2)),t.customComponent?((0,i.wg)(),(0,i.j4)((0,i.LL)(t.customComponent.component),{key:3,class:"component"})):(0,i.kq)("",!0)],42,ev)):(0,i.kq)("",!0)])}),128)),"关于小红书"===n.name?(0,i.WI)(t.$slots,"AppInfo",{key:1}):(0,i.kq)("",!0)],10,ec)):(0,i.kq)("",!0),l!==(0,i.SU)(u).length-1&&!1!==n.visible?((0,i.wg)(),(0,i.j4)((0,i.SU)(P.iz),{key:2,class:"divider",margin:"0 12px"})):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])}),128))])):(0,i.kq)("",!0)])}}});let eg=(0,x.default)(eh,[["__scopeId","data-v-657d976e"]]);var em={key:0},ey={class:"app-info outside"},eI={class:"icp-info"},e_=["title","href"],ew=(0,i.aZ)({__name:"BottomInfoAI",setup:function(e){var t,n,r=(0,i.iH)(),a=(0,i.iH)(!1),l=(0,F.tv)(),s=(0,F.yj)(),c=(0,W.TX)(!0),d=(0,u.s6)(),v=(0,i.Fl)(function(){return d.appSettings.ICPInfoList});function addDesktop(){return _addDesktop.apply(this,arguments)}function _addDesktop(){return(_addDesktop=(0,D._)(function(){var e,t;return(0,R.Jh)(this,function(n){switch(n.label){case 0:if((0,ea.$G)())return(0,P.Am)("暂未支持当前浏览器，可用 Chrome 继续添加～"),[2];if(!d.pwaAddDesktopPrompt)return(0,P.Am)("已经安装成功"),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),d.easyAccessModalVisible.addDesktopGuide=!0,[4,null===(e=d.pwaAddDesktopPrompt)||void 0===e?void 0:e.prompt()];case 2:return"accepted"===(t=n.sent()).outcome&&(d.pwaAddDesktopPrompt=void 0),(0,ei.uk)(37662,{componentName:"accepted"===t.outcome?"1":"0"}),[3,4];case 3:return console.error(n.sent()),[3,4];case 4:return[2]}})})).apply(this,arguments)}var f=(t={},(0,o._)(t,W.kx.AddDesktop,38338),(0,o._)(t,W.kx.AddCollect,38336),(0,o._)(t,W.kx.Keyboard,38334),(0,o._)(t,W.kx.MiniWindow,38340),t);function handleImpression(e){var t=f[e];t&&(0,ei.uk)(t)}var p=(n={},(0,o._)(n,W.kx.AddDesktop,38339),(0,o._)(n,W.kx.AddCollect,38337),(0,o._)(n,W.kx.Keyboard,38335),(0,o._)(n,W.kx.MiniWindow,38341),n);function handleEasyAccess(e){var t=p[e];(0,ei.uk)(t),e===W.kx.AddDesktop?addDesktop():W.kx.AddCollect===e?d.easyAccessModalVisible.collectGuide=!0:W.kx.Keyboard===e?d.easyAccessModalVisible.keyboardList=!0:W.kx.MiniWindow===e&&openMiniWindow()}function handleItemClick(e){Object.values(W.kx).includes(e.name)&&handleEasyAccess(e.name),a.value=!1,(0,ei.uk)(35037,{gotoPage:e.routeName})}function handleMenuClick(){a.value=!a.value,(0,ei.uk)(37018)}function listenEasyAccess(){d.$mitt.on("easyAccess",function(e){var t=e.type,n=e.name;"impression"===t?handleImpression(n):handleEasyAccess(n)})}function openMiniWindow(){if(0===window.screenX&&0===window.screenY){(0,P.Am)("退出全屏后打开小窗模式");return}var e=window.screen.availWidth,t=440;e<H.n4.LG&&e>=H.n4.MID?t=400:e<H.n4.MID&&(t=360);var n=l.resolve({query:(0,E._)((0,N._)({},s.query),{mini:1})}),r=window.screenX+window.innerWidth-t;window.open(n.fullPath,"_blank","top=".concat(window.screenY,",left=").concat(r,",width=").concat(t,",height=").concat(window.innerHeight,",menubar=no,toolbar=no,status=no,scrollbars=yes"))}return(0,i.wF)(function(){listenEasyAccess(),(0,U.ORN)(document,"click",function(e){var t,n=e.target;if(null===(t=r.value)||void 0===t?!void 0:!t.contains(n))a.value=!1})}),function(e,t){return(0,i.wg)(),(0,i.iD)("div",{id:"explore-guide-menu",ref_key:"informationEl",ref:r,class:"information-container"},[(0,i.SU)(a)?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"information-pad",onClick:t[1]||(t[1]=(0,i.iM)(function(){},["stop"]))},[(0,i.Wm)(eg,{mode:"normal",items:(0,i.SU)(c),onItemClick:t[0]||(t[0]=function(e){handleItemClick(e)}),onImpression:handleImpression},null,8,["items"])])):(0,i.kq)("",!0),(0,i.Wm)(ee.Z,{position:"right","no-tooltip":!(0,i.SU)(d).sideCollapse},{content:(0,i.w5)(function(){return t[2]||(t[2]=[(0,i.Uk)(" 更多 ")])}),default:(0,i.w5)(function(){var e;return[(0,i._)("div",{class:(0,i.C_)(["information-wrapper-ai",{"information-wrapper-ai-sideCollapse":null===(e=(0,i.SU)(d))||void 0===e?void 0:e.sideCollapse}]),title:"更多",onClick:handleMenuClick},[(0,i.Wm)((0,i.SU)(P.i8),{size:"24",icon:"menu",class:"information-icon"}),(0,i.SU)(d).sideCollapse?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",em,"更多"))],2)]}),_:1},8,["no-tooltip"]),(0,i._)("div",ey,[(0,i._)("p",eI,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(v),function(e,t){return(0,i.wg)(),(0,i.iD)(i.HY,{key:e.title},[(0,i._)("a",{title:e.title,href:e.link,target:"_blank",class:"icp-text"},(0,i.zw)(e.label),9,e_),(0,i.Uk)(" "+(0,i.zw)(t!==(0,i.SU)(v).length-1?" | ":""),1)],64)}),128))]),t[3]||(t[3]=(0,i._)("div",{class:"corp-info"},[(0,i._)("p",null,"\xa9 2014-2024"),(0,i._)("p",null,"行吟信息科技（上海）有限公司"),(0,i._)("p",null,"地址：上海市黄浦区马当路388号C座"),(0,i._)("p",null,"电话：9501-3888")],-1))])],512)}}});let ek=(0,x.default)(ew,[["__scopeId","data-v-6fc2d3bc"]]);var eS=n(8048);function useLoginPrompt(){var e,t=(0,i.iH)(!1),n=(0,eS.r0)(),r=(0,F.yj)(),a=(0,q.L)();var o=(e=(0,D._)(function(){return(0,R.Jh)(this,function(e){switch(e.label){case 0:return[4,a.getUserInfo()];case 1:if(e.sent(),![er.Z.ExploreNoteName,er.Z.ExploreName].includes(r.name)||a.loggedIn)return[2];return t.value=!0,[2]}})}),function openLoginModalWhenInit(){return e.apply(this,arguments)});function listenLoginModalVisibleChange(){return _listenLoginModalVisibleChange.apply(this,arguments)}function _listenLoginModalVisibleChange(){return(_listenLoginModalVisibleChange=(0,D._)(function(){return(0,R.Jh)(this,function(e){return a.loggedIn?[2]:(n.$mitt.on("loginModalVisibleChange",function(e){!e.visible&&!a.loggedIn&&[er.Z.ExploreNoteName,er.Z.ExploreName].includes(r.name)&&(t.value=!0)}),[2])})})).apply(this,arguments)}function listenUserLogin(){a.$mitt.on("onLogin",function(){t.value=!1})}return(0,i.bv)(function(){o(),(0,i.YP)(r,o),listenLoginModalVisibleChange(),listenUserLogin()}),{loginPromptVisible:t}}var eb=["src"],eC={class:"channel-list-content"},eM=["id"],eA=["target","href","onClick"],eL={key:0,class:"channel"},ex={key:0,class:"channel"},eT={class:"app-info"},eD={class:"icp-info"},eN=["title","href"],eE=(0,i.aZ)({__name:"SideBarAI",setup:function(e){var t=(0,i.RC)(function(){return n.e("3644").then(n.bind(n,25811))}),r=(0,et.C)().LayoutGray,a=(0,W.rN)(),o=useLoginPrompt().loginPromptVisible,l=(0,_.NW)(),c=(0,q.L)(),d=(0,u.s6)(),v=(0,F.yj)(),f=(0,i.Fl)(function(){return d.appSettings.ICPInfoList}),p=(0,Z.T)({targetPath:er.Z.ExplorePath,pageInstance:v.meta.pageInstance,isOwnPage:c.isOwnPage});function backAndClearSearchValue(){(0,ei.uk)(30477,{fromPage:v.name})}function targetPath(e){var t;return(0,Z.m)({channel:e,isOwnPage:c.isOwnPage,pageInstance:(null===(t=v.meta)||void 0===t?void 0:t.pageInstance)||"",category:l.query.category})}return function(e,n){var u,l,c,v=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",{class:(0,i.C_)(["side-bar side-bar-ai",{gray:(0,i.SU)(r),"side-bar-collapse":null===(u=(0,i.SU)(d))||void 0===u?void 0:u.sideCollapse}]),onScrollOnce:n[1]||(n[1]=function(){(0,i.SU)(ei.uk)(30428)})},[(0,i.Wm)(v,{id:"link-guide",class:(0,i.C_)(["side-bar-logo-wrapper",{"side-bar-logo-wrapper-collapse":null===(l=(0,i.SU)(d))||void 0===l?void 0:l.sideCollapse}]),to:(0,i.SU)(p),style:{display:"flex"},onClick:n[0]||(n[0]=function(e){return backAndClearSearchValue()})},{default:(0,i.w5)(function(){return[(0,i._)("img",{crossorigin:"anonymous",class:"header-logo",src:(0,i.SU)(en.rU).mainLogo},null,8,eb)]}),_:1},8,["class","to"]),(0,i._)("ul",{class:(0,i.C_)(["channel-list",{"channel-list-sideCollapse":null===(c=(0,i.SU)(d))||void 0===c?void 0:c.sideCollapse}])},[(0,i._)("div",eC,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(a).filter(function(e){return e.visible}),function(e){var t;return(0,i.wg)(),(0,i.j4)(ee.Z,{key:e.name,position:"right","no-tooltip":!(null===(t=(0,i.SU)(d))||void 0===t?void 0:t.sideCollapse),style:{"margin-bottom":"8px"}},{content:(0,i.w5)(function(){return[(0,i.Uk)((0,i.zw)(e.label),1)]}),default:(0,i.w5)(function(){var t,n;return[e.component?((0,i.wg)(),(0,i.j4)((0,i.LL)(e.component),{key:0,active:e.active,onClick:e.onClick},null,8,["active","onClick"])):((0,i.wg)(),(0,i.iD)("li",{key:1,id:e.name===(0,i.SU)(er.Z).ExploreName?"explore-guide-refresh":"",class:(0,i.C_)({"active-channel":e.active})},[e.href?((0,i.wg)(),(0,i.iD)("a",{key:0,target:null!==(t=e.target)&&void 0!==t?t:"_blank",href:e.href,class:"link-wrapper",onClick:e.onClick},[(0,i.Wm)((0,i.SU)(P.i8),{icon:e.icon,size:"24",class:"icon-wrapper"},null,8,["icon"]),(0,i.SU)(d).sideCollapse?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",eL,(0,i.zw)(e.label),1))],8,eA)):((0,i.wg)(),(0,i.j4)(v,{key:1,target:null!==(n=e.target)&&void 0!==n?n:"_blank",to:targetPath(e),class:"link-wrapper",onClick:e.onClick},{default:(0,i.w5)(function(){return[(0,i.Wm)((0,i.SU)(P.i8),{icon:e.icon,size:"24",class:"icon-wrapper"},null,8,["icon"]),(0,i.SU)(d).sideCollapse?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("span",ex,(0,i.zw)(e.label),1))]}),_:2},1032,["target","to","onClick"]))],10,eM))]}),_:2},1032,["no-tooltip"])}),128)),((0,i.wg)(),(0,i.j4)(i.n4,null,{default:(0,i.w5)(function(){return[(0,i.Wm)(s.Z,null,{default:(0,i.w5)(function(){return[(0,i.Wm)((0,i.SU)(t),{visible:(0,i.SU)(o)},null,8,["visible"])]}),_:1})]}),_:1}))]),(0,i._)("div",eT,[(0,i._)("p",eD,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(f),function(e,t){return(0,i.wg)(),(0,i.iD)(i.HY,{key:e.title},[(0,i._)("a",{title:e.title,href:e.link,target:"_blank",class:"icp-text"},(0,i.zw)(e.label),9,eN),(0,i.Uk)(" "+(0,i.zw)(t!==(0,i.SU)(f).length-1?" | ":""),1)],64)}),128))]),n[2]||(n[2]=(0,i._)("div",{class:"corp-info"},[(0,i._)("p",null,"\xa9 2014-2024"),(0,i._)("p",null,"行吟信息科技（上海）有限公司"),(0,i._)("p",null,"地址：上海市黄浦区马当路388号C座"),(0,i._)("p",null,"电话：9501-3888")],-1))]),(0,i.Wm)((0,i.SU)(P.iz))],2),(0,i.Wm)(ek)],34)}}});let eR=(0,x.default)(eE,[["__scopeId","data-v-6f434e90"]]);var eU=n(94186),eP=n(91547),eF=n(95509);function useMiniScreenReport(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"old",t=(0,U.iPe)().width,n=(0,F.yj)();if(eF.j){var r=!1;(0,i.YP)(t,function(){!r&&t.value&&t.value<H.n4.SM?((0,ei.uk)(91728,{fromPage:n.name,pageType:e}),r=!0):r&&t.value&&t.value>=H.n4.SM&&(r=!1)},{immediate:!0})}}function useDocumentScrollEvent(e){var t=(0,i.iH)(0),n=(0,i.iH)(null),r=0,handleScroll=function(i){if(i.target===document||i.target===document.documentElement||i.target===window){var a=window.scrollY||document.documentElement.scrollTop;t.value=a,a>r?n.value="down":a<r&&(n.value="up"),r=a,e(a,n.value)}};return(0,i.bv)(function(){t.value=window.scrollY||document.documentElement.scrollTop,window.addEventListener("scroll",handleScroll,{passive:!0})}),(0,i.SK)(function(){window.removeEventListener("scroll",handleScroll)}),{scrollY:t,scrollDirection:n}}var ej=(0,i.aZ)({__name:"AIHeaderIndex",setup:function(e){(0,i.sj)(function(e){return{"3db5f850":m,"0e534bf0":h.value}});var t=(0,et.C)().LayoutGray,n=(0,F.yj)(),r=(0,u.s6)(),a=(0,w.Jk)(r).aiSearchMode,o=(0,i.iH)(!0),l=(0,i.Fl)(function(){var e,t;return null!==(t=null==n?void 0:null===(e=n.meta)||void 0===e?void 0:e.transparentHeader)&&void 0!==t&&t}),s=(0,i.Fl)(function(){return a.value===u.L9.SMALL||a.value===u.L9.SMALL_EXPENDED}),c=(0,i.iH)({width:"100vw",left:"0",right:"auto"}),d=(0,i.Fl)(function(){return a.value===u.L9.SMALL_EXPENDED?"large":"small"}),v=(0,i.iH)(null),f=(0,i.iH)(null);(0,i.bv)(function(){var e,t;if(!!(null===(e=f.value)||void 0===e?void 0:e.el))(0,U.i9H)(null===(t=f.value)||void 0===t?void 0:t.el,function(){a.value===u.L9.SMALL_EXPENDED&&(r.aiSearchMode=u.L9.SMALL)})}),(0,i.bv)(function(){var handleResize=function handleResize(){var e,t=(null===(e=document.querySelector("#global"))||void 0===e?void 0:e.clientWidth)||0,n=document.documentElement.clientWidth-t;c.value={width:"".concat(t,"px"),left:"".concat(n/2,"px"),right:"".concat(n/2,"px")},0===window.scrollY&&(r.aiSearchMode=u.L9.LARGE)};(0,U.yU7)(document.documentElement,handleResize),handleResize()});var p=(0,U.vO3)("undefined"!=typeof window?window:void 0).y,h=(0,i.Fl)(function(){var e;return(null==n?void 0:null===(e=n.meta)||void 0===e?void 0:e.name)!==er.Z.ExploreName?1:p.value<=50?0:p.value>=150?1:(p.value-50)/100});function showOtherElement(e){o.value=e}useDocumentScrollEvent(function(e,t){var i;if(!!(null==n?void 0:null===(i=n.meta)||void 0===i?void 0:i.showAIHeader))if("down"===t&&e>86){if(r.aiSearchMode===u.L9.SMALL_EXPENDED)return;r.aiSearchMode===u.L9.LARGE&&(r.aiSearchMode=u.L9.SMALL)}else"up"===t&&e<86&&(r.aiSearchMode=u.L9.LARGE)});var m="".concat(H.n4.MAX,"px");function handleInputFocus(){r.aiSearchMode=u.L9.SMALL_EXPENDED}return function(e,a){var o,p,h,m,y;return(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{class:(0,i.C_)(["ai-header-container",{transparent:l.value,gray:(0,i.SU)(t),"with-side-bar-collapse":(0,i.SU)(r).sideCollapse,"header-container-large":"large"===d.value}]),style:(0,i.j5)(c.value)},[(0,i._)("div",{ref_key:"searchAreaEl",ref:v,class:(0,i.C_)(["search-area-in-header",{"with-gradient-background":null===(p=(0,i.SU)(n))||void 0===p?void 0:null===(o=p.meta)||void 0===o?void 0:o.showAIHeader}])},[(null===(m=(0,i.SU)(n))||void 0===m?void 0:null===(h=m.meta)||void 0===h?void 0:h.showSearchBox)?((0,i.wg)(),(0,i.j4)(g.Z,{key:0,ref_key:"aiSearchEl",ref:f,transparent:l.value,"force-size":d.value,"show-sug-history":(null===(y=(0,i.SU)(r))||void 0===y?void 0:y.aiSearchMode)===("AiSearchMode"in e?e.AiSearchMode:(0,i.SU)(u.L9)).SMALL_EXPENDED,onToShowOtherHeaderElement:showOtherElement,onFocus:handleInputFocus},null,8,["transparent","force-size","show-sug-history"])):(0,i.kq)("",!0)],2)],6)),[[i.F8,s.value]])}}});let eO=(0,x.default)(ej,[["__scopeId","data-v-5ee337a7"]]);var eH=n(82726);n(97542),n(25037),n(64961),n(12996),n(59564);var eW=n(64300),ez={key:1,class:"dropdown-nav"},eB=["href"],eZ=(0,i.aZ)({__name:"Nav",setup:function(e){var t=(0,F.yj)(),n=(0,F.tv)(),r=(0,eW.dw)(),a=(0,u.s6)(),o=(0,i.iH)(!1),l=(0,i.iH)(),s=(0,W.Xb)(),c=(0,i.Fl)(function(){return t.path.startsWith(er.Z.ExplorePath)||t.path.startsWith(er.Z.ProfilePath)||t.path.startsWith(er.Z.SearchPath)||t.path.startsWith(er.Z.ActivityPath)||t.path.startsWith(er.Z.NotificationPath)||t.path.startsWith(er.Z.BoardPath)||t.path.startsWith(er.Z.LiveListPath)}),d=(0,i.Fl)(function(){return a.currentLayout===z.G.NIO});function gotoPageWithPath(e){var i;if(r.gotoPage=(null===(i=Object.entries(er.Z).find(function(t){var n=(0,eH._)(t,2);return n[0],n[1]===e}))||void 0===i?void 0:i[0])||"",t.path!==e){n.push(e);var a=r.getDefaultNoteId();(0,ei.uk)(30384,r.getTrackDataByNoteId(a))}}function handlePointWithUrl(e){var t=r.getDefaultNoteId();r.gotoPage=e,(0,ei.uk)(30384,r.getTrackDataByNoteId(t))}function handleDropdownItemEvent(e){Object.values(W.kx).includes(e.name)&&a.$mitt.emit("easyAccess",{type:"click",name:e.name}),e.href&&e.routeName&&handlePointWithUrl(e.routeName),o.value=!1}function handleMenuClick(){o.value=!o.value}function handleImpression(e){a.$mitt.emit("easyAccess",{type:"impression",name:e})}return(0,i.wF)(function(){(0,U.ORN)(document,"click",function(e){var t,n=e.target;if(null===(t=l.value)||void 0===t?!void 0:!t.contains(n))o.value=!1})}),function(e,t){return(0,i.wg)(),(0,i.iD)("div",{ref_key:"informationEl",ref:l,class:"menu"},[c.value?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)((0,i.SU)(P.zx),{key:0,type:"text",class:"pc-btn",onClick:t[0]||(t[0]=function(e){return gotoPageWithPath((0,i.SU)(er.Z).ExplorePath)})},{default:(0,i.w5)(function(){return t[2]||(t[2]=[(0,i.Uk)(" 网页版 ")])}),_:1,__:[2]})),d.value?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",ez,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(W.qK),function(e){return(0,i.wg)(),(0,i.j4)((0,i.SU)(P.Lt),{key:e.name,placement:"bottom",trigger:"hover"},{items:(0,i.w5)(function(){return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.children,function(t,n){return(0,i.wg)(),(0,i.iD)(i.HY,{key:t.name},["关于我们"===e.name&&4===n?((0,i.wg)(),(0,i.j4)((0,i.SU)(P.iz),{key:0})):(0,i.kq)("",!0),(0,i.Wm)((0,i.SU)(P.hP),{name:t.name,onItemClick:function(e){return handleDropdownItemEvent(t)}},{rightIcon:(0,i.w5)(function(){return[(0,i.Wm)((0,i.SU)(P.i8),{size:"20",class:"icon",icon:"arrow_right_top"})]}),default:(0,i.w5)(function(){return[(0,i._)("a",{target:"_blank",href:t.href,class:"link"},(0,i.zw)(t.name),9,eB)]}),_:2},1032,["name","onItemClick"])],64)}),128))]}),default:(0,i.w5)(function(){return[(0,i.Wm)((0,i.SU)(P.zx),{type:"text",class:"channel-btn"},{default:(0,i.w5)(function(){return[(0,i.Uk)((0,i.zw)(e.name),1)]}),_:2},1024)]}),_:2},1024)}),128))])),(0,i._)("div",{id:"small-more-info",class:(0,i.C_)(["menu-icon-dropdown-nav",{"force-visible":d.value}])},[(0,i._)("div",{class:"menu-icon-btn",onClick:handleMenuClick},[(0,i.Wm)((0,i.SU)(P.zx),{icon:"menu"})]),(0,i.SU)(o)?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"information-pad",onClick:t[1]||(t[1]=(0,i.iM)(function(){},["stop"]))},[(0,i.Wm)(eg,{mode:"mini",items:(0,i.SU)(s),onItemClick:handleDropdownItemEvent,onImpression:handleImpression},null,8,["items"])])):(0,i.kq)("",!0)],2)],512)}}});let eq=(0,x.default)(eZ,[["__scopeId","data-v-395f8818"]]);n(1154),n(80013),n(85203),n(6045),n(10364),n(67673),n(97553);var eV=n(51899),eY=n.n(eV),eG=n(30757),eJ=n(10409),eQ=n(68284),eK=n(67156),eX=n(79612),e$=n(92141);n(81162),n(61079),n(8846);var e0=n(69876),e1=["placeholder"],e3={class:"text"},e2=(0,i.aZ)({__name:"Search",props:{transparent:{type:Boolean}},emits:["toShowOtherHeaderElement"],setup:function(e,t){var n,r=t.emit,a=(0,q.L)(),o=(0,eS.r0)(),l=(0,eQ.R)(),c=(0,u.s6)(),d=(0,eJ.j)(),v=(0,eQ.P)(),f=(0,w.Jk)(l),p=f.searchContext,h=f.searchValue,g=f.userInputSugTrigger,m=f.suggestions,y=f.hintWord,I=f.sugType,_=f.queryTrendingFetched,k=f.hotspots,S=(0,F.yj)(),b=(0,F.tv)(),M=(0,et.C)().disableSearchHint,L=(0,U.iPe)().width,x=(0,i.iH)(),T=(0,i.iH)(),N=(0,i.iH)(!1),E=(0,i.iH)(!1),j=(0,i.iH)(""),O=(0,eH._)((0,e0.OT)(!1),2),W=O[0],z=O[1];(0,e$.n)(j);var Z=(0,i.Fl)(function(){return M.value?"":a.loggedIn?y.value.title:"登录探索更多内容"}),V=(0,i.Fl)(function(){return!W.value&&k.value.some(function(e){return e.title===h.value})});function handleInputFocus(){g.value=h.value,a.loggedIn?(0,ei.uk)(30357,{fromPage:S.name}):(0,ei.uk)(30356,{fromPage:S.name})}function clearSearchValue(){var e;h.value="",j.value="",g.value=j.value,m.value=[],null===(e=x.value)||void 0===e||e.focus()}function handleSearchActivity(e){if("artificial"===e.type&&!!e.link){var t=e.link;if(d.getJumpType(t)===eK.jU.default)var n=setTimeout(function(){d.openActivityPanel(t),clearTimeout(n)},2e3);else window.open(e.link)}}function setEmptySearchValue(){var e;return h.value=null!==(e=y.value.searchWord)&&void 0!==e?e:"小红书网页版",h.value}var Y=eY()((n=(0,D._)(function(e,t){var n,r,i;return(0,R.Jh)(this,function(u){switch(u.label){case 0:return i=encodeURIComponent(r=""===e.trim()?setEmptySearchValue():e),g.value=h.value,[4,a.getUserInfo()];case 1:if(u.sent(),!a.loggedIn)return o.openLogin(eS.yC.SearchBox),[2];if(l.isSearchFromAiInput=!1,l.initSuggestions(),null===(n=x.value)||void 0===n||n.blur(),eP.A.updateState(eP.T.searchCount,function(e){return(null!=e?e:0)+1}),handleSearchActivity(t),S.name===er.Z.SearchName&&l.searchContext.keyword===r)return v.emitSearchStart(r),[2];return p.value.keyword=r,b.push({name:er.Z.SearchName,query:{keyword:i,source:c.currentPageInstance}}),I.value=null,[2]}})}),function(e,t){return n.apply(this,arguments)}),500,{leading:!0,trailing:!1});function reportSugRelatedInfo(e,t){"queryTrending"===I.value?(0,eX._l)("click",(0,eX.KU)(e,h.value,t,S.name),t):(0,eX.$I)("click",t,(0,eX.IP)(j.value,m.value.map(function(e){return null==e?void 0:e.text}),h.value,e,S.name,t))}function userActiveSearch(e){var t=m.value.findIndex(function(e){return e.text===h.value}),n=t>=0?m.value[t]:{};if(t>=0)n=m.value[t],reportSugRelatedInfo(t,n);else if(j.value){var r,i=null!==(r=y.value.searchWord)&&void 0!==r?r:"小红书网页版";(0,eX.Pp)(e,i,S.name)}else n=y.value,(0,eX.km)("click",(0,eX.z7)(S.name),n);Y(e,n)}function toShowInput(){var e;r("toShowOtherHeaderElement",!1),E.value=!0,N.value=!0,null===(e=x.value)||void 0===e||e.focus()}function cancel(){r("toShowOtherHeaderElement",!0),E.value=!1,N.value=!1}function handelEnterEvent(){userActiveSearch(h.value)}function handleUserInput(e){var t=e.target;v.emitInput(t.value.trim())}function searchHandler(){v.onBeforeFocus(function(){l.getSuggestions(h.value),l.initHistory()}),v.onInput(function(e){var t=e.keyword;j.value=t,g.value=j.value,l.getSuggestions(j.value)})}function setupLoginEmitter(){var e=a.$mitt.on("onLogin",(0,D._)(function(){return(0,R.Jh)(this,function(t){switch(t.label){case 0:return[4,a.getUserInfo()];case 1:return t.sent(),l.getSuggestions(h.value),o.recentFrom===eS.yC.SearchBox&&S.name!==er.Z.SearchName&&userActiveSearch(h.value),e(),[2]}})}));!a.loggedIn&&(0,ei.uk)(30355,{fromPage:S.name})}function initializeSearchValue(){if(S.path.startsWith(er.Z.SearchPath))try{var e,t;h.value=null!==(t=decodeURIComponent(null===(e=S.query)||void 0===e?void 0:e.keyword))&&void 0!==t?t:""}catch(e){h.value=""}S.name===er.Z.SearchName&&(j.value=h.value)}function handleHotspotClick(){var e;null===(e=x.value)||void 0===e||e.focus()}function handleSearchBoxEnter(){g.value=h.value,j.value=h.value,(0,ei.uk)(53948)}return(0,i.YP)(function(){return S.name},function(e){if(e===er.Z.SearchName||e===er.Z.SearchNoteName){var t,n=(null==S?void 0:S.query.keyword)||p.value.keyword;if(n)try{h.value=null!==(t=decodeURIComponent(n))&&void 0!==t?t:""}catch(e){h.value=""}p.value.keyword=h.value;return}h.value=""}),(0,i.bv)(function(){searchHandler(),setupLoginEmitter(),initializeSearchValue(),v.emitBeforeFocus(),(0,U.ORN)(x,"focus",function(){return z(!0)}),(0,U.ORN)(x,"blur",function(){return z(!1)})}),(0,F.ao)(function(e,t,n){e.name===er.Z.SearchName&&(l.searchPageHasPrevRoute=!0),l.initSuggestions(),_.value=!1,n()}),(0,i.m0)(function(){L.value>H.n4.MIN&&(r("toShowOtherHeaderElement",!0),E.value=!1,N.value=!1)}),(0,i.YP)(_,function(e){e&&(0,eX.km)("impression",(0,eX.z7)(S.name),y.value)}),function(t,n){var r;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",{ref_key:"inputWrapperEl",ref:T,class:(0,i.C_)(["input-box",{"nio-search-input-width":(null===(r=(0,i.SU)(c))||void 0===r?void 0:r.isNIO)&&(0,i.SU)(S).name===(0,i.SU)(er.Z).SearchName,minWidthShowSearchClass:(0,i.SU)(N)}]),onMouseenter:handleSearchBoxEnter},[(0,i.wy)((0,i._)("input",{id:"search-input",ref_key:"inputEl",ref:x,"onUpdate:modelValue":n[0]||(n[0]=function(e){return(0,i.dq)(h)?h.value=e:null}),type:"text",class:(0,i.C_)(["search-input",{minWidthShowSearchClass:(0,i.SU)(N),showSearcHotspotTag:(0,i.SU)(V)}]),spellcheck:!1,placeholder:(0,i.SU)(Z),autocomplete:"off",onFocus:handleInputFocus,onKeypress:(0,i.D2)(handelEnterEvent,["enter"]),onInput:handleUserInput},null,42,e1),[[i.nr,(0,i.SU)(h)]]),(0,i.SU)(V)?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"hotspot-tag",onClick:handleHotspotClick},[(0,i.Wm)((0,i.SU)(P.i8),{size:"16",icon:"hotspot"}),(0,i._)("span",e3,(0,i.zw)((0,i.SU)(h)),1)])):(0,i.kq)("",!0),(0,i._)("div",{class:(0,i.C_)(["input-button",{minWidthShowSearchClass:(0,i.SU)(N)}])},[(0,i.SU)(h)?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"close-icon",onClick:clearSearchValue},[(0,i.Wm)((0,i.SU)(P.i8),{size:"20",icon:"close"})])):(0,i.kq)("",!0),(0,i._)("div",{class:"search-icon",onClick:n[1]||(n[1]=function(e){return userActiveSearch((0,i.SU)(h))})},[(0,i.Wm)((0,i.SU)(P.i8),{size:"20",icon:"search"})])],2),(0,i.Wm)(s.Z,null,{default:(0,i.w5)(function(){return[(0,i.Wm)(eG.Z,{class:(0,i.C_)(["sug-pad",{minWidthShowSearchClass:(0,i.SU)(N)}]),"suggest-data-source":(0,i.SU)(l).suggestions,"max-length":10,"user-input":(0,i.SU)(j),"search-input-el":(0,i.SU)(x),"search-input-wrapper-el":(0,i.SU)(T),onSearch:n[2]||(n[2]=function(e){return(0,i.SU)(Y)((0,i.SU)(h),e)}),onGetSuggestion:n[3]||(n[3]=function(e,t){return(0,i.SU)(l).getSuggestions(e,t)}),onClearSugs:(0,i.SU)(l).initSuggestions},null,8,["class","suggest-data-source","user-input","search-input-el","search-input-wrapper-el","onClearSugs"])]}),_:1})],34),(0,i.SU)(N)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)((0,i.SU)(P.zx),{key:0,icon:"search",class:(0,i.C_)(["min-width-search-icon",{"transparent-icon":null==e?void 0:e.transparent}]),onClick:n[4]||(n[4]=function(e){return toShowInput()})},null,8,["class"])),(0,i.SU)(E)?((0,i.wg)(),(0,i.j4)((0,i.SU)(P.zx),{key:1,type:"text",class:"cancel-btn",onClick:n[5]||(n[5]=function(e){return cancel()})},{default:(0,i.w5)(function(){return n[6]||(n[6]=[(0,i.Uk)(" 取消 ")])}),_:1,__:[6]})):(0,i.kq)("",!0)],64)}}});let e4=(0,x.default)(e2,[["__scopeId","data-v-4208f890"]]);var e5=["src"],e8=["src"],e9={key:2,class:"right"},e6=(0,i.aZ)({__name:"AiHeaderNormal",props:{hideRightNav:{type:Boolean,default:!1},showLogo:{type:Boolean,default:!0}},setup:function(e){(0,i.sj)(function(e){return{"609012b2":s}});var t=(0,et.C)().LayoutGray,n=(0,F.yj)(),r=(0,u.s6)(),a=(0,i.iH)(!0),o=(0,i.Fl)(function(){var e,t;return null!==(t=null===(e=n.meta)||void 0===e?void 0:e.transparentHeader)&&void 0!==t&&t}),l=(0,q.L)();function showOtherElement(e){a.value=e}function backAndClearSearchValue(){(0,ei.uk)(30477,{fromPage:n.name})}var s="".concat(H.n4.MAX,"px"),c=(0,Z.T)({targetPath:er.Z.ExplorePath,pageInstance:n.meta.pageInstance,isOwnPage:l.isOwnPage});return function(e,u){var l,s,d=(0,i.up)("router-link");return(null===(s=(0,i.SU)(n))||void 0===s?void 0:null===(l=s.meta)||void 0===l?void 0:l.noHeader)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,i.C_)(["header-container",{transparent:o.value,gray:(0,i.SU)(t)}])},[(0,i._)("header",{class:(0,i.C_)((0,i.SU)(n).meta.headerStyle),style:(0,i.j5)("header-hide"===(0,i.SU)(n).meta.headerStyle?{display:"none"}:{})},[a.value&&e.showLogo?((0,i.wg)(),(0,i.j4)(d,{key:0,id:"link-guide",to:(0,i.SU)(c),style:{display:"flex"},onClick:u[0]||(u[0]=function(e){return backAndClearSearchValue()})},{default:(0,i.w5)(function(){var e;return[(null===(e=(0,i.SU)(r))||void 0===e?void 0:e.isNIO)?((0,i.wg)(),(0,i.iD)("img",{key:0,crossorigin:"anonymous",width:"auto",height:"28",style:{"pointer-events":"none"},src:(0,i.SU)(en.rU).nioLogo},null,8,e5)):((0,i.wg)(),(0,i.iD)("img",{key:1,crossorigin:"anonymous",class:"header-logo",style:{"pointer-events":"none"},src:(0,i.SU)(en.rU).mainLogo},null,8,e8))]}),_:1},8,["to"])):(0,i.kq)("",!0),(0,i.SU)(n).meta.showSearchBox?((0,i.wg)(),(0,i.j4)(e4,{key:1,transparent:o.value,onToShowOtherHeaderElement:showOtherElement},null,8,["transparent"])):(0,i.kq)("",!0),a.value&&!e.hideRightNav?((0,i.wg)(),(0,i.iD)("div",e9,[(0,i.Wm)(eq)])):(0,i.kq)("",!0)],6)],2))}}});let e7=(0,x.default)(e6,[["__scopeId","data-v-953f0f7a"]]);var te=["data-logged"],tt={class:"main-container"},tn=(0,i.aZ)({__name:"AILayout",setup:function(e){(0,i.sj)(function(e){return{"2f7a5a2e":m}});var t=(0,i.RC)(function(){return n.e("3906").then(n.bind(n,34619))}),r=(0,i.RC)(function(){return Promise.all([n.e("9149"),n.e("3167")]).then(n.bind(n,61045))}),a=(0,eS.r0)(),o=(0,F.yj)(),l=(0,q.L)(),s=(0,u.s6)(),c=(0,j.Z)().isMobile,d=(0,U.iPe)().width,v=(0,O.p)(),f=v.isExploreRoute,p=v.isAiSearchRoute,h=v.isLiveListRoute,g=(0,i.Fl)(function(){return d.value<H.n4.SM});function onLoginSuccess(e){return _onLoginSuccess.apply(this,arguments)}function _onLoginSuccess(){return(_onLoginSuccess=(0,D._)(function(e){var t,n;return(0,R.Jh)(this,function(r){switch(r.label){case 0:t={type:e,api:"getApiSnsWebV2UserMe",reportType:"getUserInfo",time:Date.now()},r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l.getUserInfo({disableCache:!0,reloadOnFail:!0})];case 2:return r.sent(),(0,P.zM)("登录成功"),eP.A.updateState(eP.T.visitorLogin,function(){return!0}),(0,eU.Iq)((0,E._)((0,N._)({},t),{status:"success"})),[3,4];case 3:return console.warn(n=r.sent()),(0,eU.Iq)((0,E._)((0,N._)({},t),{status:"fail"}),JSON.stringify({errMsg:n.data,errorCode:n.status})),[3,4];case 4:return[2]}})})).apply(this,arguments)}function addAiLayoutActiveClass(){document.documentElement.classList.add("ai-layout-active"),document.body.classList.add("ai-layout-active");var e=document.getElementById("app");e&&e.classList.add("ai-layout-active")}function removeAiLayoutActiveClass(){document.documentElement.classList.remove("ai-layout-active"),document.body.classList.remove("ai-layout-active");var e=document.getElementById("app");e&&e.classList.remove("ai-layout-active")}useMiniScreenReport("ai_search"),(0,i.wF)(function(){l.$mitt.on("onLogin",function(e){(0,ei.kj)(24450,{channelType:e}),onLoginSuccess(e)})}),(0,i.bv)(function(){addAiLayoutActiveClass()}),(0,i.SK)(function(){removeAiLayoutActiveClass()});var m="".concat(H.n4.MAX,"px");return function(e,n){var u,d,v,m,y=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.SU)(s).feedbackPopupVisible?((0,i.wg)(),(0,i.j4)((0,i.SU)(r),{key:0})):(0,i.kq)("",!0),(0,i.SU)(a).showLogin?((0,i.wg)(),(0,i.j4)((0,i.SU)(t),{key:1})):(0,i.kq)("",!0),(0,i._)("div",{id:"global","data-logged":+!!(0,i.SU)(l).loggedIn,class:(0,i.C_)(["layout ai-layout",{limit:null===(u=(0,i.SU)(o).meta)||void 0===u?void 0:u.showSideBar,mobile:(0,i.SU)(c)}])},[((0,i.SU)(f)||(0,i.SU)(h))&&!(0,i.SU)(g)?((0,i.wg)(),(0,i.j4)(eO,{key:0})):(0,i.SU)(g)?((0,i.wg)(),(0,i.j4)(e7,{key:1,"show-logo":""})):(0,i.SU)(g)||(0,i.SU)(p)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(e7,{key:2,"show-logo":!1,"hide-right-nav":""})),(0,i._)("div",tt,[(null===(d=(0,i.SU)(o).meta)||void 0===d?void 0:d.showSideBar)?((0,i.wg)(),(0,i.j4)(eR,{key:0})):(0,i.kq)("",!0),(0,i._)("div",{class:(0,i.C_)(["main-content",{"with-side-bar":null===(v=(0,i.SU)(o).meta)||void 0===v?void 0:v.showSideBar,"with-side-bar-collapse":(0,i.SU)(s).sideCollapse}])},[(0,i.Wm)(y,null,{default:(0,i.w5)(function(e){var t,n,r=e.Component;return[((0,i.wg)(),(0,i.j4)(i.Ob,{max:1},[(null===(t=(0,i.SU)(o).meta)||void 0===t?void 0:t.keepAlive)?((0,i.wg)(),(0,i.j4)((0,i.LL)(r),{key:0})):(0,i.kq)("",!0)],1024)),(null===(n=(0,i.SU)(o).meta)||void 0===n?void 0:n.keepAlive)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)((0,i.LL)(r),{key:0}))]}),_:1})],2),(null===(m=(0,i.SU)(o).meta)||void 0===m?void 0:m.showBottomMenu)?((0,i.wg)(),(0,i.j4)($,{key:1})):(0,i.kq)("",!0)])],10,te)],64)}}});let tr=(0,x.default)(tn,[["__scopeId","data-v-3098a864"]]);var ti={layoutNamespace:z.G.AISearch,rootLayout:(0,i.Xl)(tr),exploreLayout:(0,i.Xl)(T)},ta=n(60641),to={class:"channel-list"},tu={key:1,class:"bottom-channel"},tl=["target","href","onClick"],ts={class:"text"},tc={class:"text"},td=(0,i.aZ)({__name:"BottomMenu",setup:function(e){var t=(0,W.rN)(),n=(0,u.s6)(),r=(0,q.L)(),a=(0,_.NW)(),o=(0,F.yj)();function targetPath(e){var t;return(0,Z.m)({channel:e,isOwnPage:r.isOwnPage,pageInstance:(null===(t=o.meta)||void 0===t?void 0:t.pageInstance)||"",category:a.query.category})}return function(e,r){var a=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",{class:(0,i.C_)(["bottom-menu",{"force-visible":(0,i.SU)(n).currentLayout===(0,i.SU)(z.G).NIO}])},[(0,i._)("div",to,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(t).filter(function(e){return e.visible}),function(e){var t,n;return(0,i.wg)(),(0,i.iD)(i.HY,{key:e.name},[e.component?((0,i.wg)(),(0,i.j4)((0,i.LL)(e.component),{key:0,active:e.active,onClick:e.onClick},null,8,["active","onClick"])):((0,i.wg)(),(0,i.iD)("div",tu,[e.href?((0,i.wg)(),(0,i.iD)("a",{key:0,target:null!==(t=e.target)&&void 0!==t?t:"_blank",href:e.href,class:"bottom-channel",onClick:e.onClick},[(0,i.Wm)((0,i.SU)(P.i8),{icon:e.icon,size:"24"},null,8,["icon"]),(0,i._)("span",ts,(0,i.zw)(e.label),1)],8,tl)):((0,i.wg)(),(0,i.j4)(a,{key:1,target:null!==(n=e.target)&&void 0!==n?n:"_blank",to:targetPath(e),class:"bottom-channel",onClick:e.onClick},{default:(0,i.w5)(function(){return[(0,i.Wm)((0,i.SU)(P.i8),{icon:e.icon,size:"24"},null,8,["icon"]),(0,i._)("span",tc,(0,i.zw)(e.label),1)]}),_:2},1032,["target","to","onClick"]))]))],64)}),128))])],2)}}});let tv=(0,x.default)(td,[["__scopeId","data-v-78ed685f"]]);var tf=n(23755),tp={class:"app-info outside"},th={class:"icp-info"},tg=["title","href"],tm=(0,i.aZ)({__name:"BottomInfo",setup:function(e){var t,n,r=(0,i.iH)(),a=(0,i.iH)(!1),l=(0,F.tv)(),s=(0,F.yj)(),c=(0,W.TX)(),d=(0,u.s6)(),v=(0,i.Fl)(function(){return d.appSettings.ICPInfoList});function addDesktop(){return _addDesktop.apply(this,arguments)}function _addDesktop(){return(_addDesktop=(0,D._)(function(){var e,t;return(0,R.Jh)(this,function(n){switch(n.label){case 0:if((0,ea.$G)())return(0,P.Am)("暂未支持当前浏览器，可用 Chrome 继续添加～"),[2];if(!d.pwaAddDesktopPrompt)return(0,P.Am)("已经安装成功"),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),d.easyAccessModalVisible.addDesktopGuide=!0,[4,null===(e=d.pwaAddDesktopPrompt)||void 0===e?void 0:e.prompt()];case 2:return"accepted"===(t=n.sent()).outcome&&(d.pwaAddDesktopPrompt=void 0),(0,ei.uk)(37662,{componentName:"accepted"===t.outcome?"1":"0"}),[3,4];case 3:return console.error(n.sent()),[3,4];case 4:return[2]}})})).apply(this,arguments)}var f=(t={},(0,o._)(t,W.kx.AddDesktop,38338),(0,o._)(t,W.kx.AddCollect,38336),(0,o._)(t,W.kx.Keyboard,38334),(0,o._)(t,W.kx.MiniWindow,38340),t);function handleImpression(e){var t=f[e];t&&(0,ei.uk)(t)}var p=(n={},(0,o._)(n,W.kx.AddDesktop,38339),(0,o._)(n,W.kx.AddCollect,38337),(0,o._)(n,W.kx.Keyboard,38335),(0,o._)(n,W.kx.MiniWindow,38341),n);function handleEasyAccess(e){var t=p[e];(0,ei.uk)(t),e===W.kx.AddDesktop?addDesktop():W.kx.AddCollect===e?d.easyAccessModalVisible.collectGuide=!0:W.kx.Keyboard===e?d.easyAccessModalVisible.keyboardList=!0:W.kx.MiniWindow===e&&openMiniWindow()}function handleItemClick(e){Object.values(W.kx).includes(e.name)&&handleEasyAccess(e.name),a.value=!1,(0,ei.uk)(35037,{gotoPage:e.routeName})}function handleMenuClick(){a.value=!a.value,(0,ei.uk)(37018)}function listenEasyAccess(){d.$mitt.on("easyAccess",function(e){var t=e.type,n=e.name;"impression"===t?handleImpression(n):handleEasyAccess(n)})}function openMiniWindow(){if(0===window.screenX&&0===window.screenY){(0,P.Am)("退出全屏后打开小窗模式");return}var e=window.screen.availWidth,t=440;e<H.n4.LG&&e>=H.n4.MID?t=400:e<H.n4.MID&&(t=360);var n=l.resolve({query:(0,E._)((0,N._)({},s.query),{mini:1})}),r=window.screenX+window.innerWidth-t;window.open(n.fullPath,"_blank","top=".concat(window.screenY,",left=").concat(r,",width=").concat(t,",height=").concat(window.innerHeight,",menubar=no,toolbar=no,status=no,scrollbars=yes"))}return(0,i.wF)(function(){listenEasyAccess(),(0,U.ORN)(document,"click",function(e){var t,n=e.target;if(null===(t=r.value)||void 0===t?!void 0:!t.contains(n))a.value=!1})}),function(e,t){return(0,i.wg)(),(0,i.iD)("div",{id:"explore-guide-menu",ref_key:"informationEl",ref:r,class:"information-container"},[(0,i.SU)(a)?((0,i.wg)(),(0,i.iD)("div",{key:0,class:"information-pad",onClick:t[1]||(t[1]=(0,i.iM)(function(){},["stop"]))},[(0,i.Wm)(eg,{mode:"normal",items:(0,i.SU)(c),onItemClick:t[0]||(t[0]=function(e){handleItemClick(e)}),onImpression:handleImpression},null,8,["items"])])):(0,i.kq)("",!0),(0,i._)("div",{class:"information-wrapper",onClick:handleMenuClick},[(0,i.Wm)((0,i.SU)(P.i8),{size:"24",icon:"menu",class:"information-icon"}),t[2]||(t[2]=(0,i.Uk)(" 更多 "))]),(0,i._)("div",tp,[(0,i._)("p",th,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(v),function(e,t){return(0,i.wg)(),(0,i.iD)(i.HY,{key:e.title},[(0,i._)("a",{title:e.title,href:e.link,target:"_blank",class:"icp-text"},(0,i.zw)(e.label),9,tg),(0,i.Uk)(" "+(0,i.zw)(t!==(0,i.SU)(v).length-1?" | ":""),1)],64)}),128))]),t[3]||(t[3]=(0,i._)("div",{class:"corp-info"},[(0,i._)("p",null,"\xa9 2014-2024"),(0,i._)("p",null,"行吟信息科技（上海）有限公司"),(0,i._)("p",null,"地址：上海市黄浦区马当路388号C座"),(0,i._)("p",null,"电话：9501-3888")],-1))])],512)}}});let ty=(0,x.default)(tm,[["__scopeId","data-v-0370e1e6"]]);var tI={class:"channel-list"},t_={class:"channel-list-content"},tw=["id"],tk=["target","href","onClick"],tS={class:"channel"},tb={class:"channel"},tC={class:"app-info"},tM={class:"icp-info"},tA=["title","href"],tL=(0,i.aZ)({__name:"SideBar",setup:function(e){var t=(0,i.RC)(function(){return n.e("3644").then(n.bind(n,25811))}),r=(0,et.C)().LayoutGray,a=(0,W.rN)(),o=useLoginPrompt().loginPromptVisible,l=(0,_.NW)(),c=(0,tf.aR)(),d=(0,q.L)(),v=(0,u.s6)(),f=(0,F.yj)(),p=(0,i.Fl)(function(){return v.appSettings.ICPInfoList});function targetPath(e){var t=f.meta.pageInstance,n="";return e.name===er.Z.ExploreName?(t="web_explore_feed",n=l.query.category):e.name===er.Z.LiveListName&&(t="web_live_list",n=c.query.category),(0,Z.m)({channel:e,isOwnPage:d.isOwnPage,pageInstance:t,category:n})}return(0,i.bv)(function(){a.value.forEach(function(e){e.name===er.Z.LiveListName&&(0,ei.eJ)(93032)})}),function(e,n){var u=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",{class:(0,i.C_)(["side-bar",{gray:(0,i.SU)(r)}]),onScrollOnce:n[0]||(n[0]=function(){(0,i.SU)(ei.uk)(30428)})},[(0,i._)("ul",tI,[(0,i._)("div",t_,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(a).filter(function(e){return e.visible}),function(e){var t,n;return(0,i.wg)(),(0,i.iD)(i.HY,{key:e.name},[e.component?((0,i.wg)(),(0,i.j4)((0,i.LL)(e.component),{key:0,active:e.active,onClick:e.onClick},null,8,["active","onClick"])):((0,i.wg)(),(0,i.iD)("li",{key:1,id:e.name===(0,i.SU)(er.Z).ExploreName?"explore-guide-refresh":"",class:(0,i.C_)({"active-channel":e.active})},[e.href?((0,i.wg)(),(0,i.iD)("a",{key:0,target:null!==(t=e.target)&&void 0!==t?t:"_blank",href:e.href,class:"link-wrapper",onClick:e.onClick},[(0,i.Wm)((0,i.SU)(P.i8),{icon:e.icon,size:"24",class:"icon-wrapper"},null,8,["icon"]),(0,i._)("span",tS,(0,i.zw)(e.label),1)],8,tk)):((0,i.wg)(),(0,i.j4)(u,{key:1,target:null!==(n=e.target)&&void 0!==n?n:"_blank",to:targetPath(e),class:"link-wrapper",onClick:e.onClick},{default:(0,i.w5)(function(){return[(0,i.Wm)((0,i.SU)(P.i8),{icon:e.icon,size:"24",class:"icon-wrapper"},null,8,["icon"]),(0,i._)("span",tb,(0,i.zw)(e.label),1)]}),_:2},1032,["target","to","onClick"]))],10,tw))],64)}),128)),((0,i.wg)(),(0,i.j4)(i.n4,null,{default:(0,i.w5)(function(){return[(0,i.Wm)(s.Z,null,{default:(0,i.w5)(function(){return[(0,i.Wm)((0,i.SU)(t),{visible:(0,i.SU)(o)},null,8,["visible"])]}),_:1})]}),_:1}))]),(0,i._)("div",tC,[(0,i._)("p",tM,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(p),function(e,t){return(0,i.wg)(),(0,i.iD)(i.HY,{key:e.title},[(0,i._)("a",{title:e.title,href:e.link,target:"_blank",class:"icp-text"},(0,i.zw)(e.label),9,tA),(0,i.Uk)(" "+(0,i.zw)(t!==(0,i.SU)(p).length-1?" | ":""),1)],64)}),128))]),n[1]||(n[1]=(0,i._)("div",{class:"corp-info"},[(0,i._)("p",null,"\xa9 2014-2024"),(0,i._)("p",null,"行吟信息科技（上海）有限公司"),(0,i._)("p",null,"地址：上海市黄浦区马当路388号C座"),(0,i._)("p",null,"电话：9501-3888")],-1))]),(0,i.Wm)((0,i.SU)(P.iz))]),(0,i.Wm)(ty)],34)}}});let tx=(0,x.default)(tL,[["__scopeId","data-v-877dc3e0"]]);var tT=["src"],tD=["src"],tN={key:2,class:"right"},tE=(0,i.aZ)({__name:"Index",setup:function(e){(0,i.sj)(function(e){return{"557292a5":s}});var t=(0,et.C)().LayoutGray,n=(0,F.yj)(),r=(0,u.s6)(),a=(0,i.iH)(!0),o=(0,i.Fl)(function(){var e,t;return null!==(t=null===(e=n.meta)||void 0===e?void 0:e.transparentHeader)&&void 0!==t&&t}),l=(0,q.L)();function showOtherElement(e){a.value=e}function backAndClearSearchValue(){(0,ei.uk)(30477,{fromPage:n.name})}var s="".concat(H.n4.MAX,"px"),c=(0,Z.T)({targetPath:er.Z.ExplorePath,pageInstance:n.meta.pageInstance,isOwnPage:l.isOwnPage});return function(e,u){var l,s,d,v,f=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",{class:(0,i.C_)(["header-container",{transparent:o.value,gray:(0,i.SU)(t),only_logo:null===(s=(0,i.SU)(n))||void 0===s?void 0:null===(l=s.meta)||void 0===l?void 0:l.onlyLogo}])},[(0,i._)("header",{class:(0,i.C_)((0,i.SU)(n).meta.headerStyle),style:(0,i.j5)("header-hide"===(0,i.SU)(n).meta.headerStyle?{display:"none"}:{})},[a.value?((0,i.wg)(),(0,i.j4)(f,{key:0,id:"link-guide",to:(0,i.SU)(c),style:{display:"flex"},onClick:u[0]||(u[0]=function(e){return backAndClearSearchValue()})},{default:(0,i.w5)(function(){return[(0,i.SU)(r).isNIO?((0,i.wg)(),(0,i.iD)("img",{key:0,crossorigin:"anonymous",width:"auto",height:"28",style:{"pointer-events":"none"},src:(0,i.SU)(en.rU).nioLogo},null,8,tT)):((0,i.wg)(),(0,i.iD)("img",{key:1,crossorigin:"anonymous",class:"header-logo",style:{"pointer-events":"none"},src:(0,i.SU)(en.rU).mainLogo},null,8,tD))]}),_:1},8,["to"])):(0,i.kq)("",!0),(0,i.SU)(n).meta.showSearchBox?((0,i.wg)(),(0,i.j4)(e4,{key:1,transparent:o.value,onToShowOtherHeaderElement:showOtherElement},null,8,["transparent"])):(0,i.kq)("",!0),!a.value||(null===(v=(0,i.SU)(n))||void 0===v?void 0:null===(d=v.meta)||void 0===d?void 0:d.onlyLogo)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",tN,[(0,i.Wm)(eq)]))],6)],2)}}});let tR=(0,x.default)(tE,[["__scopeId","data-v-10865b47"]]);var tU=["data-logged"],tP={class:"main-container"},tF=(0,i.aZ)({__name:"DefaultLayout",setup:function(e){(0,i.sj)(function(e){return{facd06d4:f}});var t=(0,i.RC)(function(){return n.e("3906").then(n.bind(n,34619))}),r=(0,i.RC)(function(){return Promise.all([n.e("9149"),n.e("3167")]).then(n.bind(n,61045))}),a=(0,eS.r0)(),o=(0,F.yj)(),s=(0,q.L)(),c=(0,u.s6)(),d=(0,j.Z)().isMobile,v=(0,l.as)().refetch;function onLoginSuccess(e){return _onLoginSuccess.apply(this,arguments)}function _onLoginSuccess(){return(_onLoginSuccess=(0,D._)(function(e){var t,n;return(0,R.Jh)(this,function(r){switch(r.label){case 0:t={type:e,api:"getApiSnsWebV2UserMe",reportType:"getUserInfo",time:Date.now()},r.label=1;case 1:return r.trys.push([1,3,,4]),[4,s.getUserInfo({disableCache:!0,reloadOnFail:!0})];case 2:return r.sent(),(0,P.zM)("登录成功"),eP.A.updateState(eP.T.visitorLogin,function(){return!0}),(0,eU.Iq)((0,E._)((0,N._)({},t),{status:"success"})),v(),[3,4];case 3:return console.warn(n=r.sent()),(0,eU.Iq)((0,E._)((0,N._)({},t),{status:"fail"}),JSON.stringify({errMsg:n.data,errorCode:n.status})),[3,4];case 4:return[2]}})})).apply(this,arguments)}useMiniScreenReport("old"),(0,i.wF)(function(){s.$mitt.on("onLogin",function(e){(0,ei.kj)(24450,{channelType:e}),onLoginSuccess(e)})});var f="".concat(H.n4.MAX,"px");return function(e,n){var u=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.SU)(c).feedbackPopupVisible?((0,i.wg)(),(0,i.j4)((0,i.SU)(r),{key:0})):(0,i.kq)("",!0),(0,i.SU)(a).showLogin?((0,i.wg)(),(0,i.j4)((0,i.SU)(t),{key:1})):(0,i.kq)("",!0),(0,i._)("div",{id:"global","data-logged":+!!(0,i.SU)(s).loggedIn,class:(0,i.C_)(["layout",{limit:(0,i.SU)(o).meta.showSideBar,mobile:(0,i.SU)(d)}])},[(0,i.Wm)(tR),(0,i._)("div",tP,[(0,i.SU)(o).meta.showSideBar?((0,i.wg)(),(0,i.j4)(tx,{key:0})):(0,i.kq)("",!0),(0,i._)("div",{class:(0,i.C_)(["main-content",{"with-side-bar":(0,i.SU)(o).meta.showSideBar}])},[(0,i.Wm)(u,null,{default:(0,i.w5)(function(e){var t=e.Component;return[((0,i.wg)(),(0,i.j4)(i.Ob,{max:1},[(0,i.SU)(o).meta.keepAlive?((0,i.wg)(),(0,i.j4)((0,i.LL)(t),{key:0})):(0,i.kq)("",!0)],1024)),(0,i.SU)(o).meta.keepAlive?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)((0,i.LL)(t),{key:0}))]}),_:1})],2),(0,i.SU)(o).meta.showBottomMenu?((0,i.wg)(),(0,i.j4)(tv,{key:1})):(0,i.kq)("",!0)])],10,tU)],64)}}});let tj=(0,x.default)(tF,[["__scopeId","data-v-588762bb"]]);var tO={layoutNamespace:z.G.DEFAULT,rootLayout:(0,i.Xl)(tj),exploreLayout:(0,i.Xl)(ta.Z)},tH=n(5977),tW=n(14759),tz=n(91663),tB={class:"collection-list-item-title"},tZ={class:"collection-list-item-tag"},tq=(0,i.aZ)({__name:"CollectionListItem",props:{cover:{},title:{},noteId:{},index:{},xsecToken:{}},setup:function(e){(0,i.sj)(function(e){return{"987b0b72":(0,i.SU)(r),"442acb1c":(0,i.SU)(o)}});var t=(0,k.E)(),n=(0,tW.y)().openNote,r=(0,i.Fl)(function(){return"calc((100vw - ".concat(7*t.gap.horizontal,"px) / 6)")}),a=(0,i.Fl)(function(){return"radial-gradient(135.71% 50% at 52.53% 50%, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.08) 33.31%, rgba(0, 0, 0, 0.5) 84.11%), url(".concat(e.cover,") lightgray 50% / cover no-repeat")}),o=(0,i.Fl)(function(){return"".concat(t.gap.horizontal,"px")}),u={noteId:e.noteId,prevRoute:tz.Dq.NioCollectionList,prevRoutePath:er.Z.ExplorePath,query:{nioTitle:"".concat(e.title),xsec_token:e.xsecToken,xsec_source:"pc_nio"},type:"video"};function goToNoteDetail(){n(u),(0,ei.Pj)(38832,{componentId:"".concat(e.index,"-").concat(e.title),componentName:e.title})}return(0,i.bv)(function(){(0,ei.Pj)(38831,{componentId:"".concat(e.index,"-").concat(e.title),componentName:e.title})}),function(t,n){return(0,i.wg)(),(0,i.iD)("div",{class:"collection-list-item-wrapper",style:(0,i.j5)({background:(0,i.SU)(a)}),onClick:goToNoteDetail},[(0,i._)("div",tB,(0,i.zw)(e.title),1),(0,i._)("div",tZ,[(0,i.Wm)((0,i.SU)(P.i8),{icon:"nioPlay",size:"12"})]),n[0]||(n[0]=(0,i._)("div",{class:"collection-list-item-decorate decorate1"},null,-1)),n[1]||(n[1]=(0,i._)("div",{class:"collection-list-item-decorate decorate2"},null,-1))],4)}}});let tV=(0,x.default)(tq,[["__scopeId","data-v-355e9ea1"]]);var tY=n(95841),tG={class:"collection-list-wrapper"},tJ=(0,i.aZ)({__name:"CollectionList",setup:function(e){var t=(0,tY.L)();return(0,tH.X)(t.collectionListDataSource,t.getCollectionList),function(e,n){var r;return(0,i.wg)(),(0,i.iD)("div",tG,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(null===(r=(0,i.SU)(t).collectionListDataSource)||void 0===r?void 0:r.filter(function(e){return e.cover&&e.noteId&&e.title}),function(e,t){return(0,i.wg)(),(0,i.j4)(tV,{key:t,cover:e.cover,title:e.title,"note-id":e.noteId,index:t,"xsec-token":e.xsecToken},null,8,["cover","title","note-id","index","xsec-token"])}),128))])}}});let tQ=(0,x.default)(tJ,[["__scopeId","data-v-8cb274da"]]);var tK=n(3642),tX=n(63850),t$=["data-start","data-time"],t0=(0,i.aZ)({__name:"NioFeeds",setup:function(e){(0,i.sj)(function(e){return{"5f14e45a":(0,i.SU)(u)}});var t=(0,_.NW)(),n=(0,k.E)(),r=(0,y.M)(),a=r.showFeeds,o=r.refresh,u=r.gap,l=r.pageStatus;return function(e,r){return(0,i.wg)(),(0,i.iD)("div",{id:"mfContainer",ref:"feedsWrapper",class:"feeds-page","data-start":(0,i.SU)(t).mfRequestMetaData.start,"data-time":(0,i.SU)(t).mfRequestMetaData.lasting},["error"===(0,i.SU)(l)?((0,i.wg)(),(0,i.j4)(v.Z,{key:0,refresh:(0,i.SU)(o)},null,8,["refresh"])):(0,i.kq)("",!0),r[0]||(r[0]=(0,i._)("div",{class:"rec-title"}," 视频精选 ",-1)),(0,i.Wm)((0,i.SU)(tQ)),r[1]||(r[1]=(0,i._)("div",{class:"rec-title",style:{"margin-top":"24px"}}," 推荐 ",-1)),(0,i.Wm)(d.Z,{visible:"placeholderFeeds"===(0,i.SU)(l)&&(0,i.SU)(a)&&(0,i.SU)(t).isUsingPlaceholderFeeds||"update"===(0,i.SU)(l)},null,8,["visible"]),("feeds"===(0,i.SU)(l)||"placeholderFeeds"===(0,i.SU)(l)||"update"===(0,i.SU)(l))&&(0,i.SU)(a)?((0,i.wg)(),(0,i.j4)(tK.Z,{key:1})):(0,i.kq)("",!0),"loading"===(0,i.SU)(l)&&(0,i.SU)(n).layoutInfoReady?((0,i.wg)(),(0,i.j4)(tX.Z,{key:2,columns:(0,i.SU)(n).columns},null,8,["columns"])):(0,i.kq)("",!0)],8,t$)}}});let t1=(0,x.default)(t0,[["__scopeId","data-v-f3020152"]]);n(15294);var t3={class:"nio-header"},t2=(0,i.aZ)({__name:"NioProfileHeader",setup:function(e){var t=(0,F.tv)(),n=(0,q.L)();return function(e,r){var a,o;return(0,i.wg)(),(0,i.iD)("div",t3,[(0,i.Uk)((0,i.zw)(null===(o=(0,i.SU)(n).userPageData)||void 0===o?void 0:null===(a=o.basicInfo)||void 0===a?void 0:a.nickname)+" ",1),(0,i._)("div",{class:"close-box",onClick:r[0]||(r[0]=function(e){return(0,i.SU)(t).back()})},[(0,i.Wm)((0,i.SU)(P.i8),{size:"18",icon:"exit"})])])}}});let t4=(0,x.default)(t2,[["__scopeId","data-v-1721c56b"]]);var t5={key:1,class:"right"},t8=(0,i.aZ)({__name:"NioSearchHeader",setup:function(e){(0,i.sj)(function(e){return{"56283aa4":u}});var t=(0,et.C)().LayoutGray,n=(0,F.yj)(),r=(0,F.tv)(),a=(0,i.iH)(!0),o=(0,i.Fl)(function(){var e,t;return null!==(t=null===(e=n.meta)||void 0===e?void 0:e.transparentHeader)&&void 0!==t&&t});function showOtherElement(e){a.value=e}var u="".concat(H.n4.MAX,"px");return function(e,u){var l,s,c;return(0,i.wg)(),(0,i.iD)("div",{class:(0,i.C_)(["header-container",{transparent:o.value,gray:(0,i.SU)(t)}])},[(0,i._)("header",{class:(0,i.C_)(null===(l=(0,i.SU)(n).meta)||void 0===l?void 0:l.headerStyle),style:(0,i.j5)((null===(s=(0,i.SU)(n).meta)||void 0===s?void 0:s.headerStyle)==="header-hide"?{display:"none"}:{})},[(0,i._)("div",{class:"close-box",onClick:u[0]||(u[0]=function(e){return(0,i.SU)(r).back()})},[(0,i.Wm)((0,i.SU)(P.i8),{size:"18",icon:"exit"})]),(null===(c=(0,i.SU)(n).meta)||void 0===c?void 0:c.showSearchBox)?((0,i.wg)(),(0,i.j4)(e4,{key:0,transparent:o.value,onToShowOtherHeaderElement:showOtherElement},null,8,["transparent"])):(0,i.kq)("",!0),a.value?((0,i.wg)(),(0,i.iD)("div",t5,[(0,i.Wm)(eq)])):(0,i.kq)("",!0)],6)],2)}}});let t9=(0,x.default)(t8,[["__scopeId","data-v-f1c85b32"]]);var t6={class:"main-container"},t7={class:"main-content"},ne=(0,i.aZ)({__name:"NioLayout",setup:function(e){(0,i.sj)(function(e){return{"49cc3a06":l}});var t=(0,eS.r0)(),r=(0,F.yj)(),a=(0,q.L)(),o=(0,i.RC)(function(){return n.e("3906").then(n.bind(n,34619))}),u=(0,i.Fl)(function(){return r.name!==er.Z.UserPageName||a.isOwnPage?r.name===er.Z.SearchName?t9:tR:t4});function onLoginSuccess(e){return _onLoginSuccess.apply(this,arguments)}function _onLoginSuccess(){return(_onLoginSuccess=(0,D._)(function(e){var t,n;return(0,R.Jh)(this,function(r){switch(r.label){case 0:t={type:e,api:"getApiSnsWebV2UserMe",reportType:"getUserInfo",time:Date.now()},r.label=1;case 1:return r.trys.push([1,3,,4]),[4,a.getUserInfo({disableCache:!0,reloadOnFail:!0})];case 2:return r.sent(),(0,P.zM)("登录成功"),eP.A.updateState(eP.T.visitorLogin,function(){return!0}),(0,eU.Iq)((0,E._)((0,N._)({},t),{status:"success"})),[3,4];case 3:return console.warn(n=r.sent()),(0,eU.Iq)((0,E._)((0,N._)({},t),{status:"fail"}),JSON.stringify({errMsg:n.data,errorCode:n.status})),[3,4];case 4:return[2]}})})).apply(this,arguments)}(0,i.wF)(function(){a.$mitt.on("onLogin",function(e){(0,ei.kj)(24450,{channelType:e}),onLoginSuccess(e)})});var l="".concat(H.n4.MAX,"px");return function(e,n){var a,l=(0,i.up)("router-view");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.SU)(t).showLogin?((0,i.wg)(),(0,i.j4)((0,i.SU)(o),{key:0})):(0,i.kq)("",!0),(0,i._)("div",{class:(0,i.C_)(["layout",{limit:null===(a=(0,i.SU)(r).meta)||void 0===a?void 0:a.showSideBar}])},[((0,i.wg)(),(0,i.j4)((0,i.LL)((0,i.SU)(u)))),(0,i._)("div",t6,[(0,i._)("div",t7,[(0,i.Wm)(l,null,{default:(0,i.w5)(function(e){var t,n,a=e.Component;return[((0,i.wg)(),(0,i.j4)(i.Ob,{max:1},[(null===(t=(0,i.SU)(r).meta)||void 0===t?void 0:t.keepAlive)?((0,i.wg)(),(0,i.j4)((0,i.LL)(a),{key:0})):(0,i.kq)("",!0)],1024)),(null===(n=(0,i.SU)(r).meta)||void 0===n?void 0:n.keepAlive)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)((0,i.LL)(a),{key:0}))]}),_:1})]),(0,i.Wm)(tv)])],2)],64)}}});let nt=(0,x.default)(ne,[["__scopeId","data-v-65b59236"]]);var nn={layoutNamespace:z.G.NIO,rootLayout:(0,i.Xl)(nt),exploreLayout:(0,i.Xl)(t1)},nr=(r={},(0,o._)(r,z.G.DEFAULT,tO),(0,o._)(r,z.G.NIO,nn),(0,o._)(r,z.G.AISearch,ti),r),ni=Symbol("LAYOUT"),isNio=function(e){return e.includes("NioBrowser")};function useLayout(){var e=(0,u.s6)(),t=(0,a.q)();function getNormalLayout(){return t.isAIMode?nr[z.G.AISearch]:nr[z.G.DEFAULT]}var n=(0,i.iH)(getNormalLayout());return(0,i.m0)(function(){if(!e.appSettings.NIO){n.value=getNormalLayout();return}e.currentLayout===z.G.NIO?n.value=nr[z.G.NIO]:n.value=getNormalLayout()}),(0,i.JJ)(ni,{layoutPreset:n}),{layoutPreset:n}}function useLayoutPreset(){return{layoutCtx:(0,i.f3)(ni)}}},92141:function(e,t,n){"use strict";n.d(t,{n:function(){return useSyncSearchHydrationState}});var r=n(93328),i=n(66002),a=n(68284);function useSyncSearchHydrationState(e){(0,r.wF)(function(){var t,n=(0,i.Jk)((0,a.R)()).searchValue,r=document.getElementById("search-input");(null==r?void 0:r.value)&&(n.value=null!==(t=null==r?void 0:r.value)&&void 0!==t?t:"",e.value=n.value)})}},34348:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var r,i=((r={}).DEFAULT="default",r.NIO="nio",r.AISearch="aisearch",r)},19736:function(e,t,n){"use strict";n.d(t,{Ln:function(){return isCustomQrcodeErrorCode},$2:function(){return isUserProfileErrorCode},iS:function(){return handleAccessLimit},SN:function(){return isNoteErrorCode}});var r=n(31547);n(97542),n(95477),n(58486),n(72169),n(19077),n(75973);var i=n(91663),a=n(70879),o=n(27337);n(87989);var u=n(93328),l=n(16337),s=n(66398),c=n(51899),d=n.n(c),v=n(66687),f=n(31907),p=n(9445),h=n(36942),g=n(6890),m=(0,u.aZ)({__name:"AccessLimitDialog",props:{noteId:{},userId:{},verifyUuid:{},msg:{},onClose:{type:Function},onTipImpression:{type:Function}},setup:function(e){var t=(0,l.PrY)(document.documentElement),n=(0,g.s6)(),r=(0,u.qj)({width:"100vw"}),i=(0,u.iH)();function handleOnClose(){t.value=!1,e.onClose()}(0,v.Z)(function(){if(!n.fullscreenLocking)handleOnClose()});var a=d()(function(){var e=document.documentElement.clientWidth,t=1024;t=e>=f.n4.LG?1024:e>=f.n4.MID?e-400:e>=f.n4.SM?e-176:e,r.width="".concat(Math.max(t,320),"px")},33.4,{leading:!0,trailing:!0});function toolNoteContainerWidth(){var e=document.querySelector("#noteContainer");e?r.width="".concat(e.clientWidth,"px"):clearInterval(i.value)}return(0,u.wF)(function(){document.querySelector("#noteContainer")?(toolNoteContainerWidth(),i.value=setInterval(toolNoteContainerWidth,16.7)):a()}),(0,l.ORN)(window,"resize",a),(0,u.bv)(function(){t.value=!0}),function(e,t){return(0,u.wg)(),(0,u.j4)((0,u.SU)(s.ce),{open:"",class:"access-modal",onClickMask:handleOnClose},{default:(0,u.w5)(function(){return[(0,u._)("div",{style:(0,u.j5)((0,u.SU)(r)),class:"access-modal-content"},[(0,u.Wm)(h.Z,{class:"access-limit-app",type:"dialog",title:e.msg,"note-id":e.noteId,"user-id":e.userId,"verify-uuid":e.verifyUuid,"on-close":handleOnClose},null,8,["title","note-id","user-id","verify-uuid"]),(0,u.Wm)(p.Z,{onOnClose:t[0]||(t[0]=function(e){return handleOnClose()}),onOnTipImpression:e.onTipImpression},null,8,["onOnTipImpression"])],4)]}),_:1})}}});let y=(0,n(5010).default)(m,[["__scopeId","data-v-5f656e39"]]);function OpenAccessLimitDialog(e){var t=document.createElement("div");document.body.appendChild(t);var n=(0,u.ri)(y,(0,o._)((0,a._)({},e),{onClose:function(){var r;n.unmount(),t&&(document.body.removeChild(t),t=null),null===(r=e.onClose)||void 0===r||r.call(e)}}));return n.mount(t),n}var I=n(64300);function isCustomQrcodeErrorCode(e){return+e>=300030&&300039>=+e}function isNoteErrorCode(e){return+e>=300030&&300035>+e}function isUserProfileErrorCode(e){return+e>=300035&&300039>=+e}function handleAccessLimit(e,t){if(!isCustomQrcodeErrorCode(null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.code))return!1;if(window.location.pathname.startsWith("/404"))return!0;var n,r,a,o=(0,I.dw)(),u=isUserProfileErrorCode(t.data.code),l=isNoteErrorCode(t.data.code),s=l&&(null===(r=window.location.pathname.match(/\/explore\/(.*)/))||void 0===r?void 0:r[1])&&o.prevRoute===i.Dq.Empty;if(u||s){var goAccessLimit=function(){var n,r;e.router.replace({path:"/404",query:{error_code:t.data.code,error_msg:encodeURIComponent(null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.msg),uuid:null!==(r=t.uuid)&&void 0!==r?r:"",redirectPath:window.location.href}})};return window.FeCaptcha?goAccessLimit():t.verifySdkInit().then(function(){goAccessLimit()}),!0}var c=safeJsonParse(null==t?void 0:null===(a=t.config)||void 0===a?void 0:a.data)||{},d=c.source_note_id,v=c.note_id||d;if(l&&v){var openDialog=function(){var e;OpenAccessLimitDialog({noteId:v,verifyUuid:t.uuid,msg:null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.msg})};return window.FeCaptcha?openDialog():t.verifySdkInit().then(function(){openDialog()}),!0}return!1}function safeJsonParse(e){try{if(e&&(void 0===e?"undefined":(0,r._)(e))==="object")return e;return JSON.parse(e)}catch(e){return null}}},73993:function(e,t,n){"use strict";n.d(t,{M:function(){return useExplore}});var r=n(41622),i=n(70879),a=n(27337),o=n(66993),u=n(377);n(87989),n(6045),n(10364),n(67673),n(42876),n(33933),n(64961),n(12996),n(59564),n(97357),n(34333),n(7608),n(92519),n(86651);var l=n(38841),s=n(51401),c=n(36370),d=n(73251),v=n(29953),f=[{key:"homefeed_recommend",label:"推荐"},{key:"homefeed.fashion_v3",label:"穿搭"},{key:"homefeed.food_v3",label:"美食"},{key:"homefeed.cosmetics_v3",label:"彩妆"},{key:"homefeed.movie_and_tv_v3",label:"影视"},{key:"homefeed.career_v3",label:"职场"},{key:"homefeed.love_v3",label:"情感"},{key:"homefeed.household_product_v3",label:"家居"},{key:"homefeed.gaming_v3",label:"游戏"},{key:"homefeed.travel_v3",label:"旅行"},{key:"homefeed.fitness_v3",label:"健身"}],p=n(98413),h=n(67156),g=n(94186),m=n(99505),y=n(91547),I=n(13285),_=n(85537),w=n(8048),k=n(28860),S=n(6890),b=n(10409),M=n(39317),L=n(66002),x=n(93328);function useExplore(){var e,t,n,T,D,N=(0,I.yj)(),E=(0,_.L)(),R=(0,w.r0)(),U=(0,k.E)(),P=(0,S.s6)(),F=(0,b.j)(),j=(0,M.NW)(),O=(0,L.Jk)(j),H=O.feeds,W=O.currentChannel,z=O.channels,Z=O.cancelFeedRequest,q=O.pageStatus,V=(0,c.rI)(),Y=V.needOpenUndertakeNote,G=V.noteId,J=V.noteFlowSource,Q=V.xsecToken,K=(0,x.iH)(!0);(0,v.Z)(),(0,x.bv)(function(){s.Z.remove("mfcache",{domain:".xiaohongshu.com"})}),(0,d.B)();var X=(0,x.iH)(0),$=(0,x.iH)(!1),ee=(0,x.Fl)(function(){var e,t;return(null===(e=z.value)||void 0===e?void 0:e.categories)?[{key:"homefeed_recommend",label:"推荐"}].concat((0,o._)(null===(t=z.value)||void 0===t?void 0:t.categories.map(function(e){return{key:null==e?void 0:e.id,label:null==e?void 0:e.name}}))):f}),et=(0,x.Fl)(function(){return!["homefeed_recommend"].includes(W.value)});var en=(e=(0,r._)(function(){var e;return(0,u.Jh)(this,function(t){return(null===(e=N.query)||void 0===e?void 0:e.source)==="tourist_search"||Y.value||E.loggedIn||F.entryList.find(function(e){return e.type===h.UZ.globalModal&&e.show})?[2]:(R.openLogin(w.yC.FirstEnter),[2])})}),function openLogin(){return e.apply(this,arguments)}),er=(0,x.Fl)(function(){return"".concat(U.gap.horizontal-.5,"px")});var ei=(t=(0,r._)(function(){var e,t,n,r;return(0,u.Jh)(this,function(i){switch(i.label){case 0:if(e=function(){return H.value.length<U.minRenderNotes-2*U.columns},j.cancelFeedRequest)return[2];if(!(P.appSettings.retryFeeds&&e()))return[3,2];return[4,j.fetchFeeds()];case 1:i.sent(),i.label=2;case 2:return e()&&!j.isError&&(r={currentnum:null!==(n=null===(t=j.feeds)||void 0===t?void 0:t.length)&&void 0!==n?n:0,mincnt:U.minRenderNotes-2*U.columns,webid:s.Z.get("webId")||"unknown",login:E.loggedIn},g.Ti.trackLoseNote(JSON.stringify(r))),[2]}})}),function retryOnFirstScreenFeedsNotEnough(){return t.apply(this,arguments)});var ea=(n=(0,r._)(function(){var e,t;return(0,u.Jh)(this,function(n){switch(n.label){case 0:var i;if(t=[[{indicate:y.T.noteDetailReadEnd,operator:"===",value:1},{indicate:y.T.inContinued,operator:"===",value:!0}]],y.A.register("showActivityPopup",{rules:t,priority:1,taskExecutor:(i=(0,r._)(function(e,t){return(0,u.Jh)(this,function(n){switch(n.label){case 0:return e(),t(),[4,F.getGlobalConfig()];case 1:return n.sent(),[2]}})}),function(e,t){return i.apply(this,arguments)})}),F.$mitt.on("closeActivityPopup",function(){!E.loggedIn&&R.openLogin(w.yC.FirstEnter)}),Y.value||(null===(e=N.query)||void 0===e?void 0:e.source)==="tourist_search")return[2];return[4,F.getGlobalConfig()];case 1:return n.sent(),[2]}})}),function openActivityPopup(){return n.apply(this,arguments)});(0,x.wF)((0,r._)(function(){var e;return(0,u.Jh)(this,function(t){switch(t.label){case 0:return[4,E.getUserInfo()];case 1:return t.sent(),[4,ea()];case 2:return t.sent(),[4,en()];case 3:var n;if(t.sent(),j.addVisitTimes(),0!==j.feeds.length)return[3,5];return n=(0,r._)(function(){var e,t;return(0,u.Jh)(this,function(n){return Y.value&&j.feeds.length>0&&j.undertakeNote&&(H.value=j.feeds.map(function(e){return(0,a._)((0,i._)({},e),{index:e.index+1})}),H.value.unshift((0,a._)((0,i._)({},(0,c.Fx)(null===(t=j.undertakeNote)||void 0===t?void 0:null===(e=t.items)||void 0===e?void 0:e[0])),{index:0,exposed:!1,trackId:G||"",ssrRendered:void 0})),setTimeout(function(){return(0,c.oQ)(G,{noteFlowSource:J,xsecToken:Q})},1e3)),[2]})}),e=function unshiftCard(){return n.apply(this,arguments)},[4,j.fetchFeeds(!1,!1,{responseInterceptor:e})];case 4:return t.sent(),[3,6];case 5:ei(),t.label=6;case 6:return[2]}})})),(0,x.vl)((0,r._)(function(){return(0,u.Jh)(this,function(e){switch(e.label){case 0:return[4,j.getHomefeedCategory()];case 1:return e.sent(),[2]}})})),(0,x.bv)((0,r._)(function(){return(0,u.Jh)(this,function(e){switch(e.label){case 0:if(z.value)return[3,2];return[4,j.getHomefeedCategory()];case 1:e.sent(),e.label=2;case 2:return[2]}})})),(0,x.YP)(function(){return E.loggedIn},function(e){N.path===p.Z.ExplorePath?j.reset():e&&H.value.length>0&&j.getLikeNum()});var eo=(T=(0,r._)(function(){return(0,u.Jh)(this,function(e){switch(e.label){case 0:return[4,j.fetchFeeds()];case 1:return e.sent(),[2]}})}),function refresh(){return T.apply(this,arguments)});return(0,I.iS)(function(e,t,n){X.value=document.documentElement.scrollTop,Z.value=!0,n()}),(0,x.dl)(function(){Z.value=!1,$.value&&"loading"===q.value&&j.fetchFeeds(),document.documentElement.scrollTop=X.value,$.value=!0}),{handleChannelClick:(D=(0,r._)(function(e){var t,n,r;return(0,u.Jh)(this,function(i){switch(i.label){case 0:return document.documentElement.scrollTop=0,n=null===(t=N.query)||void 0===t?void 0:t.channel_id,j.switchCategory(e.key),[4,(0,m.O8)(30383,{channelTabName:e.key,channelTabType:e.key===n?"refresh":"goto_channel_tab"})];case 1:return r=i.sent(),l.Q.push(r),[2]}})}),function handleChannelClick(e){return D.apply(this,arguments)}),gap:er,showFeeds:K,refresh:eo,permitSticky:et,exploreChannels:ee,EntryType:h.UZ,pageStatus:q,currentChannel:W,channelReducer:function(e){return e}}}},87355:function(e,t,n){"use strict";n.d(t,{H:function(){return d}});var r,i=n(41622),a=n(377),o=n(93328),u=n(91663),l=n(64300),s=n(85537),c=n(66002);var d=((r={}).empty="empty",r.feeds2NotePage="feeds2NotePage",r.outlinkNotePage="outlinkNotePage",r);function useNoteType(e){var t,n=e.noteId,r=(0,o.iH)("empty"),d=(0,o.iH)(!1),v=(0,l.dw)(),f=(0,o.Fl)(function(){return v.getNoteDetailByNoteId(n.value)}),p=(0,s.L)(),h=(0,c.Jk)(v).prevRoute,g=(0,o.Fl)(function(){return h.value!==u.Dq.Empty}),m=(0,o.Fl)(function(){return!g.value}),y=(0,o.Fl)(function(){return f.value.note.type});var I=(t=(0,i._)(function(e){return(0,a.Jh)(this,function(t){switch(t.label){case 0:if(y.value)return[3,3];return[4,p.getUserInfo()];case 1:return t.sent(),[4,v.noteRequest.fetchNote(n.value,e)];case 2:t.sent(),t.label=3;case 3:if(!y.value)return[2];if(!m.value)return r.value="feeds2NotePage",[2];return r.value="outlinkNotePage",[2]}})}),function setPageType(e){return t.apply(this,arguments)});function updateNoteTrackData(){""===v.firstNoteId&&(v.firstNoteId=n.value,d.value=!0)}return(0,o.vl)((0,i._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,I((0,o.Zq)())];case 1:return e.sent(),updateNoteTrackData(),[2]}})})),(0,o.wF)((0,i._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return updateNoteTrackData(),[4,I()];case 1:return e.sent(),(0,o.YP)(n,function(){n.value&&I()}),[2]}})})),(0,o.Jd)(function(){v.reset(d.value)}),{notePageType:r}}t.Z=useNoteType},33716:function(e,t,n){"use strict";n.d(t,{Ht:function(){return useNoteStateValue},aH:function(){return l},dv:function(){return useNoteRoute}});var r=n(82726);n(87989),n(67930),n(58486);var i=n(69876),a=n(13285),o=n(93328);function useNoteRoute(e){var t=(0,a.tv)();(0,a.yj)();var n=e||"".concat(window.location.pathname).concat(window.location.search);return t.resolve(n)}var u=(0,r._)((0,i.BE)(function(e){return{noteId:(0,o.Fl)(function(){return e.noteId}),onClose:function(){var t;return null===(t=e.close)||void 0===t?void 0:t.call(e)},useNoteRoute:e.useNoteRoute}}),2),l=u[0],s=u[1];function useNoteStateValue(){var e,t={noteId:(0,o.iH)(""),onClose:function(){return null},useNoteRoute:a.yj};return null!==(e=s())&&void 0!==e?e:t}},83616:function(e,t,n){"use strict";n.d(t,{s:function(){return u}});var r=n(46490),i=n(51606);n(58051);var a=n(94186),o={closeSource:"",exitRoute:"",maskClick:"",onBeforeExit:"",onExit:"",setInitialStyle:"",noteId:"",prevRoute:"",historyState:"",backedHistoryState:"",version:"old"},u=new function BackStepTrack(){var e=this;(0,r._)(this,BackStepTrack),(0,i._)(this,"backMetrics",o),(0,i._)(this,"initBackMetrics",function(){e.backMetrics=o}),(0,i._)(this,"setBackMetrics",function(t){Object.assign(e.backMetrics,t)}),(0,i._)(this,"uploadBackMetrics",function(){(0,a.jA)(e.backMetrics)})}},16803:function(e,t,n){"use strict";n.d(t,{J:function(){return k},l:function(){return S}});var r,i=n(41622),a=n(46490),o=n(90251),u=n(51606),l=n(377);n(74093),n(20768),n(41648),n(59339),n(47444),n(34757),n(85908),n(39995),n(22943),n(54767),n(55820),n(93225),n(33708),n(64322),n(47771),n(27461),n(23339),n(51109),n(34333),n(86651),n(55947),n(1154),n(80013),n(97357),n(87535),n(75204);var s=n(61923),c=n(94809),d=n(70879),v=n(27337);n(63235),n(15368),n(12970),n(8503),n(32207),n(13598),n(23541),n(63827),n(30488),n(82236),n(51938),n(33913),n(94949),n(17891),n(44258),n(38609),n(4787),n(44211),n(29338),n(73405),n(98754),n(31832),n(88402),n(56712),n(64961),n(12996),n(59564),n(87394),n(94941),n(48421),n(28636),n(6045),n(10364),n(67673),n(72169),n(58486),n(36277),n(41593);var f=n(64732),p=n(64695),h=n(51399),g=n(18462),m=n(33462),y=n(57171),I=n(32335),_=function(){function HttpAdapter(){(0,a._)(this,HttpAdapter),(0,u._)(this,"POLLING_MAX_COUNT",6),(0,u._)(this,"POLLING_INTERVALS",[2.6,2,1,2,3]),(0,u._)(this,"firstAnyFragmentReceived",new Set),(0,u._)(this,"firstValidFragmentReceived",new Set)}return(0,o._)(HttpAdapter,[{key:"getPollingInterval",value:function getPollingInterval(e){var t=e-1;return t>=0&&t<this.POLLING_INTERVALS.length?1e3*this.POLLING_INTERVALS[t]:1e3*this.POLLING_INTERVALS[this.POLLING_INTERVALS.length-1]}},{key:"fetchTokensOnce",value:function fetchTokensOnce(e,t){return(0,i._)(function(){var n,r,i;return(0,l.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,f.dJ.get("CHAT_AI_STREAM_TOKENS",{params:{conversation_id:e,message_id:t,index_in_conversation:-1},withCredentials:!0,baseURL:(0,p.q)()})];case 1:if(!(n=a.sent())||!n.tokenList)return[2,null];return[2,n.tokenList];case 2:return r=a.sent(),(0,c.Pi)(c.Bw.HTTP_FETCH_FAILED_ONCE,{conversationId:e,messageId:t,error:null==r?void 0:null===(i=r.toString)||void 0===i?void 0:i.call(r)}),[2,null];case 3:return[2]}})})()}},{key:"hasEndSignal",value:function hasEndSignal(e){return e.some(function(e){return"signal"===e.type&&e.data.signalType===h.T.COMPLETE})}},{key:"getEndSignalIndex",value:function getEndSignalIndex(e){var t=e.find(function(e){return"signal"===e.type&&e.data.signalType===h.T.COMPLETE});return null==t?void 0:t.data.indexInConversation}},{key:"extractNewFragments",value:function extractNewFragments(e,t){var n=[];return e.filter(function(e){return"message"===e.type}).sort(function(e,t){return e.data.indexInConversation-t.data.indexInConversation}).forEach(function(e){var r=e.data.indexInConversation;void 0!==r&&!t.has(r)&&((e.data.dataFragments||[]).forEach(function(t){var r=(t.fragmentType===s.Ee.Image||t.fragmentType===s.Ee.ImageList)&&t.images&&t.images.length>0?t.images.map(function(e){var t,n;return(0,v._)((0,d._)({},e),{url:(null===(t=e.url)||void 0===t?void 0:t.replace(/format\/heif/gi,"format/jpg"))||e.url,urlSizeLarge:(null===(n=e.urlSizeLarge)||void 0===n?void 0:n.replace(/format\/heif/gi,"format/jpg"))||e.urlSizeLarge})}):t.images||[];n.push({fragmentType:t.fragmentType,text:(0,y.s)(t),indexInMsg:t.indexInMsg,indexInConversation:e.data.indexInConversation,referenceNoteList:t.referenceNoteList,recommendTextList:t.recommendTextList,noteList:t.noteList,queryStatus:t.queryStatus||{avatars:[],text:""},thinkingProgressItem:t.thinkingProgressItem||[],images:r})}),t.add(r))}),n}},{key:"fetchCompleteMessage",value:function fetchCompleteMessage(e,t,n){var r=this;return(0,i._)(function(){var i,a,o,u,d,v,f,p,h,g,y,_;return(0,l.Jh)(this,function(w){switch(w.label){case 0:return w.trys.push([0,5,,6]),i=function(){var i,v,h,g,y,I;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(0!==u||0!==f.length)return[3,3];if(u++,!(!d&&u<r.POLLING_MAX_COUNT))return[3,2];return i=r.getPollingInterval(u),[4,new Promise(function(e){return setTimeout(e,i)})];case 1:l.sent(),l.label=2;case 2:return[2,"continue"];case 3:if(0!==u)return[3,4];return h=a,[3,6];case 4:return[4,r.fetchTokensOnce(e,t)];case 5:h=l.sent(),l.label=6;case 6:if(!(v=h))return u>0&&(0,c.Pi)(c.Bw.HTTP_FETCH_FAILED_POLL,{conversationId:e,messageId:t,pollCount:u}),u++,[2,"continue"];if((d=r.hasEndSignal(v))&&(p=r.getEndSignalIndex(v)),(g=r.extractNewFragments(v,o)).length>0&&(!r.firstAnyFragmentReceived.has(n)&&(r.firstAnyFragmentReceived.add(n),(0,c.Sn)({type:c.oV.RECEIVE_FIRST_FRAGMENT,time:Date.now(),uuid:n,msg_id:t,app_cid:e,msg:{fragment_index:g[0].indexInConversation,fragment_type:g[0].fragmentType,source:"http_fallback",poll_count:u}})),(y=g.filter(function(e){return e.fragmentType!==s.Ee.Processing&&e.fragmentType!==s.Ee.BaseDeepLink})).length>0&&!r.firstValidFragmentReceived.has(n)&&(r.firstValidFragmentReceived.add(n),(0,c.Tu)(n,t,e),y.forEach(function(e){void 0!==e.indexInConversation&&(0,c.k_)(n,e.indexInConversation)}),(0,c.Sn)({type:c.oV.RECEIVE_FIRST_VALID_FRAGMENT,time:Date.now(),uuid:n,msg_id:t,app_cid:e,msg:{fragment_index:y[0].indexInConversation,source:"http_fallback",poll_count:u}})),g.forEach(function(e){void 0!==e.indexInConversation&&(0,c.k_)(n,e.indexInConversation)}),y.length>0&&m.j.emit(m.w.FRAGMENT_RECEIVED,{msgId:t,conversationId:e,roundId:n,fragments:g,source:"http"})),!(!d&&u<r.POLLING_MAX_COUNT))return[3,8];return I=r.getPollingInterval(u),[4,new Promise(function(e){return setTimeout(e,I)})];case 7:l.sent(),l.label=8;case 8:return u++,[2]}})},[4,r.fetchTokensOnce(e,t)];case 1:if(!(a=w.sent()))throw Error("HTTP 获取 tokens 失败");o=new Set,u=0,d=r.hasEndSignal(a),(f=(v=r.extractNewFragments(a,o)).filter(function(e){return e.fragmentType!==s.Ee.Processing&&e.fragmentType!==s.Ee.BaseDeepLink})).length>0&&m.j.emit(m.w.FRAGMENT_RECEIVED,{msgId:t,conversationId:e,roundId:n,fragments:v,source:"http"}),w.label=2;case 2:if(!(!d&&u<r.POLLING_MAX_COUNT))return[3,4];return[5,(0,l.XA)(i())];case 3:return w.sent(),[3,2];case 4:return(0,c.Sn)({type:c.oV.FINISHED_SIGNAL,time:Date.now(),uuid:n,msg_id:t,app_cid:e,msg:{source:"http_fallback",has_end_signal:d,poll_count:u,total_fragments:o.size}}),d?(0,c.$X)(n,p):(0,c.KP)(n,!1),m.j.emit(m.w.COMPLETE,{msgId:t,conversationId:e,roundId:n,source:"http"}),(h=(0,I.t)()).agent&&h.agent.checkHealthy(),[2,!0];case 5:return g=w.sent(),(0,c.Pi)(c.Bw.HTTP_FETCH_FAILED,{conversationId:e,messageId:t,error:null==g?void 0:null===(y=g.toString)||void 0===y?void 0:y.call(g)}),m.j.emit(m.w.ERROR,{msgId:t,conversationId:e,roundId:n,reason:(null==g?void 0:null===(_=g.toString)||void 0===_?void 0:_.call(g))||"http_adapter_error",source:"http"}),[2,!1];case 6:return[2]}})})()}},{key:"fetchMissingTokens",value:function fetchMissingTokens(e,t,n,r){var a=this;return(0,i._)(function(){var i,o,u,s,c;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),i=(0,g.B)(t),[4,f.dJ.get("CHAT_AI_STREAM_TOKENS",{params:{conversation_id:e,message_id:i,index_in_conversation:r},withCredentials:!0,baseURL:(0,p.q)()})];case 1:if(!(o=l.sent())||!o.tokenList||0===o.tokenList.length)return[2];return u=new Set,(s=a.extractNewFragments(o.tokenList,u)).length>0&&m.j.emit(m.w.FRAGMENT_RECEIVED,{msgId:t,conversationId:e,roundId:n,fragments:s,source:"http"}),[3,3];case 2:return l.sent(),[3,3];case 3:return[2]}})})()}}]),HttpAdapter}(),w=n(7221);var k=((r={}).LONGLINK_NOT_READY="longlink_not_ready",r.LONGLINK_DISCONNECTED="longlink_disconnected",r.NO_FIRST_FRAGMENT="no_first_fragment",r.NO_COMPLETE_SIGNAL="no_complete_signal",r.FRAGMENT_MISSING_MULTIPLES="fragment_missing_multiples",r),S=function(){function MessageCoordinator(e,t){var n,r;(0,a._)(this,MessageCoordinator),(0,u._)(this,"conversationId",void 0),(0,u._)(this,"longlinkAdapter",void 0),(0,u._)(this,"httpAdapter",void 0),(0,u._)(this,"roundStates",new Map),(0,u._)(this,"config",void 0),(0,u._)(this,"eventCleanupFns",[]),this.conversationId=e,this.longlinkAdapter=new w.k(e,function(){return(0,I.t)().getCurrentRoundId()||null},this),this.httpAdapter=new _,this.config={firstFragmentTimeout:null!==(n=null==t?void 0:t.firstFragmentTimeout)&&void 0!==n?n:4500,completeSignalTimeout:null!==(r=null==t?void 0:t.completeSignalTimeout)&&void 0!==r?r:13e3},this.setupEventListeners()}return(0,o._)(MessageCoordinator,[{key:"isRenderableFragment",value:function isRenderableFragment(e){return!!e&&e.fragmentType!==s.Ee.Processing&&e.fragmentType!==s.Ee.BaseDeepLink&&e.fragmentType!==s.Ee.QuerySource}},{key:"registerMessage",value:function registerMessage(e,t,n){var r=this;if(this.roundStates.set(e,{roundId:e,aiMsgId:n,hasReceivedFragment:!1,isComplete:!1,isFallback:!1,shouldIgnoreLonglink:!1}),!t){this.triggerFallback(e,"longlink_not_ready");return}var i=setTimeout(function(){var t=r.roundStates.get(e);t&&!t.hasReceivedFragment&&!t.isFallback&&((0,c.Sn)({type:c.oV.FIRST_FRAGMENT_TIMEOUT,time:Date.now(),uuid:e,msg_id:t.aiMsgId,app_cid:r.conversationId,msg:{timeout:r.config.firstFragmentTimeout}}),r.triggerFallback(e,"no_first_fragment"))},this.config.firstFragmentTimeout),a=this.roundStates.get(e);a&&(a.fallbackTimer=i)}},{key:"triggerFallback",value:function triggerFallback(e,t){var n=this;return(0,i._)(function(){var r,i;return(0,l.Jh)(this,function(a){switch(a.label){case 0:if(!(r=n.roundStates.get(e))||r.isFallback)return[2];if(r.isFallback=!0,r.shouldIgnoreLonglink=!0,n.clearTimers(e),(0,c.Sn)({type:c.oV.FALLBACK_TRIGGER,time:Date.now(),uuid:e,msg_id:r.aiMsgId,app_cid:n.conversationId,msg:{reason:t}}),!r.aiMsgId)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n.httpAdapter.fetchCompleteMessage(n.conversationId,r.aiMsgId,e)];case 2:return a.sent(),(0,c.Sn)({type:c.oV.FALLBACK_SUCCESS,time:Date.now(),uuid:e,msg_id:r.aiMsgId,app_cid:n.conversationId}),(0,c.WN)(e),[3,4];case 3:return i=a.sent(),(0,c.Sn)({type:c.oV.FALLBACK_FAILED,time:Date.now(),uuid:e,msg_id:r.aiMsgId,app_cid:n.conversationId,msg:{error:null==i?void 0:i.toString()}}),(0,c.WN)(e),[3,4];case 4:return[2]}})})()}},{key:"setupEventListeners",value:function setupEventListeners(){var e=this,onFragmentReceived=function(t){if(t.conversationId!==e.conversationId)return;var n,r,i=e.roundStates.get(t.roundId);if(!!i){!i.aiMsgId&&t.msgId&&(i.aiMsgId=t.msgId);var a=e.isRenderableFragment(t.fragment)||null!==(r=null===(n=t.fragments)||void 0===n?void 0:n.some(function(t){return e.isRenderableFragment(t)}))&&void 0!==r&&r;if(!i.hasReceivedFragment&&a){i.hasReceivedFragment=!0,i.fallbackTimer&&(clearTimeout(i.fallbackTimer),i.fallbackTimer=void 0);var o=t.roundId,u=setTimeout(function(){var t=e.roundStates.get(o);t&&!t.isComplete&&!t.isFallback&&((0,c.Sn)({type:c.oV.COMPLETE_SIGNAL_TIMEOUT,time:Date.now(),uuid:o,msg_id:t.aiMsgId,app_cid:e.conversationId,msg:{timeout:e.config.completeSignalTimeout}}),e.triggerFallback(o,"no_complete_signal"))},e.config.completeSignalTimeout);i.completeTimer=u}}},onComplete=function(t){if(t.conversationId!==e.conversationId)return;var n=e.roundStates.get(t.roundId);if(!!n)n.isComplete=!0,e.clearTimers(t.roundId),setTimeout(function(){!(0,c.l7)(t.roundId)&&(0,c.Sn)({type:c.oV.FINISHED_SIGNAL_NO_RENDER,time:Date.now(),uuid:t.roundId,msg_id:t.msgId,app_cid:e.conversationId})},100)},onError=function(t){if(t.conversationId===e.conversationId)e.clearTimers(t.roundId)},onRoundInterrupted=function(t){if(t.conversationId!==e.conversationId)return;var n=e.roundStates.get(t.roundId);if(!!n)n.isComplete=!0,e.clearTimers(t.roundId)};m.j.on(m.w.FRAGMENT_RECEIVED,onFragmentReceived),m.j.on(m.w.COMPLETE,onComplete),m.j.on(m.w.ERROR,onError),m.j.on(m.w.ROUND_INTERRUPTED,onRoundInterrupted),this.eventCleanupFns.push(function(){return m.j.off(m.w.FRAGMENT_RECEIVED,onFragmentReceived)},function(){return m.j.off(m.w.COMPLETE,onComplete)},function(){return m.j.off(m.w.ERROR,onError)},function(){return m.j.off(m.w.ROUND_INTERRUPTED,onRoundInterrupted)})}},{key:"clearTimers",value:function clearTimers(e){var t=this.roundStates.get(e);if(!!t)t.fallbackTimer&&(clearTimeout(t.fallbackTimer),t.fallbackTimer=void 0),t.completeTimer&&(clearTimeout(t.completeTimer),t.completeTimer=void 0)}},{key:"retryMissingFragments",value:function retryMissingFragments(e,t,n){var r=this;return(0,i._)(function(){return(0,l.Jh)(this,function(i){switch(i.label){case 0:return[4,r.httpAdapter.fetchMissingTokens(r.conversationId,e,t,n)];case 1:return i.sent(),[2]}})})()}},{key:"updateConversationId",value:function updateConversationId(e){this.conversationId=e,this.longlinkAdapter.updateConversationId(e)}},{key:"isRoundComplete",value:function isRoundComplete(e){var t,n=this.roundStates.get(e);return null!==(t=null==n?void 0:n.isComplete)&&void 0!==t&&t}},{key:"shouldIgnoreLonglink",value:function shouldIgnoreLonglink(e){var t,n=this.roundStates.get(e);return null!==(t=null==n?void 0:n.shouldIgnoreLonglink)&&void 0!==t&&t}},{key:"markRoundComplete",value:function markRoundComplete(e){var t=this.roundStates.get(e);t&&(t.isComplete=!0,this.clearTimers(e))}},{key:"cleanup",value:function cleanup(){var e=this;this.roundStates.forEach(function(t,n){return e.clearTimers(n)}),this.roundStates.clear(),this.eventCleanupFns.forEach(function(e){return e()}),this.eventCleanupFns=[]}}]),MessageCoordinator}()},7221:function(e,t,n){"use strict";n.d(t,{k:function(){return p}});var r=n(46490),i=n(90251),a=n(51606),o=n(70879),u=n(27337),l=n(82726);n(63235),n(15368),n(12970),n(8503),n(32207),n(13598),n(23541),n(63827),n(30488),n(82236),n(51938),n(33913),n(94949),n(17891),n(44258),n(38609),n(4787),n(44211),n(29338),n(73405),n(98754),n(31832),n(88402),n(56712),n(27461),n(23339),n(51109),n(34333),n(74093),n(20768),n(41648),n(59339),n(47444),n(34757),n(85908),n(39995),n(22943),n(54767),n(55820),n(93225),n(33708),n(64322),n(47771),n(6045),n(10364),n(67673),n(72169),n(58486),n(87394),n(94941),n(48421),n(97357),n(87535),n(75204),n(74719),n(13396),n(91313);var s=n(61923),c=n(51399),d=n(94809),v=n(33462),f=n(57171),p=function(){function LonglinkAdapter(e,t,n){var i=this;(0,r._)(this,LonglinkAdapter),(0,a._)(this,"conversationId",void 0),(0,a._)(this,"getCurrentRoundId",void 0),(0,a._)(this,"messageCoordinator",void 0),(0,a._)(this,"sentFragmentIndices",new Set),(0,a._)(this,"msgIdToRoundIdMap",new Map),(0,a._)(this,"firstFragmentReceived",new Set),(0,a._)(this,"firstAnyFragmentReceived",new Set),(0,a._)(this,"interruptedRounds",new Set),this.conversationId=e,this.getCurrentRoundId=t,this.messageCoordinator=n,v.j.on(v.w.ROUND_INTERRUPTED,function(e){e.conversationId===i.conversationId&&i.markRoundInterrupted(e.roundId)})}return(0,i._)(LonglinkAdapter,[{key:"handleMessagePush",value:function handleMessagePush(e){var t,n,r=this;if(e.data.conversationId!==this.conversationId)return;var i=e.data.msgId,a=e.data.clientUuid,l=e.data.opsType,c=null;if(a)c=a,!this.msgIdToRoundIdMap.has(i)&&this.msgIdToRoundIdMap.set(i,c);else if(!(c=this.msgIdToRoundIdMap.get(i)||null)){var f=this.getCurrentRoundId();if(!f)return;c=f,this.msgIdToRoundIdMap.set(i,c)}if(!(!c||this.interruptedRounds.has(c)||(null===(n=this.messageCoordinator)||void 0===n?void 0:null===(t=n.shouldIgnoreLonglink)||void 0===t?void 0:t.call(n,c)))){var p=this.transformMessageFragments(e.data.dataFragments,e.data.indexInConversation,l);if(p=p.map(function(e){return(e.fragmentType===s.Ee.Image||e.fragmentType===s.Ee.ImageList)&&e.images&&e.images.length>0?(0,u._)((0,o._)({},e),{images:e.images.map(function(e){var t,n;return(0,u._)((0,o._)({},e),{url:(null===(t=e.url)||void 0===t?void 0:t.replace(/format\/heif/gi,"format/jpg"))||e.url,urlSizeLarge:(null===(n=e.urlSizeLarge)||void 0===n?void 0:n.replace(/format\/heif/gi,"format/jpg"))||e.urlSizeLarge})})}):e}),9===l){(0,d.Pi)(d.Bw.SECURITY_REVOKE,{msgId:i,conversationId:e.data.conversationId,fragmentCount:p.length,timestamp:Date.now()}),v.j.emit(v.w.SECURITY_REVOKE,{msgId:i,conversationId:e.data.conversationId,roundId:c,revokeFragment:p[0],source:"longlink"}),this.sentFragmentIndices.clear();return}var h=p.filter(function(e){var t=e.indexInConversation;return void 0===t||!r.sentFragmentIndices.has(t)&&(r.sentFragmentIndices.add(t),(0,d.k_)(c,t),!0)});h.length>0&&!this.firstAnyFragmentReceived.has(c)&&(this.firstAnyFragmentReceived.add(c),(0,d.Sn)({type:d.oV.RECEIVE_FIRST_FRAGMENT,time:Date.now(),uuid:c,msg_id:i,app_cid:e.data.conversationId,msg:{fragment_index:h[0].indexInConversation,fragment_type:h[0].fragmentType}}));var g=h.filter(function(e){return e.fragmentType!==s.Ee.Processing&&e.fragmentType!==s.Ee.BaseDeepLink});g.length>0&&!this.firstFragmentReceived.has(c)&&(this.firstFragmentReceived.add(c),(0,d.Tu)(c,i,e.data.conversationId),(0,d.Sn)({type:d.oV.RECEIVE_FIRST_VALID_FRAGMENT,time:Date.now(),uuid:c,msg_id:i,app_cid:e.data.conversationId,msg:{fragment_index:g[0].indexInConversation}})),h.forEach(function(t){v.j.emit(v.w.FRAGMENT_RECEIVED,{msgId:e.data.msgId,conversationId:e.data.conversationId,roundId:c,fragment:t,source:"longlink"})})}}},{key:"handleSignalPush",value:function handleSignalPush(e){if(e.data.conversationId!==this.conversationId)return;var t,n,r,i,a,o,u=this.getCurrentRoundId();if(!u)return;var l=e.data,s=l.msgId,f=l.conversationId,p=l.signalType,h=this.msgIdToRoundIdMap.get(s);if(h&&h!==u)return;if(!(this.interruptedRounds.has(u)||(null===(n=this.messageCoordinator)||void 0===n?void 0:null===(t=n.shouldIgnoreLonglink)||void 0===t?void 0:t.call(n,u))))if(p===c.T.COMPLETE){;this.sentFragmentIndices.clear(),this.cleanupRoundMapping(u),this.firstFragmentReceived.delete(u),this.firstAnyFragmentReceived.delete(u),!(null===(i=this.messageCoordinator)||void 0===i?void 0:null===(r=i.isRoundComplete)||void 0===r?void 0:r.call(i,u))&&(0,d.Sn)({type:d.oV.FINISHED_SIGNAL,time:Date.now(),uuid:u,msg_id:s,app_cid:f,msg:{source:"longlink"}}),(0,d.$X)(u,e.data.indexInConversation),null===(o=this.messageCoordinator)||void 0===o||null===(a=o.markRoundComplete)||void 0===a||a.call(o,u),(0,d.WN)(u),v.j.emit(v.w.COMPLETE,{msgId:s,conversationId:f,roundId:u,source:"longlink"})}else p===c.T.ERROR&&(this.sentFragmentIndices.clear(),this.cleanupRoundMapping(u),this.firstFragmentReceived.delete(u),this.firstAnyFragmentReceived.delete(u),(0,d.Sn)({type:d.oV.ERROR_SIGNAL,time:Date.now(),uuid:u,msg_id:s,app_cid:f,msg:{signal_type:p}}),(0,d.mt)(u),(0,d.WN)(u),v.j.emit(v.w.ERROR,{msgId:s,conversationId:f,roundId:u,reason:"longlink_timeout",source:"longlink"}))}},{key:"transformMessageFragments",value:function transformMessageFragments(e,t,n){return e.map(function(e){return{fragmentType:e.fragmentType,text:(0,f.s)(e),indexInMsg:e.indexInMsg,indexInConversation:t,opsType:n,referenceNoteList:e.referenceNoteList,recommendTextList:e.recommendTextList,noteList:e.noteList,queryStatus:e.queryStatus,thinkingProgressItem:e.thinkingProgressItem,images:e.images}})}},{key:"markRoundInterrupted",value:function markRoundInterrupted(e){this.interruptedRounds.add(e)}},{key:"cleanupRoundMapping",value:function cleanupRoundMapping(e){var t=!0,n=!1,r=void 0;try{for(var i,a=this.msgIdToRoundIdMap.entries()[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var o=(0,l._)(i.value,2),u=o[0];o[1]===e&&this.msgIdToRoundIdMap.delete(u)}}catch(e){n=!0,r=e}finally{try{!t&&null!=a.return&&a.return()}finally{if(n)throw r}}}},{key:"updateConversationId",value:function updateConversationId(e){this.conversationId=e,this.msgIdToRoundIdMap.clear(),this.sentFragmentIndices.clear(),this.firstFragmentReceived.clear(),this.firstAnyFragmentReceived.clear()}}]),LonglinkAdapter}()},57171:function(e,t,n){"use strict";n.d(t,{s:function(){return transformFragmentText}}),n(43648),n(6045),n(10364),n(67673),n(87989),n(85203),n(72169),n(58486);var r=n(61923);function transformImageItemToHtml(e){var t=e.length,n=e.slice(0,3).map(function(e,n){return'\n      <div class="ai-msg-image-item" data-index="'.concat(n,'">\n        <img\n          src="').concat(e.url,'"\n          alt="').concat(e.noteId,'"\n          data-width="').concat(e.width,'"\n          data-height="').concat(e.height,'"\n          data-userId="').concat(e.userId,'"\n          data-noteId="').concat(e.noteId,'"\n          data-sourceAvatar="').concat(e.sourceAvatar,'"\n          data-sourceNickname="').concat(e.sourceNickname,'"\n          data-urlSizeLarge="').concat(e.urlSizeLarge,'"\n          data-fileId="').concat(e.fileId||"",'"\n          data-link="').concat(e.link||"",'"\n        />\n        ').concat(2===n&&t>3?'<div class="ai-msg-image-count-badge">共'.concat(t,"张</div>"):"","\n      </div>\n    ")});return'<div class="ai-msg-image-container">'.concat(n.join(""),"</div>")}function transformFragmentText(e){if(e.fragmentType===r.Ee.ImageList){if(e.text&&e.text.trim()){var t=e.text;return t=(t=t.replace(/" "([a-z\-]+)=/g,'" $1=')).replace(/"([a-z\-]+)=/g,'" $1=')}return transformImageItemToHtml(e.images||[])}return e.text||""}},52867:function(e,t,n){"use strict";n.d(t,{JD:function(){return getAiSearchQueryTrending},OY:function(){return getAiSearchWebPageList},i1:function(){return getAiSearchNotesV2}});var r=n(64732),i=n(64695);function getAiSearchQueryTrending(e){var t=e.params;return r.dJ.get("WEB_AI_SEARCH_QUERY_TRENDING",{params:t},{transform:!0})}function getAiSearchNotesV2(e){return r.dJ.post("WEB_AI_SEARCH_NOTES_V2",e,{baseURL:(0,i.q)(),withCredentials:!0,transform:!0})}function getAiSearchWebPageList(e){return r.dJ.get("WEB_AI_SEARCH_WEB_PAGE_LIST",{params:e},{transform:!0})}},33462:function(e,t,n){"use strict";n.d(t,{j:function(){return o},w:function(){return a}});var r,i=n(86058);var a=((r={}).FRAGMENT_RECEIVED="message:fragment:received",r.COMPLETE="message:complete",r.ERROR="message:error",r.SECURITY_REVOKE="message:security:revoke",r.ROUND_INTERRUPTED="message:round:interrupted",r),o=(0,i.Z)()},90853:function(e,t,n){"use strict";n.d(t,{$z:function(){return getFStatusTypeMap},DI:function(){return fetchUnreadCount},Rk:function(){return readMessage},X8:function(){return f},Yq:function(){return fetchLikes},gP:function(){return v},jS:function(){return fetchConnections},k$:function(){return c},wK:function(){return d},z0:function(){return fetchMentions}});var r,i,a,o,u=n(64732),l=u.dJ.get,s=u.dJ.post;var c=((r={}).Mentions="mentions",r.Likes="likes",r.Connections="connections",r);var d=((i={}).FANS="1",i.NOTE_AT="2",i.COMMENT="3",i.COLLECT="4",i.COLLECT_ALBUM="5",i.LIKE_NOTE="6",i.LIKE_COMMENT="7",i.COMMENT_AT="8",i.NOTE_COMMENT_ME="26",i.NOTE_COMMENT_LEVEL1="27",i.NOTE_COMMENT_LEVEL2="28",i.LIKE_VIDEO_NOTE="35",i.LIKE_VIDEO_NOTE_COMMENT="36",i.VIDEO_NOTE_AT="37",i.VIDEO_NOTE_COMMENT_AT="38",i.VIDEO_NOTE_COMMENT="39",i.VIDEO_NOTE_COMMENT_ME="40",i.VIDEO_NOTE_COMMENT_LEVEL1="41",i.VIDEO_NOTE_COMMENT_LEVEL2="42",i.VIDEO_NOTE_COLLECT="44",i);var v=((a={}).NONE="none",a.BOTH="both",a.FOLLOWS="follows",a.FANS="fans",a.SAME="same",a);var f=((o={}).Normal="NORMAL",o);function readMessage(e){return s("/api/sns/web/v1/message/read",{type:e})}function fetchUnreadCount(){return l("/api/sns/web/unread_count")}function fetchConnections(e,t){return l("/api/sns/web/v1/you/connections",{params:{num:e,cursor:t}})}function fetchMentions(e,t){return l("/api/sns/web/v1/you/mentions",{params:{num:e,cursor:t}})}function fetchLikes(e,t){return l("/api/sns/web/v1/you/likes",{params:{num:e,cursor:t}})}function getFStatusTypeMap(e,t){return"none"===e&&t?"follows":"both"!==e||t?"follows"!==e||t?"fans"===e&&t?"both":e:"none":"fans"}},10409:function(e,t,n){"use strict";n.d(t,{j:function(){return d}});var r=n(41622),i=n(377);n(97553),n(86651),n(64961),n(12996),n(59564),n(97357),n(34333),n(80156),n(50721),n(29112),n(67275),n(59989),n(7099),n(27461),n(23339),n(51109),n(87989);var a=n(40122),o=n(66002),u=n(93328),l=n(95874),s=n(67156),c=n(10602),d=(0,o.Q_)("activity",function(){var e,t=(0,l.h)().handleHttpCatch,n=(0,u.iH)(""),o=(0,u.iH)(!1),d=(0,u.qj)([]),v={},setEntryInfo=function(e){var t=d.findIndex(function(t){return t.type===e.type});-1===t?d.push(e):d[t]=e},getEntryInfo=function(e){return d.find(function(t){return t.type===e})},getJumpType=function(e){return new URL(e).searchParams.get("jumpType")||s.jU.default};var f=(e=(0,r._)(function(){var e,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,a.JD)()];case 1:if(!(null==(n=r.sent())?void 0:null===(e=n.globalConfig)||void 0===e?void 0:e.loadPageUrl))return[2];return(0,c.P)(n,function(){setEntryInfo({type:s.UZ.globalModal,show:!0,link:n.globalConfig.loadPageUrl,extra:n.globalConfig})}),[3,3];case 2:return t("getApiSnsWebGlobalConfig",r.sent()),[3,3];case 3:return[2]}})}),function getGlobalConfig(){return e.apply(this,arguments)});return{isOpen:o,currentUrl:n,entryList:d,openActivity:function(e){var t=getEntryInfo(e);if(!!t){var r=getJumpType(t.link);if(t.openType===s.B8.newPage||r===s.jU.new){window.open(t.link,"_blank");return}if(t.openType===s.B8.currentPage||r===s.jU.current){window.open(t.link,"_self");return}n.value=t.link,o.value=!0}},closePanel:function(){o.value=!1,n.value=""},setEntryInfo:setEntryInfo,getEntryInfo:getEntryInfo,openActivityPanel:function(e){n.value=e,o.value=!0},setExposed:function(e,t){v["".concat(e,"-").concat(t)]=!0},isExposed:function(e,t){return v["".concat(e,"-").concat(t)]||!1},getGlobalConfig:f,getJumpType:getJumpType}})},97611:function(e,t,n){"use strict";n.d(t,{q:function(){return d}}),n(15066);var r=n(64732),i=n(96144),a=n(66002),o=n(93328),u=n(64695),l=n(95509),s=n(6890),c=n(85537);function useWebLab(){var e=(0,o.iH)(null),t=(0,c.L)(),n=(0,s.s6)();if((0,o.vl)(function(){var t,r=(0,o.Zq)(),i=null==r?void 0:null===(t=r.state)||void 0===t?void 0:t.webLab;i&&(e.value=i,n.webLabData=i)}),n.webLabData)return{webLabRes:(0,o.iH)(n.webLabData)};function fetchWebLab(t){r.dJ.get("WEB_LAB",{baseURL:(0,u.q)(),params:{user_id:t}}).then(function(t){e.value=t}).catch(function(){e.value=null})}return l.j&&(0,o.YP)(function(){var e;return null===(e=t.userInfo)||void 0===e?void 0:e.userId},function(){var e;(null===(e=t.userInfo)||void 0===e?void 0:e.userId)&&fetchWebLab(t.userInfo.userId)},{immediate:!0}),{webLabRes:e}}var d=(0,a.Q_)("aiAbExp",function(){var e=(0,i.$T)("userExp"),t=useWebLab().webLabRes;return{isAIMode:(0,o.Fl)(function(){var n,r,i;return(null==e?void 0:null===(n=e.flags)||void 0===n?void 0:n.useAiSearch)==="enable"&&(null==e?void 0:null===(r=e.flags)||void 0===r?void 0:r.pcWebAiSearch)!=="disable"||!!(null===(i=t.value)||void 0===i?void 0:i.hasAccess)})}})},48667:function(e,t,n){"use strict";n.d(t,{y:function(){return a}});var r=n(66002),i=n(93328),a=(0,r.Q_)("AiGuideWords",function(){return{guideWords:(0,i.iH)(null)}})},10944:function(e,t,n){"use strict";n.d(t,{K:function(){return u}}),n(85203),n(87394),n(94941),n(48421),n(97357),n(34333),n(92519),n(43648),n(87989);var r=n(83966),i=n(85537),a=n(66002);n(95474);var o=n(93328),u=(0,a.Q_)("aiSugHistory",function(){var saveHistory=function saveHistory(e){localStorage.setItem(n.value,(0,r.u)(e)||"")},getHistory=function getHistory(){var e=localStorage.getItem(n.value)||"";return(0,r.D)(e)||[]},e=8,t=(0,i.L)(),n=(0,o.Fl)(function(){var e,n,r=null!==(n=null==t?void 0:null===(e=t.userInfo)||void 0===e?void 0:e.userId)&&void 0!==n?n:"";return"ai_search_history_".concat(r)}),a=(0,o.iH)(getHistory());return(0,o.bv)(function(){a.value=getHistory()}),(0,o.YP)(function(){return n.value},function(){a.value=getHistory()}),{historyList:a,addHistory:function addHistory(t){if(!!t&&!!t.trim())a.value=a.value.filter(function(e){return e.text!==t}),a.value.unshift({text:t,updateAt:Date.now()}),a.value=a.value.slice(0,e),saveHistory(a.value)},deleteHistory:function deleteHistory(e){a.value=a.value.filter(function(t){return t.text!==e}),saveHistory(a.value)},clearHistory:function clearHistory(){a.value=[],saveHistory(a.value)}}})},51948:function(e,t,n){"use strict";n.d(t,{t:function(){return s}});var r=n(41622),i=n(377);n(7608);var a=n(41782),o=n(32335),u=n(66002),l=n(93328),s=(0,u.Q_)("AiSugDataForChat",function(){var e=(0,l.iH)(null),t=(0,o.t)();function _getGuideWordsData(){return(_getGuideWordsData=(0,r._)(function(n){var r,o,u;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return e.value=null,[4,(0,a.C)({businessType:"image_search_sug",conversationId:null===(r=t.activeConversation)||void 0===r?void 0:r.getConversationId(),messageId:"",fileId:null===(o=n.imageList[0])||void 0===o?void 0:o.fileId,source:"pc_sug",imageSearchSource:"album",anchorBox:JSON.stringify({x:0,y:0,width:1,height:1})})];case 1:return u=i.sent(),e.value=u,[2]}})})).apply(this,arguments)}return{guideWordsData:e,getGuideWordsData:function getGuideWordsData(e){return _getGuideWordsData.apply(this,arguments)}}})},12041:function(e,t,n){"use strict";n.d(t,{e:function(){return u}});var r=n(66993);n(64961),n(12996),n(59564),n(97357),n(34333);var i=n(32335),a=n(66002),o=n(93328),u=(0,a.Q_)("traceSourceStore",function(){var e=(0,i.t)(),t=(0,o.iH)(),n=(0,o.iH)(null),a=[10,11],u=(0,o.iH)({traceSource:10,traceSourceKeyword:10});return{traceSourceInfo:t,traceSourceKeywordInfo:n,drawerPriorityMap:u,getCurrentRound:function getCurrentRound(){var n;return null===(n=e.rounds)||void 0===n?void 0:n.find(function(e){var n,r;return(null===(n=e.aiMessage)||void 0===n?void 0:n.conversationId)===(null===(r=t.value)||void 0===r?void 0:r.conversation_id)})},openTraceSourceDrawer:function openTraceSourceDrawer(e){var n,i;t.value=e,u.value.traceSource=(n=Math).max.apply(n,(0,r._)(a)),u.value.traceSourceKeyword=(i=Math).min.apply(i,(0,r._)(a))},closeTraceSourceDrawer:function closeTraceSourceDrawer(){t.value=null,u.value.traceSource=10},openTraceSourceKeywordDrawer:function openTraceSourceKeywordDrawer(e){var t,i;n.value=e,u.value.traceSourceKeyword=(t=Math).max.apply(t,(0,r._)(a)),u.value.traceSource=(i=Math).min.apply(i,(0,r._)(a))},closeTraceSourceKeywordDrawer:function closeTraceSourceKeywordDrawer(){n.value=null,u.value.traceSourceKeyword=10}}})},17238:function(e,t,n){"use strict";n.d(t,{Y:function(){return f}});var r=n(41622),i=n(66993),a=n(377);n(86651),n(34333),n(55947),n(87989),n(36277),n(27461),n(23339),n(51109);var o=n(40122),u=n(95874),l=n(52504),s=n(66002),c=n(6890);n(58051),n(43648);var d=n(94526),v=n(93328);function useUserBoardList(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pageSize:15}).pageSize,n=(0,u.h)().handleHttpCatch,l=(0,d.QT)(function(e){var n=e.userId,r=e.page;return(0,o.yC)({params:{userId:n,num:t,page:r||1}})},{manual:!0}),s=l.loading,c=l.error,f=l.runAsync,p=(0,v.qj)({});var h=(e=(0,r._)(function(e,r){var o,u,l,d,v;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(s.value)return[2];!p[e]&&(p[e]={boardCount:0,boards:[],page:0,pageSize:t,error:void 0}),u=(o=p[e]).boards,l=r||o.page+1,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,f({userId:e,page:l})];case 2:return d=a.sent(),Object.assign(p[e],{page:l,boards:(0,i._)((u||[]).slice(0,t*(l-1))).concat((0,i._)(d.boards||[])),boardCount:d.boardCount,error:c.value}),[3,4];case 3:return n("getApiSnsWebV1BoardUser",v=a.sent()),Object.assign(p[e],{error:v}),[3,4];case 4:return[2]}})}),function loadMoreData(t,n){return e.apply(this,arguments)});return{boardListData:p,loading:s,loadMoreBoardListData:h}}var f=(0,s.Q_)("board",function(){var e,t,n,s=(0,c.s6)(),d=(0,u.h)().handleHttpCatch,f=useUserBoardList(),p=f.boardListData,h=f.loading,g=f.loadMoreBoardListData,m=(0,v.iH)([]),y=(0,v.iH)({}),I=(0,v.iH)({}),_=(0,v.iH)("pending"),resetBoardFeedsMap=function(e){I.value[e]={cursor:"",hasMore:!0,notes:[]}};var w=(e=(0,r._)(function(e){var t,n,r,u,l,c,v=arguments;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(v.length>1&&void 0!==v[1]&&v[1]&&resetBoardFeedsMap(e),!(null===(t=I.value[e])||void 0===t?void 0:t.hasMore))return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,o.Ks)({params:{boardId:e,num:30,cursor:(null===(n=I.value[e])||void 0===n?void 0:n.cursor)||"",imageFormats:s.imageFormatParams.toString()}})];case 2:return u=a.sent(),I.value[e]={cursor:(null==u?void 0:u.cursor)||"",hasMore:null===(l=null==u?void 0:u.hasMore)||void 0===l||l,notes:(0,i._)((null===(r=I.value[e])||void 0===r?void 0:r.notes)||[]).concat((0,i._)((null==u?void 0:u.notes)||[]))},[3,4];case 3:throw d("getApiSnsWebV1BoardNote",c=a.sent()),c;case 4:return[2]}})}),function getBoardFeeds(t){return e.apply(this,arguments)});var k=(t=(0,r._)(function(e,t){var n,r;return(0,a.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,o.U_)({params:{imageFormats:s.imageFormatParams.join(",")},resourceParams:{boardId:e}})];case 1:return n=t.sent(),y.value=n,[3,3];case 2:throw d("putApiSnsWebV1Board",r=t.sent(),function(){r.code,l.o.BoardNotFound}),r;case 3:return[2]}})}),function getBoardDetails(e,n){return t.apply(this,arguments)});var S=(n=(0,r._)(function(e,t){var n;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),_.value="pending",[4,Promise.all([k(e,t),w(e,!0)])];case 1:return n.sent(),_.value="resolved",[3,3];case 2:return n.sent(),_.value="rejected",[3,3];case 3:return[2]}})}),function getBoardPageData(e,t){return n.apply(this,arguments)});return{boardListData:p,isLoadingBoardList:h,loadMoreBoardListData:g,getBoardFeeds:w,boardDetails:y,getBoardDetails:k,boardFeedsMap:I,boardPageStatus:_,getBoardPageData:S,userBoardList:m}})},32335:function(e,t,n){"use strict";n.d(t,{t:function(){return Z}});var r=n(41622),i=n(377);n(86651),n(43648),n(87989),n(74093),n(20768),n(41648),n(59339),n(47444),n(34757),n(85908),n(39995),n(22943),n(54767),n(55820),n(93225),n(33708),n(64322),n(47771),n(27461),n(23339),n(51109),n(34333),n(55947),n(7608);var a=n(66002),o=n(4659),u=n(93328);n(19077),n(75973),n(18638),n(96336),n(87168),n(14190),n(4137),n(70805),n(5317),n(81167),n(22583),n(89655),n(88598),n(11530),n(16765),n(3398),n(90621),n(35904),n(73982),n(87683),n(59735),n(69167),n(27151),n(95341),n(53395),n(10074),n(31899),n(98398),n(94837),n(53077),n(14340),n(31578),n(46521),n(49932),n(78246),n(62444),n(34076),n(12334),n(68802),n(76267),n(83257),n(90834),n(907),n(18552),n(87535),n(75204),n(97357),n(36277);var l=n(77630),s=n(39284),c=n(76192),d=n(90948),v=n(70879);n(42876),n(33933);var f=n(64732),p=n(64695);n(41593);var h=n(81334);function getTabDeviceId(){try{var e=window.sessionStorage.getItem(h.Z.SESSION_DEVICE_ID_KEY);return!e&&(e=(0,o.Z)(),window.sessionStorage.setItem(h.Z.SESSION_DEVICE_ID_KEY,e)),e}catch(e){return(0,o.Z)()}}function getOrCreateTabDeviceId(){return getTabDeviceId()}function _postSendAi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=getTabDeviceId();return f.dJ.post("CHAT_SEND_AI",e,(0,v._)({transform:!1,baseURL:(0,p.q)(),headers:{c_device_id:n},timeout:1e4},t))}function postSendAi(e){var t=e.content,n=e.appCid,r=e.uuid,i={source:"web_ask",uuid:r};return e.multiParamQuery&&(i.multi_param_query=e.multiParamQuery,e.multiParamQuery.includes("file_id")&&(i.need_image_audit=!0)),_postSendAi({uuid:r,appCid:n,domain:"red",bizType:"dqa_chatsearch",contentInfo:{contentType:101,content:{type:1,data:'{ "content": "'.concat(t,'" }'),degrade:"",summary:t}},subBizType:"davinci",extension:i})}f.dJ.get;var g=n(41782),m=n(27337);function getResponseReferences(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f.dJ.get("/api/sns/web/v1/search/dqa/onebox/detail",(0,v._)({params:(0,m._)((0,v._)({},e),{searchId:"",source:"web",type:"inside"}),transform:!0},t))}var y=n(51399);function interruptConversation(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f.dJ.post("WEB_AI_SEARCH_INTERRUPT_CONVERSATION",(0,m._)((0,v._)({},e),{source:"web_ask",signalType:y.T.INTERRUPT_NEW}),(0,v._)({transform:!0},t))}var I=n(94809),_=n(15589);function uint8ArrayToUtf8String(e){return new TextDecoder("utf-8").decode(e)}function parsePushAIRawMessage(e){try{return(0,c.toCamelCase)(JSON.parse(e.data.payload),{deep:!0})}catch(t){return console.error("parseAIRawMessage error",e),null}}function parseAIRawMessage(e){try{var t;return t=e.data instanceof Uint8Array?uint8ArrayToUtf8String(e.data):"string"==typeof e.data?e.data:String(e.data),(0,c.toCamelCase)(JSON.parse(t),{deep:!0})}catch(e){return null}}var w=null,k=(0,u.iH)(!1),S=null,b=null;function useAiAgent_setSetupPromise(e){b=e}function useAiAgent(){var e,t=(0,u.Fl)(function(){var e;return{longlinkInstance:w,ready:k.value,checkHealthy:(0,r._)(function(){var e,t,n;return(0,i.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,null==w?void 0:null===(e=w.checkHealthy)||void 0===e?void 0:e.call(w)];case 1:return[2,(null==(t=n.sent())?void 0:t.code)===0];case 2:return n.sent(),[2,!1];case 3:return[2]}})}),sendAiRequest:(e=(0,r._)(function(e){return(0,i.Jh)(this,function(t){switch(t.label){case 0:return[4,postSendAi(e)];case 1:return[2,t.sent()]}})}),function(t){return e.apply(this,arguments)}),getPromptRecommendation:g.C,interruptConversation:interruptConversation,getResponseReferences:getResponseReferences}}),subscribeRwpEvents=function(e,t){var n=t.requestConfig,r=n.onAgentMessagePush,i=n.onAgentSignalPush;e.on(l.EVENTS.READY,function(){k.value=!0;var e=Date.now(),n=t.initUuid;(0,I.Sn)({type:I.oV.READY,time:e,uuid:n})}),e.on(l.EVENTS.STATE,function(e){e===l.EVENTS.CLOSE&&(k.value=!1)}),e.on(l.EVENTS.PUSH_MESSAGE,function(e){if(!!Array.isArray(e))e.forEach(function(e){var t=parsePushAIRawMessage(e);if(!!t)"message"===t.type?r(t):"signal"===t.type&&(null==i||i(t))})}),e.on("dqa_chatsearch",function(e){if(!!Array.isArray(e))e.forEach(function(e){var t=parseAIRawMessage(e);if(!!t)"message"===t.type?r(t):"signal"===t.type&&(null==i||i(t))})})},initAgent=function(e){if(S=e,!w){var t=new d.K({uid:e.uid,pkgVersion:_.i8,onTokenError:function(e){var t;(0,I.Pi)(I.Bw.TOKEN_GET_FAIL,JSON.stringify({error:(null==e?void 0:null===(t=e.toString)||void 0===t?void 0:t.call(e))||"获取 token 失败",code:null==e?void 0:e.code}))}}),n=t.getLonglink();w=n,subscribeRwpEvents(n,e),n.bizRegister({bizName:"dqa_chatsearch",serializeType:s.SerializeType.PROTOBUF}).then(function(e){(null==e?void 0:e.code)!==0&&(0,I.Pi)(I.Bw.LONGLINK_BIZ_REGISTER_FAILED,null==e?void 0:e.msg)}),t.login().then(function(e){(null==e?void 0:e.code)!==0&&(0,I.Sn)({type:I.oV.LOGIN_FAILED,time:Date.now(),msg:{code:null==e?void 0:e.code,error:null==e?void 0:e.msg}})})}};var n=(e=(0,r._)(function(){var e,t=arguments;return(0,i.Jh)(this,function(n){switch(n.label){case 0:if(e=t.length>0&&void 0!==t[0]?t[0]:1e4,k.value)return[2,Promise.resolve(!0)];if(!b)return[3,2];return[4,b];case 1:n.sent(),n.label=2;case 2:if(!S)return(0,I.Pi)(I.Bw.LONGLINK_CONFIG_EMPTY),[2,Promise.resolve(!1)];return!w&&initAgent(S),[2,new Promise(function(t){if(k.value){t(!0);return}var n=setTimeout(function(){t(k.value)},e),r=setInterval(function(){k.value&&(clearInterval(r),clearTimeout(n),t(!0))},100)})]}})}),function ensureConnected(){return e.apply(this,arguments)});return{agent:t,initAgent:initAgent,ensureConnected:n,disconnect:function(){if(w){var e;null===(e=w.close)||void 0===e||e.call(w,"手动断开"),w=null,k.value=!1,S=null}},setSetupPromise:useAiAgent_setSetupPromise,getLonglinkInstance:function(){return w}}}var M=n(7221),L=n(33462),x=n(16803),T=n(99505),D=n(79612),N=n(48667),E=n(10944),R=n(68284),U=n(46490),P=n(90251),F=n(51606);n(63235),n(15368),n(12970),n(8503),n(32207),n(13598),n(23541),n(63827),n(30488),n(82236),n(51938),n(33913),n(94949),n(17891),n(44258),n(38609),n(4787),n(44211),n(29338),n(73405),n(98754),n(31832),n(88402),n(56712),n(72169),n(58486),n(64961),n(12996),n(59564),n(87394),n(94941),n(48421),n(97542),n(97553),n(28636),n(6045),n(10364),n(67673);var j=n(61923),O=n(18462),H=function(){function Conversation(e,t){(0,U._)(this,Conversation),(0,F._)(this,"conversationId",void 0),(0,F._)(this,"roundIds",void 0),(0,F._)(this,"userId",void 0),(0,F._)(this,"deviceId",void 0),(0,F._)(this,"rounds",void 0),this.conversationId=e,this.userId=t,this.deviceId=getTabDeviceId(),this.roundIds=new Set,this.rounds=(0,u.iH)([])}return(0,P._)(Conversation,[{key:"updateThinkProgress",value:function updateThinkProgress(e,t){t.fragmentType===j.Ee.Processing&&(e.thinkProgress=t.thinkingProgressItem)}},{key:"updateQuerySource",value:function updateQuerySource(e,t){t.fragmentType===j.Ee.QuerySource&&(e.querySource=t.queryStatus)}},{key:"convertMessageForUi",value:function convertMessageForUi(e){var t="",n=e.dataFragments||[];"ai"===e.sender&&n.forEach(function(e){(e.fragmentType===j.Ee.Text||e.fragmentType===j.Ee.ImageList||e.fragmentType===j.Ee.Table)&&(t+=e.text)}),"user"===e.sender&&n.forEach(function(e){e.text&&(t+=e.text)}),e.text=t||e.text||""}},{key:"isMsgIdMatch",value:function isMsgIdMatch(e,t){var n=t.replace(/^ai-/,""),r=e.replace(/^ai-/,"");return r===n}},{key:"getCurrentRound",value:function getCurrentRound(){var e=this.rounds.value;if(0!==e.length)return e[e.length-1]}},{key:"findRound",value:function findRound(e){return this.rounds.value.find(function(t){return t.roundId===e})}},{key:"createRound",value:function createRound(e,t,n,r){this.rounds.value=this.rounds.value.filter(function(e){var t;return!e.userMessage.msgId.startsWith("local-")&&!(null===(t=e.aiMessage)||void 0===t?void 0:t.msgId.startsWith("local-"))});var i=this.rounds.value;if(i.length>0){var a,o=i[i.length-1];if(!o.isComplete){if(o.isComplete=!0,o.aiMessage){o.aiMessage.isInterrupted=!0,o.aiMessage.isFinished=!0;var u=(0,O.B)(o.aiMessage.msgId);interruptConversation({conversationId:this.conversationId,lastMsgId:u,userId:this.userId,deviceId:this.deviceId}).catch(function(){})}(0,I.re)(o.roundId),L.j.emit(L.w.ROUND_INTERRUPTED,{msgId:(null===(a=o.aiMessage)||void 0===a?void 0:a.msgId)||"",conversationId:this.conversationId,roundId:o.roundId,source:"longlink"})}}this.roundIds.add(e);var l={msgId:n,conversationId:this.conversationId,sender:"user",roundId:e,dataFragments:[{fragmentType:j.Ee.Text,text:t,indexInMsg:0,queryStatus:{avatars:[],text:""},thinkingProgressItem:[],images:[]}],text:t,aiInputImageList:(null==r?void 0:r.aiInputImageList)||[],anchorId:(null==r?void 0:r.anchorId)||-1,isFinished:!0,isTimeout:!1},s={roundId:e,userMessage:l,aiMessage:void 0,isComplete:!1,createdAt:Date.now()};return this.rounds.value.push(s),s}},{key:"addFragment",value:function addFragment(e,t){var n=this.getCurrentRound();if(!!n&&!n.isComplete){if(n.aiMessage){if(n.aiMessage.msgId.startsWith("local-")){if(!this.isMsgIdMatch(n.userMessage.msgId,e))return;n.aiMessage.msgId=e}else if(!this.isMsgIdMatch(n.userMessage.msgId,e))return}else{if(!this.isMsgIdMatch(n.userMessage.msgId,e))return;n.aiMessage={msgId:e,conversationId:this.conversationId,sender:"ai",roundId:n.roundId,dataFragments:[],isTimeout:!1,isFinished:!1}}if(void 0!==t.indexInConversation){var r=n.aiMessage.dataFragments.findIndex(function(e){return e.indexInConversation===t.indexInConversation});r>=0?n.aiMessage.dataFragments[r]=t:n.aiMessage.dataFragments.push(t),n.aiMessage.dataFragments.sort(function(e,t){var n,r;return(null!==(n=e.indexInConversation)&&void 0!==n?n:0)-(null!==(r=t.indexInConversation)&&void 0!==r?r:0)})}else n.aiMessage.dataFragments.push(t);this.updateThinkProgress(n.aiMessage,t),this.updateQuerySource(n.aiMessage,t),this.convertMessageForUi(n.aiMessage)}}},{key:"setFragments",value:function setFragments(e,t,n){var r=this,i=this.findRound(n);if(!!i&&!i.isComplete&&!!this.isMsgIdMatch(i.userMessage.msgId,e))i.aiMessage?i.aiMessage.msgId.startsWith("local-")&&(i.aiMessage.msgId=e):i.aiMessage={msgId:e,conversationId:this.conversationId,sender:"ai",roundId:n,dataFragments:[],isTimeout:!1,isFinished:!1,isFallback:!0},t.forEach(function(e){if(void 0!==e.indexInConversation){var t=i.aiMessage.dataFragments.findIndex(function(t){return t.indexInConversation===e.indexInConversation});t>=0?i.aiMessage.dataFragments[t]=e:i.aiMessage.dataFragments.push(e)}else i.aiMessage.dataFragments.push(e);r.updateThinkProgress(i.aiMessage,e),r.updateQuerySource(i.aiMessage,e)}),i.aiMessage.dataFragments.sort(function(e,t){var n,r;return(null!==(n=e.indexInConversation)&&void 0!==n?n:0)-(null!==(r=t.indexInConversation)&&void 0!==r?r:0)}),i.aiMessage.isFallback=!0,this.convertMessageForUi(i.aiMessage)}},{key:"markComplete",value:function markComplete(){var e=this.getCurrentRound();if(!!e&&!!e.aiMessage)e.aiMessage.isFinished=!0,e.aiMessage.isTimeout=!1,e.isComplete=!0,this.convertMessageForUi(e.aiMessage)}},{key:"markError",value:function markError(e){var t=this.getCurrentRound();if(!!t&&!!t.aiMessage)t.aiMessage.isTimeout=!0,t.aiMessage.isFinished=!0,t.aiMessage.errorReason=e,t.isComplete=!0}},{key:"interruptCurrentMessage",value:function interruptCurrentMessage(){var e=this.getCurrentRound();if(!!e&&!!e.aiMessage)e.aiMessage.isFinished=!0,e.aiMessage.isInterrupted=!0,e.isComplete=!0}},{key:"markSecurityRevoke",value:function markSecurityRevoke(e,t){var n=this.getCurrentRound();if(!!n&&!!n.aiMessage)n.aiMessage.isSecurityRevoked=!0,n.aiMessage.securityRevokeFragment=t,n.aiMessage.isFinished=!0,n.isComplete=!0}},{key:"deleteRound",value:function deleteRound(e){this.rounds.value=this.rounds.value.filter(function(t){return t.roundId!==e}),this.roundIds.delete(e)}},{key:"getAllMessages",value:function getAllMessages(){var e=[];return this.rounds.value.forEach(function(t){e.push(t.userMessage),t.aiMessage&&e.push(t.aiMessage)}),e}},{key:"getLastMessage",value:function getLastMessage(){var e=this.getCurrentRound();if(!!e)return e.aiMessage||e.userMessage}},{key:"getUnfinishedMessages",value:function getUnfinishedMessages(){return this.rounds.value.filter(function(e){return!e.isComplete&&e.aiMessage}).map(function(e){return e.aiMessage})}},{key:"getConversationId",value:function getConversationId(){return this.conversationId}},{key:"getLastRound",value:function getLastRound(){return this.getCurrentRound()}}]),Conversation}(),W=n(85537),z=n(12041),Z=(0,a.Q_)("conversation",function(){var isDuplicateTrigger=function isDuplicateTrigger(e){if(!b.value)return!1;var t=Date.now()-b.value.timestamp;return b.value.keyword===e&&!!(t<5e3)||!1},recordTrigger=function recordTrigger(e){b.value={keyword:e,timestamp:Date.now()}},setupMessageBusListeners=function setupMessageBusListeners(e){var onFragmentReceived=function(t){if(t.conversationId===e&&!!d.value){if(!k.has(t.msgId)){k.set(t.msgId,!0);var n=t.msgId.slice(3),r=S.get(n);r&&trackAiSearchSendSuccess(n,r)}t.fragment?d.value.addFragment(t.msgId,t.fragment):t.fragments&&d.value.setFragments(t.msgId,t.fragments,t.roundId)}},onComplete=function(t){if(t.conversationId===e&&!!d.value)d.value.markComplete()},onError=function(t){if(t.conversationId===e&&!!d.value)d.value.markError(t.reason||"unknown")},onSecurityRevoke=function(t){if(t.conversationId===e&&!!d.value)t.msgId&&t.revokeFragment&&d.value.markSecurityRevoke(t.msgId,t.revokeFragment)};return L.j.on(L.w.FRAGMENT_RECEIVED,onFragmentReceived),L.j.on(L.w.COMPLETE,onComplete),L.j.on(L.w.ERROR,onError),L.j.on(L.w.SECURITY_REVOKE,onSecurityRevoke),function(){L.j.off(L.w.FRAGMENT_RECEIVED,onFragmentReceived),L.j.off(L.w.COMPLETE,onComplete),L.j.off(L.w.ERROR,onError),L.j.off(L.w.SECURITY_REVOKE,onSecurityRevoke)}},trackAiSearchSendSuccess=function trackAiSearchSendSuccess(e,t){try{var n=g.rootSearchId||g.searchContext.searchId,r={answerId:e,instanceId:n,searchSessionId:n,searchWord:t,searchWordFrom:g.keywordFrom};if(g.aiSearchImageList&&g.aiSearchImageList.length>0&&(void 0!==g.currentAnchorId&&null!==g.currentAnchorId&&(r.searchBoxid="".concat(g.currentAnchorId)),g.aiSearchImageList.length>0)){var i=g.aiSearchImageList[0];(null==i?void 0:i.fileId)&&(r.searchImageFromFileId=i.fileId)}(0,T.i6)(D.pD.ai.send.result,r,n)}catch(e){}},e=useAiAgent(),t=e.agent,n=e.initAgent,a=e.ensureConnected,l=e.disconnect,s=e.setSetupPromise,c=e.getLonglinkInstance,d=(0,u.XI)(null),v=(0,u.XI)(null),f=(0,u.iH)([]),p=(0,z.e)(),h=(0,E.K)(),g=(0,R.R)(),m=(0,u.iH)(!1),y=(0,N.y)(),_=(0,u.XI)(null),w=(0,u.XI)(null),k=new Map,S=new Map,b=(0,u.XI)(null),U=(0,u.Fl)(function(){var e;return(null===(e=d.value)||void 0===e?void 0:e.getAllMessages())||[]}),P=(0,u.Fl)(function(){var e;return(null===(e=d.value)||void 0===e?void 0:e.rounds.value)||[]}),F=(0,u.Fl)(function(){var e;return(null===(e=d.value)||void 0===e?void 0:e.getUnfinishedMessages())||[]}),j=(0,u.Fl)(function(){return F.value.length>0}),O=(0,u.Fl)(function(){var e;return null===(e=d.value)||void 0===e?void 0:e.getLastMessage()});function _getGuideWordsWhenSendMsg(){return(_getGuideWordsWhenSendMsg=(0,r._)(function(e,n){var r,a;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,t.value.getPromptRecommendation({conversationId:null===(r=d.value)||void 0===r?void 0:r.getConversationId(),messageId:e,query:n})];case 1:return a=i.sent(),y.guideWords=a,[2]}})})).apply(this,arguments)}function _sendMessage(){return(_sendMessage=(0,r._)(function(e,n,r){var u,l,s,c,f,y,w,k,b,M,L,x,T,D,N,E,R,U;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(0===P.value.length&&t.value.checkHealthy(),s=(0,o.Z)(),!d.value||d.value.getConversationId()!==e||isDuplicateTrigger(n))return[2,null];if(c=Date.now(),(0,I.GJ)(s,c),(0,I.Sn)({type:I.oV.SEND_START,time:c,uuid:s,app_cid:e,msg:{agentReady:null===(u=t.value)||void 0===u?void 0:u.ready,content:n}}),0===P.value.length&&(m.value=!0),_.value=s,!(null==r?void 0:r.skipImmediateUI)&&(f=d.value.createRound(s,n,"local-".concat(s),{aiInputImageList:g.aiSearchImageList||[],anchorId:(null===(y=g.aiSearchImageList)||void 0===y?void 0:y.length)?g.currentAnchorId:void 0}),m.value=!1,!f.aiMessage&&(f.aiMessage={msgId:"local-ai-".concat(s),conversationId:e,sender:"ai",roundId:s,dataFragments:[],thinkProgress:[{progressStatus:1,progressText:"问题分析中"},{progressStatus:0,progressText:"搜索相关内容"},{progressStatus:0,progressText:"总结答案"}],isTimeout:!1,isFinished:!1})),w=(null===(l=t.value)||void 0===l?void 0:l.ready)||!1)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,a(1e3)];case 2:return w=i.sent(),[3,4];case 3:return k=i.sent(),(0,I.Pi)(I.Bw.LONGLINK_WAIT_TIMEOUT,{error:null==k?void 0:null===(b=k.toString)||void 0===b?void 0:b.call(k)}),w=!1,[3,4];case 4:if(i.trys.push([4,8,,9]),p.closeTraceSourceKeywordDrawer(),p.closeTraceSourceDrawer(),h.addHistory(n),!(null==r?void 0:r.waitForData))return[3,6];return[4,r.waitForData];case 5:i.sent(),i.label=6;case 6:return(0,I.Sn)({type:I.oV.START_SEND_AI,time:Date.now(),uuid:s,app_cid:e,msg:{ready:w,content:n}}),[4,t.value.sendAiRequest({uuid:s,appCid:e,content:n,multiParamQuery:JSON.stringify(g.getMultiParamQuery().multiParamQuery)})];case 7:return M=i.sent(),S.set(M.msgId,n),!function getGuideWordsWhenSendMsg(e,t){return _getGuideWordsWhenSendMsg.apply(this,arguments)}(M.msgId,n),(null==r?void 0:r.skipImmediateUI)?!(f=d.value.createRound(s,n,M.msgId,{aiInputImageList:g.aiSearchImageList||[],anchorId:(null===(L=g.aiSearchImageList)||void 0===L?void 0:L.length)?g.currentAnchorId:void 0})).aiMessage&&(f.aiMessage={msgId:M.msgId,conversationId:e,sender:"ai",roundId:s,dataFragments:[],thinkProgress:[{progressStatus:1,progressText:"问题分析中"},{progressStatus:0,progressText:"搜索相关内容"},{progressStatus:0,progressText:"总结答案"}],isTimeout:!1,isFinished:!1}):f&&(f.userMessage.msgId=M.msgId),v.value&&(T=(null===(x=t.value)||void 0===x?void 0:x.ready)||!1,v.value.registerMessage(s,T,M.msgId)),recordTrigger(n),[2,M.msgId];case 8:return D=i.sent(),_.value=null,R=(null==D?void 0:null===(N=D.toString)||void 0===N?void 0:N.call(D))||"Unknown error",U=(null==D?void 0:D.code)||-1,(0,I.Sn)({type:I.oV.SEND_FAILED,time:Date.now(),uuid:s,app_cid:e,msg:{error:R,code:U,ready:null===(E=t.value)||void 0===E?void 0:E.ready}}),[2,null];case 9:return[2]}})})).apply(this,arguments)}return(0,u.Y3)(function(){"undefined"!=typeof window&&(window.__XHS_AI_DEBUG__={get rounds(){return P.value},get messages(){return U.value},closeLonglink:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"调试手动关闭",n=c();return n?(console.log("\uD83D\uDD27 [DEBUG] 手动关闭长连接: ".concat(t)),null===(e=n.close)||void 0===e||e.call(n,t),!0):(console.warn("\uD83D\uDD27 [DEBUG] 长连接实例不存在，无法关闭"),!1)}})}),{agent:t,initAgent:n,ensureConnected:a,disconnect:l,setSetupPromise:s,activeConversation:d,createConversation:function createConversation(e){null===(t=v.value)||void 0===t||t.cleanup();var t,n=(0,W.L)().userInfo.userId||"";d.value=new H(e,n);var r=new M.k(e,function(){return _.value});return v.value=new x.l(e,r),setupMessageBusListeners(e),_.value=null,d},clearConversation:function clearConversation(){var e;null===(e=v.value)||void 0===e||e.cleanup(),v.value=null,d.value=null,b.value=null,_.value=null},messages:U,rounds:P,unfinishedMessages:F,isExistUnfinishedMessages:j,lastMessageInConversation:O,sendMessage:function sendMessage(e,t,n){return _sendMessage.apply(this,arguments)},historyQuerys:f,updateHistoryQuerys:function updateHistoryQuerys(e){!f.value&&(f.value=[]),f.value.push(e),f.value=f.value.slice(-5)},getLonglinkAdapter:function getLonglinkAdapter(){var e;return null===(e=v.value)||void 0===e?void 0:e.longlinkAdapter},getCurrentRoundId:function getCurrentRoundId(){return _.value},currentActiveRoundId:w,setCurrentActiveRoundId:function setCurrentActiveRoundId(e){w.value=e},getCurrentActiveRoundId:function getCurrentActiveRoundId(){return w.value},isInitializing:m,coordinator:v}})},39317:function(e,t,n){"use strict";n.d(t,{TX:function(){return j},NW:function(){return H}});var r=n(41622),i=n(70879),a=n(27337),o=n(82726),u=n(377);n(86651),n(87989),n(7608),n(72169),n(58486),n(36277),n(34333),n(27461),n(23339),n(51109),n(6045),n(10364),n(67673),n(82427),n(36062),n(57057),n(97357),n(58051),n(87535),n(75204);var l=n(40122),s=n(8306),c=n(51401),d=n(51899),v=n.n(d),f=n(66002),p=n(67156);n(10571);var h=n(10409);function useFeedsDataHandler(e,t,n){var r=(0,h.j)();return function(){e.forEach(function(e){"activity"===e.modelType&&(null===(o=e.activityCard)||void 0===o?void 0:o.loadPageUrl)&&r.setEntryInfo({type:p.UZ.feedCard,show:!0,link:e.activityCard.loadPageUrl,extra:(0,a._)((0,i._)({},e.activityCard),{trackId:e.trackId,id:e.id,activityAdSlotId:e.id})});var o,u=(0,a._)((0,i._)({},e),{index:t.value.length,exposed:!1,trackId:e.trackId||e.id||"",ssrRendered:!1});null==n||n(u)})}}var g=n(73251),m=n(95874);n(9557),n(19077),n(75973);var y=n(98413),I=n(93328),_=n(13285);function useHomeFeedSearchKey(){var e=(0,I.iH)(""),t=(0,I.iH)(0),n=(0,_.yj)(),init=function(){var r,i;t.value=5,e.value=null!==(i=null==n?void 0:null===(r=n.query)||void 0===r?void 0:r.target_note_id)&&void 0!==i?i:""},r=(0,I.YP)(n,function(){var e;(null==n?void 0:null===(e=n.query)||void 0===e?void 0:e.target_note_id)&&n.name===y.Z.ExploreName&&(init(),r())});return{searchKey:e,reduceSearchRemainNum:function(){if(0===t.value){e.value="";return}t.value-=1}}}var w=n(74369),k=n(81334),S=n(85537),b=n(28860),M=n(6890);function getInitCursorScore(){var e,t;return null!==(t=null===(e=window)||void 0===e?void 0:e.localStorage.getItem(k.Z.HOME_FEED_CURSOR_SCORE))&&void 0!==t?t:""}function useHomeFeedQuery(e){var t=(0,_.yj)(),n=(0,S.L)(),r=useHomeFeedSearchKey(),i=r.searchKey,a=r.reduceSearchRemainNum,o=(0,b.E)(),u=(0,M.s6)(),getCateGory=function(){var e,n,r;return u.isNIO?"car_nio":Number.isNaN(Number(null==t?void 0:null===(e=t.query)||void 0===e?void 0:e.channel_id))?null!==(r=null==t?void 0:null===(n=t.query)||void 0===n?void 0:n.channel_id)&&void 0!==r?r:"homefeed_recommend":"homefeed_recommend"},l=(0,I.qj)({cursorScore:getInitCursorScore(),num:30,refreshType:w.n.ACTIVE,noteIndex:0,unreadBeginNoteId:"",unreadEndNoteId:"",unreadNoteCount:0,category:getCateGory(),searchKey:i.value,needNum:o.minRenderNotes,imageFormats:[],needFilterImage:!1});(0,I.YP)(function(){return l.category},function(){u.isNIO&&(l.category="car_nio")});var s=(0,I.qj)({cachedFeeds:[],unreadBeginNoteId:"",unreadEndNoteId:"",unreadNoteCount:0,timestamp:0}),resetUnread=function(){l.unreadBeginNoteId="",l.unreadEndNoteId="",l.unreadNoteCount=0},resetQuery=function(){l.cursorScore="",l.refreshType=w.n.ACTIVE,l.noteIndex=0,resetUnread()};return(0,I.wF)(function(){n.$mitt.on("onLogin",resetQuery)}),{updateCategory:function(e){l.category=e,"homefeed_recommend"!==e&&(l.searchKey="")},query:l,resetQuery:resetQuery,unreadInfo:s,updateQuery:function(t){l.needNum=o.minRenderNotes-2*o.columns,l.noteIndex=e.value.length,l.num=t,"homefeed_recommend"===l.category&&(l.searchKey=i.value)},updateUnreadQuery:function(){if("homefeed_recommend"===l.category&&""===i.value){var e,t=null===(e=window)||void 0===e?void 0:e.localStorage.getItem(k.Z.UNREAD_NOTE_INFO);try{if(t){var n=JSON.parse(t);l.unreadBeginNoteId=n.unreadBeginNoteId,l.unreadEndNoteId=n.unreadEndNoteId,l.unreadNoteCount=n.unreadNoteCount}else resetUnread()}catch(e){resetUnread()}}},initUnreadQuery:function(){l.unreadBeginNoteId="",l.unreadEndNoteId="",l.unreadNoteCount=0},updateCursorScoreInStorage:function(e){try{var t;null===(t=window)||void 0===t||t.localStorage.setItem(k.Z.HOME_FEED_CURSOR_SCORE,e)}catch(e){console.error(e)}},reduceSearchRemainNum:a,getCateGory:getCateGory}}var L=n(45634),x=n.n(L),T=n(38165),D=n.n(T);function useMfStatistics(){var e=(0,M.s6)(),t=(0,I.qj)({timestamp:0,visitTimes:0,readFeedCount:0}),n=(0,I.iH)(!1),serializeMfStatistics=function(e){try{var t;null===(t=window)||void 0===t||t.localStorage.setItem(k.Z.MF_STATISTICS,JSON.stringify(e))}catch(e){}};return(0,I.YP)(t,function(e){n.value&&serializeMfStatistics(e)},{deep:!0}),{mfStatistics:t,initMfStatistics:function(){t.timestamp=e.serverTime;var r=localStorage.getItem(k.Z.MF_STATISTICS);if(r)try{var i,a,o=JSON.parse(r);x()(o.timestamp).isToday()&&(t.visitTimes=null!==(i=null==o?void 0:o.visitTimes)&&void 0!==i?i:0,t.readFeedCount=null!==(a=null==o?void 0:o.readFeedCount)&&void 0!==a?a:0)}catch(e){}serializeMfStatistics(t),n.value=!0},addVisitTimes:function(){t.visitTimes+=1},addReadFeedCount:function(){t.readFeedCount+=1}}}x().extend(D());var N=n(64732);function homefeedPrefetch(e){return N.dJ.get("HOMEFEED_PREFETCH",{params:{prefetchId:e.prefetchId},baseURL:"".concat(window.location.protocol,"//").concat(window.location.host)})}var E=n(94186),R=n(10535),U=n(35547);function emitMfEvent(){var e=H();return{emitMfApiEnd:function(){e.$mitt.emit("mfApiEnd")}}}var P=n(76643),F=n(69876),j="homefeed_recommend",O="EMPTY";function useMfRequestShareState(){var e=(0,o._)((0,F.OT)(!1),2),t=e[0],n=e[1],r=(0,o._)((0,F.OT)(!1),2),i=r[0],a=r[1],u=(0,o._)((0,F.OT)(!1),2),l=u[0],s=u[1],c=(0,o._)((0,F.OT)(!1),2);return{isFetching:t,setIsFetching:n,isError:i,setIsError:a,isFirstSuccessFetched:c[0],setIsFirstSuccessFetched:c[1],isReplace:l,setIsReplace:s}}var H=(0,f.Q_)("feed",function(){var e,t,n,d,f,p,h,y,k,L,switchCategoryWithDelay=function switchCategoryWithDelay(e,t){clearTimeout(eL.value),eL.value=setTimeout(e,t)},x=emitMfEvent().emitMfApiEnd,T=(0,_.yj)(),D=(0,_.tv)(),N=(0,b.E)(),H=(0,S.L)(),W=(0,M.s6)(),z=(0,m.h)().handleHttpCatch,Z=(0,g.c)(),q=Z.placeholderFeeds,V=Z.clearPlaceholderFeeds,Y=Z.feedsCacheLogInfo,G=Z.isUsingPlaceholderFeeds,J=Z.setIsUsingPlaceholderFeeds,Q=Z.placeholderFeedsConsumed,K=Z.setPlaceholderFeedsConsumed,X=useMfRequestShareState(),$=X.isFetching,ee=X.setIsFetching,et=X.isError,en=X.setIsError,er=X.isFirstSuccessFetched,ei=X.setIsFirstSuccessFetched,ea=X.isReplace,eo=X.setIsReplace,eu=(0,o._)((0,F.OT)(P.T.UNCHECKED),2),el=eu[0],es=eu[1],ec=(0,I.iH)(""),ed=(0,I.iH)(),ev=(0,I.iH)(),ef=(0,I.iH)([]),ep=useHomeFeedQuery(ef),eh=ep.query,eg=ep.resetQuery,em=ep.unreadInfo,ey=ep.updateQuery,eI=ep.getCateGory,e_=ep.updateUnreadQuery,ew=ep.initUnreadQuery,ek=ep.updateCursorScoreInStorage,eS=ep.updateCategory,eb=ep.reduceSearchRemainNum,eC=(0,I.iH)({noteIds:[]}),eM=(0,I.iH)(null!==(L=eI())&&void 0!==L?L:j),eA=(0,I.iH)(),eL=(0,I.iH)(),ex=(0,I.iH)(!1),eT=(0,I.iH)(!1),eD=(0,I.iH)(!1),eN=(0,I.qj)({start:null,lasting:null}),eE=(0,I.iH)(E.e.Unknown),eR=(0,I.iH)(""),eU=l.p,eP=useMfStatistics(),eF=eP.mfStatistics,ej=eP.initMfStatistics,eO=eP.addReadFeedCount,eH=eP.addVisitTimes,eW=(0,I.Fl)(function(){var e,t=(null==q?void 0:null===(e=q.value)||void 0===e?void 0:e.length)&&0===ef.value.length,n="sEnable"===Y.flag;return t&&n?(J(!0),"placeholderFeeds"):ef.value.length>0&&ea.value?"update":ef.value.length>0?"feeds":!$&&et.value?"error":"loading"});var ez=(e=(0,r._)(function(){var e,t,n=arguments;return(0,u.Jh)(this,function(r){return e=n.length>0&&void 0!==n[0]&&n[0],t=n.length>1&&void 0!==n[1]?n[1]:N.minRenderNotes+3*N.columns,eb(),ey(t),e?e_():ew(),eh.imageFormats=W.imageFormatParams,ec.value&&(eh.prefetchId=ec.value),[2]})}),function handleMfRequestParams(){return e.apply(this,arguments)}),onBeforeSendRequest=function(){!eN.start&&(eN.start=performance.now()),ea.value&&(document.documentElement.scrollTop=0)};var eB=(t=(0,r._)(function(e){var t,n,r,i,a=arguments;return(0,u.Jh)(this,function(o){switch(o.label){case 0:var u;if(t=a.length>1&&void 0!==a[1]&&a[1],n=a.length>2?a[2]:void 0,!eN.lasting&&eN.start&&(eN.lasting=performance.now()-eN.start),((u=e)&&u.items&&!(u.items.length<=0)?(u.items.length<N.minRenderNotes-2*N.columns&&(0,E.xd)({type:E.te.MF_NOT_ENOUGH}),null):(0===ef.value.length&&en(!0),(0,E.xd)({type:E.te.MF_NULL}),O))===O||eD.value)return[2];if((null==e?void 0:e.cursorScore)&&(eh.cursorScore=e.cursorScore,ek(eh.cursorScore)),eh.refreshType=w.n.LOAD_MORE,er.value)return[3,3];if(ei(!0),!q.value)return[3,2];return V(),[4,(0,I.Y3)()];case 1:o.sent(),J(!1),o.label=2;case 2:document.documentElement.scrollTop=0,o.label=3;case 3:if(!t)return[3,5];return ef.value=[],[4,(0,I.Y3)()];case 4:o.sent(),o.label=5;case 5:return useFeedsDataHandler(e.items,ef,function(e){ef.value.push(e)})(),[4,null==n?void 0:null===(r=n.responseInterceptor)||void 0===r?void 0:r.call(n)];case 6:return o.sent(),i={webid:c.Z.get("webId")||"unknown",login:H.loggedIn},setTimeout(function(){(0,E.hO)(ef.value,"explore-".concat(eM.value),eh.cursorScore,!1,JSON.stringify(i))},0),[2]}})}),function onGetResponse(e){return t.apply(this,arguments)});var eZ=(n=(0,r._)(function(e){return(0,u.Jh)(this,function(t){switch(t.label){case 0:if(eU!==homefeedPrefetch)return[3,2];return eU=l.p,delete eh.prefetchId,[4,eq()];case 1:return t.sent(),[2];case 2:return z("postApiSnsWebV1Homefeed",e,function(){et.value=!0,E.yN.errorInfo.errorApi="postApiSnsWebV1Homefeed",E.yN.errorInfo.errorApiMsg=JSON.stringify(e.data)}),[2]}})}),function onRequestError(e){return n.apply(this,arguments)});var eq=(d=(0,r._)(function(){var e,t,n,r,i,a,o,s=arguments;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(e=s.length>0&&void 0!==s[0]&&s[0],t=s.length>1&&void 0!==s[1]&&s[1],n=s.length>2?s[2]:void 0,$.value)return[2];ee(!0),t&&eo(!0),u.label=1;case 1:return u.trys.push([1,3,5,6]),ez(e),onBeforeSendRequest(),[4,eU(eh,{headers:{"xy-direction":(0,U.$)(null!==(i=null===(r=H.userInfo)||void 0===r?void 0:r.userId)&&void 0!==i?i:"")}})];case 2:return a=u.sent(),eB((0,R.F$)(a),t,{responseInterceptor:null==n?void 0:n.responseInterceptor}),en(!1),[3,6];case 3:return o=u.sent(),en(!0),[4,eZ(o)];case 4:return u.sent(),[3,6];case 5:return ee(!1),eo(!1),eU===homefeedPrefetch&&(eU=l.p,delete eh.prefetchId),x(),[7];case 6:return[2]}})}),function fetchFeeds(){return d.apply(this,arguments)});var eV=(f=(0,r._)(function(e){var t,n,r,i,a,o,c,d;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(r=+(null!==(n=null==T?void 0:null===(t=T.query)||void 0===t?void 0:t.sleep)&&void 0!==n?n:0),$.value)return[2];ee(!0),u.label=1;case 1:return u.trys.push([1,5,6,7]),[4,(0,l.F)({cursorScore:"",needNum:0,noteIndex:0,num:35,refreshType:w.n.ACTIVE,imageFormats:W.imageFormatParams,unreadBeginNoteId:e.unread.unreadBeginNoteId,unreadEndNoteId:e.unread.unreadEndNoteId,unreadNoteCount:e.unread.unreadNoteCount,category:eM.value},{timeout:5e3,headers:{"xy-direction":(0,U.$)(null!==(o=null===(i=H.userInfo)||void 0===i?void 0:i.userId)&&void 0!==o?o:"")}})];case 2:if(c=u.sent(),!(r>0))return[3,4];return[4,(0,s._v)(r)];case 3:u.sent(),u.label=4;case 4:return(null==c?void 0:null===(a=c.items)||void 0===a?void 0:a.length)===0&&(eE.value=E.e.MfNull,eR.value=JSON.stringify(c)),useFeedsDataHandler(c.items,ef,function(e){ef.value.push(e)})(),ei(!0),en(!1),[3,7];case 5:return u.sent(),eE.value=E.e.MfFail,en(!0),[3,7];case 6:return ee(!1),[7];case 7:return[2]}})}),function fetchFeedsOnServer(e){return f.apply(this,arguments)});var eY=(p=(0,r._)(function(){var e;return(0,u.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,l.nJ)()];case 1:return e=t.sent(),eA.value=e,[3,3];case 2:return console.error(t.sent()),[3,3];case 3:return[2]}})}),function getHomefeedCategory(){return p.apply(this,arguments)});var eG=(h=(0,r._)(function(e){return(0,u.Jh)(this,function(t){switch(t.label){case 0:if(eM.value=e,D.replace({query:(0,a._)((0,i._)({},T.query),{channel_id:eM.value})}),eg(),eS(e),$.value)return switchCategoryWithDelay(function(){return eG(e)},800),[2];return[4,eq(!1,!0)];case 1:return t.sent(),[2]}})}),function _switchCategory(e){return h.apply(this,arguments)}),eJ=v()(eG,800,{leading:!0});var eQ=(y=(0,r._)(function(){var e;return(0,u.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,l.Iu)()];case 1:return 2===(e=t.sent()).period&&(eT.value=!0),!eT.value&&1===e.racingFlag&&(ex.value=!0),[3,3];case 2:return console.error(t.sent()),[3,3];case 3:return[2]}})}),function getResourceInfo(){return y.apply(this,arguments)});var eK=(k=(0,r._)(function(){var e,t,n,r,i;return(0,u.Jh)(this,function(a){switch(a.label){case 0:for(e=0,t=[],n=[],r=ef.value.length;e<r;){for(;t.length<50&&e<r;)t.push(ef.value[e].id||""),e+=1;e=50===t.length?e:e+1,n.push(t),t=[]}return[4,Promise.all(n.map(function(e){return(0,l.B4)({params:{noteIds:e.join(",")}})}))];case 1:return i=a.sent().reduce(function(e,t){return Object.assign(e,t),e},{}),ef.value.forEach(function(e){var t;(null===(t=e.noteCard)||void 0===t?void 0:t.interactInfo)&&e.id&&(e.noteCard.interactInfo.likedCount=i[e.id].likedCount,e.noteCard.interactInfo.liked=i[e.id].liked)}),[2]}})}),function getLikeNum(){return k.apply(this,arguments)});return{query:eh,isFetching:$,isError:et,feedsWrapper:ed,undertakeNote:ev,feeds:ef,fetchFeeds:eq,fetchFeedsOnServer:eV,getLikeNum:eK,reset:function(){eq(!1,!0)},switchCategory:eJ,currentChannel:eM,unreadInfo:em,validIds:eC,mfStatistics:eF,initMfStatistics:ej,addReadFeedCount:eO,addVisitTimes:eH,getHomefeedCategory:eY,getResourceInfo:eQ,channels:eA,isResourceDisplay:ex,isActivityEnd:eT,cancelFeedRequest:eD,toggleFeedsApiPrefetch:function(){eU=homefeedPrefetch},prefetchId:ec,updatePrefetchId:function(e){ec.value=e},mfRequestMetaData:eN,placeholderFeeds:q,clearPlaceholderFeeds:V,feedsCacheLogInfo:Y,isUsingPlaceholderFeeds:G,setIsUsingPlaceholderFeeds:J,placeholderFeedsConsumed:Q,setPlaceholderFeedsConsumed:K,pageStatus:eW,isReplace:ea,isFirstSuccessFetched:er,setIsReplace:eo,imgNoteFilterStatus:el,setImgNoteFilterStatus:es,ssrRequestStatus:eE,ssrRenderExtra:eR,updateCategory:eS}})},76643:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});var r,i=((r={}).UNCHECKED="unchecked",r.CHECKED="checked",r.LOADING="loading",r)},84271:function(e,t,n){"use strict";n.d(t,{D:function(){return c}});var r=n(51899),i=n.n(r),a=n(66002),o=n(31907);n(87989),n(42876),n(33933);var u=n(6890),l=n(97611),s=n(93328);function createFeedLayout(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{estimatedRows:5};function getRows(){var t;return Math.ceil(((null===(t=e.feedContainer)||void 0===t?void 0:t.value)||document.documentElement).clientHeight/320)}var t=(0,u.s6)(),n=(0,l.q)(),r=(0,s.iH)(!1),a=(0,s.iH)(t.isNIO?4:6),c=(0,s.iH)(6),d=(0,s.iH)(o.Zv.SM),v=(0,s.Fl)(function(){return(null==n?void 0:n.isAIMode)?(null==t?void 0:t.sideCollapse)?90:164:0}),f=(0,s.iH)(0),p=(0,s.iH)(getRows()),h=(0,s.Fl)(function(){return"".concat(d.value.horizontal,"px")}),g=(0,s.iH)(0),m=(0,s.iH)("normal"),y=(0,s.Fl)(function(){return"min"===m.value}),I=(0,s.iH)(3),_=(0,s.Fl)(function(){return[o.AD.MIN,o.AD.ZERO].includes(c.value)||t.isNIO}),w=i()(function(){var e=Math.min(window.innerWidth,o.n4.MAX);if(p.value=getRows(),t.isNIO){a.value=4,c.value=4,d.value=o.Zv.MIN,g.value=o.yd.SM,f.value=Math.max(142,(e-d.value.horizontal*(a.value+1))/a.value),!r.value&&(0,s.Y3)(function(){r.value=!0});return}e>=o.n4.MAX?(a.value=o.sg.Max,c.value=o.AD.LG,d.value=o.Zv.Max,g.value=o.yd.MAX,m.value="normal"):e>=o.n4.LG?(a.value=o.sg.LG,c.value=o.AD.LG,d.value=o.Zv.LG,g.value=o.yd.LG,m.value="normal"):e>=o.n4.MID?(a.value=o.sg.MID,d.value=o.Zv.MID,g.value=o.yd.MID,c.value=o.AD.MID,m.value="normal"):e>=o.n4.SM?(a.value=o.sg.SM,d.value=o.Zv.SM,g.value=o.yd.SM,c.value=o.AD.SM,m.value="normal"):e>=o.n4.MIN?(a.value=o.sg.MIN,d.value=o.Zv.MIN,g.value=window.innerWidth,m.value="normal",c.value=o.AD.MIN):e>=o.n4.ZERO&&(g.value=window.innerWidth,a.value=o.sg.ZERO,d.value=o.Zv.ZERO,c.value=o.AD.ZERO,m.value="min"),(null==n?void 0:n.isAIMode)?e>=o.n4.SM?f.value=(e-d.value.horizontal*(a.value+1)-v.value)/a.value:f.value=Math.max(142,(e-d.value.horizontal*(a.value+1))/a.value):e>=o.n4.SM?f.value=(e-d.value.horizontal*(a.value+2))/(a.value+1):f.value=Math.max(142,(e-d.value.horizontal*(a.value+1))/a.value),p.value=getRows(),!r.value&&(0,s.Y3)(function(){r.value=!0})},10,{leading:!0}),k=(0,s.Fl)(function(){var e,t,n=a.value;return(null!==(t=null===(e=window)||void 0===e?void 0:e.innerWidth)&&void 0!==t?t:0)>=o.n4.SM&&(n-=1),n*(p.value+I.value)}),S=(0,s.Fl)(function(){return a.value*f.value+(a.value+1)*d.value.horizontal}),b=(0,s.Fl)(function(){return a.value*f.value+(a.value-1)*d.value.horizontal});return{layoutInfoReady:r,columns:a,columnsWithSidebar:c,gap:d,horizontalGapPx:h,columnWidth:f,feedsWrapperWidth:S,feedsContentWidth:b,minRenderNotes:k,resize:w,interactionWidth:g,isMin:y,widthType:m,bufferRow:I,isMobileStyle:_}}var c=(0,a.Q_)("aiSearchFeedLayout",function(){var e=(0,u.s6)(),t=createFeedLayout({estimatedRows:5}),n=t.layoutInfoReady,r=t.columns,a=t.columnsWithSidebar,l=t.gap,c=t.horizontalGapPx,d=t.columnWidth,v=t.feedsWrapperWidth,f=t.feedsContentWidth,p=t.minRenderNotes,h=t.bufferRow,g=t.interactionWidth;return{calculateAndApplyCustomLayout:i()(function calculateAndApplyCustomLayout(t){if(0!==t){if(e.isNIO){r.value=4,a.value=4,l.value=o.Zv.MIN,g.value=o.yd.SM,d.value=Math.max(142,(t-l.value.horizontal*(r.value+1))/r.value),!n.value&&(0,s.Y3)(function(){n.value=!0});return}l.value=o.Zv.MIN;for(var i=2,u=142,c=5;c>=2;c--){var v=(t-l.value.horizontal*(c+1))/c;if(v>=142){i=c,u=v;break}}u=Math.floor((t-(i-1)*l.value.horizontal)/i),r.value=i,d.value=u,e.currentNoteColumnWidthInAIFeeds=u,!n.value&&(0,s.Y3)(function(){n.value=!0})}},10,{leading:!0}),layoutInfoReady:n,columns:r,columnsWithSidebar:a,gap:l,horizontalGapPx:c,columnWidth:d,feedsWrapperWidth:v,feedsContentWidth:f,minRenderNotes:p,bufferRow:h}})},67547:function(e,t,n){"use strict";n.d(t,{D:function(){return useFeedsLayoutStoreInject},v:function(){return useFeedsLayoutStoreProvide}});var r=n(28860),i=n(93328),a="useFeedsLayoutStoreProvider";function useFeedsLayoutStoreProvide(e){(0,i.JJ)(a,{useFeedsLayoutStore:e})}function useFeedsLayoutStoreInject(){var e,t=(0,i.f3)(a);return null!==(e=null==t?void 0:t.useFeedsLayoutStore())&&void 0!==e?e:(0,r.E)()}},58960:function(e,t,n){"use strict";n.d(t,{V:function(){return o}}),n(15066);var r=n(96144),i=n(66002),a=n(93328),o=(0,i.Q_)("fileAbExp",function(){var e=(0,r.$T)("userExp");return{isFileExp:(0,a.Fl)(function(){var t;return(null==e?void 0:null===(t=e.flags)||void 0===t?void 0:t.useFile)==="enable_all"})}})},97930:function(e,t,n){"use strict";n.d(t,{h:function(){return o}}),n(95477),n(58486),n(80156),n(50721),n(29112),n(67275),n(59989),n(7099),n(27461),n(23339),n(51109),n(34333),n(87989),n(87394),n(94941),n(48421),n(97357);var r=n(66002),i=n(93328),a=n(13285);function useTargetUserId(){var e=(0,a.yj)(),getUIDByUrl=function(){var e,t,n=new URL(window.location.href);return(null==n?void 0:null===(t=n.pathname)||void 0===t?void 0:null===(e=t.match(/\/user\/profile\/([^/]+)/))||void 0===e?void 0:e[1])||""};return{visitTargetUserId:(0,i.Fl)(function(){var t;return(null==e?void 0:null===(t=e.params)||void 0===t?void 0:t.id)||getUIDByUrl()})}}var o=(0,r.Q_)("UserFileStore",function(){var e=(0,i.iH)({}),t=useTargetUserId().visitTargetUserId;return{visitTargetUserId:t,currentFileListData:(0,i.Fl)(function(){return e.value[t.value]||[]}),setUserFileListData:function setUserFileListData(t,n,r){e.value[t]?e.value[t]=r?n:e.value[t].concat(n):e.value[t]=n},removeFile:function removeFile(t,n){if(!!e.value[t])e.value[t]=e.value[t].filter(function(e){return e.data.docId!==n})}}})},81322:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r,i=((r={}).ArrowRight="ArrowRight",r.ArrowLeft="ArrowLeft",r.ArrowUp="ArrowUp",r.ArrowDown="ArrowDown",r.Escape="Escape",r.Space=" ",r)},6890:function(e,t,n){"use strict";n.d(t,{L9:function(){return I},i3:function(){return y.i},s6:function(){return _}});var r,i=n(41622),a=n(82726),o=n(377);n(80156),n(50721),n(29112),n(67275),n(59989),n(7099),n(27461),n(23339),n(51109),n(34333),n(86651),n(15066),n(67930),n(58486),n(42876),n(33933);var u=n(96144),l=n(66002),s=n(93328),c=n(13285),d=n(2516),v=n(68848),f=n(95509),p=n(98413),h=n(81334),g=n(34348),m=n(69876),y=n(81322);function getReferer(e){var t=e.refererUrl,n=e.currentUrl;try{var r=new URL(t),i=new URL(n).searchParams.get("exSource");if("/website-login/captcha"===r.pathname&&i)return i;return t}catch(e){return t}}var I=((r={}).SMALL="small",r.SMALL_EXPENDED="small_expended",r.LARGE="large",r.HIDDEN="hidden",r),_=(0,l.Q_)("global",function(){var e,t,n=(0,s.iH)(!1),r=(0,s.iH)(!1),l=(0,s.iH)({ssr:["jpg"],csr:["jpg"]}),y=(0,s.iH)(Date.now().valueOf()),I=(0,s.iH)(d.h),_=(0,s.iH)(!1),w=(0,v.Z)().currentPageInstance,k=(0,a._)((0,m.OT)(g.G.DEFAULT),2),S=k[0],b=k[1],M=(0,s.iH)(""),L=(0,s.iH)(),x=(0,s.iH)(),T=(0,s.iH)(!1),D=(0,s.qj)({addDesktopGuide:!1,collectGuide:!1,keyboardList:!1,miniWindowGuide:!1}),N=(0,a._)((0,m.OT)(!1),2),E=N[0],R=N[1],U=(0,s.iH)("large"),P=(0,s.iH)(null),F=f.j?null:(0,s.Zq)(),j=(0,c.yj)(),O=(0,s.iH)(f.j?(null==j?void 0:j.name)===p.Z.AISearchName:(null==F?void 0:null===(t=F.url)||void 0===t?void 0:t.pathname)===p.Z.AISearchPath),H=(0,s.iH)(null),W=(0,s.Fl)(function(){var e=["jpg"];return n.value&&e.push("webp"),r.value&&e.push("avif"),e}),z=(0,s.Fl)(function(){return S.value===g.G.NIO}),Z=(0,a._)((0,m.OT)(!1),2),q=Z[0],V=Z[1];return""===M.value&&(M.value=getReferer({refererUrl:document.referrer,currentUrl:window.location.href})),(e=(0,i._)(function(){var e,t,n,r,i;return(0,o.Jh)(this,function(a){switch(a.label){case 0:return[4,(0,u.Ni)()];case 1:if(!(null==(i=a.sent())?void 0:null===(t=i.flags)||void 0===t?void 0:null===(e=t.webExp)||void 0===e?void 0:e.enableFps))return[2,R(!1)];return[2,(null==i?void 0:null===(r=i.flags)||void 0===r?void 0:null===(n=r.webExp)||void 0===n?void 0:n.enableFps)==="enable"?R(!0):R(!1)]}})}),function getIsEnableTrackFps(){return e.apply(this,arguments)})(),{appSettings:I,updateAppSettings:function(e){I.value=e},supportWebp:n,serverTime:y,grayMode:_,currentPageInstance:w,referer:M,pwaAddDesktopPrompt:L,setFirstVisitUrl:function(){var e;if(null===(e=x.value)||void 0===e?!void 0:!e.length)x.value=window.location.href,window.location.search.includes("m_source=baidusem")&&window.sessionStorage.setItem(h.Z.FIRST_VISIT_URL,x.value)},firstVisitUrl:x,easyAccessModalVisible:D,currentLayout:S,setCurrentLayout:b,isNIO:z,fullscreenLocking:(0,s.iH)(!1),feedbackPopupVisible:q,setFeedbackPopupVisible:V,trackFps:E,supportAVIF:r,imgFormatCollect:l,isUndertake:T,imageFormatParams:W,aiSearchMode:U,sideCollapse:O,currentNoteColumnWidthInAIFeeds:H,webLabData:P}})},28860:function(e,t,n){"use strict";n.d(t,{E:function(){return c}}),n(87989),n(42876),n(33933);var r=n(51899),i=n.n(r),a=n(66002),o=n(31907),u=n(6890),l=n(97611),s=n(93328);function getRows(){return Math.ceil(document.documentElement.clientHeight/320)}var c=(0,a.Q_)("layout",function(){var e=(0,u.s6)(),t=(0,l.q)(),n=(0,s.iH)(!1),r=(0,s.iH)(e.isNIO?4:6),a=(0,s.iH)(6),c=(0,s.iH)(o.Zv.SM),d=(0,s.Fl)(function(){return(null==t?void 0:t.isAIMode)?(null==e?void 0:e.sideCollapse)?90:164:180}),v=(0,s.iH)(0),f=(0,s.iH)(getRows()),p=(0,s.Fl)(function(){return"".concat(c.value.horizontal,"px")}),h=(0,s.iH)(0),g=(0,s.iH)("normal"),m=(0,s.Fl)(function(){return"min"===g.value}),y=(0,s.iH)(3),I=(0,s.Fl)(function(){return[o.AD.MIN,o.AD.ZERO].includes(a.value)||e.isNIO}),_=i()(function(){var i=Math.min(window.innerWidth,o.n4.MAX);if(f.value=getRows(),e.isNIO){r.value=4,a.value=4,c.value=o.Zv.MIN,h.value=o.yd.SM,v.value=Math.max(142,(i-c.value.horizontal*(r.value+1))/r.value),!n.value&&(0,s.Y3)(function(){n.value=!0});return}i>=o.n4.MAX?(r.value=o.sg.Max,a.value=o.AD.LG,c.value=o.Zv.Max,h.value=o.yd.MAX,g.value="normal"):i>=o.n4.LG?(r.value=o.sg.LG,a.value=o.AD.LG,c.value=o.Zv.LG,h.value=o.yd.LG,g.value="normal"):i>=o.n4.MID?(r.value=o.sg.MID,c.value=o.Zv.MID,h.value=o.yd.MID,a.value=o.AD.MID,g.value="normal"):i>=o.n4.SM?(r.value=o.sg.SM,c.value=o.Zv.SM,h.value=o.yd.SM,a.value=o.AD.SM,g.value="normal"):i>=o.n4.MIN?(r.value=o.sg.MIN,c.value=o.Zv.MIN,h.value=window.innerWidth,g.value="normal",a.value=o.AD.MIN):i>=o.n4.ZERO&&(h.value=window.innerWidth,r.value=o.sg.ZERO,c.value=o.Zv.ZERO,a.value=o.AD.ZERO,g.value="min"),(null==t?void 0:t.isAIMode)?i>=o.n4.SM?v.value=(i-c.value.horizontal*(r.value+1)-d.value)/r.value:v.value=Math.max(142,(i-c.value.horizontal*(r.value+1))/r.value):i>=o.n4.SM?v.value=(i-c.value.horizontal*(r.value+2))/(r.value+1):v.value=Math.max(142,(i-c.value.horizontal*(r.value+1))/r.value),f.value=getRows(),!n.value&&(0,s.Y3)(function(){n.value=!0})},10,{leading:!0}),w=(0,s.Fl)(function(){var e,t,n=r.value;return(null!==(t=null===(e=window)||void 0===e?void 0:e.innerWidth)&&void 0!==t?t:0)>=o.n4.SM&&(n-=1),n*(f.value+y.value)}),k=(0,s.Fl)(function(){return r.value*v.value+(r.value+1)*c.value.horizontal}),S=(0,s.Fl)(function(){return r.value*v.value+(r.value-1)*c.value.horizontal});return(0,s.YP)(function(){return null==t?void 0:t.isAIMode},function(e,t){!1===t&&!0===e&&(0,s.Y3)(function(){_()})}),{layoutInfoReady:n,columns:r,columnsWithSidebar:a,gap:c,horizontalGapPx:p,columnWidth:v,feedsWrapperWidth:k,feedsContentWidth:S,minRenderNotes:w,resize:_,interactionWidth:h,isMin:m,widthType:g,bufferRow:y,sideBarWidth:d,isMobileStyle:I}})},3441:function(e,t,n){"use strict";n.d(t,{i:function(){return u}}),n(15066);var r=n(96144),i=n(66002),a=n(93328),o=n(6890),u=(0,i.Q_)("liveAbExp",function(){var e=(0,r.$T)("userExp"),t=(0,r.$T)("webExp"),n=(0,o.s6)(),i=(0,a.Fl)(function(){return n.isNIO});return{isLiveMode:(0,a.Fl)(function(){var n,r,a=(null==e?void 0:null===(n=e.flags)||void 0===n?void 0:n.useLiveWeb)==="enable";return((null==t?void 0:null===(r=t.flags)||void 0===r?void 0:r.useLiveWebExp)==="enable"||a)&&!i.value})}})},8048:function(e,t,n){"use strict";n.d(t,{Fh:function(){return m},r0:function(){return y},vX:function(){return g},yC:function(){return p}});var r,i,a,o,u=n(51606),l=n(82726);n(41593),n(87989);var s=n(66002),c=n(93328),d=n(1801),v=n(85537),f=n(69876);var p=((r={}).FirstEnter="first_enter",r.ClickLogin="click_login",r.SearchBox="search_box",r.Follow="follow",r.Comment="comment",r.Collect="collect",r.Like="like",r.ReadComment="read_comment",r.NoAuth="no_auth",r.Floating="floating",r.Notification="notification",r.NoteDetailAuto="note_detail_auto",r.CoffeeInviter="coffee_inviter",r.coffeeInvitee="coffee_invitee",r.CopyPicture="copy_picture",r.DownloadPicture="download_picture",r.CopyNoteText="note_detail_copy_note",r.MfLimit="explore_feed_note_view_limit",r.ImgNoteFilter="mf_short_note_filter",r.SearchSelectText="search_select_text",r.Report="report",r.UserNotes="user_page_note",r.UserHoverCard="user_card_following",r.FilePreview="file_preview",r.FilePreviewReport="file_preview_report",r.FilePreviewViewNote="file_preview_view_note",r.FilePreviewCopyShareLink="file_preview_copy_share_link",r.LivePlayerSendComment="live_player_send_comment",r.isFamily="is_family",r),h=(o={},(0,u._)(o,"first_enter","登录后推荐更懂你的笔记"),(0,u._)(o,"click_login","登录后推荐更懂你的笔记"),(0,u._)(o,"no_auth","登录后推荐更懂你的笔记"),(0,u._)(o,"floating","登录后推荐更懂你的笔记"),(0,u._)(o,"notification","登录查看通知消息"),(0,u._)(o,"follow","登录即可关注Ta"),(0,u._)(o,"comment","登录即可评论该笔记"),(0,u._)(o,"collect","登录即可收藏该笔记"),(0,u._)(o,"like","登录即可点赞该笔记"),(0,u._)(o,"read_comment","登录查看全部评论内容"),(0,u._)(o,"search_box","登录后查看搜索结果"),(0,u._)(o,"copy_picture","登录即可复制图片"),(0,u._)(o,"download_picture","登录即可下载图片"),(0,u._)(o,"note_detail_copy_note","登录即可复制文字"),(0,u._)(o,"explore_feed_note_view_limit","登录继续查看该笔记"),(0,u._)(o,"note_detail_auto","登录继续查看该笔记"),(0,u._)(o,"mf_short_note_filter","登录即可筛选图文笔记"),(0,u._)(o,"search_select_text","登录后查看搜索结果"),(0,u._)(o,"report","登录后即可举报TA"),(0,u._)(o,"user_page_note","登录即可查看 Ta 的笔记"),(0,u._)(o,"user_card_following","登录即可关注Ta"),(0,u._)(o,"file_preview","登录即可下载该文件"),(0,u._)(o,"file_preview_report","登录即可举报该文件"),(0,u._)(o,"file_preview_view_note","登录即可查看原笔记"),(0,u._)(o,"file_preview_copy_share_link","登录即可复制分享链接"),(0,u._)(o,"live_player_send_comment","登录即可发送评论"),(0,u._)(o,"is_family","登录即可观看家薯专属内容"),o);var g=((i={}).Valid="un_scanned",i.OutDated="invalid",i.Scanned="scan_success",i);var m=((a={})[a.PageOne=0]="PageOne",a[a.PageTwo=1]="PageTwo",a),y=(0,s.Q_)("login",function(){var e=(0,v.L)(),t=(0,d.OX)(),n=t.isObPagesVisible,r=t.setIsObPagesVisible,i=t.obPageFillInProgress,a=t.setObPageFillInProgress,o=t.beforeFillInGender,u=t.beforeFillInHobby,s=t.beforeFillInAge,p=t.afterFillInHobby,g=t.ageSelectValue,m=t.hobbySelectValue,y=t.genderSelectValue,I=t.reportUserInfo,_=t.getHobbyRecList,w=t.reportHobby,k=t.getRegisterFusingConfig,S=t.isRegFusing,b=(0,c.iH)(!1),M=(0,c.iH)(!1),L=(0,c.iH)(!1),x=(0,c.iH)(h.first_enter),T=(0,c.iH)(void 0),D=(0,c.iH)(""),N=(0,c.iH)(!1),E=(0,c.iH)(""),R=(0,l._)((0,f.OT)(!1),2),U=R[0],P=R[1],F=(0,l._)((0,f.OT)(!1),2),j=F[0],O=F[1],H=(0,l._)((0,f.OT)(!1),2),W=H[0],z=H[1],Z=(0,c.iH)(!1),q=(0,c.iH)(!1),V=(0,c.iH)(0),Y=(0,c.qj)({phone:"",authCode:""}),G=(0,c.iH)(),J=(0,c.qj)({backend:{qrId:"",code:""},image:"",status:"un_scanned"}),Q=(0,c.qj)({phone:"",authCode:""}),K=(0,c.iH)(0),X=(0,c.iH)(0),$=(0,c.iH)(""),reset=function(){T.value=void 0,b.value=!1,M.value=!1,L.value=!1,Y.phone="",Y.authCode="",J.backend={qrId:"",code:""},J.image="",J.status="un_scanned",Q.phone="",Q.authCode="",D.value="",N.value=!1,V.value=0,z(!1),K.value=0,X.value=0,Z.value=!1},ee=(0,c.Fl)(function(){return Y.phone.length>=13}),et=(0,c.Fl)(function(){return"".concat(Y.authCode).length>=6}),handleLoginStep=function(e){V.value=e};return{loginMethod:T,from:D,reset:reset,showLogin:b,openLogin:function(t){if(!e.bannedInfo.showAlert){if(void 0===t)throw TypeError("show login need declare `loginFrom`");b.value=!0,D.value=t,E.value=t,x.value=h[t]}},closeLogin:function(){b.value=!1,q.value=!0,reset()},agreed:M,showTooltip:L,toggleAgree:function(e){M.value=void 0===e?!M.value:e},loginData:Y,validPhone:ee,validCode:et,toggleTooltip:function(e){L.value=e},errors:Q,clearPhone:function(){Y.phone="",Q.phone="",Q.authCode=""},qrData:J,updateQrData:function(e,t){J.backend={qrId:e,code:t}},counter:G,inAntiSpamChecking:N,recentFrom:E,isObPagesVisible:n,setIsObPagesVisible:r,obPageFillInProgress:i,setObPageFillInProgress:a,verificationCodeStartTime:K,beforeFillInGender:o,beforeFillInHobby:u,beforeFillInAge:s,afterFillInHobby:p,ageSelectValue:g,hobbySelectValue:m,genderSelectValue:y,inSpamCheckSendAuthCode:U,setInSpamCheckSendAuthCode:P,reportHobby:w,reportUserInfo:I,getHobbyRecList:_,getRegisterFusingConfig:k,isRegFusing:S,loginStep:V,handleLoginStep:handleLoginStep,isLogining:W,setLogining:z,loginPadMountedTime:X,loginTips:x,isRiskUser:Z,setRiskUser:function(e){Z.value=e,handleLoginStep(0)},closeLoginModal:q,traceId:$,inAntiSpamCheckLogin:j,setInAntiSpamCheckLogin:O}})},95841:function(e,t,n){"use strict";n.d(t,{L:function(){return s}});var r=n(41622),i=n(377);n(86651),n(63235),n(15368),n(12970),n(8503),n(32207),n(13598),n(23541),n(63827),n(30488),n(82236),n(51938),n(33913),n(94949),n(17891),n(44258),n(38609),n(4787),n(44211),n(29338),n(73405),n(98754),n(31832),n(88402),n(56712),n(27461),n(23339),n(51109),n(34333),n(87394),n(94941),n(48421),n(97357),n(6045),n(10364),n(67673),n(64091),n(1154),n(80013),n(87535),n(75204);var a=n(40122),o=n(66002),u=n(85537),l=n(93328);n(10571);var s=(0,o.Q_)("nioStore",function(){var e,t=(0,u.L)(),n=(0,l.iH)(),o=(0,l.iH)();var s=(e=(0,r._)(function(){var e;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,t.getUserInfo()];case 1:return r.sent(),[4,(0,a.hb)({})];case 2:return n.value=r.sent().nioCards,[3,4];case 3:return e=r.sent(),o.value=e,[3,4];case 4:return[2]}})}),function getCollectionList(){return e.apply(this,arguments)}),c=(0,l.Fl)(function(){var e;return Array.from(new Set(null===(e=n.value)||void 0===e?void 0:e.filter(function(e){return e.title}).map(function(e){return e.title}))).map(function(e){return{title:e,fetched:(0,l.iH)(!1),notes:(0,l.iH)([])}})});return{collectionListDataSource:n,getCollectionList:s,collectionListFeedFetchInfos:c,getFeedFetchedInfo:function(e){return c.value.some(function(t){return t.title===e||!1})},getFeedFetchNotesInfo:function(e){var t,n=null;return null===(t=c.value)||void 0===t||t.forEach(function(t){if(t.title===e){var r;n=(null===(r=t.notes.value)||void 0===r?void 0:r.length)>0?t.notes.value:null}}),n},setFeedFetchedInfo:function(e,t){c.value.forEach(function(n){if(n.title===e){if(!n.fetched.value)n.fetched.value=!0,n.notes.value=t}})},error:o}})},64300:function(e,t,n){"use strict";n.d(t,{dw:function(){return R}});var r=n(70879),i=n(27337);n(58051),n(7608);var a=n(66002),o=n(91663),u=n(41622),l=n(66993),s=n(377);n(86651),n(95477),n(58486),n(42876),n(33933),n(87989),n(72169),n(34333),n(55947),n(6045),n(10364),n(67673),n(9557),n(64961),n(12996),n(59564),n(97357),n(1154),n(80013),n(97553),n(29273),n(92519),n(34885),n(87394),n(94941),n(48421);var c=n(40122),d=n(66398),v=n(8306),f=n(80022),p=n.n(f),h=n(95874),g=n(82674),m=n(74369),y=n(98413),I=n(19736),_=n(52504),w=n(10535),k=n(35547);n(29744),n(36277);var S=n(93328);function useCacheFetchNote(e){var t=(0,S.iH)([]);return{wrappedFetchNote:function wrappedFetchNote(n,r){var i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=arguments.length>3?arguments[3]:void 0,o=t.value.find(function(e){return e.id===n});if(o&&Date.now()-o.timestamp<=1e3)return o.promise;o&&Date.now()-o.timestamp>1e3&&(t.value=t.value.filter(function(e){return e.id!==n}));var u=e(n,r,i,a),l={id:n,timestamp:Date.now(),promise:u};return t.value.push(l),u.finally(function(){Date.now()-l.timestamp>1e3&&(t.value=t.value.filter(function(e){return e.id!==n}))})}}}var b=n(13285),M=n(6890),L=n(95841),x=n(85537);function useNoteService(e){var t,n,a,f,T,D,N,E=R(),U=(0,b.tv)(),P=(0,b.yj)(),F=(0,M.s6)(),j=(0,L.L)(),O=(0,x.L)(),H=(0,h.h)().handleHttpCatch,W=(0,g.l)(E.prevRoute).noteXsecSource,z=(0,S.iH)(!1),Z=Date.now();var q=useCacheFetchNote((t=(0,u._)(function(t,n){var i,a,u,l,v,f,p,h,g,m,w,S,b,M,L,x=arguments;return(0,s.Jh)(this,function(n){switch(n.label){case 0:if(i=!(x.length>2)||void 0===x[2]||x[2],a=x.length>3?x[3]:void 0,!i&&(null===(l=E.noteDetailMap[t])||void 0===l?void 0:null===(u=l.note)||void 0===u?void 0:u.type))return[2];f=null===(v=E.noteDetailMap[t])||void 0===v?void 0:v.note,p=(null==a?void 0:a.xsecToken)||(null==f?void 0:f.xsecToken)||P.query.xsec_token,n.label=1;case 1:return n.trys.push([1,3,,4]),(w={sourceNoteId:t,imageFormats:[],extra:{needBodyTopic:"1"},xsecSource:W.value||P.query.xsec_source,xsecToken:p}).imageFormats=F.imageFormatParams,Z=Date.now(),[4,(0,c.an)(w,{headers:{"xy-direction":(0,k.$)(null!==(S=null===(h=O.userInfo)||void 0===h?void 0:h.userId)&&void 0!==S?S:"")}})];case 2:return M=(null===(m=(b=n.sent()).items)||void 0===m?void 0:null===(g=m[0])||void 0===g?void 0:g.noteCard)||{},E.updateNoteByNoteId(t,{currentTime:b.currentTime||Date.now(),note:(0,r._)({xsecToken:p},M)}),[3,4];case 3:if(L=n.sent(),(0,I.SN)(null==L?void 0:L.code))return setTimeout(function(){var e;(null===(e=window.location.pathname.match(/\/explore\/(.*)/))||void 0===e?void 0:e[1])&&E.prevRoute===o.Dq.Explore&&U.back()},400),[2];if([_.o.InAntiSpamChecking,_.o.AntiSpamIntercept].includes(null==L?void 0:L.status))return[2];return H("postApiSnsWebV1Feed",L,function(){var t=Date.now()-Z,n=t>400?0:400-t;setTimeout(function(){if(E.prevRoute===o.Dq.Empty){var t,n,r=null!==(n=null===(t=e.getRoute)||void 0===t?void 0:t.call(e))&&void 0!==n?n:P;U.replace({name:y.Z.ExploreName,query:r.query})}else U.back()},n),setTimeout(function(){[o.wi.NotFound,o.wi.UnderReview,o.wi.Forbidden,o.wi.PaidCollection].includes(L.code)?(0,d.zM)("该内容暂时无法查看"):(0,d.zM)(L.msg||"笔记加载失败")},n+200)}),[3,4];case 4:return[2]}})}),function fetchNote(e,n){return t.apply(this,arguments)})).wrappedFetchNote;var V=(n=(0,u._)(function(e,t){var n,a,o,u,d,v,f,p=arguments;return(0,s.Jh)(this,function(s){switch(s.label){case 0:if(n=p.length>2&&void 0!==p[2]&&p[2],o=(a=E.getNoteDetailByNoteId(e)).comments,u=a.note.xsecToken||P.query.xsec_token,!o.hasMore||o.loading)return[2];o.loading=!0,s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,(0,c.S9)({params:{noteId:e,cursor:n?"":o.cursor,topCommentId:t,imageFormats:F.imageFormatParams.toString(),xsecToken:u||""}})];case 2:return f=s.sent(),o.cursor=f.cursor||"",o.hasMore=f.hasMore,n&&(o.list=[]),(d=o.list).push.apply(d,(0,l._)((null===(v=f.comments)||void 0===v?void 0:v.map(function(e){var t;return(0,i._)((0,r._)({},e),{expended:!1,hasMore:Number(e.subCommentCount||0)>((null===(t=e.subComments)||void 0===t?void 0:t.length)||0)})}))||[])),E.updateNoteByNoteId(e,{comments:o}),[3,5];case 3:return H("getApiSnsWebV2CommentPage",s.sent()),[3,5];case 4:return o.loading=!1,o.firstRequestFinish=!0,[7];case 5:return[2]}})}),function fetchComments(e,t){return n.apply(this,arguments)});var Y=(a=(0,u._)(function(e,t){var n,r,i,a,o,u,d;return(0,s.Jh)(this,function(s){switch(s.label){case 0:e.loading=!0,r=(n=E.getNoteDetailByNoteId(t)).comments,i=n.note.xsecToken,s.label=1;case 1:return s.trys.push([1,3,4,5]),a=r.list.find(function(t){return t===e}),[4,(0,c.z1)({params:{noteId:t,rootCommentId:e.id,num:10,cursor:(null==a?void 0:a.subCommentCursor)||"",imageFormats:F.imageFormatParams.toString(),topCommentId:E.topCommentId,xsecToken:i||""}})];case 2:return o=s.sent(),a&&(null===(d=a.subComments)||void 0===d||(u=d).push.apply(u,(0,l._)(o.comments||[])),a.hasMore=o.hasMore,a.expended=!0,a.subCommentCursor=o.cursor),[3,5];case 3:return H("getApiSnsWebV2CommentSubPage",s.sent()),[3,5];case 4:return e.loading=!1,[7];case 5:return[2]}})}),function fetchSubComments(e,t){return a.apply(this,arguments)}),updateCommentCount=function(e,t){var n,a,o=E.getNoteDetailByNoteId(t).note;if(!!o){var u=null!==(a=null===(n=o.interactInfo)||void 0===n?void 0:n.commentCount)&&void 0!==a?a:"0";if((0,v.U)(u)){var l=Math.max(Number(u)+e,0);o.interactInfo=(0,i._)((0,r._)({},o.interactInfo||{}),{commentCount:l.toString()})}}};function filterRelatedNotes(e,t){return e.filter(function(e){var n;return e.id!==t&&(null===(n=e.noteCard)||void 0===n?void 0:n.type)==="video"})}return{fetchNote:q,fetchComments:V,fetchSubComments:Y,submitComment:(f=(0,u._)(function(e,t,n){var r,i,a,o,u,l,d;return(0,s.Jh)(this,function(s){switch(s.label){case 0:if(z.value)return[2];r=E.getNoteDetailByNoteId(n).comments,s.label=1;case 1:if(s.trys.push([1,3,4,5]),z.value=!0,null==(i=p()(E.commentTarget)))return[2];return[4,(0,c.pe)({noteId:n,content:e,targetCommentId:i.id,atUsers:t})];case 2:if(a=s.sent().comment){if(i.targetComment){if(null==(o=r.list.find(function(e){var t;return e.id===i.id||(null===(t=e.subComments)||void 0===t?void 0:t.some(function(e){return e.id===i.id}))})))return[2];null==o.subComments&&(o.subComments=[]),-1!==(u=o.subComments.findIndex(function(e){return e.id===i.id}))?o.subComments.splice(u+1,0,a):o.subComments.unshift(a)}else if(i.id){if(null==(l=r.list.find(function(e){return e.id===(null==i?void 0:i.id)})))return[2];null==l.subComments&&(l.subComments=[]),l.subComments.unshift(a)}else r.list.unshift(a)}return updateCommentCount(1,n),[2,a];case 3:throw H("postApiSnsWebV1CommentPost",d=s.sent()),d;case 4:return z.value=!1,[7];case 5:return[2]}})}),function submitComment(e,t,n){return f.apply(this,arguments)}),deleteComment:(T=(0,u._)(function(e,t,n){var r,i,a,o,u;return(0,s.Jh)(this,function(l){switch(l.label){case 0:r=E.getNoteDetailByNoteId(e).comments,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(0,c.Pm)({noteId:e,commentId:t.id})];case 2:return l.sent(),n?void 0!==(a=null===(i=n.subComments)||void 0===i?void 0:i.indexOf(t))&&(null===(o=n.subComments)||void 0===o||o.splice(a,1)):(u=r.list.indexOf(t),r.list.splice(u,1)),updateCommentCount(-1,e),[3,4];case 3:return H("postApiSnsWebV1CommentDelete",l.sent()),[3,4];case 4:return[2]}})}),function deleteComment(e,t,n){return T.apply(this,arguments)}),fetchRelatedVideos:(D=(0,u._)(function(e,t){var n,r,i,a,o,u,d,v,f,p,h,g;return(0,s.Jh)(this,function(s){switch(s.label){case 0:if(s.trys.push([0,,2,3]),a={category:"web_video_detail_page_related",cursorScore:"",needNum:10,num:10,noteIndex:0,searchKey:e,refreshType:m.n.ACTIVE,unreadBeginNoteId:"",unreadEndNoteId:"",unreadNoteCount:0,imageFormats:[]},"useCache"===t&&E.recommendVideoMap[e])return[2];return E.recommendVideoMap[e]={isLoading:!0,items:null!==(o=null===(n=E.recommendVideoMap[e])||void 0===n?void 0:n.items)&&void 0!==o?o:[],requestParams:{cursorScore:(null===(i=E.recommendVideoMap[e])||void 0===i?void 0:null===(r=i.requestParams)||void 0===r?void 0:r.cursorScore)||""}},E.recommendVideoMap[e]&&"append"===t&&(a.refreshType=m.n.LOAD_MORE,a.cursorScore=E.recommendVideoMap[e].requestParams.cursorScore,a.noteIndex+=null!==(u=E.recommendVideoMap[e].items.length)&&void 0!==u?u:0),a.imageFormats=F.imageFormatParams,[4,(0,c.p)(a)];case 1:return d=s.sent(),v=(0,w.F$)(d),"append"===t?null===(h=E.recommendVideoMap[e])||void 0===h||null===(p=h.items)||void 0===p||(f=p).push.apply(f,(0,l._)(filterRelatedNotes(v.items,e))):(!E.recommendVideoMap[e]&&(E.recommendVideoMap[e]={items:[],requestParams:{cursorScore:""},isLoading:!1}),E.recommendVideoMap[e].items=filterRelatedNotes(v.items,e)),E.recommendVideoMap[e].requestParams.cursorScore=null!==(g=v.cursorScore)&&void 0!==g?g:"",[3,3];case 2:return E.recommendVideoMap[e].isLoading=!1,[7];case 3:return[2]}})}),function fetchRelatedVideos(e,t){return D.apply(this,arguments)}),fetchNioRelatedVideos:(N=(0,u._)(function(e,t){var n,r,i;return(0,s.Jh)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,,4,5]),n=j.getFeedFetchedInfo(t),r=j.getFeedFetchNotesInfo(t),!(n&&r))return[3,1];return E.recommendVideoMap[e]={items:r,requestParams:{cursorScore:""},isLoading:!0},[3,3];case 1:return E.recommendVideoMap[e]={items:[],requestParams:{cursorScore:""},isLoading:!0},[4,(0,c.UF)({title:t})];case 2:(i=a.sent()).items&&(E.recommendVideoMap[e].items=i.items,j.setFeedFetchedInfo(t,i.items)),a.label=3;case 3:return[3,5];case 4:return E.recommendVideoMap[e].isLoading=!1,[7];case 5:return[2]}})}),function fetchNioRelatedVideos(e,t){return N.apply(this,arguments)})}}var T=n(99505),D=n(31907),N=n(28860),E=n(98875);function useNoteLayout(e,t){var n=(0,N.E)(),r=(0,S.iH)(o.mF.small*o.Lr),i=(0,S.iH)(o.Hx.large),a=(0,E.Y)(function(){if(0!==t.value.length){var a=t.value[0],u=a.width,l=void 0===u?0:u,s=a.height,c=void 0===s?1:s,d=document.documentElement.clientWidth,v=i.value*(l/c>1?1:l/c),f=n.gap,p=0;e.value===o.Dq.Empty?(p=Math.min(d,D.n4.MAX)-2*f.horizontal,D.n4.SM<=d&&(p=p-n.interactionWidth-n.columnWidth)):D.n4.SM<=d&&(p=(p=d-2*f.horizontal)-n.interactionWidth-2*f.horizontal-2*D.pw);var h=Math.min(v,p);h=Math.max(n.interactionWidth,h),r.value=h}}),u=(0,E.Y)(function(){var t=document.documentElement.clientHeight,r=n.gap;if(e.value===o.Dq.Empty){i.value=t-D.J9-D.Uw-r.horizontal;return}var a=t-2*r.horizontal;i.value=Math.round(a)});return{mediaWidth:r,updateMediaWidth:a,noteHeight:i,updateHeight:u}}var note_reactiveNoteLayout=function reactiveNoteLayout(e){var t=e.prevRoute,n=e.getNoteDetailByNoteId,a=e.noteId,o=(0,S.Fl)(function(){return n(a.value)}),u=(0,S.Fl)(function(){var e,t;return o.value.note&&(null===(e=o.value.note.imageList)||void 0===e?void 0:e[0])?null===(t=o.value.note)||void 0===t?void 0:t.imageList:[]}),l=useNoteLayout(t,u),updateWidthAndHeight=function(){l.updateHeight(),l.updateMediaWidth()};return(0,S.YP)(u,function(){updateWidthAndHeight()},{immediate:!0}),(0,i._)((0,r._)({},l),{updateWidthAndHeight:updateWidthAndHeight})};function defaultComments(){return{list:[],cursor:"",hasMore:!0,loading:!1,firstRequestFinish:!1}}function defaultNoteMap(){return{comments:defaultComments(),currentTime:0,note:{}}}var R=(0,a.Q_)("note",function(){var e=(0,S.iH)({state:"success",errorCode:0,errMsg:""}),t=(0,S.qj)({}),n=(0,S.iH)(0),a=(0,S.iH)(1),u=(0,b.yj)(),l=useNoteService({getRoute:function(){return u}}),s=(0,S.iH)(u.params.noteId),c=(0,x.L)(),d=(0,S.iH)(!1),v=(0,S.iH)("note_source"),f=(0,S.iH)(""),p=(0,S.iH)(!1),h=(0,S.iH)(""),g=(0,S.qj)({}),updateNoteByNoteId=function(e,t){var n,a=g[e];return a?(g[e]=Object.assign(a,t),g[e]):(g[e]=(0,S.qj)((0,i._)((0,r._)({},t),{comments:null!==(n=t.comments)&&void 0!==n?n:defaultComments()})),g[e])},getNoteDetailByNoteId=function(e){var t=g[e];return(null==t?void 0:t.note)?t:updateNoteByNoteId(e,defaultNoteMap())},m=(0,S.iH)(o.Dq.Empty),y=(0,S.qj)({}),getImageListByNoteId=function(e){return(0,S.Fl)(function(){var t,n,r,i=null!==(r=g[e])&&void 0!==r?r:{};return i.note&&(null===(t=i.note.imageList)||void 0===t?void 0:t[0])?null===(n=i.note)||void 0===n?void 0:n.imageList:[]})},I=note_reactiveNoteLayout({prevRoute:m,getImageListByNoteId:getImageListByNoteId,getNoteDetailByNoteId:getNoteDetailByNoteId,noteId:s}),_=(0,S.iH)({}),w=(0,S.iH)(""),k=(0,S.iH)(!1);return(0,r._)({prevRouteData:y,prevRoute:m,getImageListByNoteId:getImageListByNoteId,getTrackDataByNoteId:function(e,t){var n,r,i,a,l=null!=t?t:u,s=getNoteDetailByNoteId(e).note;return m.value===o.Dq.User?i=c.isOwnPage?"web_profile_page":"web_user_page":m.value===o.Dq.Search?i=o.dX[o.Dq.Search]:m.value===o.Dq.Activity?i=o.dX[o.Dq.Activity]:m.value===o.Dq.Notification?(i=o.dX[o.Dq.Notification],a=u.query.channelType):i=m.value===o.Dq.Empty||d.value?(null==l?void 0:l.query.source)||o.dX[o.Dq.Empty]:o.dX[m.value],(null==l?void 0:null===(n=l.query)||void 0===n?void 0:n.app_platform)&&(null==l?void 0:null===(r=l.query)||void 0===r?void 0:r.app_version)&&(i="app_share"),{noteId:e,noteType:T.l7[null==s?void 0:s.type]||0,noteFeedTypeStr:i,trackId:y.trackId,noteTarget_noteId:e,noteCommentTarget_noteId:e,fromPage:null==l?void 0:l.name,gotoPage:h.value,status:c.loggedIn?"logged_in":"not_login",channelTabId:a,videoFeedType:v.value}},reset:function(e){y.trackId="",y.cover="",_.value={},d.value=!1,w.value="",k.value=!1,e&&(f.value=""),v.value="note_source",t=(0,S.qj)({})},commentTarget:_,isImgFullscreen:p,gotoPage:h,firstNoteId:f,autoOpenNote:d,topCommentId:w,noteDetailMap:g,updateNoteByNoteId:updateNoteByNoteId,getNoteDetailByNoteId:getNoteDetailByNoteId,serverRequestInfo:e,collectServerRequestError:function(e){},noteRequest:l,getDefaultNoteId:function(e){return(null==e?void 0:e.params.noteId)||s.value},deleteNoteDetailByNoteId:function(e){delete g[e]},volume:n,recommendVideoMap:t,videoFeedType:v,rate:a,setCurrentNoteId:function(e){s.value=e},currentNoteId:s,setRoute:function(e){u=e},forceScrollToComment:k},I)})},32535:function(e,t,n){"use strict";n.d(t,{DI:function(){return p.DI},Gg:function(){return I},Gu:function(){return _},X8:function(){return p.X8},eA:function(){return m},wK:function(){return p.wK},x1:function(){return p.x1}});var r,i,a=n(41622),o=n(51606),u=n(66993),l=n(377);n(86651);var s=n(40122),c=n(66002),d=n(93328),v=n(95874),f=n(90853),p=n(17240),h=(r={},(0,o._)(r,p.k$.Mentions,{messageList:[],hasMore:!0,cursor:""}),(0,o._)(r,p.k$.Likes,{messageList:[],hasMore:!0,cursor:""}),(0,o._)(r,p.k$.Connections,{messageList:[],hasMore:!0,cursor:""}),r),g={unreadCount:0,mentions:0,likes:0,connections:0},m=[{label:"评论和@",type:p.k$.Mentions},{label:"赞和收藏",type:p.k$.Likes},{label:"新增关注",type:p.k$.Connections}],y=(i={},(0,o._)(i,p.k$.Mentions,f.z0),(0,o._)(i,p.k$.Likes,f.Yq),(0,o._)(i,p.k$.Connections,f.jS),i),I=20,_=(0,c.Q_)("notification",function(){var e,t,n,r,i=(0,v.h)().handleHttpCatch,o=(0,d.iH)(-1),c=(0,d.iH)(!1),p=(0,d.qj)(g),_=(0,d.qj)(h),w=(0,d.Fl)(function(){var e;return null===(e=m[o.value])||void 0===e?void 0:e.type}),k=(0,d.Fl)(function(){return p[w.value]}),S=(0,d.Fl)(function(){return _[w.value].messageList});var b=(e=(0,a._)(function(){var e;return(0,l.Jh)(this,function(t){if(!k.value)return[2];try{(0,f.Rk)(w.value),e=p.unreadCount-k.value,p.unreadCount=e<0?0:e,p[w.value]=0}catch(e){console.log(e)}return[2]})}),function readMessageAndUpdateUnread(){return e.apply(this,arguments)});var M=(t=(0,a._)(function(){var e,t,n,r,a,o,s,d;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(l.trys.push([0,2,3,4]),!_[w.value].hasMore)return[2];return c.value=!0,t=_[w.value].cursor,n=k.value||I,r=w.value,[4,y[w.value](n,t)];case 1:return o=(a=l.sent()).messageList,s=a.hasMore,d=a.strCursor,(e=_[r].messageList).push.apply(e,(0,u._)(o||[])),_[r].hasMore=s,_[r].cursor=d,b(),[3,4];case 2:return i("fetchNotificationList",l.sent()),[3,4];case 3:return c.value=!1,[7];case 4:return[2]}})}),function getNotification(){return t.apply(this,arguments)});var L=(n=(0,a._)(function(e){return(0,l.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,s.pe)(e)];case 1:return t.sent(),[3,3];case 2:return i("postApiSnsWebV1CommentPost",t.sent()),[3,3];case 3:return[2]}})}),function replyComment(e){return n.apply(this,arguments)});var x=(r=(0,a._)(function(){var e,t,n,r,a;return(0,l.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(0,f.DI)()];case 1:return t=(e=o.sent()).unreadCount,n=e.mentions,r=e.likes,a=e.connections,p.unreadCount=t||0,p.mentions=n||0,p.likes=r||0,p.connections=a||0,[3,3];case 2:return i("fetchUnreadCount",o.sent()),[3,3];case 3:return[2]}})}),function getNotificationCount(){return r.apply(this,arguments)});return{isFetching:c,activeTabUnreadCount:k,activeTabKey:o,activeTabMessageList:S,activeTabName:w,notificationCount:p,notificationMap:_,getNotification:M,replyComment:L,getNotificationCount:x,exposeNotificationItem:function(e,t){_[e].messageList[t].exposed=!0},reset:function(){_.mentions={messageList:[],hasMore:!0,cursor:""},_.likes={messageList:[],hasMore:!0,cursor:""},_.connections={messageList:[],hasMore:!0,cursor:""},o.value=-1}}})},17240:function(e,t,n){"use strict";n.d(t,{DI:function(){return i},X8:function(){return r.X8},k$:function(){return r.k$},wK:function(){return r.wK},x1:function(){return a}}),n(23329);var r=n(90853),i=[r.wK.NOTE_AT,r.wK.COMMENT_AT,r.wK.COMMENT_AT,r.wK.NOTE_COMMENT_ME,r.wK.NOTE_COMMENT_LEVEL1,r.wK.NOTE_COMMENT_LEVEL2,r.wK.VIDEO_NOTE_AT,r.wK.VIDEO_NOTE_COMMENT,r.wK.VIDEO_NOTE_COMMENT_ME,r.wK.VIDEO_NOTE_COMMENT_LEVEL1,r.wK.VIDEO_NOTE_COMMENT_LEVEL2],a=Object.values(r.wK)},43460:function(e,t,n){"use strict";n.d(t,{p:function(){return v}});var r=n(41622),i=n(377);n(82427),n(36062),n(57057),n(97357),n(34333),n(87535),n(75204),n(19077),n(75973),n(86651),n(7608);var a=n(40122),o=n(51899),u=n.n(o),l=n(66002),s=n(93328),c=n(95874),d=n(81334);function transformData(e){if(!(null===(n=e.emoji)||void 0===n?void 0:null===(t=n.tabs)||void 0===t?void 0:t[0].collection))return{redmojiTabs:[],redmojiMap:{}};var t,n,r=e.emoji.tabs[0].collection,i=r.reduce(function(e,t){var n=t.emoji;return null==n||n.forEach(function(t){var n=t.imageName,r=t.image;n&&(e[n]=r)}),e},{});return{redmojiTabs:r,redmojiMap:i}}function getDataFromServer(){return _getDataFromServer.apply(this,arguments)}function _getDataFromServer(){return(_getDataFromServer=(0,r._)(function(){var e,t,n,r;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,(0,a.tl)()];case 1:return n=(t=transformData(e=i.sent())).redmojiTabs,r=t.redmojiMap,[2,{version:e.version||"",redmojiTabs:n,redmojiMap:r}]}})})).apply(this,arguments)}function getLocal(){try{return JSON.parse(localStorage.getItem(d.Z.REDMOJI)||"{}")}catch(e){return{}}}var v=(0,l.Q_)("redMoji",function(){var e=(0,c.h)().handleHttpCatch,t=(0,s.iH)({version:"",redmojiTabs:[],redmojiMap:{}}),n=u()((0,r._)(function(){var n,r,o;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(t.value.version)return[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,a._Z)()];case 2:if(n=i.sent().version,(r=getLocal()).version===n)return t.value=r,[2];return[3,4];case 3:return e("getApiImRedmojiVersion",i.sent(),function(){t.value=getLocal()}),[3,4];case 4:return i.trys.push([4,6,,7]),[4,getDataFromServer()];case 5:return o=i.sent(),t.value=o,localStorage.setItem(d.Z.REDMOJI,JSON.stringify(o)),[3,7];case 6:return e("getApiImRedmojiDetail",i.sent(),function(){t.value=getLocal()}),[3,7];case 7:return[2]}})}),300);return(0,s.bv)(n),{mojiData:t}})},47343:function(e,t,n){"use strict";n.d(t,{Z:function(){return filter}});var r=n(41622),i=n(66993),a=n(377);n(64091),n(51109),n(21608),n(6045),n(10364),n(67673),n(86651),n(87394),n(94941),n(48421),n(97357),n(34333),n(87989);var o=n(40122),u=n(95874),l=n(14748),s=n(93328);function filter(){var e,t,n,c,d=(0,u.h)().handleHttpCatch,v=(0,s.iH)(),f=(0,s.iH)((null===(n=v.value)||void 0===n?void 0:n.length)?Array.from({length:v.value.length}).fill(0):[]),p=(0,s.iH)(null===(c=v.value)||void 0===c?void 0:c.map(function(e){var t,n;return{tags:[null==e?void 0:null===(t=e.filterTags)||void 0===t?void 0:t[0].id],type:null!==(n=null==e?void 0:e.id)&&void 0!==n?n:""}})),h=(0,s.iH)([]),g=(0,s.iH)(null),m={id:"0",name:l._t,originText:"综合",showType:0};var y=(e=(0,r._)(function(e,t,n){var r;return(0,a.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,o.b1)({params:{keyword:e,searchId:t,multiParamQuery:n}})];case 1:return r=i.sent(),g.value=null,[2,r.filters];case 2:return d("getApiSnsWebV1SearchFilters",i.sent()),g.value=null,[3,3];case 3:return[2]}})}),function getSearchFilters(t,n,r){return e.apply(this,arguments)});var I=(t=(0,r._)(function(e){var t;return(0,a.Jh)(this,function(n){return e.length?(t=e.filter(function(e){return 1===e.groupShowType}),h.value=t.length?[m].concat((0,i._)(t[0].filterTags||[])):[],v.value=e.filter(function(e){return 0===e.groupShowType}),f.value=Array.from({length:v.value.length}).fill(0),p.value=v.value.map(function(e){var t;return{tags:[null===(t=e.filterTags)||void 0===t?void 0:t[0].id],type:e.id}}),[2]):[2]})}),function setSearchFilters(e){return t.apply(this,arguments)});return{filters:v,activeFilters:f,filterParams:p,resetSearchFilter:function(){var e,t;f.value=(null===(e=v.value)||void 0===e?void 0:e.length)?Array.from({length:v.value.length}).fill(0):[],p.value=null===(t=v.value)||void 0===t?void 0:t.map(function(e){var t;return{tags:[null===(t=e.filterTags)||void 0===t?void 0:t[0].id],type:e.id}})},tagSearch:h,activeTagSearch:g,getSearchFilters:y,setSearchFilters:I,resetTagSearch:function(){h.value=[],g.value=null}}}},95474:function(e,t,n){"use strict";n.d(t,{Z:function(){return history}}),n(87989),n(7608),n(19077),n(75973),n(29273),n(34885),n(92519);var r=n(93328),i=n(85537);function history(){var e=(0,r.iH)([]),t=(0,i.L)(),syncHistoryStorage=function(){var n,r,i=null!==(r=null===(n=t.userInfo)||void 0===n?void 0:n.userId)&&void 0!==r?r:"";localStorage.setItem("xhs-pc-search-history-".concat(i),JSON.stringify(e.value))},getHistoryList=function(){var n,r,i=null!==(r=null===(n=t.userInfo)||void 0===n?void 0:n.userId)&&void 0!==r?r:"",a="xhs-pc-search-history-".concat(i),o=localStorage.getItem(a);if(o)try{e.value=JSON.parse(o)}catch(t){localStorage.removeItem(a),e.value=[],syncHistoryStorage()}else e.value=[],syncHistoryStorage()};return{historyList:e,clearHistoryList:function(){e.value=[],syncHistoryStorage()},deleteHistory:function(t){if(!(t<0)&&!(t>=e.value.length))e.value.splice(t,1),syncHistoryStorage()},addHistory:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!!t&&!n){var r=e.value.indexOf(t);r>-1&&e.value.splice(r,1),e.value.unshift(t),e.value.length>15&&e.value.pop(),syncHistoryStorage()}},getHistoryList:getHistoryList,initHistory:function(){var n;(null===(n=t.userInfo)||void 0===n?void 0:n.userId)&&t.loggedIn?getHistoryList():t.$mitt.on("onFetchUserInfo",function(){0===e.value.length&&getHistoryList()})}}}},68284:function(e,t,n){"use strict";n.d(t,{P:function(){return E.P},R:function(){return R}});var r=n(41622),i=n(70879),a=n(66993),o=n(377);n(74093),n(20768),n(41648),n(59339),n(47444),n(34757),n(85908),n(39995),n(22943),n(54767),n(55820),n(93225),n(33708),n(64322),n(47771),n(27461),n(23339),n(51109),n(34333),n(36277),n(86651);var u=n(98413),l=n(14748),s=n(8935),c=n(13189),d=n(27337);n(7608),n(6045),n(10364),n(67673),n(64961),n(12996),n(59564),n(97357),n(97542);var v=n(88588),f=n(83966),p=n(97611),h=n(32335),g=n(93328),m=n(85537),y="aiSearchAcrossWeb";function getAiSearchAcrossWebLocalValue(){var e=localStorage.getItem(y);return e?(0,f.D)(e):null}function setAiSearchAcrossWebLocalValue(e){localStorage.setItem(y,e)}function clearAiSearchAcrossWebLocalValue(){localStorage.removeItem(y)}function aiSearch(e){var t=(0,g.iH)(!1),n=(0,g.iH)(!1),r=(0,g.iH)([]),a=(0,g.iH)(-1),o=(0,g.iH)([]),u=(0,m.L)(),l=(0,h.t)(),s=(0,p.q)();function assignAiMessageIdToImageList(e,t){if(!!t&&!!e)r.value=r.value.map(function(n){return(0,d._)((0,i._)({},n),{roundId:n.roundId?n.roundId:e,userMessageId:n.userMessageId?n.userMessageId:t})})}function enrichImageListWithAnchors(e){if(!!e&&0!==e.length)r.value.length>0&&e.length>0&&(r.value[0].anchorInfo=e[0])}function getBasicMultiParamQuery(){var e;return(null===(e=r.value)||void 0===e?void 0:e.map(function(e){return{type:"image",content:{file_id:(null==e?void 0:e.fileId)||"",source:"pc_web_album",anchor_id:a.value}}}))||[]}function clearImageList(){r.value=[]}function getMultiParamQuery(){var e=R().currentUserMessageId;if(!e){var t,n,i=(null===(n=l.rounds.find(function(e){return e.roundId===l.getCurrentRoundId()}))||void 0===n?void 0:n.userMessage.msgId)||null;i&&!i.startsWith("local-")&&(e=i)}return{userMessageId:e,multiParamQuery:(null===(t=r.value)||void 0===t?void 0:t.map(function(e){var t={file_id:(null==e?void 0:e.fileId)||"",source:"pc_web_album"};return e.anchorInfo&&(t.bbox={x:e.anchorInfo.x,y:e.anchorInfo.y,width:e.anchorInfo.width,height:e.anchorInfo.height},t.anchor_id=e.anchorInfo.id,t.note_id="",t.request_id=""),{type:"image",content:t}}))||[]}}function getMultiParamQueryString(){if(s.isAIMode&&e.isSearchFromAiInput.value){var t=getMultiParamQuery().multiParamQuery;return t.length>0?JSON.stringify(t):void 0}}return(0,g.bv)(function(){if(!u.loggedIn){clearAiSearchAcrossWebLocalValue(),t.value=!1;return}var e=(0,v.Z)(document.cookie||"","unread"),n=getAiSearchAcrossWebLocalValue();(null==n?void 0:n.sessionId)===e&&n.isFromHeaderInput&&(t.value=!!n.value)}),(0,g.YP)(t,function(e){setAiSearchAcrossWebLocalValue(JSON.stringify({sessionId:(0,v.Z)(document.cookie||"","unread"),value:e,isFromHeaderInput:n.value}))}),{aiSearchAcrosssWeb:t,aiSearchImageList:r,aiSearchImageListForCache:o,assignAiMessageIdToImageList:assignAiMessageIdToImageList,getMultiParamQuery:getMultiParamQuery,getMultiParamQueryString:getMultiParamQueryString,getBasicMultiParamQuery:getBasicMultiParamQuery,enrichImageListWithAnchors:enrichImageListWithAnchors,updateAnchorId:function updateAnchorId(e){a.value=e},resetAnchorId:function resetAnchorId(){a.value=-1},clearImageList:clearImageList,currentAnchorId:a,aiAcrosssWebActivedFromHeaderInput:n}}var I=n(47343),_=n(95474),w=n(10571),k=n(40122),S=n(95874),b=n(10409),M=n(67156);function onebox(){var e,t=(0,b.j)(),n=(0,S.h)().handleHttpCatch,a=(0,g.iH)({}),u=(0,g.qj)({keyword:"",searchId:"",bizType:"web_search_user",requestId:""});var l=(e=(0,r._)(function(e,t){var r,i;return(0,o.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),u.keyword=e,u.requestId=(0,c.A)(),[4,(0,k.d9)(u)];case 1:if(i=a.sent(),u.searchId!==t||!(null==i?void 0:i.oneboxList)||(null==i?void 0:null===(r=i.oneboxList)||void 0===r?void 0:r.length)===0)return[2,null];return[2,null==i?void 0:i.oneboxList[0]];case 2:return n("postApiSnsWebV1SearchOnebox",a.sent()),[3,3];case 3:return[2,null]}})}),function getOneboxInfo(t,n){return e.apply(this,arguments)});return{getOneboxInfo:l,oneboxInfo:a,initOnebox:function(){a.value={},t.setEntryInfo({type:M.UZ.onebox,show:!1,openType:M.B8.panel,link:""})},setOneboxInfo:function(e){var n,r,o;if(!!e)a.value=e||{},"user"===a.value.type&&(a.value.userOneBox=(0,d._)((0,i._)({},a.value.userOneBox),{name:null===(n=a.value.userOneBox)||void 0===n?void 0:n.title})),"artificial"===a.value.type&&t.setEntryInfo({type:M.UZ.onebox,show:!0,link:(null===(o=e.artificialOneBox)||void 0===o?void 0:null===(r=o.extra)||void 0===r?void 0:r.jumpUrl)||"",extra:e.artificialOneBox})},searchContextOnebox:u}}var L=n(34155),x=n(73078),T=n(66002),D=n(13285),N=n(84271),E=n(19337),R=(0,T.Q_)("search",function(){var e,t,n,d,v,f,p=(0,L.Z)(),y=p.getQueryTrending,k=p.hintWord,S=p.queryTrendingInfo,b=p.getSuggestions,M=p.suggestions,T=p.userInputSugTrigger,E=p.initSuggestions,R=p.sugType,U=p.getSugRecommend,P=p.queryTrendingParams,F=p.setQueryTrendingWithBack,j=p.queryTrendingFetched,O=p.searchCplId,H=p.wordRequestId,W=p.searchHotSpots,z=p.hotspotQueryNoteStep,Z=p.hotspotQueryNoteIndex,q=p.canShowHotspotQueryNote,V=p.searchCardHotSpots,Y=p.hotspots,G=p.isHotspotSearch,J=p.setHotspotSearch,Q=p.checkHotspotStorageStatus,K=onebox(),X=K.getOneboxInfo,$=K.oneboxInfo,ee=K.initOnebox,et=K.setOneboxInfo,en=K.searchContextOnebox,er=(0,x.Z)(),ei=er.userLists,ea=er.getUserLists,eo=er.fetchUserListsStatus,eu=er.isFetchingUserLists,el=er.loadMoreUsers,es=er.searchUserContext,ec=er.hasMoreUser,ed=er.resetSearchUserStore,ev=(0,_.Z)(),ef=ev.historyList,ep=ev.clearHistoryList,eh=ev.deleteHistory,eg=ev.addHistory,em=ev.getHistoryList,ey=ev.initHistory,eI=(0,I.Z)(),e_=eI.filters,ew=eI.activeFilters,ek=eI.filterParams,eS=eI.resetSearchFilter,eb=eI.tagSearch,eC=eI.getSearchFilters,eM=eI.setSearchFilters,eA=eI.activeTagSearch,eL=eI.resetTagSearch,ex=(0,w.Z)(),eT=ex.searchContext,eD=ex.feeds,eN=ex.state,eE=ex.searchNotes,eR=ex.setNotes,eU=ex.loadMore,eP=ex.hasMore,eF=ex.resetSearchNoteStore,ej=(0,D.yj)(),eO=(0,D.tv)(),eH=(0,m.L)(),eW=(0,g.iH)(""),ez=(0,g.iH)(!1),eB=(0,g.iH)(""),eZ=(0,g.iH)(""),eq=(0,g.iH)(!0),eV=(0,g.iH)((null===(f=ej.query)||void 0===f?void 0:f.auto)?l.ai.SEARCH_WORD_FROM_AUTO_COMPLETE:l.ai.SEARCH_WORD_FROM_CONFIRM),eY=(0,g.iH)(),eG=(0,g.Fl)(function(){var e,t;return null!==(t=null===(e=ej.query)||void 0===e?void 0:e.source)&&void 0!==t?t:""}),eJ=(0,g.iH)(l.NK.All),eQ=(0,g.iH)(!1),eK=(0,g.iH)((null==ej?void 0:ej.name)===u.Z.AISearchName),eX=aiSearch({isSearchFromAiInput:eK}),e$=eX.aiSearchAcrosssWeb,e0=eX.aiAcrosssWebActivedFromHeaderInput,e1=eX.aiSearchImageList,e3=eX.assignAiMessageIdToImageList,e2=eX.getMultiParamQuery,e4=eX.getMultiParamQueryString,e5=eX.getBasicMultiParamQuery,e8=eX.enrichImageListWithAnchors,e9=eX.updateAnchorId,e6=eX.resetAnchorId,e7=eX.clearImageList,te=eX.currentAnchorId,tt=(0,g.iH)(null),tn=(0,g.iH)(!1),tr=(0,g.iH)(null),ti=(0,g.iH)(!1),ta=new Map,setUserMessageId=function(e){tt.value=e},setRoundSwitching=function(e){ti.value=e},cacheRoundSearchContext=function(e){ta.set(e,{keyword:eT.keyword,messageId:tt.value||"",searchId:eT.searchId,page:eT.page,rewriteQuery:eT.rewriteQuery,feeds:(0,a._)(eD.value),hasMore:eP.value,state:eN.value,oneboxInfo:(0,i._)({},$.value),filters:e_.value?(0,a._)(e_.value):[],tagSearch:eb.value?(0,a._)(eb.value):[],timestamp:Date.now()})},getCachedRoundSearchContext=function(e){var t=ta.get(e);return t?t:null},setRootSearchId=function(){return eB.value=(0,c.J)(),eB.value},resetSearchRelatedInfo=function(){eL(),eS(),ee()};var to=(e=(0,r._)(function(){var e,t,n,r,i,a,u,l=arguments;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(e=l.length>0&&void 0!==l[0]?l[0]:eT.keyword,t=l.length>1?l[1]:void 0,tn.value)return tn.value=!1,[2];return eF(),resetSearchRelatedInfo(),e6(),e&&e!==eT.keyword&&(eT.keyword=e),eT.searchId=setRootSearchId(),en.searchId=eT.searchId,eT.filters=ek.value,eT.noteType=s.PZ.All,eg(e,G.value),n=X(eT.keyword,eT.searchId),r=eC(eT.keyword,en.searchId,e4()),i=eE(eT.searchId),[4,n];case 1:return et.apply(void 0,[o.sent()]),[4,r];case 2:return eM.apply(void 0,[o.sent()]),[4,i];case 3:return eR(o.sent(),eT.searchId),a=(0,h.t)(),(u=t||a.getCurrentActiveRoundId())&&cacheRoundSearchContext(u),[2]}})}),function fetchNotePageData(){return e.apply(this,arguments)});var tu=(t=(0,r._)(function(){var e,t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,g.Y3)()];case 1:if(n.sent(),!(e=document.querySelector(".search-layout"))||!((t=e.clientWidth)>0))return[3,3];return(0,N.D)().calculateAndApplyCustomLayout(t),[4,new Promise(function(e){return setTimeout(e,50)})];case 2:n.sent(),n.label=3;case 3:return[2]}})}),function triggerLayoutRecalculation(){return t.apply(this,arguments)}),scrollSearchLayoutToTop=function(){(0,g.Y3)(function(){var e=document.querySelector(".search-layout-wrapper");e&&e.scrollTo({top:0,behavior:"smooth"})})};var tl=(n=(0,r._)(function(e,t){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:if(!(n=getCachedRoundSearchContext(e)))return[3,7];setRoundSwitching(!0),r.label=1;case 1:return r.trys.push([1,,6,7]),(0,N.D)().layoutInfoReady=!1,eT.searchId=n.searchId,eT.keyword=n.keyword,eT.page=n.page,eT.rewriteQuery=n.rewriteQuery,et(n.oneboxInfo),eM(n.filters),n.messageId&&setUserMessageId(n.messageId),eD.value=[],eN.value="loading",[4,new Promise(function(e){return setTimeout(e,320)})];case 2:return r.sent(),[4,tu()];case 3:return r.sent(),[4,(0,g.Y3)()];case 4:return r.sent(),eD.value=(0,a._)(n.feeds),eP.value=n.hasMore,eN.value=n.state,[4,(0,g.Y3)()];case 5:return r.sent(),scrollSearchLayoutToTop(),[2,!0];case 6:return setTimeout(function(){setRoundSwitching(!1)},1e3),[7];case 7:setRoundSwitching(!0),r.label=8;case 8:return r.trys.push([8,,10,11]),eF(),resetSearchRelatedInfo(),e6(),eT.keyword=t,eT.searchId=setRootSearchId(),en.searchId=eT.searchId,eT.filters=ek.value,eT.noteType=s.PZ.All,[4,eE(eT.searchId)];case 9:return eR(r.sent(),eT.searchId),cacheRoundSearchContext(e),scrollSearchLayoutToTop(),[2,!0];case 10:return setTimeout(function(){setRoundSwitching(!1)},1e3),[7];case 11:return[2]}})}),function switchToRound(e,t){return n.apply(this,arguments)});var ts=(d=(0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,eH.getUserInfo()];case 1:if(e.sent(),!eH.loggedIn)return eO.push({path:u.Z.ExplorePath,query:{source:"tourist_search"}}),[2];return to(),[2]}})}),function searchPageCloseLoginBox(){return d.apply(this,arguments)});var tc=(v=(0,r._)(function(e){var t,n,r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),eF(),resetSearchRelatedInfo(),e6(),eT.keyword=e,eT.searchId=setRootSearchId(),en.searchId=eT.searchId,eT.filters=ek.value,eT.noteType=s.PZ.All,eg(e,G.value),t=eE(eT.searchId),[4,eC(eT.keyword,en.searchId,e4())];case 1:return eM.apply(void 0,[i.sent()]),[4,t];case 2:if(!(n=i.sent()))return[2,null];return eR(n,eT.searchId),(r=(0,h.t)().getCurrentActiveRoundId())&&cacheRoundSearchContext(r),[2,n];case 3:return console.error("图片搜索预搜索失败:",i.sent()),[2,null];case 4:return[2]}})}),function fetchNotesForImageQuery(e){return v.apply(this,arguments)});return{state:eN,searchContext:eT,loadMore:eU,feeds:eD,searchValue:eW,getSuggestions:b,suggestions:M,userInputSugTrigger:T,keywordFrom:eV,updateKeywordFrom:function(e){eV.value=e},initSuggestions:E,sourcePageInstance:eG,tagSearch:eb,activeTagSearch:eA,mutateSearchValue:function(e,t){eW.value=e,null==t||t()},searchFeedsWrapper:eY,currentSearchType:eJ,hintWord:k,getQueryTrending:y,sugType:R,getSugRecommend:U,queryTrendingInfo:S,queryTrendingParams:P,setQueryTrendingWithBack:F,queryTrendingFetched:j,oneboxInfo:$,hasMore:eP,firstEnterSearchPage:eq,userLists:ei,getUserLists:ea,fetchUserListsStatus:eo,isFetchingUserLists:eu,loadMoreUsers:el,resetFetchingStatus:function(){eN.value="auto",eo.value="auto"},hasMoreUser:ec,searchCplId:O,wordRequestId:H,historyList:ef,clearHistoryList:ep,deleteHistory:eh,addHistory:eg,getHistoryList:em,initHistory:ey,searchPageCloseLoginBox:ts,searchPageHasPrevRoute:ez,searchHotSpots:W,hotspotQueryNoteStep:z,hotspotQueryNoteIndex:Z,canShowHotspotQueryNote:q,forceHotspotSearch:eQ,searchCardHotSpots:V,hotspots:Y,isHotspotSearch:G,setHotspotSearch:J,checkHotspotStorageStatus:Q,filters:e_,activeFilters:ew,filterParams:ek,resetSearchFilter:eS,sessionId:eZ,searchNotes:eE,fetchNotePageData:to,setNotes:eR,rootSearchId:eB,resetSearchNoteStore:eF,resetTagSearch:eL,initOnebox:ee,resetSearchUserStore:ed,searchUserContext:es,setRootSearchId:setRootSearchId,resetSearchRelatedInfo:resetSearchRelatedInfo,aiSearchAcrosssWeb:e$,aiAcrosssWebActivedFromHeaderInput:e0,aiSearchImageList:e1,isSearchFromAiInput:eK,assignAiMessageIdToImageList:e3,getMultiParamQuery:e2,currentUserMessageId:tt,setUserMessageId:setUserMessageId,clearUserMessageId:function(){tt.value=null},currentSearchRoundId:tr,setSearchRoundId:function(e){tr.value=e},clearSearchRoundId:function(){tr.value=null},clearPreFetchFlag:function(){tn.value=!1},enrichImageListWithAnchors:e8,fetchNotesForImageQuery:tc,hasPreFetchedNotes:tn,getBasicMultiParamQuery:e5,updateAnchorId:e9,resetAnchorId:e6,clearImageList:e7,currentAnchorId:te,cacheRoundSearchContext:cacheRoundSearchContext,getCachedRoundSearchContext:getCachedRoundSearchContext,restoreRoundSearchContext:function(e){var t=getCachedRoundSearchContext(e);if(!t)return!1;setRoundSwitching(!0);try{return eT.keyword=t.keyword,eT.searchId=t.searchId,eT.page=t.page,eD.value=(0,a._)(t.feeds),eP.value=t.hasMore,eN.value=t.state,et(t.oneboxInfo),eM(t.filters),t.messageId&&setUserMessageId(t.messageId),!0}finally{setTimeout(function(){setRoundSwitching(!1)},1e3)}},clearRoundSearchCache:function(){ta.clear()},isRoundSwitching:ti,setRoundSwitching:setRoundSwitching,switchToRound:tl}})},19337:function(e,t,n){"use strict";n.d(t,{P:function(){return useSearchLifecycle}});var r=n(68284);function useSearchLifecycle(){var e=(0,r.R)();return{onBeforeFocus:function(t){return e.$mitt.on("beforeFocus",t)},emitBeforeFocus:function(){e.$mitt.emit("beforeFocus")},onFocus:function(t){return e.$mitt.on("focus",t)},emitFocus:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.$mitt.emit("focus",{scrollToHotspot:t})},onInput:function(t){return e.$mitt.on("input",t)},emitInput:function(t){e.$mitt.emit("input",{keyword:t})},onSearchStart:function(t){return e.$mitt.on("serchStart",t)},emitSearchStart:function(t,n){e.$mitt.emit("serchStart",{keyword:t,searchId:n})},onSearchEnd:function(t){return e.$mitt.on("searchEnd",t)},emitSearchEnd:function(t,n,r){e.$mitt.emit("searchEnd",{keyword:t,searchId:n,duration:r})},onSearchApiStart:function(t){return e.$mitt.on("searchApiStart",t)},emitSearchApiStart:function(t,n){e.$mitt.emit("searchApiStart",{keyword:t,searchId:n})},onSearchApiSucceed:function(t){return e.$mitt.on("searchApiSucceed",t)},emitSearchApiSucceed:function(t,n,r){e.$mitt.emit("searchApiSucceed",{keyword:t,searchId:n,duration:r})},onSearchApiFailed:function(t){return e.$mitt.on("searchApiFailed",t)},emitSearchApiFailed:function(t,n,r,i){e.$mitt.emit("searchApiFailed",{keyword:t,searchId:n,error:r,duration:i})},onSearchRenderStart:function(t){return e.$mitt.on("searchRenderStart",t)},emitSearchRenderStart:function(t,n){e.$mitt.emit("searchRenderStart",{searchId:t,searchType:n})},onSearchRenderComplete:function(t){return e.$mitt.on("searchRenderComplete",t)},emitSearchRenderComplete:function(t,n,r){e.$mitt.emit("searchRenderComplete",{searchId:t,searchType:n,duration:r})},onSearchFilterChange:function(t){return e.$mitt.on("searchFilterChange",t)},emitSearchFilterChange:function(t){e.$mitt.emit("searchFilterChange",{keyword:t})}}}},10571:function(e,t,n){"use strict";n.d(t,{Z:function(){return notes}});var r=n(41622),i=n(70879),a=n(27337),o=n(377);n(7608),n(86651),n(42876),n(33933),n(87535),n(75204),n(97357),n(34333),n(87989);var u=n(40122),l=n(51401),s=n(14978),c=n.n(s),d=n(95874),v=n(98413),f=n(52867),p=n(44924),h=n(8935),g=n(94186),m=n(10535),y=n(99505),I=n(79612),_=n(19337),w=n(34155),k=n(13285),S=n(93328),b=n(85537),M=n(28860),L=n(97611),x=n(68284),T=n(6890);function notes(){var e,t,n=(0,k.yj)(),s=(0,S.iH)("auto"),D=(0,S.iH)(!0),N=(0,d.h)().handleHttpCatch,E=(0,w.Z)(),R=E.checkHotspotStorageStatus,U=E.setHotspotSearch,P=E.searchCardHotSpots,F=E.queryTrendingParams,j=E.canShowHotspotQueryNote,O=(0,S.iH)([]),H=(0,b.L)(),W=(0,_.P)(),z=(0,M.E)(),Z=(0,L.q)(),q=(0,x.R)(),V=(0,S.iH)(0),Y=(0,S.iH)(!1),G=[p.B.note,p.B.hotQuery],J=(0,S.qj)({keyword:function(){try{var e,t;if(null===(e=n.query)||void 0===e?void 0:e.keyword)return decodeURIComponent(null===(t=n.query)||void 0===t?void 0:t.keyword)}catch(e){}return""}(),page:1,pageSize:20,searchId:"",sort:h.bv.GENERAL,noteType:h.PZ.All,extFlags:[],filters:[],geo:""});function getAiSearchNotesV2Query(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=q.getBasicMultiParamQuery(),n=q.getMultiParamQuery().userMessageId,r=n&&"fetching_image_notes"!==n,o=e&&J.rewriteQuery?J.rewriteQuery:J.keyword,u=!!e&&!!J.rewriteQuery||void 0;return(0,a._)((0,i._)({},J),{keyword:o,messageId:r?n:"",multiParamQuery:t.length>0?JSON.stringify(t):void 0,skip_planning:u})}var Q=(e=(0,r._)(function(e){var t,n,r,i,a,l,c,d,v,p,y,I,_;return(0,o.Jh)(this,function(o){switch(o.label){case 0:F.value.lastQuery=J.keyword,F.value.lastQueryTime=Date.now(),F.value.wordRequestSituation=h.Qb.BACK_WITH_DEL_WORD,o.label=1;case 1:if(o.trys.push([1,3,,4]),n=(0,T.s6)(),J.imageFormats=n.imageFormatParams,R(),!j.value&&(J.extFlags=["hotlist_disable"]),i=(r=(null==Z?void 0:Z.isAIMode)&&q.isSearchFromAiInput)?f.i1:u.$5,a=r?getAiSearchNotesV2Query():J,r&&"messageId"in a&&a.messageId&&String(a.messageId).includes("local"))return[2,null];return[4,i(a)];case 2:if(!(null==(l=o.sent())?void 0:null===(t=l.items)||void 0===t?void 0:t.length))return g.ZA.trackEmptyInfo("search_empty_notes","postApiSnsWebV1SearchNotes","result_empty",JSON.stringify(J)),s.value="error",[2,null];if(J.searchId!==e)return[2,null];return r&&(null!=(p=null!==(v=null==(d=null==l?void 0:l.anchorList)?void 0:null===(c=d[0])||void 0===c?void 0:c.id)&&void 0!==v?v:-1)&&q.updateAnchorId(p),(y=null==l?void 0:l.rewriteQuery)&&y!==J.keyword&&(J.rewriteQuery=y)),W.emitSearchApiSucceed(J.keyword,J.searchId,0),[2,(0,m.ON)(l)];case 3:return I=o.sent(),g.ZA.trackEmptyInfo("search_empty_notes","postApiSnsWebV1SearchNotes","api_error",J.keyword,null!==(_=JSON.stringify(I.message))&&void 0!==_?_:""),s.value="error",N("postApiSnsWebV1SearchNotes",I),[3,4];case 4:return[2,null]}})}),function searchNotes(t){return e.apply(this,arguments)}),K=c()((0,r._)(function(){var e,t,r,s,c,d,p,h,y,I,_,w;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(o.trys.push([0,2,,3]),!1===D.value)return[2];if(J.page+=1,r=(t=(null==Z?void 0:Z.isAIMode)&&q.isSearchFromAiInput)?f.i1:u.$5,s=t?getAiSearchNotesV2Query(!0):J,t&&"messageId"in s&&s.messageId&&String(s.messageId).includes("local"))return[2];return[4,r(s)];case 1:return c=o.sent(),t&&null!=(y=null!==(h=null==(p=null==c?void 0:c.anchorList)?void 0:null===(d=p[0])||void 0===d?void 0:d.id)&&void 0!==h?h:-1)&&q.updateAnchorId(y),I=(0,m.ON)(c),D.value=I.hasMore,null==I||null===(e=I.items)||void 0===e||e.forEach(function(e){if((null==n?void 0:n.name)!==v.Z.AISearchName||!!G.includes(e.modelType))O.value.push((0,a._)((0,i._)({},e),{index:O.value.length,exposed:!1,trackId:e.id}))}),_={webid:l.Z.get("webId")||"unknown",login:H.loggedIn,context:JSON.stringify(J)},(0,g.hO)(O.value,"search","",!1,JSON.stringify(_)),[3,3];case 2:return w=o.sent(),J.page-=1,N("postApiSnsWebV1SearchNotes",w),[3,3];case 3:return[2]}})}),500);function trackSearchResultUpdate(){try{var e={channelTabName:"user"===q.currentSearchType?"user":"note",instanceId:q.rootSearchId||J.searchId,searchSessionId:q.rootSearchId||J.searchId,searchWord:J.keyword,searchWordFrom:q.keywordFrom,searchMode:q.aiSearchAcrosssWeb?"internet":"",fromPage:window.location.pathname};if(q.aiSearchImageList&&q.aiSearchImageList.length>0&&(void 0!==q.currentAnchorId&&null!==q.currentAnchorId&&-1!==q.currentAnchorId&&(e.searchBoxid="".concat(q.currentAnchorId)),q.aiSearchImageList.length>0)){var t=q.aiSearchImageList[0];(null==t?void 0:t.fileId)&&(e.searchImageFromFileId=t.fileId)}(0,y.i6)(I.pD.ai.refresh.page,e,q.rootSearchId||J.searchId)}catch(e){}}var X=(t=(0,r._)(function(){var e,t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(!((t=null===(e=O.value)||void 0===e?void 0:e.length)<z.minRenderNotes))return[3,3];return[4,K()];case 1:if(n.sent(),!1===D.value)return[2];if(O.value.length===t&&(V.value+=1),V.value>=3)return[2];return[4,X()];case 2:n.sent(),n.label=3;case 3:return[2]}})}),function fetchEnough(){return t.apply(this,arguments)});return(0,S.YP)(Y,function(e){e&&X()}),{searchContext:J,searchNotes:Q,setNotes:function(e,t){var r;if(!!e&&J.searchId===t)D.value=e.hasMore,null===(r=e.items)||void 0===r||r.forEach(function(e){if((null==e?void 0:e.modelType)===p.B.hotList){var t;P.value=(null==e?void 0:null===(t=e.hotList)||void 0===t?void 0:t.items)||[]}if((null==n?void 0:n.name)!==v.Z.AISearchName||!!G.includes(e.modelType))O.value.push((0,a._)((0,i._)({},e),{index:O.value.length,exposed:!1,trackId:e.id}))}),s.value="success",Y.value=!0,U(!1),(null==Z?void 0:Z.isAIMode)&&q.isSearchFromAiInput&&trackSearchResultUpdate()},feeds:O,state:s,loadMore:K,hasMore:D,resetSearchNoteStore:function(){O.value=[],s.value="loading",V.value=0,J.page=1,J.rewriteQuery=void 0,Y.value=!1,D.value=!0}}}},34155:function(e,t,n){"use strict";n.d(t,{Z:function(){return suggestion}});var r=n(41622),i=n(70879),a=n(27337),o=n(82726),u=n(377);n(86651),n(6045),n(10364),n(67673),n(7608);var l=n(16337),s=n(40122),c=n(51899),d=n.n(c),v=n(14978),f=n.n(v),p=n(93328),h=n(13285),g=n(95874),m=n(81334),y=n(52867),I=n(51948),_=n(68284),w=n(85537),k=n(8935),S=n(94186),b=n(32335),M=n(97611),L=n(6890),x=n(69876);function suggestion(){var e,t,n=(0,h.yj)(),c=(0,w.L)(),v=(0,b.t)(),T=(0,M.q)(),D=(0,g.h)().handleHttpCatch,N=(0,L.s6)(),E=(0,_.R)(),R=(0,I.t)(),U=(0,p.Fl)(function(){var e;return null==N?void 0:null===(e=N.appSettings)||void 0===e?void 0:e.aiSearchConfig}),P=(0,p.Fl)(function(){var e,t;return{title:(null==T?void 0:T.isAIMode)?(null==U?void 0:null===(t=U.value)||void 0===t?void 0:null===(e=t.searchHintConfig)||void 0===e?void 0:e.homePageSearchInputHint)||"搜索或输入任何问题":"搜索小红书",searchWord:"小红书网页版",hintWordRequestId:"default",type:"default"}}),F=(0,p.iH)(P.value),j=(0,p.iH)(),O=(0,p.iH)(null),H=(0,p.iH)(""),W=(0,p.iH)([]),z=(0,p.iH)("display"),Z=(0,p.iH)(0),q=(0,p.iH)(!0),V=(0,p.iH)([]),Y=(0,p.iH)([]),G=(0,p.Fl)(function(){var e;return(null===(e=V.value)||void 0===e?void 0:e.length)?V.value:Y.value}),J=(0,o._)((0,x.OT)(!1),2),Q=J[0],K=J[1],X=(0,p.iH)(!1),$=(0,p.iH)(),ee=(0,p.iH)(),et=(0,p.iH)({source:String(n.name),searchType:"trend",lastQuery:"",lastQueryTime:0,wordRequestSituation:k.Qb.FIRST_ENTER,hintWord:"",hintWordType:"",hintWordRequestId:""}),en=f()((0,r._)(function(){var e,t,r,o,l,d,v,f,p,h;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(!c.loggedIn)return[2];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,((null==T?void 0:T.isAIMode)&&E.isSearchFromAiInput?y.JD:s.du)({params:et.value})];case 2:return v=u.sent(),j.value=v,j.value.queries=(null===(t=j.value)||void 0===t?void 0:null===(e=t.queries)||void 0===e?void 0:e.map(function(e){return(0,a._)((0,i._)({},e),{text:e.title})}))||[],et.value=(0,a._)((0,i._)({},et.value),{source:String(n.name),hintWord:null!==(f=null===(r=j.value.hintWord)||void 0===r?void 0:r.title)&&void 0!==f?f:"",hintWordType:null!==(p=null===(o=j.value.hintWord)||void 0===o?void 0:o.type)&&void 0!==p?p:"",hintWordRequestId:null!==(h=null===(l=j.value.hintWord)||void 0===l?void 0:l.hintWordRequestId)&&void 0!==h?h:""}),O.value="queryTrending",X.value=!0,W.value=j.value.queries,F.value=(null===(d=j.value.hintWord)||void 0===d?void 0:d.type)==="artificial"?j.value.hintWord:P.value,[3,4];case 3:return D("getApiSnsWebV1SearchQuerytrending",u.sent()),W.value=[],V.value=[],F.value=P.value,O.value=null,[3,4];case 4:return[2]}})}),100,{leading:!0,trailing:!1}),trackSugEmpty=function(e,t){var n;(null==e?void 0:null===(n=e.sugItems)||void 0===n?void 0:n.length)===0&&S.ZA.trackEmptyInfo("search_empty_sug","getApiSnsWebV1SearchRecommend","result_empty",t)};var er=d()((e=(0,r._)(function(e,t){var n,r,o,l,c,d,f;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),n={keyword:e},(null==T?void 0:T.isAIMode)&&E.isSearchFromAiInput&&(null==t?void 0:t.length)&&(n=(0,a._)((0,i._)({},n),{source:"web_ask",extParams:JSON.stringify({session_keywords:JSON.stringify(v.historyQuerys||[]),image_guide_words:(null===(o=R.guideWordsData)||void 0===o?void 0:null===(r=o.guides)||void 0===r?void 0:r[0])||""})})),[4,(0,s.F2)({params:n})];case 1:if(l=u.sent(),H.value!==e)return[2];return trackSugEmpty(l,e),$.value=null==l?void 0:l.searchCplId,ee.value=null==l?void 0:l.wordRequestId,W.value=null!==(c=null==l?void 0:l.sugItems)&&void 0!==c?c:[],O.value="inputSug",[3,3];case 2:if(D("getApiSnsWebV1SearchRecommend",d=u.sent()),H.value!==e)return[2];return W.value=[],O.value="inputSug",S.ZA.trackEmptyInfo("search_empty_sug","getApiSnsWebV1SearchRecommend","api_error",e,null!==(f=JSON.stringify(d.data))&&void 0!==f?f:""),[3,3];case 3:return[2]}})}),function(t,n){return e.apply(this,arguments)}),200);var ei=(t=(0,r._)(function(e){return(0,u.Jh)(this,function(t){switch(t.label){case 0:if(e)return[3,2];return[4,en()];case 1:case 3:return t.sent(),[2];case 2:return[4,er(e)]}})}),function getSuggestions(e){return t.apply(this,arguments)});return{getQueryTrending:en,hintWord:F,suggestions:W,userInputSugTrigger:H,initSuggestions:function(){W.value=[]},sugType:O,queryTrendingInfo:j,getSuggestions:ei,getSugRecommend:er,queryTrendingParams:et,setQueryTrendingWithBack:function(){var e;if(et.value.wordRequestSituation===k.Qb.BACK_WITH_DEL_WORD){en();return}W.value=(null===(e=j.value)||void 0===e?void 0:e.queries)||[],O.value="queryTrending"},queryTrendingFetched:X,searchCplId:$,wordRequestId:ee,searchHotSpots:V,hotspotQueryNoteStep:z,hotspotQueryNoteIndex:Z,canShowHotspotQueryNote:q,searchCardHotSpots:Y,hotspots:G,isHotspotSearch:Q,setHotspotSearch:K,checkHotspotStorageStatus:function(){var e=(0,l.y$C)(m.Z.SEARCH_HOTSPOT_HIDE_TIME,0),t=Date.now();q.value=t>e.value}}}},73078:function(e,t,n){"use strict";n.d(t,{Z:function(){return user}});var r=n(41622),i=n(66993),a=n(377);n(86651),n(7608),n(87989);var o=n(40122),u=n(14978),l=n.n(u),s=n(93328),c=n(95874),d=n(94186),v=n(99505),f=n(13189),p=n(79612),h=n(68284),g=n(66002),m=n(97611);function user(){var e,t,n=(0,h.R)(),u=(0,c.h)().handleHttpCatch,y=(0,s.iH)([]),I=(0,s.iH)("auto"),_=(0,s.iH)(!1),w=(0,s.iH)(!0),k=(0,s.qj)({keyword:"",searchId:"",page:1,pageSize:15,bizType:"web_search_user",requestId:""}),setUserSecurityOnebox=function(e){(null==e?void 0:e.securityOneBox)&&((0,g.Jk)(n).oneboxInfo.value.userSecurityOneBox=e.securityOneBox)},trackUserEmpty=function(e){var t;!(null==e?void 0:null===(t=e.users)||void 0===t?void 0:t.length)&&d.ZA.trackEmptyInfo("search_empty_user","postApiSnsWebV1SearchUsersearch","result_empty",k.keyword)};var S=l()((e=(0,r._)(function(e){var t,r,i,l,s;return(0,a.Jh)(this,function(a){switch(a.label){case 0:I.value="loading",a.label=1;case 1:return a.trys.push([1,3,,4]),k.requestId=(0,f.A)(),[4,(0,o._F)({searchUserRequest:k})];case 2:if(t=a.sent(),k.searchId!==e)return[2];return setUserSecurityOnebox(t),trackUserEmpty(t),I.value="success",y.value=null!==(r=null==t?void 0:t.users)&&void 0!==r?r:[],w.value=!!(null==t?void 0:t.hasMore),(null==(i=(0,m.q)())?void 0:i.isAIMode)&&n.isSearchFromAiInput&&trackUserSearchResultUpdate(),[3,4];case 3:return l=a.sent(),d.ZA.trackEmptyInfo("search_empty_user","postApiSnsWebV1SearchUsersearch","api_error",k.keyword,null!==(s=JSON.stringify(l.data))&&void 0!==s?s:""),I.value="error",u("postApiSnsWebV1SearchUsersearch",l),[3,4];case 4:return[2]}})}),function(t){return e.apply(this,arguments)}),500,{leading:!0,trailing:!1});function trackUserSearchResultUpdate(){try{var e={channelTabName:"user",instanceId:n.rootSearchId||n.searchContext.searchId,searchSessionId:n.rootSearchId||n.searchContext.searchId,searchWord:k.keyword,searchWordFrom:n.keywordFrom,searchMode:n.aiSearchAcrosssWeb?"internet":"",fromPage:window.location.pathname};if(n.aiSearchImageList&&n.aiSearchImageList.length>0&&(void 0!==n.currentAnchorId&&null!==n.currentAnchorId&&-1!==n.currentAnchorId&&(e.searchBoxid="".concat(n.currentAnchorId)),n.aiSearchImageList.length>0)){var t=n.aiSearchImageList[0];(null==t?void 0:t.fileId)&&(e.searchImageFromFileId=t.fileId)}(0,v.uk)(p.pD.ai.refresh.page,e,n.rootSearchId||n.searchContext.searchId)}catch(e){}}var b=(t=(0,r._)(function(){var e,t,n,r;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if("success"!==I.value||!w.value)return[2];_.value=!0,k.requestId=(0,f.A)(),k.page+=1,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,o._F)({searchUserRequest:k})];case 2:return t=a.sent(),(e=y.value).push.apply(e,(0,i._)(null!==(n=null==t?void 0:t.users)&&void 0!==n?n:[])),w.value=!!(null==t?void 0:t.hasMore),_.value=!1,[3,4];case 3:return r=a.sent(),k.page-=1,_.value=!1,u("postApiSnsWebV1SearchUsersearch",r),[3,4];case 4:return[2]}})}),function loadMoreUsers(){return t.apply(this,arguments)});return{getUserLists:S,userLists:y,fetchUserListsStatus:I,isFetchingUserLists:_,loadMoreUsers:b,searchUserContext:k,hasMoreUser:w,resetSearchUserStore:function(){y.value=[],I.value="loading",_.value=!1,k.page=1}}}},85537:function(e,t,n){"use strict";n.d(t,{L:function(){return E}});var r=n(41622),i=n(70879),a=n(27337),o=n(66993),u=n(377);n(64091),n(51109),n(21608),n(95477),n(58486),n(80156),n(50721),n(29112),n(67275),n(59989),n(7099),n(27461),n(23339),n(34333),n(63235),n(15368),n(12970),n(8503),n(32207),n(13598),n(23541),n(63827),n(30488),n(82236),n(51938),n(33913),n(94949),n(17891),n(44258),n(38609),n(4787),n(44211),n(29338),n(73405),n(98754),n(31832),n(88402),n(56712),n(87394),n(94941),n(48421),n(97357),n(64961),n(12996),n(59564),n(6045),n(10364),n(67673),n(86651),n(7608),n(87535),n(75204),n(36277);var l=n(40122),s=n(80022),c=n.n(s),d=n(14978),v=n.n(d),f=n(66002),p=n(93328),h=n(13285),g=n(95874),m=n(80856),y=n(64732);function getFileFavedList(e){return y.dJ.get("/web_api/sns/v1/file/faved/list",{params:e.params})}var I=n(52504),_=n(52596),w=n(94186),k=n(10535),S=n(24373),b=n(17238),M=n(97930),L=n(8048),x=n(91547);function me(){var e,t,n,i,a=E(),o=(0,g.h)().handleHttpCatch,s=null,c=null,d=(0,L.r0)(),v=(0,p.iH)({}),f=(0,p.iH)(!1),h=(0,p.iH)(!1);var m=(e=(0,r._)(function(){var e,t;return(0,u.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(0,l.dj)({})];case 1:return e=t.sent(),v.value={guest:!0,userId:e.userId},h.value=!0,a.$mitt.emit("onActivate"),[3,3];case 2:return t.sent(),c=null,[3,3];case 3:return[2]}})}),function innerActivate(){return e.apply(this,arguments)});var y=(t=(0,r._)(function(){return(0,u.Jh)(this,function(e){switch(e.label){case 0:if(h.value)return[2];return null===c&&(c=m()),[4,c];case 1:return e.sent(),[2]}})}),function activate(){return t.apply(this,arguments)});var _=(n=(0,r._)(function(){var e,t,n,i,c=arguments;return(0,u.Jh)(this,function(p){switch(p.label){case 0:e=c.length>0&&void 0!==c[0]&&c[0],t=c.length>1&&void 0!==c[1]&&c[1],p.label=1;case 1:return p.trys.push([1,3,,5]),[4,(0,l.fs)({})];case 2:return n=p.sent(),v.value=null!=n?n:{},!t&&(null==n?void 0:n.guest)!==void 0&&(f.value=!n.guest),x.A.updateState(x.T.loginStatus,function(){return f.value}),f.value&&a.$mitt.emit("onFetchUserInfo"),[3,5];case 3:if(i=p.sent(),s=null,e)return window.location.reload(),[2];return[4,o("getApiSnsWebV2UserMe",i,(0,r._)(function(){return(0,u.Jh)(this,function(e){switch(e.label){case 0:if(i.code!==I.o.UnLogin&&i.code!==I.o.UnActivate)return[3,2];return[4,y()];case 1:return e.sent(),[3,3];case 2:i.code===I.o.AccountBanned&&d.closeLogin(),e.label=3;case 3:return[2]}})}))];case 4:return p.sent(),[3,5];case 5:return[2]}})}),function innerGetUserInfo(){return n.apply(this,arguments)}),w=Date.now();var k=(i=(0,r._)(function(){var e,t,n,r,i,a,o,l=arguments;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(n=void 0!==(t=(e=l.length>0&&void 0!==l[0]?l[0]:{}).disableCache)&&t,i=void 0!==(r=e.reloadOnFail)&&r,o=void 0!==(a=e.disableChangeLoggedIn)&&a,!(n&&Date.now()-w>50))return[3,2];return w=Date.now(),[4,_(i,o)];case 1:case 3:return u.sent(),[2];case 2:if(f.value)return[2];return null===s&&(s=_(i)),[4,s]}})}),function getUserInfo(){return i.apply(this,arguments)});return(0,p.bv)(function(){a.$mitt.on("onLogin",function(){s=null})}),{activated:h,loggedIn:f,userInfo:v,getUserInfo:k}}var T=n(6890),D=Array.from({length:5}).fill(0),N=[l.t8,l.Vn,l.RZ,l.yC,getFileFavedList],E=(0,f.Q_)("user",function(){var e,t,n,s,d,f,y,L,x,E,R=(0,h.yj)(),U=(0,T.s6)(),P=(0,b.Y)(),F=(0,M.h)(),j=(0,g.h)().handleHttpCatch,O=(0,p.iH)({userId:"",serverBanned:!1,code:I.o.Success,showAlert:!1,reason:"",api:""}),H=(0,p.iH)(),W=(0,p.iH)(Array.from({length:D.length}).fill("")),z=(0,p.iH)(!0),Z=me(),q=Z.loggedIn,V=Z.activated,Y=Z.userInfo,G=Z.getUserInfo,J=(0,p.iH)([]),Q=(0,p.iH)((null===(L=P.boardDetails.user)||void 0===L?void 0:L.userid)===Y.value.userId),K=(0,p.iH)({}),X=(0,p.iH)(""),getUIDByUrl=function(){var e,t,n=new URL(window.location.href);return(null==n?void 0:null===(t=n.pathname)||void 0===t?void 0:null===(e=t.match(/\/user\/profile\/([^/]+)/))||void 0===e?void 0:e[1])||""},$=(0,p.Fl)(function(){var e;return(null==R?void 0:null===(e=R.params)||void 0===e?void 0:e.id)||getUIDByUrl()}),ee=(0,p.Fl)(function(){var e;return(null==R?void 0:null===(e=R.query)||void 0===e?void 0:e.xsec_token)||(0,S.LD)("xsec_token")}),et=(0,p.Fl)(function(){var e;return(null==R?void 0:null===(e=R.query)||void 0===e?void 0:e.xsec_source)||(0,S.LD)("xsec_source")}),en=(0,p.Fl)(function(){return $.value===Y.value.userId}),er=(0,p.Fl)(function(){var e,t,n,r,o,u,l,s,d,v,f=c()(m.eA),p=null===(r=K.value.tabPublic)||void 0===r?void 0:r.collection,h=(null===(o=K.value.tabPublic)||void 0===o?void 0:o.collectionNote)||{},g=h.lock,y=h.display,I=h.count,_=(null===(u=K.value.tabPublic)||void 0===u?void 0:u.collectionBoard)||{},w=_.lock,k=_.display,S=_.count,b=(null===(l=K.value.tabPublic)||void 0===l?void 0:l.collectionFile)||{},M=b.lock,L=b.display,x=b.count;if(K.value.tabPublic&&(f[m.g2.FavNote].lock=!p,f[m.g2.FavNote].subTabs&&(f[m.g2.FavNote].subTabs[m.rs.Note]=(0,a._)((0,i._)({},f[m.g2.FavNote].subTabs[m.rs.Note]),{lock:g||!1,count:I||0}),f[m.g2.FavNote].subTabs[m.rs.Board]=(0,a._)((0,i._)({},f[m.g2.FavNote].subTabs[m.rs.Board]),{lock:w||!1,count:S||0}),f[m.g2.FavNote].subTabs[m.rs.File]=(0,a._)((0,i._)({},f[m.g2.FavNote].subTabs[m.rs.File]),{lock:M||!1,count:x||0})),null===(v=f[m.g2.FavNote])||void 0===v?void 0:v.subTabs)){;f[m.g2.FavNote].subTabs=(e=f[m.g2.FavNote].subTabs,t={note:y,board:k,file:L},n=new Set,!t.note&&n.add(m.rs.Note),!t.board&&n.add(m.rs.Board),!t.file&&n.add(m.rs.File),n.size>0?e.filter(function(e){return!n.has(e.key)}):e)}var T=!!(X.value&&(null===(s=Y.value)||void 0===s?void 0:s.userId)&&X.value===Y.value.userId),D=!!($.value&&(null===(d=Y.value)||void 0===d?void 0:d.userId)&&en.value);return T||D?f:f.filter(function(e){return e.key!==m.w8.Liked})}),ei=(0,p.iH)(0),ea=(0,p.iH)(m.eA.find(function(e){var t;return(null==R?void 0:null===(t=R.query)||void 0===t?void 0:t.tab)===e.query})||m.eA[m.w8.Note]),eo=(0,p.iH)((null==R?void 0:null===(x=R.query)||void 0===x?void 0:x.subTab)?null===(E=er.value[m.w8.Fav].subTabs)||void 0===E?void 0:E.find(function(e){var t;return e.query===(null==R?void 0:null===(t=R.query)||void 0===t?void 0:t.subTab)}):void 0),eu=(0,p.Fl)(function(){return eo.value&&ea.value.key===m.w8.Fav?eo.value:ea.value}),el=(0,p.iH)(D.map(function(){return{num:30,cursor:"",userId:$,hasMore:!0,page:1}})),es=(0,p.iH)((0,o._)(D.map(function(){return[]}))),ec=(0,p.iH)(D.map(function(){return 0})),ed=(0,p.iH)(D.map(function(){return!1})),ev="";var ef=(e=(0,r._)(function(e,t){var n,r,i,a,o,s,c;return(0,u.Jh)(this,function(u){switch(u.label){case 0:return H.value="pending",[4,G()];case 1:u.sent(),(n=e===Y.value.userId)&&Y.value.userId&&(X.value=Y.value.userId),r=n?l.gB:l.fg,i=n?{}:{params:{targetUserId:e,xsecToken:ee.value,xsecSource:et.value}},u.label=2;case 2:return u.trys.push([2,4,,5]),[4,r(i)];case 3:if(s=u.sent(),((null==R?void 0:null===(a=R.params)||void 0===a?void 0:a.id)||getUIDByUrl())!==e)return[2];return K.value=s,X.value=e,H.value="resolved",_.zK.Logoff===(null===(o=K.value.userAccountStatus)||void 0===o?void 0:o.type)&&null!=t&&(null==t||t.setStatusCode(404)),[3,5];case 4:return c=u.sent(),n&&Y.value.userId&&(X.value=Y.value.userId),j(n?"getApiSnsWebV1UserSelfinfo":"getApiSnsWebV1UserOtherinfo",c,function(){(null==c?void 0:c.code)===I.o.UserNotFound&&null!=t&&(null==t||t.setStatusCode(404));H.value="rejected",w.yN.errorInfo.errorApi=n?"getApiSnsWebV1UserSelfinfo":"getApiSnsWebV1UserOtherinfo",w.yN.errorInfo.errorApiMsg=JSON.stringify(c.data)}),[3,5];case 5:return[2]}})}),function getUserPageInfo(t,n){return e.apply(this,arguments)});var ep=(t=(0,r._)(function(e){var t,n,r,i;return(0,u.Jh)(this,function(a){switch(a.label){case 0:t=e.webSource,n=e.targetUserId,r=e.referNoteId,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,l.Yf)({targetUserId:n,referNoteId:r,webSource:t})];case 2:return[2,a.sent()];case 3:throw j("postApiSnsWebV1UserFollow",i=a.sent()),i;case 4:return[2]}})}),function toFollow(e){return t.apply(this,arguments)});var eh=(n=(0,r._)(function(e){var t;return(0,u.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(0,l.vW)({targetUserId:e})];case 1:return[2,n.sent()];case 2:throw j("postApiSnsWebV1UserUnfollow",t=n.sent()),t;case 3:return[2]}})}),function unFollow(e){return n.apply(this,arguments)});var eg=(s=(0,r._)(function(){var e;return(0,u.Jh)(this,function(t){switch(t.label){case 0:if(J.value.length)return[2];return[4,(0,l.tF)()];case 1:return e=t.sent(),J.value=e.items||[],[2]}})}),function getUserFollow(){return s.apply(this,arguments)});var em=(d=(0,r._)(function(){var e,t,n,r,a,l,s,c,d,v,f,p,h,g;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(t=null!==(e=eu.value.index)&&void 0!==e?e:0,W.value[t]="pending",ev!==el.value[t].userId&&(ed.value[t]=!1),!el.value[t].hasMore||ed.value[t])return[2];ev=el.value[t].userId,ed.value[t]=!0,u.label=1;case 1:return u.trys.push([1,3,4,5]),a={params:function getReqParams(){return eu.value.feedType===m.u5.Board?{userId:ev,page:el.value[t].page,num:el.value[t].num,imageFormats:U.imageFormatParams.join(","),xsecToken:ee.value,xsecSource:et.value}:eu.value.feedType===m.u5.File?{userId:ev,cursor:el.value[t].cursor,num:el.value[t].num,xsecToken:ee.value,xsecSource:et.value}:{num:el.value[t].num,cursor:el.value[t].cursor,userId:ev,imageFormats:U.imageFormatParams.join(","),xsecToken:ee.value,xsecSource:et.value}}()},[4,N[t](a)];case 2:if(l=u.sent(),s=t===m.g2.Note?(0,k.z3)(l):l,c=null===(n=eu.value)||void 0===n?void 0:n.feedType,((null==R?void 0:null===(r=R.params)||void 0===r?void 0:r.id)||getUIDByUrl())!==ev||!ed.value[t])return[2];return c===m.u5.Feed?(el.value[t].cursor=null!==(d=null==s?void 0:s.cursor)&&void 0!==d?d:"",el.value[t].hasMore=null===(v=null==s?void 0:s.hasMore)||void 0===v||v,(null==s?void 0:s.notes)&&s.notes.forEach(function(e){es.value[t].push({id:e.noteId,noteCard:(0,i._)({},e),index:es.value[t].length,exposed:!1,ssrRendered:void 0,xsecToken:e.xsecToken})})):c===m.u5.File?(F.setUserFileListData(ev,(null==s?void 0:s.items)||[],!a.params.cursor),el.value[t].cursor=null!==(f=null==s?void 0:s.nextCursor)&&void 0!==f?f:"",el.value[t].hasMore=!!(null==s?void 0:s.hasMore)):((p=P.userBoardList).push.apply(p,(0,o._)((null==s?void 0:s.boards)||[])),el.value[t].page+=1,el.value[t].hasMore=(null===(h=P.userBoardList)||void 0===h?void 0:h.length)<((null==s?void 0:s.boardCount)||0)),W.value[t]="resolved",[3,5];case 3:return g=u.sent(),j(N[t].name,g),W.value[t]="rejected",[3,5];case 4:return z.value=!1,ed.value[t]=!1,[7];case 5:return[2]}})}),function fetchNotes(){return d.apply(this,arguments)}),resetProfilePageData=function(){var e,t;K.value={},X.value="",z.value=!0,ea.value=m.eA.find(function(e){var t;return(null==R?void 0:null===(t=R.query)||void 0===t?void 0:t.tab)===e.query})||m.eA[m.w8.Note],eo.value=(null==R?void 0:null===(e=R.query)||void 0===e?void 0:e.subTab)?null===(t=er.value[m.w8.Fav].subTabs)||void 0===t?void 0:t.find(function(e){var t;return(null==e?void 0:e.query)===(null==R?void 0:null===(t=R.query)||void 0===t?void 0:t.subTab)}):void 0,es.value=(0,o._)(D.map(function(){return[]})),el.value=D.map(function(){return{num:30,cursor:"",userId:"",page:1,hasMore:!0}}),Q.value=!1,P.userBoardList=[]};var ey=v()((f=(0,r._)(function(e,t){return(0,u.Jh)(this,function(n){switch(n.label){case 0:return resetProfilePageData(),el.value=D.map(function(){return{num:30,cursor:"",userId:e,page:1,hasMore:!0}}),[4,Promise.all([ef(e,t),em()])];case 1:return n.sent(),[2]}})}),function(e,t){return f.apply(this,arguments)}),100);var eI=(y=(0,r._)(function(){return(0,u.Jh)(this,function(e){return eu.value.key===m.rs.Board&&eu.value.index&&(el.value[eu.value.index].page=1,el.value[eu.value.index].hasMore=!0,ed.value[eu.value.index]=!1),P.userBoardList=[],em(),[2]})}),function refreshUserBoard(){return y.apply(this,arguments)});return{loggedIn:q,activated:V,userInfo:Y,getUserInfo:G,follow:J,getUserFollow:eg,userPageData:K,getUserPageInfo:ef,toFollow:ep,unFollow:eh,isOwnPage:en,visitTargetUserId:$,fetchNotes:em,activeTab:ea,notes:es,isFetchingNotes:ed,tabScrollTop:ec,userFetchingStatus:H,userNoteFetchingStatus:W,bannedInfo:O,onTouristLogin:function(){es.value=(0,o._)(D.map(function(){return[]})),el.value=D.map(function(){return{num:30,cursor:"",userId:$.value,page:1,hasMore:!0}}),em()},updateFollowStatus:function(e){K.value.extraInfo=e},fetchProfilePageData:ey,resetProfilePageData:resetProfilePageData,firstFetchNote:z,noteQueries:el,toggleUserApiV2:function(){N[m.w8.Note]=l.Ff},getUIDByUrl:getUIDByUrl,pageScrolled:ei,activeSubTab:eo,curDisplayTab:eu,userPageTabs:er,refreshUserBoard:eI,isOwnBoard:Q}})},67156:function(e,t,n){"use strict";n.d(t,{B8:function(){return o},UZ:function(){return a},jU:function(){return u}});var r,i,a=((r={})[r.globalModal=0]="globalModal",r[r.onebox=1]="onebox",r[r.feedCard=2]="feedCard",r[r.placeholderSearch=3]="placeholderSearch",r);var o=((i={})[i.panel=0]="panel",i[i.newPage=1]="newPage",i[i.currentPage=2]="currentPage",i),u={current:"current",new:"new",default:"default"}},44924:function(e,t,n){"use strict";n.d(t,{B:function(){return a},f:function(){return o}});var r,i=n(14748);var a=((r={}).note="note",r.activity="activity",r.hotQuery="hot_query",r.recQuery="rec_query",r.hotList="hot_list",r.aiTraceSource="ai_trace_source",r.outlink="outlink",r),o={hot_query:{bgColor:"rgba(247, 240, 232, 1)",activeItemColor:"rgba(237, 227, 219, 1)",foreGroundColor:"rgba(112, 89, 64, 1)",listItemTextColor:"rgba(51, 51, 51, 0.8)",listItemTextHoverColor:"rgba(51, 51, 51, 1)",icon:"search",pointType:i.ai.SEARCH_WORD_FROM_INTEREST_QUERY,pointTypeStr:"SEARCH_WORD_FROM_INTEREST_QUERY"},rec_query:{bgColor:"rgba(235, 242, 250, 1)",activeItemColor:"rgba(222, 229, 240, 1)",foreGroundColor:"rgba(66, 97, 125, 1)",listItemTextColor:"rgba(51, 51, 51, 0.80)",listItemTextHoverColor:"rgba(51, 51, 51, 1)",icon:"search",pointType:i.ai.SEARCH_WORD_FROM_RECOMMEND_QUERY,pointTypeStr:"SEARCH_WORD_FROM_RECOMMEND_QUERY"},hot_list:{bgColor:"rgba(246, 246, 246, 1)",activeItemColor:"rgba(235, 235, 235, 1)",foreGroundColor:"rgba(94, 94, 94, 1)",listItemTextColor:"rgba(51, 51, 51, 0.8)",listItemTextHoverColor:"rgba(51, 51, 51, 1)",icon:"fire",pointType:i.ai.SEARCH_WORD_FROM_WEB_HOTLIST_CARD,pointTypeStr:"SEARCH_WORD_FROM_WEB_HOTLIST_CARD"}}},52504:function(e,t,n){"use strict";n.d(t,{X:function(){return o},o:function(){return a}});var r,i,a=((r={})[r.Success=0]="Success",r[r.InteractionForbidden=-1e4]="InteractionForbidden",r[r.CommentForbidden=10001]="CommentForbidden",r[r.UserNotFound=-1001]="UserNotFound",r[r.CommonError=400]="CommonError",r[r.BoardNotFound=-9300]="BoardNotFound",r[r.AccountBanned=-103]="AccountBanned",r[r.UnLogin=-100]="UnLogin",r[r.UnActivate=-101]="UnActivate",r[r.Activated=-104]="Activated",r[r.RiskIntercept=-13002]="RiskIntercept",r[r.Expired=-100]="Expired",r[r.InAntiSpamChecking=471]="InAntiSpamChecking",r[r.AntiSpamIntercept=461]="AntiSpamIntercept",r[r.AuthCodeLoginRiskUser=-13020]="AuthCodeLoginRiskUser",r);var o=((i={})[i.AntiReportControl=-510008]="AntiReportControl",i)},8935:function(e,t,n){"use strict";n.d(t,{NC:function(){return s},PZ:function(){return l},Qb:function(){return c},TN:function(){return d},bv:function(){return u}});var r,i,a,o,u=((r={}).GENERAL="general",r.TIME="time_descending",r.POP="popularity_descending",r);var l=((i={})[i.All=0]="All",i[i.VIDEO=1]="VIDEO",i[i.NORMAL=2]="NORMAL",i),s={time_descending:2,general:3,popularity_descending:4};var c=((a={}).FIRST_ENTER="FIRST_ENTER",a.BACK_WITH_DEL_WORD="BACK_WITH_DEL_WORD",a.TAKE_A_CHANGE="TAKE_A_CHANGE",a);var d=((o={}).artificial="活动",o)},52596:function(e,t,n){"use strict";n.d(t,{L4:function(){return l},Y0:function(){return u},zK:function(){return o}});var r,i,a,o=((r={})[r.ForbiddenAccount=1]="ForbiddenAccount",r[r.Silence=2]="Silence",r[r.Logoff=3]="Logoff",r[r.Restricted=4]="Restricted",r);var u=((i={})[i.Female=1]="Female",i[i.Male=0]="Male",i[i.Unknown=2]="Unknown",i);var l=((a={})[a.RedOfficial=1]="RedOfficial",a[a.BlueOfficial=2]="BlueOfficial",a)},10602:function(e,t,n){"use strict";n.d(t,{P:function(){return showAcitivityPopupStrategy},z:function(){return getActivityPageId}}),n(80156),n(50721),n(29112),n(67275),n(59989),n(7099),n(27461),n(23339),n(51109),n(34333),n(87989);var r=n(91547);function getActivityPageId(e){var t="";try{t=new URL(e).searchParams.get("id")||e}catch(n){t=e}return t}function showAcitivityPopupStrategy(e,t){var n={indicate:r.T.oneDayTriggerCount,operator:"<=",value:e.globalConfig.dayCount},i={indicate:r.T.totalTriggerCount,operator:"<=",value:e.globalConfig.totalCount};r.A.register("activityPopup-".concat(e.globalConfig.activityId),{rules:[[n,i]],priority:1,taskExecutor:function(e,n){n(),t(),e()}})}},94809:function(e,t,n){"use strict";n.d(t,{$X:function(){return markFragmentFinished},Bw:function(){return c},GJ:function(){return recordRoundStartTime},KP:function(){return reportFragmentTracking},Pi:function(){return trackAiSearchError},Sn:function(){return trackAiAgentEvent},Tu:function(){return startFragmentTracking},WN:function(){return clearRoundStartTime},jL:function(){return s},k_:function(){return recordFragment},l7:function(){return checkRoundContentRendered},mp:function(){return recordInitStartTime},mt:function(){return clearFragmentTracking},oV:function(){return d},re:function(){return markFragmentInterrupted},wN:function(){return trackAiUpload}});var r,i,a,o=n(31547);n(87989),n(85203),n(74093),n(20768),n(41648),n(59339),n(47444),n(34757),n(85908),n(39995),n(22943),n(54767),n(55820),n(93225),n(33708),n(64322),n(47771),n(27461),n(23339),n(51109),n(34333),n(63235),n(15368),n(12970),n(8503),n(32207),n(13598),n(23541),n(63827),n(30488),n(82236),n(51938),n(33913),n(94949),n(17891),n(44258),n(38609),n(4787),n(44211),n(29338),n(73405),n(98754),n(31832),n(88402),n(56712),n(64091),n(28636),n(86651),n(7608),n(42876),n(33933);var u=n(32335),l=n(94186);function checkRoundContentRendered(e){try{var t,n=document.querySelector('[data-round-id="'.concat(e,'"]'));if(!n)return!1;if(n.querySelector(".markdown-block")||n.querySelector(".image-list"))return!0;var r=null===(t=n.textContent)||void 0===t?void 0:t.trim();if(r&&r.length>0||n.querySelector(".security-revoke"))return!0;return!1}catch(e){return!1}}var s=((r={}).TRIGGER_CLICK="trigger_click",r.TRIGGER_PASTE="trigger_paste",r.TRIGGER_DRAG="trigger_drag",r.CONVERT="convert",r.START="start",r.END="end",r.ERROR="error",r);var c=((i={}).AI_CHAT_SEND_FAILED="ai_chat_send_failed",i.LONGLINK_CONFIG_EMPTY="longlink_config_empty",i.TOKEN_GET_FAIL="token_get_fail",i.LONGLINK_BIZ_REGISTER_FAILED="longlink_biz_register_failed",i.SECURITY_REVOKE="security_revoke",i.AI_CHAT_MOUNT_FAILED="ai_chat_mount_failed",i.LONGLINK_WAIT_TIMEOUT="longlink_wait_timeout",i.HTTP_FETCH_FAILED="http_fetch_failed",i.HTTP_FETCH_FAILED_POLL="http_fetch_failed_poll",i.HTTP_FETCH_FAILED_ONCE="http_fetch_failed_once",i.RENDER_ERROR="render_error",i);var d=((a={}).INIT="init",a.READY="ready",a.LOGIN_FAILED="login_failed",a.SEND_START="send_start",a.START_SEND_AI="start_send_ai",a.SEND_FAILED="send_failed",a.RECEIVE_FIRST_FRAGMENT="receive_first_fragment",a.RECEIVE_FIRST_VALID_FRAGMENT="receive_first_valid_fragment",a.FINISHED_SIGNAL="finished_signal",a.ERROR_SIGNAL="error_signal",a.RENDER_FIRST_CONTENT="render_first_content",a.FINISHED_SIGNAL_NO_RENDER="finished_signal_no_render",a.FALLBACK_TRIGGER="fallback_trigger",a.FALLBACK_SUCCESS="fallback_success",a.FALLBACK_FAILED="fallback_failed",a.FIRST_FRAGMENT_TIMEOUT="first_fragment_timeout",a.COMPLETE_SIGNAL_TIMEOUT="complete_signal_timeout",a.INTERRUPTED="interrupted",a.FRAGMENT_TRACKING="fragment_tracking",a.FRAGMENT_MISSING="fragment_missing",a),v=new Map,f=new Map,p=new Map;function recordInitStartTime(e,t){v.set(e,t),f.set(e,0)}function getAndIncrementReadyCount(e){var t=(f.get(e)||0)+1;return f.set(e,t),t}function isFirstReady(e){return 0===(f.get(e)||0)}function getInitDuration(e,t){if(!isFirstReady(e))return;var n=v.get(e);if(void 0!==n)return t-n}function clearInitStartTime(e){v.delete(e)}function recordRoundStartTime(e,t){p.set(e,t)}function getRoundDuration(e,t){var n=p.get(e);if(void 0!==n)return t-n}function clearRoundStartTime(e){p.delete(e)}var h=new Map;function startFragmentTracking(e,t,n){var r=h.get(e);(null==r?void 0:r.timeoutId)&&clearTimeout(r.timeoutId);var i={roundId:e,msgId:t,conversationId:n,receivedIndices:new Set,hasFinishedSignal:!1,isInterrupted:!1,startTime:Date.now()};h.set(e,i)}function recordFragment(e,t){var n=h.get(e);if(!!n)void 0===n.firstFragmentIndex&&(n.firstFragmentIndex=t,n.timeoutId=setTimeout(function(){reportFragmentTracking(e,!1)},13e3)),n.lastFragmentIndex=t,n.receivedIndices.add(t)}function detectFragmentGaps(e){if(0===e.size)return[];for(var t=Array.from(e).sort(function(e,t){return e-t}),n=[],r=0;r<t.length-1;r++){var i=t[r];t[r+1]-i>1&&n.push(i+1)}return n}function reportFragmentTracking(e,t){var n=h.get(e);if(!!n){n.timeoutId&&clearTimeout(n.timeoutId);var r=detectFragmentGaps(n.receivedIndices),i=Date.now()-n.startTime,a=0===r.length,o={first_index:n.firstFragmentIndex,last_index:n.lastFragmentIndex,total_count:n.receivedIndices.size,has_finished_signal:t,is_interrupted:n.isInterrupted,gaps:r.length>0?JSON.stringify(r):void 0};n.finishIndexDiff&&(o.finish_diff=n.finishIndexDiff),trackAiAgentEvent({type:"fragment_tracking",time:Date.now(),uuid:n.roundId,msg_id:n.msgId,app_cid:n.conversationId,status:a?0:-1,count:i/n.receivedIndices.size,msg:o}),h.delete(e)}}function markFragmentFinished(e,t){var n=h.get(e);if(!!n){if(n.hasFinishedSignal=!0,void 0!==t&&void 0!==n.lastFragmentIndex){var r=t-1,i=n.lastFragmentIndex,a=i-r;0!==a&&(n.finishIndexDiff={finish_index:t,expected_last_index:r,actual_last_index:i,diff:a})}reportFragmentTracking(e,!0)}}function markFragmentInterrupted(e){var t=h.get(e);if(!!t)t.isInterrupted=!0,t.timeoutId&&clearTimeout(t.timeoutId),trackAiAgentEvent({type:"interrupted",time:Date.now(),uuid:t.roundId,msg_id:t.msgId,app_cid:t.conversationId}),reportFragmentTracking(e,!1)}function clearFragmentTracking(e){var t=h.get(e);(null==t?void 0:t.timeoutId)&&clearTimeout(t.timeoutId),h.delete(e)}function trackAiAgentEvent(e){var t={type:e.type,time:e.time},n=e.rounds;if(void 0===n)try{n=(0,u.t)().rounds.length}catch(e){n=void 0}if(void 0!==n&&(t.rounds=n),e.uuid){t.uuid=e.uuid;if("ready"===e.type){if(!isFirstReady(e.uuid))return;var r=getInitDuration(e.uuid,e.time);void 0!==r&&(t.duration=r),getAndIncrementReadyCount(e.uuid),clearInitStartTime(e.uuid)}else if(["send_failed","receive_first_fragment","receive_first_valid_fragment","start_send_ai","render_first_content","finished_signal","fallback_trigger","fallback_success","fallback_failed","first_fragment_timeout","fragment_tracking","complete_signal_timeout"].includes(e.type)){var i=getRoundDuration(e.uuid,e.time);void 0!==i&&(t.duration=i)}}e.msg_id&&(t.msg_id=e.msg_id),e.count&&(t.count=e.count),e.app_cid&&(t.app_cid=e.app_cid),void 0!==e.index&&(t.index=e.index),e.msg&&(t.msg="object"===(0,o._)(e.msg)?JSON.stringify(e.msg):e.msg),void 0!==e.status&&(t.status=e.status),(0,l.Qv)("pcweb_ai_agent_evt",t)}function trackAiSearchError(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(void 0===t?"undefined":(0,o._)(t))==="object"?JSON.stringify(t):t;(0,l.Qv)("pcweb_ai_search_error",{type:e,msg:n})}function trackAiUpload(e){var t={type:e.type,uuid:e.uuid,time:e.time};void 0!==e.size&&(t.size=e.size),e.raw_type&&(t.raw_type=e.raw_type),e.error_msg&&(t.msg=e.error_msg),e.fileId&&(t.file_id=e.fileId),(0,l.Qv)("pcweb_ai_upload",t)}},94186:function(e,t,n){"use strict";n.d(t,{An:function(){return h},I3:function(){return trackNoteFmp},Iq:function(){return reportLoginDetail},L_:function(){return trackMfCache},Nw:function(){return trackLoadingShow},P5:function(){return trackLoadMore},Qv:function(){return baseXrayTrackMetrics},Ti:function(){return f},ZA:function(){return g},ZD:function(){return v},ZQ:function(){return trackSSRNoteDetail},_2:function(){return trackSearchReachInfo},e:function(){return I},hO:function(){return checkNoteDuplicatesThenReport},jA:function(){return trackNoteBackStep},jF:function(){return baseTrackMetrics},qn:function(){return trackLonglinkError},rm:function(){return d},te:function(){return m},vT:function(){return y},xc:function(){return trackLonglinkConnectStatus},xd:function(){return trackMf},yN:function(){return p}}),n(43648),n(86651),n(87989),n(87535),n(75204),n(97357),n(34333),n(7608);var r,i,a,o,u,l=n(37107),s=n(51401),c=0;function baseTrackMetrics(e,t){try{l.Z.sendApm(t,e)}catch(e){console.warn("[eaglet track not support]:",e)}}function baseXrayTrackMetrics(e,t){try{l.Z.sendCustomPoint({measurement_name:e,measurement_data:t})}catch(e){console.warn("[eaglet track not support]:",e)}}var d=((r={})[r.health=0]="health",r[r.ServerLoginClientLogin=1]="ServerLoginClientLogin",r[r.ServerLoginClientTourist=2]="ServerLoginClientTourist",r[r.ServerTouristClientLogin=3]="ServerTouristClientLogin",r[r.ServerTouristClientTourist=4]="ServerTouristClientTourist",r),v={track:function(e,t){baseXrayTrackMetrics("pcwebStatePollution",{polluteCase:t,routeName:e})}},f={trackSameNote:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(!(c>20)){c+=1;baseXrayTrackMetrics("exploreCommonError",{type:r?"note_repeat_individuation_preload":"note_repeat_individuation",pageName:t,noteType:e,error:n+i})}},trackSamePicture:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];baseXrayTrackMetrics("exploreCommonError",{type:r?"pic_repeat_individuation_preload":"pic_repeat_individuation",pageName:t,noteType:e,error:n})},trackLoseNote:function(e){baseXrayTrackMetrics("exploreCommonError",{type:"note_not_enough",pageName:"explore",error:e})}};function checkNoteDuplicatesThenReport(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=[],o=[],u=e.length>30?e.slice(-30):e.slice(),l=0;l<u.length;l++)for(var s=l+1;s<u.length;s++){if(!(null===(c=u[l])||void 0===c?void 0:c.id)||!(null===(d=u[s])||void 0===d?void 0:d.id))return;(null===(v=u[l])||void 0===v?void 0:v.id)===(null===(p=u[s])||void 0===p?void 0:p.id)&&a.push({noteType:u[l].modelType===u[s].modelType?u[l].modelType:"".concat(u[l].modelType,"|").concat(u[s].modelType),id:u[l].id,cursorScore:n});var c,d,v,p,h,g,m,y,I,_,w,k,S,b,M,L,x,T,D,N,E,R,U,P,F,j,O,H,W,z,Z=u[l].id!==u[s].id,q=(null==u?void 0:null===(I=u[l])||void 0===I?void 0:null===(y=I.noteCard)||void 0===y?void 0:null===(m=y.cover)||void 0===m?void 0:null===(g=m.infoList)||void 0===g?void 0:null===(h=g[0])||void 0===h?void 0:h.url)&&(null==u?void 0:null===(b=u[s])||void 0===b?void 0:null===(S=b.noteCard)||void 0===S?void 0:null===(k=S.cover)||void 0===k?void 0:null===(w=k.infoList)||void 0===w?void 0:null===(_=w[0])||void 0===_?void 0:_.url),V=(null==u?void 0:null===(D=u[l])||void 0===D?void 0:null===(T=D.noteCard)||void 0===T?void 0:null===(x=T.cover)||void 0===x?void 0:null===(L=x.infoList)||void 0===L?void 0:null===(M=L[0])||void 0===M?void 0:M.url)===(null==u?void 0:null===(P=u[s])||void 0===P?void 0:null===(U=P.noteCard)||void 0===U?void 0:null===(R=U.cover)||void 0===R?void 0:null===(E=R.infoList)||void 0===E?void 0:null===(N=E[0])||void 0===N?void 0:N.url);Z&&q&&V&&o.push({noteType:u[l].modelType===u[s].modelType?u[l].modelType:"".concat(u[l].modelType,"|").concat(u[s].modelType),id:u[l].id,url:null!==(z=null==u?void 0:null===(W=u[l])||void 0===W?void 0:null===(H=W.noteCard)||void 0===H?void 0:null===(O=H.cover)||void 0===O?void 0:null===(j=O.infoList)||void 0===j?void 0:null===(F=j[0])||void 0===F?void 0:F.url)&&void 0!==z?z:"",cursorScore:n})}(null==a?void 0:a.length)&&a.forEach(function(e){f.trackSameNote(e.noteType,t,"note_id=".concat(e.id,"cursor=").concat(n),r,i)}),(null==o?void 0:o.length)&&o.forEach(function(e){f.trackSamePicture(e.noteType,t,"note_id=".concat(e.id,"url=").concat(e.url,"cursor=").concat(n),r)})}var p={errorInfo:{},trackFetchErrorPage:function(e){baseXrayTrackMetrics("SnsPcwebFetchErrorPageLog",e)}};var h=((i={})[i.CSR_DOWNGRADE=1]="CSR_DOWNGRADE",i[i.STORE_INJECT_FAIL=2]="STORE_INJECT_FAIL",i[i.REQUEST_FAIL=3]="REQUEST_FAIL",i[i.RESPONSE_NULL=4]="RESPONSE_NULL",i[i.RENDER_ERROR=5]="RENDER_ERROR",i[i.SSR_SUCCESS=6]="SSR_SUCCESS",i[i.Unknown=7]="Unknown",i);function trackSSRNoteDetail(e){baseXrayTrackMetrics("sns_pcweb_note_detail_error",e)}function trackLoginDetail(e){baseXrayTrackMetrics("sns_pcweb_login_detail",e)}function reportLoginDetail(e,t){trackLoginDetail({type:e.type,api:e.api,reportType:e.reportType,status:e.status,time:Date.now()-e.time,extra:t})}var g={trackEmptyInfo:function(e,t,n,r,i,a){var o,u=JSON.stringify({webId:null!==(o=s.Z.get("webId"))&&void 0!==o?o:"",api:t});baseXrayTrackMetrics("sns_pcweb_search_detail",{type:e,pageName:null!=a?a:"search",searchWord:r,emptyType:n,apiError:null!=i?i:"",extra:u})}};var m=((a={})[a.MF_NULL=1]="MF_NULL",a[a.MF_NOT_ENOUGH=2]="MF_NOT_ENOUGH",a[a.VIDEO_MF_NULL=3]="VIDEO_MF_NULL",a);function trackMf(e){baseXrayTrackMetrics("sns_pcweb_mf",e)}function trackMfCache(e){baseXrayTrackMetrics("sns_mf_preload_cache",e)}function trackLonglinkConnectStatus(e){baseXrayTrackMetrics("pcweb_longlink",e)}function trackLonglinkError(e){baseXrayTrackMetrics("pcweb_longlink_error",e)}var y=((o={})[o.MF=1]="MF",o[o.SEARCH=2]="SEARCH",o);function trackLoadMore(e){baseXrayTrackMetrics("feeds_loadmore",e)}function trackLoadingShow(e){baseXrayTrackMetrics("feeds_loading_show",e)}function trackNoteFmp(e){baseXrayTrackMetrics("note_fmp",e)}function trackNoteBackStep(e){baseXrayTrackMetrics("note_back_step_data",e)}var I=((u={})[u.NoSid=1]="NoSid",u[u.MfFail=2]="MfFail",u[u.MfNull=3]="MfNull",u[u.Racing=4]="Racing",u[u.Unknown=5]="Unknown",u[u.Success=6]="Success",u[u.Csr=7]="Csr",u);function trackSearchReachInfo(e){baseXrayTrackMetrics("sns_pcweb_search_reach_info",e)}},33114:function(e,t,n){"use strict";n.d(t,{$1:function(){return u},CL:function(){return isWechat},DO:function(){return generateUUID},IS:function(){return isChineseChar},MX:function(){return dataURI2Blob},Ox:function(){return getUserDeeplink},Xf:function(){return getPlatform},Yp:function(){return parseUrlParams},_1:function(){return replaceHttpWithHttps},gQ:function(){return delayOpenLoginModal},j2:function(){return getNoteDeeplink},mx:function(){return loadImageWithDecode}});var r=n(41622),i=n(82726),a=n(377);n(36277),n(34333),n(58486),n(42876),n(33933),n(25069),n(13768),n(45697),n(91004),n(99808),n(76267),n(83257),n(90834),n(907),n(18552),n(18638),n(96336),n(87168),n(14190),n(4137),n(70805),n(5317),n(81167),n(22583),n(89655),n(88598),n(11530),n(16765),n(3398),n(90621),n(35904),n(73982),n(87683),n(59735),n(69167),n(27151),n(95341),n(53395),n(10074),n(31899),n(98398),n(94837),n(53077),n(14340),n(31578),n(46521),n(49932),n(78246),n(27461),n(62444),n(34076),n(12334),n(68802),n(43648),n(87989),n(87535),n(75204),n(97357),n(72169),n(55947),n(93328);var o=n(8048);function loadImageWithDecode(e){return new Promise(function(t,n){if(e){var r=new Image;r.src=e,r.decode().then(function(){t(r)}).catch(function(){n()})}else n("url is empty")})}function getPlatform(){return navigator.platform.toUpperCase().includes("MAC")?"mac":"win"}function isWechat(){return/micromessenger/i.test(navigator.userAgent)}function delayOpenLoginModal(e,t){var n=(0,o.r0)();setTimeout(function(){n.openLogin(t)},e)}function isChineseChar(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.charCodeAt(0)>=19968&&40959>=e.charCodeAt(0);if(t){var r=/[\u3002\uFF1B\uFF0C\uFF1A\u2018\u2019\u201C\u201D\uFF08\uFF09\u3001\uFF1F\u300A\u300B]/.test(e);return n||r}return n}function dataURI2Blob(e){return _dataURI2Blob.apply(this,arguments)}function _dataURI2Blob(){return(_dataURI2Blob=(0,r._)(function(e){var t,n,r,i,o;return(0,a.Jh)(this,function(a){for(o=0,t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(r=new ArrayBuffer(t.length));o<t.length;o++)i[o]=t.charCodeAt(o);return[2,new Blob([r],{type:n})]})})).apply(this,arguments)}function parseUrlParams(e){var t={},n=e.split("?")[1];return n&&n.split("&").forEach(function(e){var n=(0,i._)(e.split("="),2),r=n[0],a=n[1];t[r]=decodeURIComponent(a)}),t}function replaceHttpWithHttps(e){return e?e.replace(/^http:/,"https:"):""}function getNoteDeeplink(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",n=arguments.length>2?arguments[2]:void 0;return"video"===t?"xhsdiscover://video_feed/".concat(e,"?source=").concat(n):"xhsdiscover://item/".concat(e,"?source=").concat(n)}var u="xhsdiscover://home/explore",getUserDeeplink=function(e,t){return"xhsdiscover://user/".concat(e,"?source=").concat(t)};function generateUUID(){return"".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9))}},94046:function(e,t,n){"use strict";n.d(t,{i:function(){return trackVideoPlayError}}),n(34333),n(55947);var r=n(64732);function trackVideoPlayError(e){r.kg.info("trackVideoPlayAbort",{context:e.toString()})}},10535:function(e,t,n){"use strict";n.d(t,{F$:function(){return dealHoneyHomeFeeds},ON:function(){return dealHoneySearchNotes},z3:function(){return dealHoneyUserPosted}});var r=n(70879),i=n(27337);function pick24After(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:24;if("string"!=typeof e||!e)return;var r=e.lastIndexOf(t);if(r<0)return;var i=r+t.length,a=i+n;if(!(e.length<a))return{id:e.slice(i,a),cleanedSource:"".concat(e.slice(0,r)).concat(e.slice(a))}}function dealHoneySearchNotes(e){if(!(Array.isArray(null==e?void 0:e.items)&&(null===(t=e.items)||void 0===t?void 0:t.length)>0))return e;try{var t,n,applyFilter=function(e){var t,n;return!!((null==e?void 0:e.width)===0||(null==e?void 0:null===(t=e.urlPre)||void 0===t?void 0:t.endsWith("?v=cb1"))||(null==e?void 0:null===(n=e.urlDefault)||void 0===n?void 0:n.endsWith("?v=cb2")))||!1},a=null===(n=e.items)||void 0===n?void 0:n.filter(function(e){var t;return!applyFilter(null===(t=e.noteCard)||void 0===t?void 0:t.cover)}).map(function(e){var t,n,r=null==e?void 0:null===(t=e.noteCard)||void 0===t?void 0:t.cover,i=null==e?void 0:null===(n=e.noteCard)||void 0===n?void 0:n.user;if("string"==typeof(null==r?void 0:r.urlDefault)&&(null==r?void 0:r.urlDefault.endsWith("##w=vp1"))){var a=null==i?void 0:i.avatar,o=pick24After(a,"#");return(null==o?void 0:o.id)&&(e.id=o.id,i&&"string"==typeof i.avatar&&(i.avatar=o.cleanedSource),r.urlDefault=r.urlDefault.replace(/##w=vp1$/,"")),e}if("string"==typeof(null==r?void 0:r.urlPre)&&(null==r?void 0:r.urlPre.endsWith("##w=vp4"))){var u=null==i?void 0:i.avatar,l=pick24After(u,"%%");return(null==l?void 0:l.id)&&(e.id=l.id,i&&"string"==typeof i.avatar&&(i.avatar=l.cleanedSource),r.urlPre=r.urlPre.replace(/##w=vp4$/,"")),e}if("string"==typeof(null==i?void 0:i.avatar)&&(null==i?void 0:i.avatar.endsWith("##w=vp6"))){var s=null==r?void 0:r.urlPre,c=pick24After(s,"#%");(null==c?void 0:c.id)&&(e.id=c.id,r&&"string"==typeof r.urlPre&&(r.urlPre=c.cleanedSource),i.avatar=i.avatar.replace(/##w=vp6$/,""))}return e});return(0,i._)((0,r._)({},e),{items:a||[]})}catch(t){return e}}function dealHoneyHomeFeeds(e){if(!(Array.isArray(null==e?void 0:e.items)&&(null===(t=e.items)||void 0===t?void 0:t.length)>0))return e;try{var t,n,applyFilter=function(e){var t,n;return!!((null==e?void 0:null===(t=e.urlPre)||void 0===t?void 0:t.endsWith("?v=cb1"))||(null==e?void 0:null===(n=e.urlDefault)||void 0===n?void 0:n.endsWith("?v=cb2")))||!1},a=null===(n=e.items)||void 0===n?void 0:n.filter(function(e){var t;return!applyFilter(null===(t=e.noteCard)||void 0===t?void 0:t.cover)}).map(function(e){var t,n,r=null===(t=e.noteCard)||void 0===t?void 0:t.cover,i=null===(n=e.noteCard)||void 0===n?void 0:n.user;if("string"==typeof(null==r?void 0:r.urlDefault)&&(null==r?void 0:r.urlDefault.endsWith("##w=vp1"))){var a=null==i?void 0:i.avatar,o=pick24After(a,"#");return(null==o?void 0:o.id)&&(e.id=o.id,i&&"string"==typeof i.avatar&&(i.avatar=o.cleanedSource),r.urlDefault=r.urlDefault.replace(/##w=vp1$/,"")),e}if("string"==typeof(null==r?void 0:r.urlPre)&&(null==r?void 0:r.urlPre.endsWith("##w=vp4"))){var u=null==r?void 0:r.fileId,l=pick24After(u,"%%");return(null==l?void 0:l.id)&&(e.id=l.id,r&&"string"==typeof r.fileId&&(r.fileId=l.cleanedSource),r.urlPre=r.urlPre.replace(/##w=vp4$/,"")),e}if("string"==typeof(null==r?void 0:r.urlPre)&&(null==r?void 0:r.urlPre.endsWith("##w=vp6"))){var s=null==i?void 0:i.avatar,c=pick24After(s,"#%");(null==c?void 0:c.id)&&(e.id=c.id,i&&"string"==typeof i.avatar&&(i.avatar=c.cleanedSource),r.urlPre=r.urlPre.replace(/##w=vp6$/,""))}return e});return(0,i._)((0,r._)({},e),{items:a||[]})}catch(t){return e}}function dealHoneyUserPosted(e){var t;if(!(Array.isArray(null==e?void 0:e.notes)&&(null===(t=e.notes)||void 0===t?void 0:t.length)>0))return e;try{var n=e.notes,a=(n||[]).map(function(e){var t=null==e?void 0:e.cover;if("string"==typeof(null==t?void 0:t.urlPre)&&(null==t?void 0:t.urlPre.endsWith("##c=vp4"))){var n=null==t?void 0:t.fileId,r=pick24After(n,"%%");return(null==r?void 0:r.id)&&(e.noteId=r.id,t&&"string"==typeof t.fileId&&(t.fileId=r.cleanedSource),t.urlPre=t.urlPre.replace(/##c=vp4$/,"")),e}if("string"==typeof(null==t?void 0:t.urlDefault)&&(null==t?void 0:t.urlDefault.endsWith("##c=vp6"))){var i,a=null==e?void 0:null===(i=e.user)||void 0===i?void 0:i.avatar,o=pick24After(a,"#%");return(null==o?void 0:o.id)&&(e.noteId=o.id,e.user&&"string"==typeof e.user.avatar&&(e.user.avatar=o.cleanedSource),t.urlDefault=t.urlDefault.replace(/##c=vp6$/,"")),e}if("string"==typeof(null==t?void 0:t.urlDefault)&&(null==t?void 0:t.urlDefault.endsWith("##c=vp1"))){var u=null==t?void 0:t.traceId,l=pick24After(u,"#");(null==l?void 0:l.id)&&(e.noteId=l.id,t&&"string"==typeof t.traceId&&(t.traceId=l.cleanedSource),t.urlDefault=t.urlDefault.replace(/##c=vp1$/,""))}return e});return(0,i._)((0,r._)({},e),{notes:a||[]})}catch(t){return e}}n(7136),n(43648),n(87989),n(63712),n(72169),n(58486),n(87394),n(94941),n(48421),n(97357),n(34333),n(6045),n(10364),n(67673)},35547:function(e,t,n){"use strict";function stringToUTF8Bytes(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128)t.push(r);else if(r<2048)t.push(192|r>>6),t.push(128|63&r);else if(r<55296||r>=57344)t.push(224|r>>12),t.push(128|r>>6&63),t.push(128|63&r);else{n++;var i=65536+((1023&r)<<10|1023&e.charCodeAt(n));t.push(240|i>>18),t.push(128|i>>12&63),t.push(128|i>>6&63),t.push(128|63&i)}}return t}function murmurHash3_32(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=stringToUTF8Bytes(e),r=n.length,i=t,a=Math.floor(r/4),o=0;o<a;o++){var u=4*o,l=n[u]|n[u+1]<<8|n[u+2]<<16|n[u+3]<<24;i^=l=Math.imul(l=(l=Math.imul(l,0xcc9e2d51))<<15|l>>>17,0x1b873593),i=Math.imul(i=i<<13|i>>>19,5)+0xe6546b64}var s=4*a,c=0;switch(r%4){case 3:c^=n[s+2]<<16;case 2:c^=n[s+1]<<8;case 1:c^=n[s],i^=c=Math.imul(c=(c=Math.imul(c,0xcc9e2d51))<<15|c>>>17,0x1b873593)}return i^=r,i^=i>>>16,i=Math.imul(i,0x85ebca6b),i^=i>>>13,i=Math.imul(i,0xc2b2ae35),(i^=i>>>16)>>>0}n.d(t,{$:function(){return generateShardingKey}}),n(86651),n(74093),n(20768),n(41648),n(59339),n(47444),n(34757),n(85908),n(39995),n(22943),n(54767),n(55820),n(93225),n(33708),n(64322),n(47771),n(27461),n(23339),n(51109),n(34333);var r=new Map;function generateShardingKey(e){if(r.has(e))return r.get(e);var t=murmurHash3_32(e,151488)%100+1;return r.set(e,t),t}},88588:function(e,t,n){"use strict";function getCookie(e,t){var n=e.match(new RegExp("(^| )".concat(t,"=([^;]*)")));return n?unescape(n[2]):""}n(95477),n(58486),n(109),n(54060),n(20266),n(55947),n(87989),t.Z=getCookie},35307:function(e,t,n){"use strict";n.d(t,{CO:function(){return isImageFile},MO:function(){return convertImageToJPG},T1:function(){return getImageFormatFromDataURL},V1:function(){return isJPGDataURL}});var r=n(41622),i=n(377);function getImageFormatFromDataURL(e){var t=e.match(/^data:image\/([a-zA-Z+]+);/);return t?t[1].toLowerCase():"unknown"}function isJPGDataURL(e){var t=getImageFormatFromDataURL(e);return"jpeg"===t||"jpg"===t}function convertImageToJPG(e){return _convertImageToJPG.apply(this,arguments)}function _convertImageToJPG(){return(_convertImageToJPG=(0,r._)(function(e){var t,n=arguments;return(0,i.Jh)(this,function(r){return(t=n.length>1&&void 0!==n[1]?n[1]:.9,"string"==typeof e&&isJPGDataURL(e))?[2,Promise.resolve(e)]:[2,new Promise(function(n,r){try{var i=new Image;if(i.onload=function(){try{var e=document.createElement("canvas"),a=e.getContext("2d");if(!a){r(Error("无法创建 Canvas 上下文"));return}e.width=i.width,e.height=i.height,a.fillStyle="#FFFFFF",a.fillRect(0,0,e.width,e.height),a.drawImage(i,0,0);var o=e.toDataURL("image/jpeg",t);if(!isJPGDataURL(o)){var u=getImageFormatFromDataURL(o);r(Error("图片转换失败：期望格式为 JPG，实际格式为 ".concat(u)));return}e.remove(),n(o)}catch(e){r(Error("图片转换失败: ".concat(e)))}},i.onerror=function(){r(Error("图片加载失败"))},"string"==typeof e)i.src=e;else{var a=new FileReader;a.onload=function(e){var t;(null===(t=e.target)||void 0===t?void 0:t.result)?i.src=e.target.result:r(Error("文件读取失败"))},a.onerror=function(){r(Error("文件读取失败"))},a.readAsDataURL(e)}}catch(e){r(Error("图片转换初始化失败: ".concat(e)))}})]})})).apply(this,arguments)}function isImageFile(e){return e.type.startsWith("image/")}n(95477),n(58486),n(36277),n(34333),n(41593),n(87989),n(97542)},81933:function(e,t,n){"use strict";function __WEBPACK_DEFAULT_EXPORT__(e){return"string"==typeof e&&(null==e?void 0:e.length)>0}n.d(t,{Z:function(){return __WEBPACK_DEFAULT_EXPORT__}})},63611:function(e,t,n){"use strict";n.d(t,{T:function(){return navigateTo},m:function(){return clickToChangeChannel}});var r=n(98413);function navigateTo(e){var t=e.targetPath,n=e.pageInstance,i=e.isOwnBoard,a=e.isOwnPage,o=e.xsecToken,u=e.xsecSource,l=n,s=t===r.Z.ExplorePath;return("web_profile_page"===n?l=a?"web_profile_page":"web_user_page":"web_explore_feed"===n&&(l=s?void 0:"explore_feed"),s)?{path:r.Z.ExplorePath,query:{channel_type:l}}:{path:t,query:{channel_type:l,parent_page_channel_type:i?"web_profile_board":"web_user_board",xsec_token:o,xsec_source:u}}}function clickToChangeChannel(e){var t=e.channel,n=e.isOwnPage,i=e.pageInstance,a=e.category,o=i,u=t.path===r.Z.ExplorePath;return"web_profile_page"===i?o=n?"web_profile_page":"web_user_page":"web_explore_feed"===i&&(o=u?void 0:"explore_feed"),{path:t.path,query:{channel_id:a,channel_type:o}}}},15684:function(e,t,n){"use strict";n.d(t,{Dd:function(){return getCoverRaito},GY:function(){return formatAccuracyNum},Ju:function(){return insertCommentString},w4:function(){return formatCoverSize}}),n(9557),n(87989),n(43648),n(30072);var r=n(45634),i=n.n(r),a=n(80403),o=n.n(a);function formatAccuracyNum(e){if(void 0===e)return"";var t=Number(e);if(t<1e4)return e;if(t<1e6){if(t<1e5){var n=Number("".concat(e.slice(0,1),".").concat(e.slice(1)));return"".concat(Math.round(10*n)/10,"万")}var r=Number("".concat(e.slice(0,2),".").concat(e.slice(2)));return"".concat(Math.round(10*r)/10,"万")}if(t<1e7){var i=Number("".concat(e.slice(0,3),".").concat(e.slice(3)));return"".concat(Math.round(10*i)/10,"万")}return"999万+"}function insertCommentString(e,t,n,r){var i=e.slice(0,n),a=e.slice(r);return"".concat(i).concat(t).concat(a)}function formatCoverSize(e,t){if("number"!=typeof e||"number"!=typeof t)return{rawW:e,rawH:t};var n=t/e;return n<.75?{rawW:1920,rawH:1440}:n>4/3?{rawW:1440,rawH:1920}:{rawW:e,rawH:t}}function getCoverRaito(e,t){return t/e<3/4?3/4:t/e>4/3?4/3:t/e}i().extend(o())},98875:function(e,t,n){"use strict";function onlyExecuteInClient(e){return e}n.d(t,{Y:function(){return onlyExecuteInClient}})},99505:function(e,t,n){"use strict";n.d(t,{A2:function(){return filePreviewPoint},A6:function(){return notFoundPoint},EM:function(){return userHoverCardPoint},Fh:function(){return searchPoint},JI:function(){return getFilePreviewPage},Kh:function(){return w},Kz:function(){return noteBoardPoint},NI:function(){return userPoint},O:function(){return reportPoint},O8:function(){return getTrackData},Pj:function(){return explorePoint},U0:function(){return getUserPageRouteTrackData},UF:function(){return feedbackPoint},UI:function(){return k},W9:function(){return sharePoint},WJ:function(){return boardEditPoint},Ye:function(){return notificationPoint},e9:function(){return x},eJ:function(){return webLiveTabPoint},i6:function(){return aiSearchResultPoint},kj:function(){return loginPoint},kn:function(){return m},kw:function(){return h},l:function(){return boardPoint},l7:function(){return d},mX:function(){return getNotePage},pz:function(){return registerPoint},sq:function(){return notePoint},uk:function(){return headerPoint},z$:function(){return p},zr:function(){return getSearchPage},zx:function(){return liveRoomPoint}});var r=n(41622),i=n(377);n(86651),n(36277),n(34333),n(29112),n(67275),n(59989),n(7099),n(27461),n(23339),n(51109),n(67930),n(58486);var a=n(38841),o=n(23755),u=n(64300),l=n(68284),s=n(85537),c=n(13285),d={video:3,normal:1},v={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_login_popup_page"}}};function getTrackData(e,t){return _getTrackData.apply(this,arguments)}function _getTrackData(){return(_getTrackData=(0,r._)(function(e,t){var r;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,n.e("2447").then(n.bind(n,88476))];case 1:return[2,r.sent().tracker[e](t)];case 2:return r.sent(),[2,{}];case 3:return[2]}})})).apply(this,arguments)}function loginPoint(e,t){return _loginPoint.apply(this,arguments)}function _loginPoint(){return(_loginPoint=(0,r._)(function(e,t){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,getTrackData(e,t)];case 1:return(n=r.sent()).page=v,a.Q.push(n),[2]}})})).apply(this,arguments)}function getNotePage(){return{type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_note_detail_r10"},instanceId:(0,u.dw)().firstNoteId}}}function notePoint(e,t){return _notePoint.apply(this,arguments)}function _notePoint(){return(_notePoint=(0,r._)(function(e,t){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,getTrackData(e,t)];case 1:return(n=r.sent()).page=getNotePage(),a.Q.push(n),[2]}})})).apply(this,arguments)}var f={type:"Page",value:{pageInstance:{type:"PageInstance",value:"PLACEHOLDER"}}};function getUserPageRouteTrackData(e){return _getUserPageRouteTrackData.apply(this,arguments)}function _getUserPageRouteTrackData(){return(_getUserPageRouteTrackData=(0,r._)(function(e){var t,n,r;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return t=(0,s.L)(),n=new URLSearchParams(window.location.search),[4,getTrackData(e,{instanceId:t.visitTargetUserId,channelType:n.get("channel_type")||n.get("channelType")||n.get("source")||"",channelTabId:n.get("channelTabId")||"",parentPageChannelType:n.get("parent_page_channel_type")||""})];case 1:return r=i.sent(),f.value.pageInstance.value=t.isOwnPage?"web_profile_page":"web_user_page",r.page=f,[2,r]}})})).apply(this,arguments)}function userPoint(e,t){return _userPoint.apply(this,arguments)}function _userPoint(){return(_userPoint=(0,r._)(function(e,t){var n,r;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return n=(0,s.L)(),[4,getTrackData(e,t)];case 1:return r=i.sent(),f.value.pageInstance.value=n.isOwnPage?"web_profile_page":"web_user_page",r.page=f,a.Q.push(r),[2]}})})).apply(this,arguments)}var p={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_explore_feed"}}};function explorePoint(e,t){return _explorePoint.apply(this,arguments)}function _explorePoint(){return(_explorePoint=(0,r._)(function(e,t){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,getTrackData(e,t)];case 1:return(n=r.sent()).page=p,a.Q.push(n),[2]}})})).apply(this,arguments)}var h={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_full_screen_popup_page"}}};function getSearchPage(){return{type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_search_result_notes"},instanceId:(0,l.R)().searchContext.searchId}}}function searchPoint(e,t){return _searchPoint.apply(this,arguments)}function _searchPoint(){return(_searchPoint=(0,r._)(function(e,t){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(!e)return[2];return[4,getTrackData(e,t)];case 1:return(n=r.sent()).page=getSearchPage(),a.Q.push(n),[2]}})})).apply(this,arguments)}var g={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_header_page"}}};function getHeaderPageWithInstanceId(e){return{type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_header_page"},instanceId:e}}}function headerPoint(e,t,n){return _headerPoint.apply(this,arguments)}function _headerPoint(){return(_headerPoint=(0,r._)(function(e,t,n){var r;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,getTrackData(e,t)];case 1:return r=i.sent(),n&&n.length>0?r.page=getHeaderPageWithInstanceId(n):r.page=g,a.Q.push(r),[2]}})})).apply(this,arguments)}var m={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_engagement_notification_page"}}};function notificationPoint(e,t){return _notificationPoint.apply(this,arguments)}function _notificationPoint(){return(_notificationPoint=(0,r._)(function(e,t){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(!e)return[2];return[4,getTrackData(e,t)];case 1:return(n=r.sent()).page=m,a.Q.push(n),[2]}})})).apply(this,arguments)}var y={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_share_popup_page"}}};function sharePoint(e,t){return _sharePoint.apply(this,arguments)}function _sharePoint(){return(_sharePoint=(0,r._)(function(e,t){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(!e)return[2];return[4,getTrackData(e,t)];case 1:return(n=r.sent()).page=y,a.Q.push(n),[2]}})})).apply(this,arguments)}var I={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_help_cs_page"}}};function feedbackPoint(e,t){return _feedbackPoint.apply(this,arguments)}function _feedbackPoint(){return(_feedbackPoint=(0,r._)(function(e,t){return(0,i.Jh)(this,function(n){switch(n.label){case 0:if(!e)return[2];return[4,getTrackData(e,t)];case 1:return n.sent().page=I,[2]}})})).apply(this,arguments)}var _={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_new_registration_page"}}};function registerPoint(e,t){return _registerPoint.apply(this,arguments)}function _registerPoint(){return(_registerPoint=(0,r._)(function(e,t){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(!e)return[2];return[4,getTrackData(e,t)];case 1:return(n=r.sent()).page=_,a.Q.push(n),[2]}})})).apply(this,arguments)}var w={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_error_page"}}};function notFoundPoint(e,t){return _notFoundPoint.apply(this,arguments)}function _notFoundPoint(){return(_notFoundPoint=(0,r._)(function(e,t){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,getTrackData(e,t)];case 1:return(n=r.sent()).page=w,a.Q.push(n),[2]}})})).apply(this,arguments)}var k={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_board_page"}}};function boardPoint(e,t){return _boardPoint.apply(this,arguments)}function _boardPoint(){return(_boardPoint=(0,r._)(function(e,t){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,getTrackData(e,t)];case 1:return(n=r.sent()).page=k,a.Q.push(n),[2]}})})).apply(this,arguments)}var S={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_board_edit_page"}}};function boardEditPoint(e,t){return _boardEditPoint.apply(this,arguments)}function _boardEditPoint(){return(_boardEditPoint=(0,r._)(function(e,t){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,getTrackData(e,t)];case 1:return(n=r.sent()).page=S,a.Q.push(n),[2]}})})).apply(this,arguments)}var b={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_board_create_page"}}};function noteBoardPoint(e,t){return _noteBoardPoint.apply(this,arguments)}function _noteBoardPoint(){return(_noteBoardPoint=(0,r._)(function(e,t){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,getTrackData(e,t)];case 1:return n.sent().page=b,[2]}})})).apply(this,arguments)}var M={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_report_page"}}};function reportPoint(e,t){return _reportPoint.apply(this,arguments)}function _reportPoint(){return(_reportPoint=(0,r._)(function(e,t){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,getTrackData(e,t)];case 1:return(n=r.sent()).page=M,a.Q.push(n),[2]}})})).apply(this,arguments)}var L={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_user_card_popup_page"}}};function userHoverCardPoint(e,t){return _userHoverCardPoint.apply(this,arguments)}function _userHoverCardPoint(){return(_userHoverCardPoint=(0,r._)(function(e,t){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,getTrackData(e,t)];case 1:return(n=r.sent()).page=L,a.Q.push(n),[2]}})})).apply(this,arguments)}function aiSearchResultPoint(e,t,n){return _aiSearchResultPoint.apply(this,arguments)}function _aiSearchResultPoint(){return(_aiSearchResultPoint=(0,r._)(function(e,t,n){var r;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,getTrackData(e,t)];case 1:return(r=i.sent()).page={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_search_result_notes"},instanceId:n}},a.Q.push(r),[2]}})})).apply(this,arguments)}function getFilePreviewPage(){var e,t=(0,c.yj)();return{type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_document_preview_page"},instanceId:null==t?void 0:null===(e=t.query)||void 0===e?void 0:e.docId}}}function filePreviewPoint(e,t){return _filePreviewPoint.apply(this,arguments)}function _filePreviewPoint(){return(_filePreviewPoint=(0,r._)(function(e,t){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,getTrackData(e,t)];case 1:return(n=r.sent()).page=getFilePreviewPage(),a.Q.push(n),[2]}})})).apply(this,arguments)}var x={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_live_tab"}}},T={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_view_live"}}};function webLiveTabPoint(e,t){return _webLiveTabPoint.apply(this,arguments)}function _webLiveTabPoint(){return(_webLiveTabPoint=(0,r._)(function(e,t){var n,r;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return n=(0,o.jl)("PointUtil"),[4,getTrackData(e,t)];case 1:return(r=i.sent()).page=x,n.log("webLiveTab pointData",r,e),a.Q.push(r),[2]}})})).apply(this,arguments)}function liveRoomPoint(e,t){return _liveRoomPoint.apply(this,arguments)}function _liveRoomPoint(){return(_liveRoomPoint=(0,r._)(function(e,t){var n,r,u;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return n=(0,o.jl)("PointUtil"),[4,getTrackData(e,t)];case 1:return r=i.sent(),(u=(null==t?void 0:t.instanceId)||(null==t?void 0:t.liveId)||"")?r.page={type:"Page",value:{pageInstance:{type:"PageInstance",value:"web_view_live"},instanceId:u}}:r.page=T,r.adsTarget.value.trackId=(null==t?void 0:t.adsTarget_trackId)||"",r.noteTarget.value.trackId=(null==t?void 0:t.noteTarget_trackId)||"",n.log("liveRoom pointData",r,e),a.Q.push(r),[2]}})})).apply(this,arguments)}},18462:function(e,t,n){"use strict";function removeAiPrefix(e){return e.replace(/^ai-/,"")}n.d(t,{B:function(){return removeAiPrefix}}),n(72169),n(58486)},83966:function(e,t,n){"use strict";n.d(t,{D:function(){return safeJsonParse},u:function(){return safeJsonStringify}});var r=n(31547);function safeJsonParse(e){try{if(e&&(void 0===e?"undefined":(0,r._)(e))==="object")return e;return JSON.parse(e)}catch(e){return null}}function safeJsonStringify(e){try{return JSON.stringify(e)}catch(e){return null}}n(19077),n(75973),n(7608)},31105:function(e,t,n){"use strict";function easeInOutCubic(e,t,n,r){var i=n-t;return(e/=r/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t}function isWindow(e){return null!=e&&e===e.window}function getScroll(e,t){if("undefined"==typeof window)return 0;var n,r,i=t?"scrollTop":"scrollLeft",a=0;return isWindow(e)?a=e[t?"pageYOffset":"pageXOffset"]:e instanceof Document?a=e.documentElement[i]:e instanceof HTMLElement?a=e[i]:e&&(a=e[i]),e&&!isWindow(e)&&"number"!=typeof a&&(a=null===(n=(null!==(r=e.ownerDocument)&&void 0!==r?r:e).documentElement)||void 0===n?void 0:n[i]),a}function scrollTo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getContainer,r=void 0===n?function(){return window}:n,i=t.callback,a=t.duration,o=void 0===a?450:a,u=t.type,l=null!=u?u:"scrollTop",s=r()||window,c=getScroll(s,"scrollTop"===l),d=Date.now(),frameFunc=function(){var t=Date.now()-d,n=easeInOutCubic(t>o?o:t,c,e,o);isWindow(s)?s.scrollTo(window.pageXOffset,n):s instanceof Document||"HTMLDocument"===s.constructor.name?s.documentElement[l]=n:s[l]=n,t<o?requestAnimationFrame(frameFunc):"function"==typeof i&&i()};requestAnimationFrame(frameFunc)}n.d(t,{ZP:function(){return scrollTo}})},13189:function(e,t,n){"use strict";function createSearchId(){if(!(null===(e=window)||void 0===e?void 0:e.BigInt)){var e,t=Date.now(),n=Math.ceil(0x7ffffffe*Math.random());return Number.parseInt(t.toString()+n.toString(),10).toString(36)}var r=BigInt(Date.now()),i=BigInt(Math.ceil(0x7ffffffe*Math.random()));return r<<=BigInt(64),(r+=i).toString(36)}function createRequestId(){if(!(null===(e=window)||void 0===e?void 0:e.BigInt))return"";var e,t=BigInt(Date.now()),n=BigInt(Math.ceil(0x7ffffffe*Math.random()));return"".concat(n,"-").concat(t)}n.d(t,{A:function(){return createRequestId},J:function(){return createSearchId}}),n(34333),n(55947),n(9557),n(87989)},79612:function(e,t,n){"use strict";n.d(t,{$I:function(){return reportSugInfo},$Y:function(){return reportTabClickInfo},$b:function(){return reportUserLiveOneboxInfo},Bw:function(){return reportUserSearchInfo},IP:function(){return composeSugPointInfo},Ii:function(){return reportSearchFilterImpression},KU:function(){return composeQueryTrendingInfo},LY:function(){return reportHotspotInfo},Pp:function(){return reportUserInputSearchInfo},QF:function(){return reportHotspotCardModify},Sl:function(){return reportUserOneboxInfo},VF:function(){return reportSearchFilterClick},WU:function(){return composeHotspotInfo},Wm:function(){return reportSearchHistoryInfo},YP:function(){return reportSearchFilterClose},_l:function(){return reportQueryTrendingInfo},dB:function(){return reportSearchFilterReset},ef:function(){return reportSearch},f3:function(){return reportSearchHistoryModifyInfo},g7:function(){return reportSearchFilterIconClick},km:function(){return reportHintWordInfo},lg:function(){return reportClickSecurityOneBoxLink},m2:function(){return reportTabClickNote},oz:function(){return reportSearchChannelClick},p0:function(){return reportExposureSecurityOneBox},pD:function(){return h},z7:function(){return composeHintWordInfo},zf:function(){return reportSearchFilterEmpty}});var r,i=n(41622),a=n(70879),o=n(27337),u=n(377);n(85203),n(28636),n(7608),n(6045),n(10364),n(67673);var l=n(14748),s=n(8935),c=n(10602),d=n(99505),v=n(68284),f=n(85537);var p=((r={})[r.FIRST_ENTER=1]="FIRST_ENTER",r[r.BACK_WITH_DEL_WORD=2]="BACK_WITH_DEL_WORD",r[r.TAKE_A_CHANGE=4]="TAKE_A_CHANGE",r),h={ai:{textSelectedCopy:{copy:91721},traceSourceKeyword:{impression:91726,click:91727},table:{impression:91724,click:91725},image:{load:91722,click:91723},send:{result:89840},refresh:{page:89841},reference:{impression:91717,click:91718},traceSourcePanel:{impression:91719,close:91720}},hintWord:{artificial:{impression:35835,click:35836},normal:{impression:33764,click:33765}},queryTrending:{artificial:{impression:35130,click:35131},normal:{impression:33766,click:33767}},sug:{impression:31971,click:31970},sugUser:{impression:37707,click:37819},userInput:30358,onebox:{user:{impression:37702,click:37703,follow:37705,unfollow:37706},userLive:{impression:93030,click:93031}},securityOneBox:{impression:61104,click:61105},userItem:{impression:37814,click:37815,follow:37816,unfollow:37817},searchTab:37818,searchTabNote:30343,history:{impression:38716,click:38717},historyModify:{enterDelete:38718,singleDelete:38713,allDelete:38715,fold:38719},hotspot:{impression:44497,click:44498},hotspotHint:{impression:44499,click:44500},hotlistCardModify:{click:44502},searchFilter:{iconClick:30334,impression:77817,click:77822,reset:77818,close:77819,clickApi:77828,empty:77824,empytClick:77825},clickChannelTab:77814,clickSearch:77886};function baseSearchPoint(){var e=(0,v.R)();return{instanceId:e.searchContext.searchId,searchWord:e.searchContext.keyword,searchSessionId:e.sessionId}}function composeSugPointInfo(e,t,n,r,i,a){var o,u,l,s,c=(0,v.R)();return"user_detail"===a.type?{objectPosition:r+1,searchWord:e,searchCplId:null!==(u=c.searchCplId)&&void 0!==u?u:"",wordRequestId:null!==(l=c.wordRequestId)&&void 0!==l?l:"",userId:null!==(s=null===(o=a.user)||void 0===o?void 0:o.id)&&void 0!==s?s:"",fromPage:i}:{searchWord:e,recommendSearchWords:t,recommendTitle:n,objectPosition:r+1,fromPage:i}}function reportSugInfo(e,t,n){var r=(0,v.R)();"click"===e&&r.updateKeywordFrom(l.ai.SEARCH_WORD_FROM_AUTO_COMPLETE),"user_detail"===t.type?(0,d.uk)(h.sugUser[e],n):(0,d.uk)(h.sug[e],n)}function composeQueryTrendingInfo(e,t,n,r,i){var a,o,u=(0,v.R)();return{fromPage:r,wordRequestId:(null===(a=u.queryTrendingInfo)||void 0===a?void 0:a.wordRequestId)||(null==i?void 0:i.wordRequestId)||"",searchWordFromStr:u.sourcePageInstance||(null==i?void 0:i.searchWordFromStr)||"",wordRequestSituation:p[null===(o=u.queryTrendingParams)||void 0===o?void 0:o.wordRequestSituation],recommendSearchWordsStr:n.searchWord,recommendTitle:t,recommendSearchWordsType:n.type,objectPosition:e+1}}function reportQueryTrendingInfo(e,t,n){var r=(0,v.R)();"artificial"===n.type?((0,d.uk)(h.queryTrending.artificial[e],{searchWord:n.searchWord,activityPageId:(0,c.z)(n.link||""),activityAdSlotId:n.activityId||""}),"click"===e&&r.updateKeywordFrom(l.ai.SEARCH_WORD_FROM_DEFAULT_CONFIGURATION)):((0,d.uk)(h.queryTrending.normal[e],t),"click"===e&&r.updateKeywordFrom(l.ai.SEARCH_WORD_FROM_TRENDING))}function composeHintWordInfo(e){var t,n,r,i=(0,v.R)();return{wordRequestId:(null===(t=i.hintWord)||void 0===t?void 0:t.hintWordRequestId)||"",recommendSearchWordsType:(null===(n=i.hintWord)||void 0===n?void 0:n.type)||"",searchWordFromStr:i.sourcePageInstance,searchWord:(null===(r=i.hintWord)||void 0===r?void 0:r.searchWord)||"",defaultWordRequestSituation:i.queryTrendingParams.wordRequestSituation,fromPage:e}}function reportHintWordInfo(e,t,n){var r=(0,v.R)();"artificial"===n.type?((0,d.uk)(h.hintWord.artificial[e],{searchWord:n.title,activityPageId:(0,c.z)(n.link||""),activityAdSlotId:n.activityId||""}),"click"===e&&r.updateKeywordFrom(l.ai.SEARCH_WORD_FROM_DEFAULT_CONFIGURATION)):((0,d.uk)(h.hintWord.normal[e],t),"click"===e&&r.updateKeywordFrom(l.ai.SEARCH_WORD_FROM_DEFAULT))}function reportUserInputSearchInfo(e,t,n){var r=(0,v.R)(),i=(0,f.L)();r.updateKeywordFrom(l.ai.SEARCH_WORD_FROM_CONFIRM),(0,d.uk)(h.userInput,{fromPage:n,isLogin:i.loggedIn,searchWord:""===e.trim()?t:e})}function reportUserOneboxInfo(e,t){var n=(0,v.R)();(0,d.Fh)(h.onebox.user[e],{instanceId:n.searchContext.searchId,searchWord:n.searchContext.keyword,searchWordFrom:n.keywordFrom,searchWordFromStr:n.sourcePageInstance,userId:t})}function reportUserLiveOneboxInfo(e,t,n){(0,d.Fh)(h.onebox.userLive[e],{anchorId:t,liveId:n})}function reportClickSecurityOneBoxLink(){return _reportClickSecurityOneBoxLink.apply(this,arguments)}function _reportClickSecurityOneBoxLink(){return(_reportClickSecurityOneBoxLink=(0,i._)(function(){var e;return(0,u.Jh)(this,function(t){return e=(0,v.R)(),(0,d.Fh)(h.securityOneBox.click,{searchWord:e.searchContext.keyword,searchWordFrom:e.keywordFrom,searchWordFromStr:e.sourcePageInstance,channelTabName:e.currentSearchType}),[2]})})).apply(this,arguments)}function reportExposureSecurityOneBox(){return _reportExposureSecurityOneBox.apply(this,arguments)}function _reportExposureSecurityOneBox(){return(_reportExposureSecurityOneBox=(0,i._)(function(){var e;return(0,u.Jh)(this,function(t){return e=(0,v.R)(),(0,d.Fh)(h.securityOneBox.impression,{searchWord:e.searchContext.keyword,searchWordFrom:e.keywordFrom,searchWordFromStr:e.sourcePageInstance,channelTabName:e.currentSearchType}),[2]})})).apply(this,arguments)}function reportUserSearchInfo(e,t,n){var r=(0,v.R)();(0,d.Fh)(h.userItem[e],{objectPosition:n+1,instanceId:r.searchContext.searchId,searchSessionId:r.searchContext.searchId,searchWord:r.searchContext.keyword,searchWordFrom:r.keywordFrom,searchWordFromStr:r.sourcePageInstance,userId:t})}function reportTabClickInfo(){var e=(0,v.R)();(0,d.Fh)(h.searchTab,(0,a._)({channelTabName:e.currentSearchType,searchWordFrom:e.keywordFrom,searchWordFromStr:e.sourcePageInstance},baseSearchPoint()))}function reportTabClickNote(e){var t=(0,v.R)();(0,d.Fh)(h.searchTabNote,{componentName:e,instanceId:t.searchContext.searchId,searchWord:t.searchContext.keyword,searchWordFrom:t.keywordFrom})}function reportSearchHistoryInfo(e,t){var n=(0,v.R)();(0,d.uk)(h.history[e],t),"click"===e&&n.updateKeywordFrom(l.ai.SEARCH_WORD_FROM_HISTORY)}function reportSearchHistoryModifyInfo(e,t){(0,d.uk)(h.historyModify[e],t)}function composeHotspotInfo(e,t){return{objectPosition:e+1,searchWordFromStr:(0,v.R)().sourcePageInstance,recommendSearchWordsId:t.id,searchWordTypes:t.wordType,recommendTitle:t.title}}function reportHotspotInfo(e,t){var n=(0,v.R)();(0,d.uk)(h.hotspot[e],t),"click"===e&&n.updateKeywordFrom(l.ai.SEARCH_WORD_FROM_HOTLIST)}function reportHotspotCardModify(e){var t=(0,v.R)();(0,d.Fh)(h.hotlistCardModify.click,{componentName:e,instanceId:t.searchContext.searchId,searchWord:t.searchContext.keyword,searchWordFrom:t.keywordFrom,searchWordFromStr:t.sourcePageInstance,noteSortType:s.NC[t.searchContext.sort]})}function reportSearchFilterImpression(e){var t=(0,v.R)();(0,d.Fh)(h.searchFilter.impression,(0,o._)((0,a._)({},baseSearchPoint()),{actionSource:e,channelTabName:t.currentSearchType,filterOptionsStr:JSON.stringify(t.filterParams||[])}))}function reportSearchFilterIconClick(){var e=(0,v.R)();(0,d.Fh)(h.searchFilter.iconClick,(0,o._)((0,a._)({},baseSearchPoint()),{channelTabName:e.currentSearchType}))}function reportSearchFilterReset(){var e=(0,v.R)();(0,d.Fh)(h.searchFilter.reset,(0,o._)((0,a._)({},baseSearchPoint()),{channelTabName:e.currentSearchType}))}function reportSearchFilterClose(){var e=(0,v.R)();(0,d.Fh)(h.searchFilter.close,(0,o._)((0,a._)({},baseSearchPoint()),{channelTabName:e.currentSearchType}))}function reportSearchFilterClick(e){var t,n=(0,v.R)();(0,d.Fh)("click"===e?h.searchFilter.click:h.searchFilter.clickApi,(0,o._)((0,a._)({},baseSearchPoint()),{filterOptions:(null===(t=n.filterParams)||void 0===t?void 0:t.map(function(e){return JSON.stringify(e)}))||[]}))}function reportSearchFilterEmpty(e){var t=(0,v.R)();(0,d.Fh)("impression"===e?h.searchFilter.empty:h.searchFilter.empytClick,(0,o._)((0,a._)({},baseSearchPoint()),{channelTabName:t.currentSearchType}))}function reportSearchChannelClick(){(0,d.Fh)(h.clickChannelTab,(0,a._)({},baseSearchPoint()))}function reportSearch(){var e=(0,v.R)();(0,d.Fh)(h.clickSearch,(0,o._)((0,a._)({},baseSearchPoint()),{channelTabName:e.currentSearchType}))}},91547:function(e,t,n){"use strict";n.d(t,{A:function(){return T},T:function(){return v}});var r,i=n(46490),a=n(77698),o=n(88884),u=n(68135),l=n(90251),s=n(51606);n(89300),n(49930),n(19990),n(27461),n(23339),n(51109),n(34333),n(1154),n(80013),n(97357),n(42876),n(33933),n(87989),n(9557),n(86651),n(29273),n(69032),n(93354),n(19077),n(75973),n(7608),n(74093),n(20768),n(41648),n(59339),n(47444),n(34757),n(85908),n(39995),n(22943),n(54767),n(55820),n(93225),n(33708),n(64322),n(47771),n(87535),n(75204);var c=n(45634),d=n.n(c);var v=((r={}).noteImpression="noteImpression",r.noteDetailReadEnter="noteDetailReadEnter",r.noteDetailReadEnd="noteDetailReadEnd",r.loginStatus="loginStatus",r.likeCount="likeCount",r.favCount="favCount",r.followCount="followCount",r.commentCount="commentCount",r.lastTrigger="lastTrigger",r.taskFinish="taskFinish",r.oneDayTriggerCount="oneDayTriggerCount",r.totalTriggerCount="totalTriggerCount",r.firstVisit="firstVisit",r.visitorLogin="visitorLogin",r.searchCount="searchCount",r.inContinued="inContinued",r.screenWidth="screenWidth",r),f="XHS_STRATEGY_BOX",p=new WeakMap,h=new WeakMap,g=new WeakMap,m=new WeakMap,y=new WeakMap,I=new WeakMap,_=new WeakMap,w=new WeakMap,k=new WeakMap,S=new WeakMap,b=new WeakMap,M=new WeakMap,L=new WeakMap,x=new WeakMap,T=new(function(){function StrategyBox(){var e=this;(0,i._)(this,StrategyBox),(0,o._)(this,p,{writable:!0,value:void 0}),(0,o._)(this,h,{writable:!0,value:void 0}),(0,o._)(this,g,{writable:!0,value:void 0}),(0,o._)(this,m,{writable:!0,value:void 0}),(0,o._)(this,y,{writable:!0,value:function(t){return(0,a._)(e,h).some(function(e){return e.taskName===t&&["running","pending"].includes(e.status)})}}),(0,o._)(this,I,{writable:!0,value:function(t,n){var r,i=(0,a._)(e,g).get(t);return null!==(r=null==i?void 0:i.rules.some(function(e){return e.some(function(e){return e.indicate===n})}))&&void 0!==r&&r}}),(0,o._)(this,_,{writable:!0,value:function(t){(0,a._)(e,I).call(e,t,"lastTrigger")&&e.updateState("lastTrigger",function(){return d()().format("YYYY-MM-DD")},t),(0,a._)(e,I).call(e,t,"oneDayTriggerCount")&&e.updateState("oneDayTriggerCount",function(){var n,r=d()().format("YYYY-MM-DD"),i=null!==(n=(0,a._)(e,b).call(e,"oneDayTriggerCount","".concat(t)))&&void 0!==n?n:{};return i[r]?i[r]="".concat(Number(i[r])+1):i=(0,s._)({},r,"1"),i},t),(0,a._)(e,I).call(e,t,"totalTriggerCount")&&e.updateState("totalTriggerCount",function(){var n,r=null!==(n=(0,a._)(e,b).call(e,"totalTriggerCount","".concat(t)))&&void 0!==n?n:0;return r=r?r+1:1},t)}}),(0,o._)(this,w,{writable:!0,value:function(t){if((0,a._)(e,S).call(e,t)&&!(0,a._)(e,y).call(e,t)){var n,r=(0,a._)(e,g).get(t);(0,a._)(e,k).call(e,t),!(null==r?void 0:r.manualUpdateTrigger)&&(0,a._)(e,_).call(e,t),(null===(n=(0,a._)(e,h)[0])||void 0===n?void 0:n.status)==="pending"&&((0,a._)(e,h)[0].status="running",null==r||r.taskExecutor(function(){var n,r;(null===(n=(0,a._)(e,h)[0])||void 0===n?void 0:n.taskName)===t&&((0,a._)(e,h).shift(),(0,a._)(e,h).length>0&&(0,a._)(e,w).call(e,null===(r=(0,a._)(e,h)[0])||void 0===r?void 0:r.taskName))},function(){(0,a._)(e,g).delete(t)},function(){(0,a._)(e,L).call(e,"taskFinish",t,!0)},function(){(null==r?void 0:r.manualUpdateTrigger)&&(0,a._)(e,_).call(e,t)}))}else{var i,o=(0,a._)(e,g).get(t);null==o||null===(i=o.taskReject)||void 0===i||i.call(o,e)}}}),(0,o._)(this,k,{writable:!0,value:function(t){var n=(0,a._)(e,g).get(t);if(void 0!==n){var r=n.priority;if(0===(0,a._)(e,h).length){(0,a._)(e,h).push({taskName:t,priority:r,status:"pending"});return}for(var i=0;i<(0,a._)(e,h).length;i++)(0,a._)(e,h)[i].priority<r&&(0,a._)(e,h).splice(i,0,{taskName:t,priority:r,status:"pending"})}}}),(0,o._)(this,S,{writable:!0,value:function(t){var n=(0,a._)(e,g).get(t),r=(null!=n?n:{}).rules;return!(0,a._)(e,b).call(e,"taskFinish",t)&&!!Array.isArray(r)&&0!==r.length&&r.some(function(n){return n.every(function(n){var r,i,o,u=n.indicate,l=n.value,s=n.operator,c=(0,a._)(e,p).get(u);if("lastTrigger"===u){if(!(c=(0,a._)(e,b).call(e,"lastTrigger",t)))return!0;c=d()().diff(c,"day")}switch("oneDayTriggerCount"===u&&(c=Number(null!==(i=(null!==(r=(0,a._)(e,b).call(e,"oneDayTriggerCount",t))&&void 0!==r?r:{})[d()().format("YYYY-MM-DD")])&&void 0!==i?i:0)+1),"totalTriggerCount"===u&&(c=(null!==(o=(0,a._)(e,b).call(e,"totalTriggerCount",t))&&void 0!==o?o:0)+1),s){case"===":return c===l;case"!==":return c!==l;case">":return Number(c)>Number(l);case"<":return Number(c)<Number(l);case">=":return Number(c)>=Number(l);case"<=":return Number(c)<=Number(l);case"include":return Array.isArray(c)&&c.includes(l);case"exclude":return Array.isArray(c)&&!c.includes(l);default:return!1}})})}}),(0,o._)(this,b,{writable:!0,value:function(t,n){var r=(0,a._)(e,M).call(e);return null==r?void 0:r["".concat(t,"-").concat(n)]}}),(0,o._)(this,M,{writable:!0,value:function(){var e=localStorage.getItem(f);if(e)try{return JSON.parse(e)}catch(e){try{localStorage.setItem(f,JSON.stringify({}))}catch(e){console.warn("localStorage is not available")}}}}),(0,o._)(this,L,{writable:!0,value:function(t,n,r){var i,o=null!==(i=(0,a._)(e,M).call(e))&&void 0!==i?i:{};o["".concat(t,"-").concat(n)]=r;try{localStorage.setItem(f,JSON.stringify(o))}catch(e){console.warn("localStorage is not available")}}}),(0,o._)(this,x,{writable:!0,value:function(){var t=(0,a._)(e,b).call(e,"firstVisit","");e.updateState("firstVisit",function(){return null==t||t}),(0,a._)(e,L).call(e,"firstVisit","",!1);var updateScreenWidth=function(){e.updateState("screenWidth",function(){return window.innerWidth})};updateScreenWidth(),window.addEventListener("resize",updateScreenWidth)}}),(0,u._)(this,g,new Map),(0,u._)(this,p,new Map),(0,u._)(this,h,[]),(0,a._)(this,x).call(this),(0,u._)(this,m,{})}return(0,l._)(StrategyBox,[{key:"updateState",value:function updateState(e,t,n){var r=this,i=(0,a._)(this,p).get(e);if(["taskFinish","lastTrigger","oneDayTriggerCount","totalTriggerCount"].includes(e)&&n){(0,a._)(this,L).call(this,e,n,t(i));return}(0,a._)(this,p).set(e,t(i)),(0,a._)(this,g).forEach(function(e,t){(0,a._)(r,w).call(r,t)})}},{key:"register",value:function register(e,t){var n=this;return(0,a._)(this,m)[e]?(0,a._)(this,g).set(e,(0,a._)(this,m)[e]):(0,a._)(this,g).set(e,t),(0,a._)(this,w).call(this,e),function(){(0,a._)(n,g).delete(e)}}}]),StrategyBox}())},24373:function(e,t,n){"use strict";n.d(t,{LD:function(){return getQueryVal},Nv:function(){return stringifyUrl},Yo:function(){return o}});var r=n(70879),i=n(82726);n(67930),n(58486),n(72169),n(99808),n(87535),n(75204),n(97357),n(34333),n(75973),n(6045),n(10364),n(67673),n(87989),n(87394),n(94941),n(48421),n(80156),n(50721),n(29112),n(67275),n(59989),n(7099),n(27461),n(23339),n(51109);var a=n(98875),o=(0,a.Y)(function(e){var t=document.createElement("a");t.target="_blank",t.href=e,window.document.body.appendChild(t),t.click(),window.document.body.removeChild(t)}),u=(0,a.Y)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.keep,a=t.qs,o=void 0===a?window.location.search:a,u={};return(void 0===n||n)&&o.replace(/^\?/,"").split("&").forEach(function(e){var t=(0,i._)(e.split("="),2),n=t[0],r=t[1];n&&(u[n]=r)}),(0,r._)({},u,e)});function stringifyUrl(e,t,n){var r=u(t,n),i=Object.keys(r).map(function(e){return r[e]?"".concat(e,"=").concat(r[e]):null}).filter(Boolean).join("&");return"".concat(e).concat(i?"?".concat(i):"")}function getQueryVal(e){if(!(null===(n=window)||void 0===n?void 0:null===(t=n.location)||void 0===t?void 0:t.href))return"";var t,n,r,i=new URL(window.location.href);return(null==i?void 0:null===(r=i.searchParams)||void 0===r?void 0:r.get(e))||""}},90909:function(e,t,n){"use strict";n.d(t,{x:function(){return useFragmentOrderManager}});var r=n(70879),i=n(27337),a=n(82726),o=n(66993);n(74093),n(20768),n(41648),n(59339),n(47444),n(34757),n(85908),n(39995),n(22943),n(54767),n(55820),n(93225),n(33708),n(64322),n(47771),n(27461),n(23339),n(51109),n(34333),n(64091),n(28636),n(86651),n(74719),n(13396),n(91313),n(6045),n(10364),n(67673);var u=n(93328),l=n(18068);function useFragmentOrderManager(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fragmentTimeout,n=void 0===t?1500:t,s=e.onTimeout,c=(0,u.iH)(null),d=(0,u.iH)(new Map),v=(0,u.iH)([]),f=(0,u.iH)(null),p=(0,u.iH)("normal"),h=(0,u.iH)(0);function clearCurrentTimeout(){f.value&&(clearTimeout(f.value.timer),f.value=null)}function calculateMissingRange(){if(null===c.value)return null;var e,t=c.value,n=Array.from(d.value.keys()).sort(function(e,t){return e-t}),r=n.length>0?(e=Math).max.apply(e,(0,o._)(n)):t,i=[];if(0===n.length)i.push(t);else for(var a=t;a<=r;a++)!d.value.has(a)&&i.push(a);return{firstMissing:t,lastReceived:r,missingIds:i}}function startTimeoutMonitoring(e){if("normal"!==p.value||f.value&&f.value.expectedIndex===e)return;if(clearCurrentTimeout(),!(n<=0)&&!!s){var t=setTimeout(function(){if(f.value&&f.value.expectedIndex===e){var t=calculateMissingRange();t&&t.missingIds.length>0&&(h.value++,s((0,i._)((0,r._)({},t),{timeoutCount:h.value})),p.value="waiting"),f.value=null}},n);f.value={expectedIndex:e,timer:t}}}function handleFragmentArrival(e){return f.value&&f.value.expectedIndex===e&&clearCurrentTimeout(),"waiting"===p.value&&null!==c.value&&e===c.value&&(p.value="normal",!0)}function isStartMarkerFragment(e){return e.fragmentType===l.E.Processing||e.fragmentType===l.E.BaseDeepLink}function isResetMarkerFragment(e){return e.fragmentType===l.E.Processing}function clearCacheBefore(e){var t=[],n=!0,r=!1,i=void 0;try{for(var a,o=d.value.keys()[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value;u<e&&t.push(u)}}catch(e){r=!0,i=e}finally{try{!n&&null!=o.return&&o.return()}finally{if(r)throw i}}var l=!0,s=!1,c=void 0;try{for(var v,f=t[Symbol.iterator]();!(l=(v=f.next()).done);l=!0){var p=v.value;d.value.delete(p)}}catch(e){s=!0,c=e}finally{try{!l&&null!=f.return&&f.return()}finally{if(s)throw c}}}function initializeExpectedIndex(e){null===c.value&&(c.value=e,startTimeoutMonitoring(e))}function isInOrder(e){return null===c.value||e===c.value}function addToCache(e){var t=e.indexInConversation;d.value.set(t,e)}function releaseConsecutiveFragments(){var e=[];if(null===c.value)return e;for(var t=c.value;d.value.has(t);){var n=d.value.get(t);e.push(n),d.value.delete(t),t++}return e.length>0&&(c.value=t,startTimeoutMonitoring(t)),e}function isDuplicate(e){return!!(null!==c.value&&e<c.value||d.value.has(e))||!1}return{processFragment:function processFragment(e){var t,n=e.indexInConversation;if(void 0===n){v.value.push(e);return}if(!isDuplicate(n)){if(null===c.value){if(isStartMarkerFragment(e)){initializeExpectedIndex(n),c.value=n+1;var r,i=releaseConsecutiveFragments();i.length>0&&(r=v.value).push.apply(r,(0,o._)(i));return}addToCache(e);return}if(isResetMarkerFragment(e)&&n>c.value){clearCurrentTimeout(),"waiting"===p.value&&(p.value="normal"),clearCacheBefore(n),c.value=n+1;var a,u=releaseConsecutiveFragments();u.length>0&&(a=v.value).push.apply(a,(0,o._)(u));return}var l=handleFragmentArrival(n),s=[];if(isInOrder(n)){s.push(e),c.value=n+1;var d=releaseConsecutiveFragments();s.push.apply(s,(0,o._)(d)),null!==c.value&&startTimeoutMonitoring(c.value)}else addToCache(e),l&&null!==c.value&&startTimeoutMonitoring(c.value);s.length>0&&(t=v.value).push.apply(t,(0,o._)(s))}},reset:function reset(){if("destroyed"!==p.value)clearCurrentTimeout(),p.value="normal",h.value=0,c.value=null,d.value.clear(),v.value=[]},flushAllCachedFragments:function flushAllCachedFragments(){if("destroyed"===p.value)return[];if(clearCurrentTimeout(),0===d.value.size)return[];var e,t=Array.from(d.value.entries()).sort(function(e,t){return(0,a._)(e,1)[0]-(0,a._)(t,1)[0]}).map(function(e){return(0,a._)(e,2)[1]});return d.value.clear(),t.length>0&&(e=v.value).push.apply(e,(0,o._)(t)),t},destroy:function destroy(){if("destroyed"!==p.value)clearCurrentTimeout(),p.value="destroyed",h.value=0,c.value=null,d.value.clear()},markStreamFinished:function markStreamFinished(){if("destroyed"!==p.value)clearCurrentTimeout(),p.value="finished"},orderedFragments:v}}},13802:function(e,t,n){"use strict";n.r(t),n.d(t,{useMessageRendererV1:function(){return useMessageRendererV1}});var r=n(41622),i=n(82726),a=n(377);n(25069),n(58486),n(42544),n(97542),n(99808),n(85203),n(86651),n(7948),n(72169),n(42876),n(33933),n(95477),n(64091),n(51109),n(87535),n(75204),n(97357),n(34333),n(74093),n(20768),n(41648),n(59339),n(47444),n(34757),n(85908),n(39995),n(22943),n(54767),n(55820),n(93225),n(33708),n(64322),n(47771),n(27461),n(23339),n(43648),n(87989),n(74719),n(13396),n(91313),n(36277);var o=n(93328),u=n(72769),l=n(18068),s=n(90909);function hasMarkdownTable(e){return/\|.*\|/.test(e)&&/\|\s*[-:]+\s*\|/.test(e)}function addFadeAnimation(e){e.classList.add("fade-in-text"),e.addEventListener("animationend",function(){e.classList.remove("fade-in-text")},{once:!0})}function identifySemanticUnitType(e){var t=e.trimStart();return t?/^#{1,6}\s/.test(t)?"heading":/^[-*+]\s/.test(t)||/^\d+\.\s/.test(t)?"list":/^>\s/.test(t)?"blockquote":t.startsWith("```")?"codeblock":hasMarkdownTable(e)?"table":"paragraph":"paragraph"}function splitIntoSemanticUnits(e){if(!e)return[];for(var t=[],n=e.split(/\n\n+/),r=0;r<n.length;r++){var i=n[r].trim();if(!!i){var a=identifySemanticUnitType(i);t.push({type:a,text:i,originalIndex:r})}}return t}function hasUnclosedHtmlTag(e){var t=e.trimEnd();return!!t&&(/<\/[^>]*$/.test(t)||/<(?![/!?])[^>]*$/.test(t))}function startsWithHtmlTagFragment(e){return/^\s*>/.test(e)}function extractHtmlTagFragment(e){return e.trimStart().startsWith(">")?{tagFragment:">",remainingText:e.replace(/^\s*>/,"")}:{tagFragment:"",remainingText:e}}function isIncompleteHeading(e){if(!e)return!1;var t=e.trimStart();return!(!/^#{1,6}\s/.test(t)||e.includes("\n\n"))&&/[\s（\(\[【「]$/.test(e)}function shouldAppendToPreviousParagraph(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.trimStart();if(!r)return!1;if(t&&startsWithHtmlTagFragment(e))return!0;if(n&&/^[-*+]\s/.test(r)){if(!e.match(/\n\n/))return!0;var i=e.split(/\n\n/)[0];if(i&&/^[-*+]\s/.test(i.trimStart()))return!0}return!(/^(#{1,6}\s|[-*+]\s|>\s|\d+\.\s|```|`|\|)/.test(r)&&!startsWithHtmlTagFragment(e)||hasMarkdownTable(e)||e.match(/^\n\n/))&&!0}function findLastListItem(e){var t=e.lastElementChild;if(t&&"LI"===t.tagName)return t;if(t&&("UL"===t.tagName||"OL"===t.tagName)){var n=t.lastElementChild;if(n&&"LI"===n.tagName)return n}for(;t;){if("UL"===t.tagName||"OL"===t.tagName){var r=t.lastElementChild;if(r&&"LI"===r.tagName)return r}var i=t.querySelector("ul:last-child, ol:last-child");if(i){var a=i.lastElementChild;if(a&&"LI"===a.tagName)return a}t=t.previousElementSibling}return null}function renderTextContent(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];try{if(i&&shouldAppendToPreviousParagraph(e)){var a,o=n.lastElementChild;if(o&&"P"===o.tagName&&!(null===(a=o.parentElement)||void 0===a?void 0:a.closest("ul, ol, blockquote"))){var u=e.replace(/\|\s*\n\n/g,"|\n"),l=t.renderInline(u),s=document.createElement("span");s.innerHTML=l;var c=document.createElement("span");for(c.className="appended-content";s.firstChild;)c.appendChild(s.firstChild);r&&addFadeAnimation(c),o.appendChild(c);return}var d=findLastListItem(n);if(d){var v=e.replace(/\n\n+/g," ").replace(/\|\s*\n\n/g,"|\n"),f=t.renderInline(v),p=document.createElement("span");p.innerHTML=f;var h=document.createElement("span");for(h.className="appended-content";p.firstChild;)h.appendChild(p.firstChild);r&&addFadeAnimation(h),d.appendChild(h);return}}var g=e.replace(/\|\s*\n\n/g,"|\n"),m=t.render(g),y=document.createElement("div");for(y.innerHTML=m,r&&Array.from(y.children).forEach(function(e){e instanceof HTMLElement&&addFadeAnimation(e)});y.firstChild;)n.appendChild(y.firstChild)}catch(t){var I=document.createElement("div");I.textContent=e,n.appendChild(I)}}function renderImageContent(e,t,n,r,i){try{if(null==r?void 0:r.has(t))return r.get(t);var a=document.createElement("div"),l=(0,o.h)(u.Z,{fragment:e,onImageClick:function(e,t){null==i||i(e,t)}});(0,o.sY)(l,a);var s=a.firstChild;return s&&n.set(t,s),s}catch(e){var c=document.createElement("div");return c.textContent="图片加载失败",c.style.padding="8px",c}}function renderTableMode(e,t,n,r,i,a){for(var o=t.childNodes.length,u=new Map,s=0;s<i;s++)e[s].fragmentType===l.E.ImageList&&r.has(s)&&u.set(s,r.get(s));t.innerHTML="";for(var c="",d=0;d<e.length;d++){var v=e[d];if(v.fragmentType===l.E.Text||v.fragmentType===l.E.Table)c+=v.text||"";else if(v.fragmentType===l.E.ImageList){c&&(renderTextContent(c,n,t,!1),c="");var f=renderImageContent(v,d,r,u,a);f&&t.appendChild(f)}}c&&renderTextContent(c,n,t,!1);var p=t.childNodes.length;if(p>o)for(var h=o;h<p;h++){var g=t.childNodes[h];g instanceof HTMLElement&&addFadeAnimation(g)}}function renderIncrementalMode(e,t,n,r,i,a){for(var o=!0,u=!1,s="",c=!1,d=!1,v=null,f=i;f<e.length;f++){var p=e[f];if(p.fragmentType===l.E.Text||p.fragmentType===l.E.Table){var h=p.text||"";if(u&&startsWithHtmlTagFragment(h)){var g=extractHtmlTagFragment(h),m=g.tagFragment,y=g.remainingText,I=s+m;u=!1,s="",h=y.trim()?I+y:I,o=c}if(d&&v&&/^[-*+]\s/.test(h.trimStart())){if(h.includes("\n\n")){var _=h.split(/\n\n+/),w=_[0],k=_.slice(1).join("\n\n"),S="".concat(v.text).concat(w);h=k.trim()?"".concat(S,"\n\n").concat(k):S}else h="".concat(v.text).concat(h);d=!1,v=null}if(hasUnclosedHtmlTag(h)){u=!0,s=h,c=o;continue}for(var b=splitIntoSemanticUnits(h),M=0;M<b.length;M++){var L=b[M];0===M&&o&&("paragraph"===L.type||d&&"list"===L.type)&&shouldAppendToPreviousParagraph(L.text,!1,d)?renderTextContent(L.text,n,t,!0,!0):renderTextContent(L.text,n,t,!0,!1),o=!1,v=L}if(b.length>0){var x=b[b.length-1];v=(d=isIncompleteHeading(h))?x:null}else d=!1,v=null;u=!1,s=""}else if(p.fragmentType===l.E.ImageList){if(u){var T=splitIntoSemanticUnits("".concat(s,">")),D=!0,N=!1,E=void 0;try{for(var R,U=T[Symbol.iterator]();!(D=(R=U.next()).done);D=!0){var P=R.value;renderTextContent(P.text,n,t,!0,!1)}}catch(e){N=!0,E=e}finally{try{!D&&null!=U.return&&U.return()}finally{if(N)throw E}}u=!1,s=""}var F=renderImageContent(p,f,r,null,a);F&&(addFadeAnimation(F),t.appendChild(F)),o=!1,u=!1,s=""}}if(u&&s){var j=splitIntoSemanticUnits("".concat(s,">")),O=!0,H=!1,W=void 0;try{for(var z,Z=j[Symbol.iterator]();!(O=(z=Z.next()).done);O=!0){var q=z.value;renderTextContent(q.text,n,t,!0,!1)}}catch(e){H=!0,W=e}finally{try{!O&&null!=Z.return&&Z.return()}finally{if(H)throw W}}}}function useMessageRendererV1(e){var t=e.containerRef,u=e.fragments,c=e.isFinished,d=e.onImageClick,v=e.onError,f=e.enableOrderManagement,p=void 0===f||f,h=e.fragmentTimeout,g=e.onFragmentTimeout,m=(0,o.iH)(null),y=new Map,I=0,_=0,w=p?(0,s.x)({fragmentTimeout:void 0===h?3e3:h,onTimeout:g}):null,k=(0,o.Fl)(function(){return p&&w?w.orderedFragments.value:u.value});function processNewFragments(){if(!!p&&!!w){var e=u.value.length;if(e>_){for(var t=_;t<e;t++){var n=u.value[t];w.processFragment(n)}_=e}}}function initMarkdownIt(){return _initMarkdownIt.apply(this,arguments)}function _initMarkdownIt(){return(_initMarkdownIt=(0,r._)(function(){var e,t,r,o,u,l;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(m.value)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Promise.all([n.e("2086").then(n.bind(n,28591)),Promise.all([n.e("3039"),n.e("6122")]).then(n.t.bind(n,61125,23)),Promise.all([n.e("3039"),n.e("2197"),n.e("3764")]).then(n.t.bind(n,48836,23))])];case 2:return t=(e=i._.apply(void 0,[a.sent(),3]))[0],r=e[1],o=e[2],u=t.default,m.value=u({breaks:!1,html:!0}),m.value.use(r.default),m.value.use(o.default,{defaultLanguageForUnknown:"html"}),m.value.enable("table"),[3,4];case 3:throw l=a.sent(),null==v||v(l),l;case 4:return[2]}})})).apply(this,arguments)}function render(){return _render.apply(this,arguments)}function _render(){return(_render=(0,r._)(function(){var e,n,r,i,u,s,c,f,p,h;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,4,,5]),m.value)return[3,2];return[4,initMarkdownIt()];case 1:a.sent(),a.label=2;case 2:return[4,(0,o.Y3)()];case 3:if(a.sent(),!(e=t.value))return[2];if(processNewFragments(),0===(r=(n=k.value).length)||r<=I)return[2];for(s=0,i="",u=!1;s<r;s++)(c=n[s]).fragmentType===l.E.Text?i+=c.text||"":c.fragmentType===l.E.Table&&(u=!0,i+=c.text||"");return u||hasMarkdownTable(i)?renderTableMode(n,e,m.value,y,I,d):renderIncrementalMode(n,e,m.value,y,I,d),I=r,[3,5];case 4:return f=a.sent(),null==v||v(f),(p=t.value)&&((h=document.createElement("div")).textContent="内容加载失败，请刷新重试",h.style.padding="12px",h.style.color="var(--error-color, #ff4d4f)",p.appendChild(h)),[3,5];case 5:return[2]}})})).apply(this,arguments)}function reset(){w&&w.reset(),I=0,_=0,y.clear()}function markStreamFinished(){w&&w.markStreamFinished()}function finishRendering(){w&&(w.markStreamFinished(),w.flushAllCachedFragments())}if((0,o.YP)(function(){return u.value.length},render,{immediate:!0}),p&&w&&(0,o.YP)(function(){return w.orderedFragments.value.length},render),c){var S="function"==typeof c?c:function(){return c.value};(0,o.YP)(S,function(e,t){e&&!t&&finishRendering()},{immediate:!1})}return(0,o.Jd)(function(){w&&w.destroy(),y.clear()}),{render:render,reset:reset,finishRendering:finishRendering,markStreamFinished:markStreamFinished}}},65559:function(e,t,n){"use strict";n.r(t),n.d(t,{useMessageRendererV2:function(){return useMessageRendererV2}});var r=n(41622),i=n(82726),a=n(377);n(74093),n(20768),n(41648),n(59339),n(47444),n(34757),n(85908),n(39995),n(22943),n(54767),n(55820),n(93225),n(33708),n(64322),n(47771),n(27461),n(23339),n(51109),n(34333),n(63235),n(15368),n(12970),n(8503),n(32207),n(13598),n(23541),n(63827),n(30488),n(82236),n(51938),n(33913),n(94949),n(17891),n(44258),n(38609),n(4787),n(44211),n(29338),n(73405),n(98754),n(31832),n(88402),n(56712),n(87535),n(75204),n(97357),n(36277),n(86651),n(87989),n(25069),n(58486),n(64091),n(85203),n(61047),n(74719),n(13396),n(91313),n(99808),n(42544),n(97542),n(95477),n(74934),n(72169),n(6045),n(10364),n(67673),n(87394),n(94941),n(48421),n(41593);var o=n(93328),u=n(72769),l=n(18068),s=n(90909);function addFadeAnimation(e){e.classList.add("fade-in-text"),e.addEventListener("animationend",function(){e.classList.remove("fade-in-text")},{once:!0})}function useMessageRendererV2(e){var t=e.containerRef,c=e.fragments,d=e.isFinished,v=e.onImageClick,f=e.onImageLoad,p=e.onTrackError,h=e.msgId,g=e.enableOrderManagement,m=void 0===g||g,y=e.fragmentTimeout,I=e.onFragmentTimeout,_=m?(0,s.x)({fragmentTimeout:void 0===y?3e3:y,onTimeout:I}):null,w=(0,o.Fl)(function(){return m&&_?_.orderedFragments.value:c.value}),k=(0,o.iH)(null),S=(0,o.iH)(null),b=(0,o.iH)(null),M=new Map,L=0,x=new Set;function processNewFragments(){if(!!m&&!!_)c.value.forEach(function(e){var t=e.indexInConversation;void 0!==t&&!x.has(t)&&(_.processFragment(e),x.add(t))})}function resetProcessingState(){x.clear(),L=0}function initLibraries(){return _initLibraries.apply(this,arguments)}function _initLibraries(){return(_initLibraries=(0,r._)(function(){var e,t,r;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(S.value&&b.value)return[2];return[4,Promise.all([Promise.all([n.e("3039"),n.e("3901")]).then(n.bind(n,20519)),Promise.all([n.e("3039"),n.e("5085")]).then(n.bind(n,34979))])];case 1:return t=(e=i._.apply(void 0,[a.sent(),2]))[0],r=e[1],S.value=t.marked,b.value=r.default,[2]}})})).apply(this,arguments)}function initHighlighter(){return _initHighlighter.apply(this,arguments)}function _initHighlighter(){return(_initHighlighter=(0,r._)(function(){var e;return(0,a.Jh)(this,function(e){switch(e.label){case 0:if(k.value)return[2];e.label=1;case 1:return e.trys.push([1,4,,5]),[4,Promise.all([n.e("3039"),n.e("5322")]).then(n.bind(n,90996))];case 2:return[4,(0,e.sent().getHighlighter)({themes:["github-light"],langs:["javascript","typescript","python","java","css","html","json","markdown","bash","sql"]})];case 3:return k.value=e.sent(),[3,5];case 4:return e.sent(),[3,5];case 5:return[2]}})})).apply(this,arguments)}function configureMarked(){if(!!S.value){var e=new S.value.Renderer;e.code=function(e,t){if(!k.value)return initHighlighter(),'<pre><code class="language-'.concat(t||"text",'">').concat(escapeHtml(e),"</code></pre>");try{return k.value.codeToHtml(e,{lang:t||"text",theme:"github-light"})}catch(n){return'<pre><code class="language-'.concat(t||"text",'">').concat(escapeHtml(e),"</code></pre>")}},S.value.setOptions({renderer:e,breaks:!1,gfm:!0,mangle:!1,headerIds:!1})}}function escapeHtml(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}function hasMarkdownTable(e){return/\|.*\|/.test(e)&&/\|\s*[-:]+\s*\|/.test(e)}function isTableComplete(e){return/\n\n+$/.test(e)}function applyAnimationToNewChildren(e,t){for(var n=Array.from(e.children),r=t;r<n.length;r++){var i=n[r];i instanceof HTMLElement&&addFadeAnimation(i)}}function renderImage(e,t){try{if(M.has(t))return M.get(t);var n=document.createElement("div"),r=(0,o.h)(u.Z,{fragment:e,onImageClick:function(e,t){null==v||v(e,t)},onImageLoad:function(e,t){null==f||f(e,t)}});(0,o.sY)(r,n);var i=n.firstChild;return i&&M.set(t,i),i}catch(e){return null}}function isEmptyUTag(e){return!(e.textContent||"").trim()}function normalizeHtmlTags(e,t,n){for(var r=0,i=!0;i&&r<100;){r++,i=!1;var a=e.querySelectorAll("u");if(0===a.length)break;var o=Array.from(a).reverse(),u=!0,l=!1,s=void 0;try{for(var c,d=o[Symbol.iterator]();!(u=(c=d.next()).done);u=!0){var v=c.value;if(!!e.contains(v)){if(v.querySelector(":scope > u")){i=!0;var f=v.parentNode;if(f)try{for(var p=document.createDocumentFragment(),h=0;v.firstChild&&h<1e3;)p.appendChild(v.firstChild),h++;if(v.firstChild)break;f.replaceChild(p,v)}catch(e){break}}}}}catch(e){l=!0,s=e}finally{try{!u&&null!=d.return&&d.return()}finally{if(l)throw s}}}r>=100&&t&&n&&n(t,"[RendererV2]标签存在异常嵌套");var g=Array.from(e.querySelectorAll("u")).reverse(),m=!0,y=!1,I=void 0;try{for(var _,w=g[Symbol.iterator]();!(m=(_=w.next()).done);m=!0){var k=_.value;if(!!e.contains(k)){if(isEmptyUTag(k)){var S=k.parentNode;if(S)try{for(var b=document.createDocumentFragment(),M=0;k.firstChild&&M<1e3;)b.appendChild(k.firstChild),M++;if(k.firstChild)continue;S.replaceChild(b,k)}catch(e){continue}}}}}catch(e){y=!0,I=e}finally{try{!m&&null!=w.return&&w.return()}finally{if(y)throw I}}}function optimizeListIndentation(e){if(!e.trim())return e;var t=e.split("\n"),n=[],r=!1,a=!1,o=!0,u=!1,l=void 0;try{for(var s,c=t[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=s.value;if(d.trimStart().startsWith("```")||d.trimStart().startsWith("~~~")){r=!r,n.push(d);continue}if(r){n.push(d);continue}var v=d.match(/^(\s+)(.*)/);if(!v){n.push(d);continue}var f=(0,i._)(v,3),p=f[1],h=f[2],g=p.length;if((/^\s*[-*+]\s+/.test(d)||/^\s*\d+\.\s+/.test(d))&&!a&&(a=!0,g>=4)){var m=" ".repeat(2);n.push(m+h);continue}if(g>0&&g%4==0){var y=" ".repeat(g/2);n.push(y+h)}else n.push(d)}}catch(e){u=!0,l=e}finally{try{!o&&null!=c.return&&c.return()}finally{if(u)throw l}}return n.join("\n")}var T=new Map;function renderMarkdownBlock(e){return _renderMarkdownBlock.apply(this,arguments)}function _renderMarkdownBlock(){return(_renderMarkdownBlock=(0,r._)(function(t){var n,r,i,u,l,s,c,d,v,f,g,m;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(!(!S.value||!b.value))return[3,2];return[4,initLibraries()];case 1:a.sent(),configureMarked(),a.label=2;case 2:return a.trys.push([2,4,,5]),n=optimizeListIndentation(n=t.replace(/\|\s*\n\n(?=\s*\|)/g,"|\n")),[4,S.value.parse(n)];case 3:r=a.sent(),i=b.value.sanitize(r,{ADD_TAGS:["math","maction","maligngroup","malignmark","u"],ADD_ATTR:["xmlns","encoding"],KEEP_CONTENT:!0}),(u=document.createElement("div")).innerHTML=i,u.className="markdown-block",normalizeHtmlTags(u,h,p),l=Array.from(u.querySelectorAll("u")).map(function(e){return e.textContent}).filter(Boolean),s=!0,c=!1,d=void 0;try{for(v=function(){var t=g.value;!T.has(t)&&(T.set(t,t),(0,o.Y3)(function(){var n;null===(n=e.onBlueWordImpression)||void 0===n||n.call(e,t)}))},f=l[Symbol.iterator]();!(s=(g=f.next()).done);s=!0)v()}catch(e){c=!0,d=e}finally{try{!s&&null!=f.return&&f.return()}finally{if(c)throw d}}return[2,u];case 4:return a.sent(),[2,null];case 5:return[2]}})})).apply(this,arguments)}var D=new Map;function renderAccumulated(){return _renderAccumulated.apply(this,arguments)}function _renderAccumulated(){return(_renderAccumulated=(0,r._)(function(){var e,n,r,i,u,s,c,d,v;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,7]),[4,(0,o.Y3)()];case 1:if(a.sent(),!(e=t.value)||0===(r=(n=w.value).length)||r<=L)return[2];for(s=0,i="",u=!1;s<r;s++)(c=n[s]).fragmentType===l.E.Text?i+=c.text||"":c.fragmentType===l.E.Table&&(u=!0,i+=c.text||"");if(!(u||hasMarkdownTable(i)))return[3,3];return[4,renderTableMode(n,e,r)];case 2:return a.sent(),[3,5];case 3:return[4,renderIncrementalMode(n,e,r)];case 4:a.sent(),a.label=5;case 5:return L=r,[3,7];case 6:return v=(d=a.sent())instanceof Error?d:Error(String(d)),h&&p&&p(h,"[RendererV2] 渲染失败: ".concat(v.message)),[3,7];case 7:return[2]}})})).apply(this,arguments)}function renderTableMode(e,t,n){return _renderTableMode.apply(this,arguments)}function _renderTableMode(){return(_renderTableMode=(0,r._)(function(t,n,r){var i,u,s,c,d,v,f,p,h,g,m,y,I,_,w,k,S,b;return(0,a.Jh)(this,function(a){switch(a.label){case 0:for(v=0,u=!!(i=n.parentElement)&&i.scrollHeight-i.scrollTop-i.clientHeight<100,s=n.childNodes.length,c=new Map,d=new Set;v<L;v++)t[v].fragmentType===l.E.ImageList&&M.has(v)&&(f=M.get(v),c.set(v,f),d.add(f));n.innerHTML="",p="",h=0,a.label=1;case 1:if(!(h<r))return[3,8];if((g=t[h]).fragmentType!==l.E.Text&&g.fragmentType!==l.E.Table)return[3,4];if(m=g.text||"",!(hasMarkdownTable(p+=m)&&isTableComplete(p)))return[3,3];return!D.has(h)&&(D.set(h,!0),(0,o.Y3)(function(){var t;null===(t=e.onTableRenderDone)||void 0===t||t.call(e)})),[4,renderMarkdownBlock(p)];case 2:(y=a.sent())&&n.appendChild(y),p="",a.label=3;case 3:return[3,7];case 4:if(g.fragmentType!==l.E.ImageList)return[3,7];if(!p)return[3,6];return[4,renderMarkdownBlock(p)];case 5:(I=a.sent())&&n.appendChild(I),p="",a.label=6;case 6:(_=c.get(h)||renderImage(g,h))&&n.appendChild(_),a.label=7;case 7:return h++,[3,1];case 8:if(!p)return[3,10];return[4,renderMarkdownBlock(p)];case 9:(w=a.sent())&&n.appendChild(w),a.label=10;case 10:if((k=n.childNodes.length)>s)for(S=s;S<k;S++)(b=n.childNodes[S])instanceof HTMLElement&&!d.has(b)&&addFadeAnimation(b);return u&&i&&(i.scrollTop=i.scrollHeight),[2]}})})).apply(this,arguments)}function renderIncrementalMode(e,t,n){return _renderIncrementalMode.apply(this,arguments)}function _renderIncrementalMode(){return(_renderIncrementalMode=(0,r._)(function(e,t,n){var r,i,o,u,s,c,d;return(0,a.Jh)(this,function(a){switch(a.label){case 0:i=!!(r=t.parentElement)&&r.scrollHeight-r.scrollTop-r.clientHeight<100,o="",u=L,s=L,a.label=1;case 1:if(!(s<n))return[3,6];if((c=e[s]).fragmentType!==l.E.Text&&c.fragmentType!==l.E.Table)return[3,2];return""===o&&(u=s),o+=c.text||"",[3,5];case 2:if(c.fragmentType!==l.E.ImageList)return[3,5];if(!o)return[3,4];return[4,renderOrAppendText(t,o,u===L)];case 3:a.sent(),o="",a.label=4;case 4:(d=renderImage(c,s))&&(addFadeAnimation(d),t.appendChild(d)),a.label=5;case 5:return s++,[3,1];case 6:if(!o)return[3,8];return[4,renderOrAppendText(t,o,u===L)];case 7:a.sent(),a.label=8;case 8:return i&&r&&(r.scrollTop=r.scrollHeight),[2]}})})).apply(this,arguments)}function renderOrAppendText(e,t,n){return _renderOrAppendText.apply(this,arguments)}function _renderOrAppendText(){return(_renderOrAppendText=(0,r._)(function(e,t,n){var r,i,o,u,l;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(!n||!((r=e.lastElementChild)&&r.classList.contains("markdown-block")))return[3,2];return[4,renderMarkdownBlock(i=(r.getAttribute("data-original-text")||"")+t)];case 1:if(o=a.sent())return o.setAttribute("data-original-text",i),u=r.children.length,e.replaceChild(o,r),o.children.length>u&&applyAnimationToNewChildren(o,u),[2];a.label=2;case 2:return[4,renderMarkdownBlock(t)];case 3:return(l=a.sent())&&(l.setAttribute("data-original-text",t),Array.from(l.children).forEach(function(e){e instanceof HTMLElement&&addFadeAnimation(e)}),e.appendChild(l)),[2]}})})).apply(this,arguments)}function reset(){_&&_.reset(),resetProcessingState(),M.clear()}function markStreamFinished(){_&&_.markStreamFinished()}function finishRendering(){_&&(_.markStreamFinished(),_.flushAllCachedFragments())}if(initLibraries().then(function(){configureMarked()}).catch(function(){}),(0,o.YP)(function(){return c.value.length},function(){processNewFragments()},{immediate:!0}),(0,o.YP)(function(){return w.value.length},renderAccumulated,{immediate:!0}),d){var N="function"==typeof d?d:function(){return d.value};(0,o.YP)(N,function(e,t){e&&!t&&finishRendering()},{immediate:!1})}return(0,o.Jd)(function(){null==_||_.destroy(),resetProcessingState(),M.clear(),k.value=null}),{render:renderAccumulated,reset:reset,finishRendering:finishRendering,markStreamFinished:markStreamFinished}}},61923:function(e,t,n){"use strict";n.d(t,{Ee:function(){return G.E},GI:function(){return O},Ml:function(){return Y}});var r=n(93328),i=n(41622),a=n(377);function useLazyLoadPrismaLanguage(){function loadPrismLanguage(){return _loadPrismLanguage.apply(this,arguments)}function _loadPrismLanguage(){return(_loadPrismLanguage=(0,i._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,Promise.all([n.e("3232").then(n.t.bind(n,94021,23)),n.e("7884").then(n.t.bind(n,53096,23)),n.e("4500").then(n.t.bind(n,65926,23)),n.e("1562").then(n.t.bind(n,78094,23)),n.e("5847").then(n.t.bind(n,30882,23)),n.e("9471").then(n.t.bind(n,6545,23)),n.e("2254").then(n.t.bind(n,96258,23)),n.e("1480").then(n.t.bind(n,41329,23)),n.e("235").then(n.t.bind(n,34418,23)),n.e("5029").then(n.t.bind(n,34265,23)),n.e("8369").then(n.t.bind(n,58421,23)),n.e("8518").then(n.t.bind(n,73855,23))]).catch(function(){})];case 1:return e.sent(),[2]}})})).apply(this,arguments)}(0,r.bv)((0,i._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,loadPrismLanguage()];case 1:return e.sent(),[2]}})}))}function useTextSelectionCopy(e){function isSelectionInContainer(t){if(!e.container.value||!t.rangeCount)return!1;var n=t.getRangeAt(0),r=e.container.value;return r.contains(n.commonAncestorContainer)||r.contains(n.startContainer)||r.contains(n.endContainer)}function handleCopy(){var t,n=window.getSelection();if(!!n&&!n.isCollapsed&&!!isSelectionInContainer(n)){var r=n.toString().trim();r&&(null===(t=e.onTextSelectedCopy)||void 0===t||t.call(e,r))}}(0,r.bv)(function(){document.addEventListener("copy",handleCopy)}),(0,r.SK)(function(){document.removeEventListener("copy",handleCopy)})}n(86651),n(36277),n(34333),n(27461),n(23339),n(51109),n(87989),n(43648),n(11354),n(55947),n(85203);let o={class:"divider"};function render(e,t){return(0,r.wg)(),(0,r.iD)("div",o)}var u=n(5010);let l=(0,u.default)({},[["render",render],["__scopeId","data-v-6b2b2213"]]),s={class:"message-interrupt"};function Interruptedvue_type_template_id_06ca3144_scoped_true_render(e,t){return(0,r.wg)(),(0,r.iD)("div",s," （已终止生成） ")}let c=(0,u.default)({},[["render",Interruptedvue_type_template_id_06ca3144_scoped_true_render],["__scopeId","data-v-06ca3144"]]);var d={key:0,class:"prompt-recommendation-container"},v={class:"prompt-recommendation-title"},f={class:"prompt-recommendation-guides"},p={class:"prompt-recommendation-guides-item"},h=["onClick"],g=(0,r.aZ)({__name:"PromptRecommendation",props:{title:{},guides:{}},emits:["guideClick"],setup:function(e,t){var n=t.emit,i=(0,r.Fl)(function(){return e.guides.length>=2}),a=(0,r.Fl)(function(){return e.guides.slice(0,3)});return function(t,o){return i.value?((0,r.wg)(),(0,r.iD)("div",d,[o[0]||(o[0]=(0,r._)("div",{class:"line"},null,-1)),(0,r._)("div",v,(0,r.zw)(e.title||"你可能还想问")+": ",1),(0,r._)("div",f,[(0,r._)("div",p,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.value,function(e,t){return(0,r.wg)(),(0,r.iD)("div",{key:t,class:"prompt-recommendation-guide",onClick:function(t){return n("guideClick",e)}},(0,r.zw)(e),9,h)}),128))])])])):(0,r.kq)("",!0)}}});let m=(0,u.default)(g,[["__scopeId","data-v-5c05d20a"]]);var y={class:"security-revoke"},I=(0,r.aZ)({__name:"SecurityRevoke",props:{revokeText:{}},setup:function(e){return function(e,t){return(0,r.wg)(),(0,r.iD)("div",y,(0,r.zw)(e.revokeText||"该内容因违反相关规定已被撤回"),1)}}});let _=(0,u.default)(I,[["__scopeId","data-v-4c851778"]]);n(69032),n(93354),n(97357),n(64961),n(12996),n(59564);let w={class:"spinner",xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18",fill:"none"};function ThinkProgressLoadingvue_type_template_id_369be091_scoped_true_render(e,t){return(0,r.wg)(),(0,r.iD)("svg",w,t[0]||(t[0]=[(0,r.uE)('<circle cx="8.99944" cy="9.00005" r="7.71429" fill="currentColor" fill-opacity="0.1" data-v-369be091></circle><path fill-rule="evenodd" clip-rule="evenodd" d="M4.48094 3.89374C4.88652 4.23888 4.93552 4.84747 4.59039 5.25305C3.7309 6.26306 3.21315 7.56995 3.21315 9.00023C3.21315 10.4305 3.7309 11.7374 4.59039 12.7474C4.93552 13.153 4.88652 13.7616 4.48094 14.1067C4.07535 14.4519 3.46677 14.4029 3.12163 13.9973C1.97651 12.6516 1.28458 10.9055 1.28458 9.00023C1.28458 7.09498 1.97651 5.34886 3.12163 4.00319C3.46677 3.59761 4.07535 3.54861 4.48094 3.89374Z" fill="url(#paint0_radial_242_3193)" data-v-369be091></path><path d="M14.7843 9.00023C14.7843 7.56995 14.2666 6.26306 13.4071 5.25305C13.0619 4.84747 13.1109 4.23888 13.5165 3.89374C13.9221 3.54861 14.5307 3.59761 14.8758 4.00319C16.021 5.34886 16.7129 7.09498 16.7129 9.00023C16.7129 10.9055 16.021 12.6516 14.8758 13.9973C14.5307 14.4029 13.9221 14.4519 13.5165 14.1067C13.1109 13.7616 13.0619 13.153 13.4071 12.7474C14.2666 11.7374 14.7843 10.4305 14.7843 9.00023Z" fill="url(#paint1_radial_242_3193)" data-v-369be091></path><defs data-v-369be091><radialGradient id="paint0_radial_242_3193" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(2.24888 14.1429) rotate(-93.5763) scale(10.3058 13.6468)" data-v-369be091><stop stop-color="currentColor" stop-opacity="0" data-v-369be091></stop><stop offset="1" stop-color="currentColor" data-v-369be091></stop></radialGradient><radialGradient id="paint1_radial_242_3193" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(14.1415 14.1429) rotate(-93.5763) scale(10.3058 13.6468)" data-v-369be091><stop stop-color="currentColor" data-v-369be091></stop><stop offset="1" stop-color="currentColor" stop-opacity="0" data-v-369be091></stop></radialGradient></defs>',4)]))}let k=(0,u.default)({},[["render",ThinkProgressLoadingvue_type_template_id_369be091_scoped_true_render],["__scopeId","data-v-369be091"]]);var S=["data-has-reference","data-show-avatar"],b={class:"progress-content"},M={class:"progress-text"},L={key:1,class:"avatar-group"},x=["src"],T=["src"],D={key:0,width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"progress-icon-arrow"},N={key:1,class:"skeleton-container"},E=(0,r.aZ)({__name:"ThinkProgress",props:{thinkProgress:{},querySource:{},isFinished:{type:Boolean},hasReference:{type:Boolean},isSendFailed:{type:Boolean},errorReason:{}},emits:["click","retry","impression"],setup:function(e,t){var n,o=t.emit;(0,r.sj)(function(e){return{"68c9f659":s.value}});var u=(0,r.Fl)(function(){var t,n;return(null===(n=e.querySource)||void 0===n?void 0:null===(t=n.avatars)||void 0===t?void 0:t.length)===2}),l=(0,r.Fl)(function(){return!!e.thinkProgress&&0!==e.thinkProgress.length&&(!!e.isFinished||e.thinkProgress.every(function(e){return 2===e.progressStatus}))}),s=(0,r.Fl)(function(){return e.hasReference?"pointer":"default"}),c=(0,r.Fl)(function(){if(null===(t=e.querySource)||void 0===t?void 0:t.text)return e.querySource.text;if(!(null===(n=e.thinkProgress)||void 0===n?void 0:n.length))return e.isFinished?"":"问题分析中";var t,n,r=e.thinkProgress.find(function(e){return 1===e.progressStatus});return r?r.progressText:l.value?"总结完成":""}),d=(0,r.Fl)(function(){return!e.isFinished||!!e.querySource});return(0,r.YP)(l,(n=(0,i._)(function(e){return(0,a.Jh)(this,function(t){switch(t.label){case 0:if(!e)return[3,2];return[4,(0,r.Y3)()];case 1:t.sent(),o("impression"),t.label=2;case 2:return[2]}})}),function(e){return n.apply(this,arguments)}),{immediate:!0}),function(t,n){var i,a;return(0,r.wg)(),(0,r.iD)(r.HY,null,[d.value?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"progress-wrapper","data-has-reference":e.hasReference,"data-show-avatar":u.value,onClick:n[0]||(n[0]=function(e){return o("click",l.value)})},[(0,r._)("div",b,[l.value?(0,r.kq)("",!0):((0,r.wg)(),(0,r.j4)(k,{key:0,class:"progress-icon"})),(0,r._)("span",M,(0,r.zw)(c.value),1),u.value?((0,r.wg)(),(0,r.iD)("span",L,[(0,r._)("img",{class:"avatar avatar-left",src:null===(i=e.querySource)||void 0===i?void 0:i.avatars[0]},null,8,x),(0,r._)("img",{class:"avatar avatar-right",src:null===(a=e.querySource)||void 0===a?void 0:a.avatars[1]},null,8,T),e.hasReference?((0,r.wg)(),(0,r.iD)("svg",D,n[1]||(n[1]=[(0,r._)("path",{d:"M6.75 4.5L11.25 9L6.75 13.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])],8,S)):(0,r.kq)("",!0),l.value||e.isFinished?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",N,n[2]||(n[2]=[(0,r._)("div",{class:"skeleton-line",style:{width:"100%"}},null,-1),(0,r._)("div",{class:"skeleton-line",style:{width:"90%"}},null,-1),(0,r._)("div",{class:"skeleton-line",style:{width:"80%"}},null,-1)])))],64)}}});let R=(0,u.default)(E,[["__scopeId","data-v-7863dba2"]]);var U={class:"message-timeout-wrapper"},P=(0,r.aZ)({__name:"Timeout",props:{showRetryButton:{type:Boolean}},emits:["retry"],setup:function(e,t){var n=t.emit;return function(e,t){return(0,r.wg)(),(0,r.iD)("div",U,[t[1]||(t[1]=(0,r._)("div",{class:"message-timeout-text"}," 遇到点小问题，请稍后再试 ",-1)),e.showRetryButton?((0,r.wg)(),(0,r.iD)("button",{key:0,class:"message-timeout-button",onClick:t[0]||(t[0]=function(e){return n("retry")})}," 重试 ")):(0,r.kq)("",!0)])}}});let F=(0,u.default)(P,[["__scopeId","data-v-5558216a"]]);var j=(0,r.aZ)({__name:"MessageAi",props:{message:{},minHeight:{},isLastMessage:{type:Boolean},guideWords:{},hasReference:{type:Boolean},showRetryButton:{type:Boolean},rendererVersion:{default:"v2"},onTrackError:{}},emits:["referenceClick","messageClick","guideClick","retry","imageClick","imageLoad","tableRenderDone","blueWordImpression","renderError","fragmentTimeout","referenceImpression","textSelectedCopy"],setup:function(e,t){var o=t.emit;(0,r.sj)(function(e){return{dc1355ea:h.value}});var u=(0,r.iH)(),s=(0,r.iH)();useLazyLoadPrismaLanguage();var d=(0,r.Fl)(function(){return e.message.dataFragments||[]}),v=(0,r.Fl)(function(){return e.message.isFinished||!1});useTextSelectionCopy({container:s,onTextSelectedCopy:function(e){o("textSelectedCopy",e)}});var f={containerRef:s,fragments:d,isFinished:v,msgId:e.message.msgId,onImageClick:function(e,t){o("imageClick",e,t)},onImageLoad:function(e,t){o("imageLoad",e,t)},onTableRenderDone:function(){o("tableRenderDone")},onBlueWordImpression:function(e){o("blueWordImpression",e)},onError:function(e){o("renderError",e)},onTrackError:e.onTrackError,onFragmentTimeout:function(e){o("fragmentTimeout",e)}};(0,r.bv)((0,i._)(function(){var t;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=[],"v1"===e.rendererVersion?(t.push(Promise.resolve().then(n.bind(n,13802)).then(function(e){e.useMessageRendererV1(f)})),t.push(Promise.all([n.e("5251"),n.e("5987")]).then(n.bind(n,32890))),t.push(n.e("2789").then(n.bind(n,74244)))):t.push(Promise.resolve().then(n.bind(n,65559)).then(function(e){e.useMessageRendererV2(f)})),[4,Promise.all(t)];case 1:return r.sent(),[3,3];case 2:return o("renderError",r.sent()),[3,3];case 3:return[2]}})}));var p=(0,r.Fl)(function(){return e.message.isFinished}),h=(0,r.Fl)(function(){return p.value||!e.isLastMessage?"0px":"".concat(e.minHeight||0,"px")});function onReferenceImpression(){o("referenceImpression")}function onReferenceClick(e){o("referenceClick",e)}function onMessageClick(e){o("messageClick",e)}var g=(0,r.Fl)(function(){return p.value&&e.guideWords&&e.isLastMessage}),y=(0,r.Fl)(function(){return p.value&&!e.isLastMessage});return function(e,t){var n,i,a,d;return(0,r.wg)(),(0,r.iD)("div",{ref_key:"messageContainerRef",ref:u,class:(0,r.C_)(["ai-message",{"ai-message-finished":e.message.isFinished}])},[(0,r.Wm)(R,{"think-progress":e.message.thinkProgress,"query-source":e.message.querySource,"is-finished":e.message.isFinished||!1,"has-reference":e.hasReference,onClick:onReferenceClick,onImpression:onReferenceImpression},null,8,["think-progress","query-source","is-finished","has-reference"]),e.message.isSecurityRevoked?((0,r.wg)(),(0,r.j4)(_,{key:0,"revoke-text":null===(n=e.message.securityRevokeFragment)||void 0===n?void 0:n.text},null,8,["revoke-text"])):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("div",{ref_key:"contentContainerRef",ref:s,onClick:onMessageClick},null,512),e.message.isInterrupted?((0,r.wg)(),(0,r.j4)(c,{key:0,class:"interrupt"})):e.message.isTimeout?((0,r.wg)(),(0,r.j4)(F,{key:1,"show-retry-button":e.showRetryButton,onRetry:t[0]||(t[0]=function(e){return o("retry")})},null,8,["show-retry-button"])):(0,r.kq)("",!0),g.value?((0,r.wg)(),(0,r.j4)(m,{key:2,style:{"margin-top":"24px"},title:null===(i=e.guideWords)||void 0===i?void 0:i.title,guides:(null===(d=e.guideWords)||void 0===d?void 0:null===(a=d.guides)||void 0===a?void 0:a.slice(0,3))||[],onGuideClick:t[1]||(t[1]=function(e){return o("guideClick",e)})},null,8,["title","guides"])):(0,r.kq)("",!0)],64)),y.value?((0,r.wg)(),(0,r.j4)(l,{key:2,class:"safe-area"})):(0,r.kq)("",!0)],2)}}}),O=(0,u.default)(j,[["__scopeId","data-v-4e333c32"]]);n(9557),n(96118);var H={key:0,class:"user-message__images"},W=["src"],z={key:0,class:"user-message__image-mask"},Z={key:1,class:"user-message__image-mask user-message__image-mask--error"},q={key:1,class:"user-message__text-wrapper"},V=(0,r.aZ)({__name:"MessageUser",props:{message:{}},emits:["imageClick"],setup:function(e,t){var n=t.emit;(0,r.sj)(function(e){return{"508ef7aa":l.value,0x27db70e:s.value}});var o=(0,r.iH)(null),u=(0,r.iH)(null),l=(0,r.iH)("28px"),s=(0,r.iH)("36px"),c=(0,r.iH)(!0),d=(0,r.iH)(!1),v=(0,r.Fl)(function(){return e.message.aiInputImageList&&e.message.aiInputImageList.length>0}),f=(0,r.Fl)(function(){var t;return(null===(t=e.message.aiInputImageList)||void 0===t?void 0:t[0])||null});function getLines(){if(!u.value||!(u.value instanceof Element))return 0;var e=Number.parseFloat(getComputedStyle(u.value).lineHeight);return Math.round(u.value.scrollHeight/e)}function adjustFontSize(){var e=getLines();e<4?(l.value="28px",s.value="36px"):e<7?(l.value="24px",s.value="32px"):(l.value="20px",s.value="28px")}function checkShouldCollapse(){var e=getLines();d.value=e>5,c.value=e>5}function handleExpandClick(){d.value&&c.value&&(c.value=!1)}function handleImageClick(e,t){n("imageClick",e.url,t)}return(0,r.bv)((0,i._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,r.Y3)()];case 1:return e.sent(),adjustFontSize(),checkShouldCollapse(),[2]}})})),function(e,t){return"user"===e.message.sender?((0,r.wg)(),(0,r.iD)("div",{key:0,ref_key:"userMessageEl",ref:o,class:"user-message"},[v.value&&f.value?((0,r.wg)(),(0,r.iD)("div",H,[(0,r._)("div",{class:"user-message__image-item",onClick:t[0]||(t[0]=function(e){return handleImageClick(f.value,0)})},[(0,r._)("img",{src:f.value.url,alt:"上传图片",class:"user-message__image"},null,8,W),"uploading"===f.value.status?((0,r.wg)(),(0,r.iD)("div",z,t[1]||(t[1]=[(0,r._)("div",{class:"user-message__image-loading"},null,-1)]))):"failed"===f.value.status?((0,r.wg)(),(0,r.iD)("div",Z,t[2]||(t[2]=[(0,r._)("span",{class:"user-message__image-error-text"},"上传失败",-1)]))):(0,r.kq)("",!0)])])):(0,r.kq)("",!0),e.message.text?((0,r.wg)(),(0,r.iD)("div",q,[(0,r._)("div",{ref_key:"textEl",ref:u,class:(0,r.C_)(["user-message__text",{"user-message__text--collapsed":c.value&&d.value}])},(0,r.zw)(e.message.text),3),d.value&&c.value?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"user-message__expand-button",onClick:handleExpandClick},t[3]||(t[3]=[(0,r._)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,r._)("path",{d:"M7.82825 9.66685C7.83022 9.66888 7.83223 9.67087 7.83426 9.67283C7.9403 9.77503 8.10911 9.77192 8.21132 9.66588L12.1917 5.536C12.448 5.27163 12.87 5.26506 13.1344 5.52132C13.3988 5.77759 13.4054 6.19965 13.1491 6.46402L8.75427 11.0226C8.74314 11.0339 8.74314 11.0339 8.73177 11.0451C8.3264 11.438 7.67924 11.4279 7.2863 11.0226L2.85986 6.47537C2.60359 6.21099 2.61016 5.78894 2.87453 5.53267C3.1389 5.27641 3.56096 5.28298 3.81723 5.54735L7.82825 9.66685Z",fill:"black","fill-opacity":"0.45"})],-1)]))):(0,r.kq)("",!0)])):(0,r.kq)("",!0)],512)):(0,r.kq)("",!0)}}}),Y=(0,u.default)(V,[["__scopeId","data-v-2c437084"]]);n(72769),n(7503),n(74093),n(20768),n(41648),n(59339),n(47444),n(34757),n(85908),n(39995),n(22943),n(54767),n(55820),n(93225),n(33708),n(64322),n(47771),n(13802),n(65559);var G=n(18068)},18068:function(e,t,n){"use strict";n.d(t,{E:function(){return i}});var r,i=((r={})[r.Text=1]="Text",r[r.Quote=2]="Quote",r[r.Image=3]="Image",r[r.Recommend=4]="Recommend",r[r.Note=5]="Note",r[r.Welcome=6]="Welcome",r[r.HightLight=7]="HightLight",r[r.Unknown=8]="Unknown",r[r.Processing=9]="Processing",r[r.QuerySource=10]="QuerySource",r[r.ImageList=11]="ImageList",r[r.BaseDeepLink=12]="BaseDeepLink",r[r.Table=13]="Table",r)},15084:function(e,t,n){"use strict";n.d(t,{A:function(){return a},I:function(){return useBaseImage}}),n(9557),n(42876),n(33933);var r=n(93328),i=n(90808);function parseSize(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"number"==typeof e?e:"string"==typeof e&&e.replace("px","").match(/^\d+$/g)?parseInt(e,10):void 0}n(72169),n(58486),n(95477);var a={src:{type:String,required:!0,default:""},loader:{type:Function,default:void 0},quality:{type:[Number,String],default:void 0},format:{type:[String],default:void 0},placeholder:{type:String,default:void 0},preload:{type:Boolean,default:void 0},preloadPlaceholder:{type:Boolean,default:void 0},lazyBoundary:{type:String,default:void 0},lazyRoot:{type:Object,default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},alt:{type:String,default:void 0},referrerpolicy:{type:String,default:void 0},usemap:{type:String,default:void 0},longdesc:{type:String,default:void 0},ismap:{type:Boolean,default:void 0},loading:{type:String,default:void 0,validator:function(e){return["lazy","eager"].includes(e)}},crossorigin:{type:[Boolean,String],default:void 0,validator:function(e){return["anonymous","use-credentials","",!0,!1].includes(e)}},decoding:{type:String,default:"async",validator:function(e){return["async","auto","sync"].includes(e)}},nonce:{type:[String],default:void 0},objectFit:{type:String,default:void 0},objectPosition:{type:String,default:void 0}},useBaseImage=function(e){return"lazy"===e.loading&&e.preload&&(0,i.O)("preload和lazy冲突"),{options:(0,r.Fl)(function(){return{placeholder:e.placeholder,preload:e.preload,preloadPlaceholder:e.preloadPlaceholder,lazyBoundary:e.lazyBoundary,lazyRoot:e.lazyRoot}}),attrs:(0,r.Fl)(function(){return{width:parseSize(e.width),height:parseSize(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:!0===e.crossorigin?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce}}),modifiers:(0,r.Fl)(function(){return{width:parseSize(e.width),height:parseSize(e.height),format:e.format,quality:e.quality}}),imgStyle:(0,r.Fl)(function(){return{objectFit:e.objectFit,objectPosition:e.objectPosition}}),src:(0,r.Fl)(function(){return e.src})}}},17352:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(70879),i=n(27337),a=n(93328),o=n(15084);n(36277),n(34333);var useImagePlaceholder=function(e){var t=e.placeholder,n=e.src,r=e.onPlaceholderLoaded,i=(0,a.iH)(!1),o=(0,a.Fl)(function(){return!!t.length&&!i.value&&t});return{decodeImgUnderPlaceholder:function(){var e=new Image;e.src=n,("decode"in e?e.decode():Promise.resolve()).catch(function(){}).then(function(){i.value=!0,r()})},placeholderValue:o}};n(74719),n(13396),n(91313),n(27461),n(23339),n(51109),n(87989),n(97542);var u=n(43685);n(90808);var useImagePreload=function(e){var t=e.options,n=e.src,r=e.attrs,i=t.value,a=i.preload,o=i.placeholder,l=i.preloadPlaceholder;a&&((0,u.Kf)({link:[{rel:"preload",as:"image",nonce:r.value.nonce,href:n.value}]}),l&&(0,u.Kf)({link:[{rel:"preload",as:"image",nonce:r.value.nonce,href:o}]}))};function tencentLoader(e){var t=e.src,n=e.quality,r=e.format;if(!n&&!r)return t;var i=new URL("https:".concat(t)).search,a=void 0===i?"":i;return a.includes("imageMogr2")||a.includes("format/")||a.includes("quality/")?t:"".concat(t).concat("".concat("?imageMogr2").concat(r?"/format/".concat(r):"").concat(n?"/quality/".concat(n):""))}n(80156),n(50721),n(29112),n(67275),n(59989),n(7099),n(67930),n(58486),n(42876),n(33933);var l=(0,a.aZ)({name:"XhsImg",props:o.A,emits:["load","error","placeholderLoaded"],setup:function(e,t){var n,u,l=t.expose,s=(0,o.I)(e),c=(0,a.Fl)(function(){return e.loader?e.loader({src:e.src,quality:e.quality?+e.quality:void 0,format:e.format}):tencentLoader({src:e.src,quality:e.quality?+e.quality:void 0,format:e.format})}),d=(0,a.Fl)(function(){return(0,i._)((0,r._)({},s.attrs.value),{"data-xhs-img":""})}),v=(0,a.iH)(),f=useImagePlaceholder({placeholder:null!==(u=null===(n=s.options.value)||void 0===n?void 0:n.placeholder)&&void 0!==u?u:"",src:c.value,onPlaceholderLoaded:function(){return t.emit("placeholderLoaded")}}),p=f.decodeImgUnderPlaceholder,h=f.placeholderValue;useImagePreload(s);var g=(0,a.Fl)(function(){return h.value||c.value});return(0,a.bv)(function(){var e;if(!!v.value)(null===(e=s.options.value.placeholder)||void 0===e?void 0:e.length)&&p(),v.value.complete&&(v.value.getAttribute("data-error")?t.emit("error",new Event("error")):t.emit("load",new Event("load"))),v.value.onload=function(e){t.emit("load",e)},v.value.onerror=function(e){t.emit("error",e)}}),l({imgElement:v,placeholder:h}),function(){return(0,a.h)("img",(0,r._)({ref:v,src:g.value,fetchPriority:e.preload?"high":"auto"},{},d.value,t.attrs))}}})},6028:function(e,t,n){"use strict";n.d(t,{yV:function(){return r.Z}});var r=n(17352);n(87989);var i=n(93328);(0,i.aZ)({props:{name:{type:String,required:!0},ignoreImgLoad:{type:Boolean,required:!1,default:!1},finalized:{type:Boolean,required:!1,default:!0}},setup:function(e,t){var n=t.slots,r=!1;return e.finalized?function(){var t=null===(a=n.default)||void 0===a?void 0:a.call(n);if(!r&&(r=!0,t)){var a,o,u,l=t[t.length-1],s=e.name||"__UNSET__",c=(null===(o=l.props)||void 0===o?void 0:o.id)||"__UNSET__",srcListener=function(e){return'function (event){var value=event.timeStamp;var legacy=value-window.performance.timing.navigationStart;if(legacy>0){value=legacy};window.__CUSTOM_IMG_REPORT__("'.concat(s,'","').concat(c,'",').concat(e,",value)}")};return[t,(0,i.h)("script",{innerHTML:"window.__CUSTOM_IMG_REPORT__=function (name,id,src,value){window.__CUSTOM_IMG_".concat(s,'_METRICS__={"name":name,"id":id,"src":src,"value":value||performance.now()}};window.__CUSTOM_IMG_REPORT__("').concat(s,'","').concat(c,'","__UNSET__");').concat(!e.ignoreImgLoad&&(null===(u=l.props)||void 0===u?void 0:u.id)?'window.__CUSTOM_IMG_ELEMENT__=document.getElementById("'.concat(l.props.id,'");if(window.__CUSTOM_IMG_ELEMENT__.tagName=="IMG"){(function(){var src=window.__CUSTOM_IMG_ELEMENT__.src;window.__CUSTOM_IMG_ELEMENT__.addEventListener("load",').concat(srcListener("src"),')})()}else{(function(){for(var el of window.__CUSTOM_IMG_ELEMENT__.getElementsByTagName("img")){var src=el.src;el.addEventListener("load",').concat(srcListener("src"),")}})()};"):"")})]}return[t]}:function(){var e;return null===(e=n.default)||void 0===e?void 0:e.call(n)}}}),n(15084)},90808:function(e,t,n){"use strict";n.d(t,{O:function(){return warnOnce}}),n(63235),n(15368),n(12970),n(8503),n(32207),n(13598),n(23541),n(63827),n(30488),n(82236),n(51938),n(33913),n(94949),n(17891),n(44258),n(38609),n(4787),n(44211),n(29338),n(73405),n(98754),n(31832),n(88402),n(56712),n(27461),n(23339),n(51109),n(34333);var warnOnce=function(e){},r=new Set;warnOnce=function(e){!r.has(e)&&console.warn(e),r.add(e)}},94526:function(e,t,n){"use strict";n.d(t,{QT:function(){return src_useRequest}}),n(74719),n(13396),n(34333),n(75973),n(87535),n(75204),n(97357);var r,i={},a=Symbol("GLOBAL_OPTIONS_PROVIDE_KEY"),o=n(70879),u=n(27337);n(74093),n(20768),n(41648),n(59339),n(47444),n(34757),n(85908),n(39995),n(22943),n(54767),n(55820),n(93225),n(33708),n(64322),n(47771),n(27461),n(23339),n(51109);var l=n(31547);n(55947),n(36277),n(72169),n(58486),n(99808),n(91313),n(87989),n(41593),n(58051);var s=n(93328);Object.prototype.toString;var isFunction=function(e){return e instanceof Function},utils_isArray=function(e){return Array.isArray(e)},utils_isObject=function(e){return null!==e&&(void 0===e?"undefined":(0,l._)(e))==="object"},isNil=function(e){return null==e},c="undefined"==typeof window,isDocumentVisibility=function(){var e;return!!(c||isNil(null===(e=window.document)||void 0===e?void 0:e.visibilityState))||"visible"===window.document.visibilityState},isOnline=function(){var e,t;return null===(t=!c&&(null===(e=window.navigator)||void 0===e?void 0:e.onLine))||void 0===t||t},resolvedPromise=function(){return new Promise(function(){return null})},refToRaw=function(e){return(0,s.dq)(e)?e.value:e},d=new Map,getCache=function(e){if(!isNil(e))return d.get(e)},setCache=function(e,t,n){var r=d.get(e);(null==r?void 0:r.timer)&&clearTimeout(r.timer);var i=setTimeout(function(){return d.delete(e)},t);d.set(e,(0,u._)((0,o._)({},n),{timer:i}))};n(43648);var lodash_debounce=function debounce(e,t,n){var r,i,a,o,u,l,s=0,c=!1,d=!1,v=!0,f=!t&&0!==t&&"function"==typeof window.requestAnimationFrame;if("function"!=typeof e)throw TypeError("Expected a function");function invokeFunc(t){var n=r,a=i;return r=void 0,i=void 0,s=t,o=e.apply(a,n)}function startTimer(e,t){return f?(window.cancelAnimationFrame(u),window.requestAnimationFrame(e)):setTimeout(e,t)}function cancelTimer(e){if(f)return window.cancelAnimationFrame(e);clearTimeout(e)}function leadingEdge(e){return s=e,u=startTimer(timerExpired,t),c?invokeFunc(e):o}function remainingWait(e){var n=e-l,r=e-s,i=t-n;return d?Math.min(i,a-r):i}function shouldInvoke(e){var n=e-l,r=e-s;return void 0===l||n>=t||n<0||d&&r>=a}function timerExpired(){var e=Date.now();if(shouldInvoke(e))return trailingEdge(e);u=startTimer(timerExpired,remainingWait(e))}function trailingEdge(e){return(u=void 0,v&&r)?invokeFunc(e):(r=void 0,i=void 0,o)}function cancel(){void 0!==u&&cancelTimer(u),s=0,r=void 0,l=void 0,i=void 0,u=void 0}function flush(){return void 0===u?o:trailingEdge(Date.now())}function pending(){return void 0!==u}function debounced(){for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];var s=Date.now(),c=shouldInvoke(s);if(r=n,i=this,l=s,c){if(void 0===u)return leadingEdge(l);if(d)return u=startTimer(timerExpired,t),invokeFunc(l)}return void 0===u&&(u=startTimer(timerExpired,t)),o}return t=+t||0,utils_isObject(n)&&(c=!!n.leading,a=(d="maxWait"in n)?Math.max(+n.maxWait||0,t):a,v="trailing"in n?!!n.trailing:v),debounced.cancel=cancel,debounced.flush=flush,debounced.pending=pending,debounced},lodash_throttle=function throttle(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw TypeError("Expected a function");return utils_isObject(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),lodash_debounce(e,t,{leading:r,trailing:i,maxWait:t})},v=n(66993),definePlugin=function(e){return e},f=new Map,setCacheQuery=function(e,t){f.set(e,t),t.then(function(t){return f.delete(e),t}).catch(function(){f.delete(e)})};n(86651),n(34885),n(29273);var p=new Map,trigger=function(e,t){p.has(e)&&p.get(e).forEach(function(e){return e(t)})},h=definePlugin(function(e,t){var n,r=t.cacheKey,i=t.cacheTime,a=void 0===i?6e5:i,o=t.staleTime,u=void 0===o?0:o,l=t.getCache,c=t.setCache;if(!r)return{};var d=isFunction(r)?r:function(){return r},v=(0,s.iH)(function(){}),_getCache=function(e){return l?l(e):getCache(e)},_setCache=function(e,t,n){c?c(e,n):setCache(e,t,n),trigger(e,n.data)},hasProp=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},subscribeCache=function(t){var n,r;return n=d(t),r=function(t){e.data.value=t},p.has(n)?p.get(n).push(r):p.set(n,[r]),function(){var e=p.get(n).indexOf(r);p.get(n).splice(e,1)}},h=d(),g=_getCache(h);return g&&hasProp(g,"data")&&(e.data.value=g.data,e.params.value=g.params),h&&(v.value=subscribeCache()),(0,s.SK)(function(){v.value()}),{onBefore:function(e){var t,n=_getCache(d(e));if(!n||!hasProp(n,"data"))return{};return(t=n.time,-1===u||t+u>new Date().getTime())?{isReturn:!0,loading:!1,data:n.data}:{data:n.data}},onQuery:function(t){var r,i=d(e.params.value);var a=(r=i,f.get(r));return a&&a!==n?function(){return a}:(n=a=t(),setCacheQuery(i,a),function(){return a})},onSuccess:function(e,t){var n=d(t);n&&(v.value(),_setCache(n,a,{data:e,params:t,time:new Date().getTime()}),v.value=subscribeCache(t))},onMutate:function(t){var n=d(e.params.value);n&&(v.value(),_setCache(n,a,{data:t,params:e.params.value,time:new Date().getTime()}),v.value=subscribeCache(e.params.value))}}}),g=definePlugin(function(e,t){var n=t.debounceInterval,r=t.debounceOptions,i=t.manual,a=(0,s.iH)(!1),o=(0,s.iH)(),u=(0,s.Fl)(function(){return r}),l=(0,s.Fl)(function(){return refToRaw(n)}),c=(0,s.iH)(e.context.runAsync);return!i&&(a.value=!0),(0,s.m0)(function(t){if(!isNil(l.value))o.value=lodash_debounce(function(e){return e()},l.value,u.value),e.context.runAsync=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise(function(e,n){if(a.value)a.value=!1,c.value.apply(c,(0,v._)(t)).then(e).catch(n);else o.value(function(){c.value.apply(c,(0,v._)(t)).then(e).catch(n)})})},t(function(){var t;null===(t=o.value)||void 0===t||t.cancel(),e.context.runAsync=c.value})}),{onCancel:function(){var e;null===(e=o.value)||void 0===e||e.cancel()}}}),m=definePlugin(function(e,t){var n=t.errorRetryCount,r=void 0===n?0:n,i=t.errorRetryInterval,a=void 0===i?0:i,o=(0,s.iH)(),u=(0,s.iH)(0),l=(0,s.Fl)(function(){return refToRaw(r)}),c=(0,s.Fl)(function(){return refToRaw(a)}),d=!1,resetRetriedCount=function(){u.value=0},v=(0,s.Fl)(function(){return c.value?c.value:1e3*Math.floor(Math.random()*Math.pow(2,Math.min(u.value,9))+1)}),errorRetryHooks=function(){var t,n=-1===l.value,r=u.value<l.value;return(n||r)&&(!n&&(u.value+=1),t=setTimeout(function(){d=!0,e.context.refresh()},v.value)),function(){return t&&clearTimeout(t)}},clearTimer=function(){o.value&&o.value()};return{onBefore:function(){!d&&resetRetriedCount(),d=!1,clearTimer()},onSuccess:function(){resetRetriedCount()},onError:function(){o.value=errorRetryHooks()},onCancel:function(){resetRetriedCount(),clearTimer()}}}),y=n(41622),I=n(57442),_=n(46490),w=n(51606),k=n(27292),S=n(14233),b=n(377);function setTimeoutPromise(e){var t,n;return new(function(e){function Timer(e){var r;return(0,_._)(this,Timer),r=(0,I._)(this,Timer,[e]),(0,w._)(r,"cancel",function(){n(),clearTimeout(t)}),r}return(0,k._)(Timer,e),Timer}((0,S._)(Promise)))(function(r){t=setTimeout(n=r,e)})}function getCurrentTime(){return new Date().getTime()}n(40562);var M=definePlugin(function(e,t){var n=t.loadingDelay,r=void 0===n?0:n,i=t.loadingKeep,a=void 0===i?0:i,o=(0,s.iH)(function(){}),u=(0,s.Fl)(function(){return refToRaw(r)}),l=(0,s.Fl)(function(){return refToRaw(a)}),c=0,d={},delayLoading=function(){var t;return u.value&&(t=setTimeout(function(){"pending"===e.status.value&&(e.loading.value=!0)},u.value)),function(){return t&&clearTimeout(t)}};return{onBefore:function(){return o.value(),o.value=delayLoading(),c=getCurrentTime(),{loading:!u.value}},onQuery:function(e){if(!l.value)return function(){return e()};d=setTimeoutPromise(l.value+u.value);var t,n=Promise.allSettled([(t=(0,y._)(function(){var t,n;return(0,b.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e()];case 1:return t=r.sent(),getCurrentTime()-c<=u.value&&d.cancel(),[2,Promise.resolve(t)];case 2:return n=r.sent(),getCurrentTime()-c<=u.value&&d.cancel(),[2,Promise.reject(n)];case 3:return[2]}})}),function _service(){return t.apply(this,arguments)})(),d]).then(function(e){var t=e[0];return"fulfilled"===t.status?t.value:Promise.reject(t.reason)});return function(){return n}},onCancel:function(){o.value()},onAfter:function(){o.value()}}});n(63235),n(15368),n(12970),n(8503),n(32207),n(13598),n(23541),n(63827),n(30488),n(82236),n(51938),n(33913),n(94949),n(17891),n(44258),n(38609),n(4787),n(44211),n(29338),n(73405),n(98754),n(31832),n(88402),n(56712);var L=new Set,x=new Set,T=new Set,observer=function(e){e.forEach(function(e){e()})};!c&&(null===(r=window)||void 0===r?void 0:r.addEventListener)&&(window.addEventListener("visibilitychange",function(){isDocumentVisibility()&&observer(x)},!1),window.addEventListener("focus",function(){return observer(L)},!1),window.addEventListener("online",function(){return observer(T)},!1));var utils_listener=function(e,t){var n;switch(e){case"FOCUS_LISTENER":n=L;break;case"RECONNECT_LISTENER":n=T;break;case"VISIBLE_LISTENER":n=x;break;default:throw Error("Unknown listener type")}return n.has(t)?function(){return null}:(!c&&n.add(t),function(){n.delete(t)})},D=definePlugin(function(e,t){var n=t.pollingInterval,r=t.pollingWhenHidden,i=void 0!==r&&r,a=t.pollingWhenOffline,o=void 0!==a&&a,u=t.errorRetryCount,l=void 0===u?0:u,c=(0,s.iH)(),d=(0,s.iH)(!1),v=(0,s.Fl)(function(){return refToRaw(n)}),f=(0,s.Fl)(function(){return refToRaw(l)}),p=[],addUnsubscribeList=function(e){e&&p.push(e)},isKeepPolling=function(){return(i||isDocumentVisibility())&&(o||isOnline())},polling=function(t){var n;if(!e.error.value||0===f.value){if(!isNil(v.value)&&v.value>=0){if(isKeepPolling())n=setTimeout(t,v.value);else{d.value=!0;return}}return function(){return n&&clearTimeout(n)}}},rePolling=function(){d.value&&isKeepPolling()&&(e.context.refresh(),d.value=!1)};return(0,s.YP)(v,function(){c.value&&(c.value(),c.value=polling(function(){return e.context.refresh()}))}),!i&&addUnsubscribeList(utils_listener("VISIBLE_LISTENER",rePolling)),!o&&addUnsubscribeList(utils_listener("RECONNECT_LISTENER",rePolling)),(0,s.SK)(function(){p.forEach(function(e){return e()})}),{onBefore:function(){var e;null===(e=c.value)||void 0===e||e.call(c)},onCancel:function(){var e;null===(e=c.value)||void 0===e||e.call(c)},onAfter:function(){c.value=polling(function(){return e.context.refresh()})}}}),N=definePlugin(function(e,t){var n=t.ready,r=void 0===n?(0,s.iH)(!0):n,i=t.manual,a=t.defaultParams,o=void 0===a?[]:a;return(0,s.YP)(r,function(t){if(!i&&t){var n;(n=e.context).run.apply(n,(0,v._)(o))}},{flush:"sync"}),{onBefore:function(){if(!(isFunction(r)?r():r.value))return{isBreak:!0}}}}),E=definePlugin(function(e,t){var n=t.refreshDeps,r=t.refreshDepsAction,i=t.manual;if(void 0===n||utils_isArray(n)&&0===n.length)return{};var a=utils_isArray(n)?n:[n];return(0,s.YP)(a,function(){r?r():!i&&e.context.refresh()}),{}}),utils_limitTrigger=function(e,t){var n=!1;return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];if(!n)n=!0,e.apply(void 0,(0,v._)(i)),setTimeout(function(){n=!1},t)}},R=definePlugin(function(e,t){var n=t.refreshOnWindowFocus,r=void 0!==n&&n,i=t.refocusTimespan,a=void 0===i?5e3:i,o=(0,s.Fl)(function(){return refToRaw(r)}),u=(0,s.Fl)(function(){return refToRaw(a)}),l=[],addUnsubscribeList=function(e){e&&l.push(e)},unsubscribe=function(){l.forEach(function(e){return e()})};return(0,s.m0)(function(){if(unsubscribe(),o.value){var t=utils_limitTrigger(e.context.refresh,u.value);addUnsubscribeList(utils_listener("VISIBLE_LISTENER",t)),addUnsubscribeList(utils_listener("FOCUS_LISTENER",t))}}),(0,s.SK)(function(){unsubscribe()}),{}}),U=definePlugin(function(e,t){var n=t.throttleInterval,r=t.throttleOptions,i=(0,s.iH)(),a=(0,s.Fl)(function(){return refToRaw(n)}),o=(0,s.Fl)(function(){return r}),u=(0,s.iH)(e.context.runAsync);return(0,s.m0)(function(t){if(!isNil(n))i.value=lodash_throttle(function(e){return e()},a.value,o.value),e.context.runAsync=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise(function(e,n){i.value(function(){u.value.apply(u,(0,v._)(t)).then(e).catch(n)})})},t(function(){var t;null===(t=i.value)||void 0===t||t.cancel(),e.context.runAsync=u.value})}),{onCancel:function(){var e;null===(e=i.value)||void 0===e||e.cancel()}}});n(6045),n(10364),n(67673);var P=n(64593);n(87394),n(94941),n(48421);var core_createQuery=function(e,t,n){var r,i,a,u,l,c=t.initialData,d=t.onSuccess,f=t.onError,p=t.onBefore,h=t.onAfter,g=(0,s.iH)(null!==(u=null==n?void 0:n.loading)&&void 0!==u&&u),m=(0,s.XI)(null!==(l=null==n?void 0:n.data)&&void 0!==l?l:c),I=(0,s.XI)(null==n?void 0:n.error),_=(0,s.iH)(null==n?void 0:n.params),w=(0,s.iH)([]),k=(0,s.XI)("pending"),S={};var M=(r={status:k,loading:g,data:m,error:I,params:_},i=[],function(e){Object.keys(e).forEach(function(t){r[t]&&(r[t].value=e[t])}),i.forEach(function(e){return e(r)})}),emit=function(e){for(var t,n,r,i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];if("onQuery"===e){;return{servicePromise:(t=w.value.map(function(e){return e.onQuery}).filter(Boolean),n=a[0],function(){for(var e=n,r=t.length-1;r>=0;r--)e=t[r](e);return e()})()}}var u=w.value.map(function(t){var n;return null===(n=t[e])||void 0===n?void 0:n.call.apply(n,[t].concat((0,v._)(a)))});return(r=Object).assign.apply(r,[{}].concat((0,v._)(u)))},L=(0,s.iH)(0);return S.runAsync=(0,y._)(function(){var t,n,r,i,a,u,l,s,c,g,m,y,I,w,k=arguments;return(0,b.Jh)(this,function(S){switch(S.label){case 0:for(n=Array(t=k.length),r=0;r<t;r++)n[r]=k[r];if(M({status:"pending"}),L.value+=1,i=L.value,l=void 0!==(u=(a=emit("onBefore",n)).isBreak)&&u,c=void 0!==(s=a.isReturn)&&s,g=(0,P._)(a,["isBreak","isReturn"]),l)return M({status:"settled"}),[2,resolvedPromise()];if(M((0,o._)({loading:!0,params:n},g)),c)return M({status:"settled",loading:!1}),[2,g.data];null==p||p(n),S.label=1;case 1:return S.trys.push([1,3,,4]),!(y=emit("onQuery",m=function(){return new Promise(function(t){return t(e.apply(void 0,(0,v._)(_.value)))})}).servicePromise)&&(y=m()),[4,y];case 2:if(I=S.sent(),i!==L.value)return[2,resolvedPromise()];return M({data:I,loading:!1,error:void 0,status:"settled"}),emit("onSuccess",I,n),null==d||d(I,n),i===L.value&&emit("onAfter",n,I,void 0),null==h||h(n),[2,I];case 3:if(w=S.sent(),i!==L.value)return[2,resolvedPromise()];throw M({loading:!1,error:w,status:"settled"}),emit("onError",w,n),null==f||f(w,n),i===L.value&&emit("onAfter",n,void 0,w),null==h||h(n),w;case 4:return[2]}})}),S.run=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];S.runAsync.apply(S,(0,v._)(t)).catch(function(e){!f&&console.error(e)})},S.cancel=function(){L.value+=1,M({loading:!1}),emit("onCancel")},S.refresh=function(){S.run.apply(S,(0,v._)(_.value||[]))},S.refreshAsync=function(){return(a=S).runAsync.apply(a,(0,v._)(_.value||[]))},S.mutate=function(e){var t,n=utils_isObject(t=isFunction(e)?e(m.value):e)?Object.assign(utils_isArray(t)?[]:{},t):t;M({data:n}),emit("onMutate",n)},{status:k,loading:g,data:m,error:I,params:_,plugins:w,context:S}},useQuery=function useQuery_useQuery(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=(0,s.f3)(a,{}),u=(0,o._)({},i,r,t),l=u.manual,c=u.defaultParams,d=core_createQuery(e,u);if(d.plugins.value=n.map(function(e){return e(d,u)}),!(void 0!==l&&l)){var f,p=d.params.value||(void 0===c?[]:c);(f=d.context).run.apply(f,(0,v._)(p))}return(0,s.SK)(function(){d.context.cancel()}),{loading:d.loading,data:d.data,error:d.error,params:d.params,cancel:d.context.cancel,refresh:d.context.refresh,refreshAsync:d.context.refreshAsync,mutate:d.context.mutate,run:d.context.run,runAsync:d.context.runAsync}},src_useRequest=function useRequest_useRequest(e,t,n){return useQuery(e,t,(0,v._)(n||[]).concat([M,m,g,D,U,R,E,N,h]))}},66398:function(e,t,n){"use strict";n.d(t,{rs:function(){return tc},Am:function(){return toast},zx:function(){return ee},zM:function(){return h5Toast},hP:function(){return e1.hP},qE:function(){return Z},bZ:function(){return eo},II:function(){return tl},OK:function(){return eG},Qm:function(){return eR},iz:function(){return eJ.i},i8:function(){return i.i},Ct:function(){return e0},VL:function(){return es},Lt:function(){return e1.Lt},hU:function(){return ec.Z},v0:function(){return e7},ce:function(){return c},TN:function(){return eQ.TN},ow:function(){return ew}});var r,i=n(681),a=n(93328);function modalvue_type_template_id_f9867710_scoped_true_ts_true_render(e,t,n,r,i,o){var u=(0,a.up)("reds-mask");return e.state.exist?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,a.C_)(["reds-modal",[{"reds-modal-open":e.state.open,"reds-modal-leave":e.state.leave}]]),role:"presentation"},[e.disableMask?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(u,{key:0,onClick:(0,a.iM)(e.handleMaskClick,["prevent"])},null,8,["onClick"])),e.$slots.close?((0,a.wg)(),(0,a.iD)("span",{key:1,onClick:t[0]||(t[0]=(0,a.iM)(function(t){return e.$emit("update:open",!1)},["prevent"]))},[(0,a.WI)(e.$slots,"close",{},void 0,!0)])):(0,a.kq)("",!0),(0,a.WI)(e.$slots,"default",{},void 0,!0)],2)):(0,a.kq)("",!0)}n(9557);var useLockScroll_createLockScroll=function createLockScroll(){var e=document.documentElement;return{lockScroll:function(){e.classList.add("reds-lock-scroll")},destroyLock:function(){e.classList.remove("reds-lock-scroll")}}},modal_useLockScroll=function useLockScroll(e){var t=useLockScroll_createLockScroll(),n=t.lockScroll,r=t.destroyLock;(0,a.bv)(function(){e.value&&n()}),(0,a.YP)(function(){return e.value},function(e){e?n():r()}),(0,a.SK)(function(){return r()})};let o={tabindex:"-1",class:"reds-mask","aria-label":"弹窗遮罩"};function maskvue_type_template_id_54eb1bb4_scoped_true_render(e,t){return(0,a.wg)(),(0,a.iD)("i",o)}var u=n(5010);let l=(0,u.default)({},[["render",maskvue_type_template_id_54eb1bb4_scoped_true_render],["__scopeId","data-v-54eb1bb4"]]);var s=(0,a.aZ)({name:"Dialog",components:{RedsMask:l},props:{open:{type:Boolean,default:function(){return!1}},disableMask:{type:Boolean,default:function(){return!1}},disableMaskClose:{type:Boolean,default:function(){return!1}},forceRender:{type:Boolean,default:function(){return!1}},removeTime:{type:Number,default:function(){return 0}},keepAlive:{type:Boolean,default:function(){return!1}}},emits:["update:open","remove","clickMask"],setup:function(e,t){var n=t.emit,r=(0,a.qj)({exist:e.forceRender,open:!1,leave:!1});modal_useLockScroll((0,a.Fl)(function(){return e.open}));var i=null,o={showModal:function(){i&&(clearTimeout(i),r.leave=!1),r.exist=!0,setTimeout(function(){r.open=!0})},hideModal:function(){r.open=!1},removeModal:function(){if(!e.removeTime){r.exist=!1,o.hideModal(),n("remove");return}r.leave=!0,o.hideModal(),i=setTimeout(function(){r.exist=!1,n("remove")},e.removeTime)}};return(0,a.bv)(function(){e.open&&o.showModal()}),(0,a.YP)(function(){return e.forceRender},function(e){e&&(r.exist=!0)}),(0,a.YP)(function(){return e.open},function(t){t?o.showModal():e.keepAlive?o.hideModal():o.removeModal()}),{state:r,handleMaskClick:function(){!e.disableMaskClose&&n("update:open",!1),n("clickMask")}}}}),c=(0,u.default)(s,[["render",modalvue_type_template_id_f9867710_scoped_true_ts_true_render],["__scopeId","data-v-f9867710"]]);n(87989);var d=(0,a.aZ)({__name:"dialog-paper",props:{position:{}},setup:function(e){return function(t,n){return(0,a.wg)(),(0,a.iD)("section",{class:(0,a.C_)(["reds-dialog-paper","reds-dialog-paper-".concat(e.position)]),tabIndex:"-1",role:"dialog"},[(0,a.WI)(t.$slots,"default")],2)}}});let v=(0,u.default)(d,[["__scopeId","data-v-fa27eb18"]]);n(42876),n(33933);function textvue_type_template_id_a847e398_scoped_true_ts_true_render(e,t,n,r,i,o){return(0,a.wg)(),(0,a.j4)((0,a.LL)(e.tag),{class:(0,a.C_)(["reds-text",e.className])},{default:(0,a.w5)(function(){return[(0,a.WI)(e.$slots,"default",{},void 0,!0)]}),_:3},8,["class"])}(0,a.aZ)({name:"Dialog",components:{RedsModal:c,RedsDialogPaper:v},props:{position:{type:String,validator:function(e){return["middle","bottom","right"].includes(e)},default:function(){return"middle"}}}}),n(34885);var f={display_label:"fs32 lh40 fw400",display_label_bold:"fs32 lh40 fw600",display_paragraph:"fs32 lh52 fw400",display_paragraph_bold:"fs32 lh52 fw600",display_number:"fs32 lh40 fw400 ff_number",display_number_bold:"fs32 lh40 ff_number_bold fw600",h1_label:"fs24 lh30 fw400",h1_label_bold:"fs24 lh30 fw600",h1_paragraph:"fs24 lh38 fw400",h1_paragraph_bold:"fs24 lh38 fw600",h1_number:"fs24 lh30 ff_number fw400",h1_number_bold:"fs24 lh30 ff_number_bold fw600",h2_label:"fs20 lh24 fw400",h2_label_bold:"fs20 lh24 fw600",h2_paragraph:"fs20 lh32 fw400",h2_paragraph_bold:"fs20 lh32 fw600",h2_number:"fs20 lh24 ff_number fw400",h2_number_bold:"fs20 lh24 ff_number_bold fw600",h3_label:"fs18 lh22 fw400",h3_label_bold:"fs18 lh22 fw600",h3_paragraph:"fs18 lh22 fw400",h3_paragraph_bold:"fs18 lh22 fw600",h3_number:"fs18 lh22 ff_number fw400",h3_number_bold:"fs18 lh22 ff_number_bold fw600",t1_label:"fs16 lh20 fw400",t1_label_bold:"fs16 lh20 fw600",t1_paragraph:"fs16 lh26 fw400",t1_paragraph_bold:"fs16 lh26 fw600",t1_number:"fs16 lh20 ff_number fw400",t1_number_bold:"fs16 lh20 ff_number_medium fw600",t2_label:"fs14 lh18 fw400",t2_label_bold:"fs14 lh18 fw600",t2_paragraph:"fs14 lh22 fw400",t2_paragraph_bold:"fs14 lh22 fw600",t2_number:"fs14 lh18 ff_number fw400",t2_number_bold:"fs14 lh18 ff_number_medium fw600",t3_label:"fs12 lh16 fw400",t3_label_bold:"fs12 lh16 fw600",t3_paragraph:"fs12 lh20 fw400",t3_paragraph_bold:"fs12 lh20 fw600",t3_number:"fs12 lh16 ff_number fw400",t3_number_bold:"fs12 lh16 ff_number_medium fw600",micro_label:"fs10 lh12 fw400",micro_label_bold:"fs10 lh12 fw600",micro_paragraph:"fs10 lh12 fw400",micro_paragraph_bold:"fs10 lh12 fw600",micro_number:"fs10 lh12 ff_number fw400",micro_number_bold:"fs10 lh12 ff_number_bold fw600"},p=(0,a.aZ)({name:"RedsText",props:{tag:{type:String,default:function(){return"div"}},align:{type:String,validator:function(e){return["left","center","right"].includes(e)}},lineClamp:{type:String,validator:function(e){return["1","2","3","4"].includes(e)}},color:{type:String},token:{type:String,validator:function(e){return["display_label","display_label_bold","display_paragraph","display_paragraph_bold","display_number","display_number_bold","h1_label","h1_label_bold","h1_paragraph","h1_paragraph_bold","h1_number","h1_number_bold","h2_label","h2_label_bold","h2_paragraph","h2_paragraph_bold","h2_number","h2_number_bold","h3_label","h3_label_bold","h3_paragraph","h3_paragraph_bold","h3_number","h3_number_bold","t1_label","t1_label_bold","t1_paragraph","t1_paragraph_bold","t1_number","t1_number_bold","t2_label","t2_label_bold","t2_paragraph","t2_paragraph_bold","t2_number","t2_number_bold","t3_label","t3_label_bold","t3_paragraph","t3_paragraph_bold","t3_number","t3_number_bold","micro_label","micro_label_bold","micro_paragraph","micro_paragraph_bold","micro_number","micro_number_bold"].includes(e)},default:function(){return"t1_paragraph"}}},setup:function(e){return{className:(0,a.Fl)(function(){var t;return[f[e.token],e.lineClamp?"line-clamp-".concat(e.lineClamp):"",e.align,{micro:(null===(t=e.token)||void 0===t?void 0:t.indexOf("micro"))>-1}]})}}});let h=(0,u.default)(p,[["render",textvue_type_template_id_a847e398_scoped_true_ts_true_render],["__scopeId","data-v-a847e398"]]);(0,a.aZ)({name:"DialogButton",components:{Text:h},props:{variant:{type:String,validator:function(e){return["primary","secondary"].includes(e)},default:function(){return"primary"}}}});(0,a.aZ)({name:"DialogButtonGroup",props:{direction:{type:String,validator:function(e){return["row","column"].includes(e)},default:function(){return"row"}}}}),(0,a.aZ)({name:"DialogTitle",components:{Text:h}}),(0,a.aZ)({name:"DialogContent"}),n(99808),n(58486);function Avatarvue_type_template_id_fb4722b8_ts_true_render(e,t,n,r,i,o){var u=(0,a.up)("RedsImage");return(0,a.wg)(),(0,a.j4)(u,(0,a.dG)({class:["reds-avatar",e.sizeInfo.classNameSize],style:e.sizeInfo.styleSize,width:e.size||48,height:e.size||48,"aspect-ratio":1},e.$attrs),{default:(0,a.w5)(function(){return[t[0]||(t[0]=(0,a._)("i",{class:"reds-avatar-border"},null,-1)),(0,a.WI)(e.$slots,"default")]}),_:3,__:[0]},16,["class","style","width","height"])}(0,a.aZ)({name:"DialogDesc",components:{Text:h},props:{desc:{type:String}},setup:function(e){return{paragraphs:(0,a.Fl)(function(){return(null==e?void 0:e.desc)?(null==e?void 0:e.desc.indexOf("\\n"))>-1?null==e?void 0:e.desc.split("\\n"):null==e?void 0:e.desc.split("\n"):[]})}}});var g=n(66993),m={key:0,class:"loading"},y={class:"reds-img-box"},I=["width","height","src","alt","data-load-status","loading"],_={class:"reds-img-box"};function Imagevue_type_template_id_149388ce_ts_true_render(e,t,n,r,i,o){var u,l,s,c=(0,a.up)("ProgressIndicator");return(0,a.wg)(),(0,a.iD)("span",{class:(0,a.C_)(["reds-image-container gray",e.classNames])},["loading"===e.loadStatus&&e.loadingAnimation?((0,a.wg)(),(0,a.iD)("div",m,[(0,a.Wm)(c,{percentage:e.loadingProgress,duration:500},null,8,["percentage"])])):(0,a.kq)("",!0),e.showImg?((0,a.wg)(),(0,a.iD)("span",{key:1,class:"reds-img-placeholder",style:(0,a.j5)(e.sizeStyle)},null,4)):(0,a.kq)("",!0),(0,a._)("picture",y,[(0,a._)("img",{crossorigin:"anonymous",class:(0,a.C_)(["reds-img",[{animated:e.animated}]]),width:e.width,height:e.height,src:null!==(s=e.renderSrc)&&void 0!==s?s:"",alt:e.alt,"data-load-status":e.loadStatus,loading:e.lazyLoad?"lazy":"eager",onError:t[0]||(t[0]=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleError&&(u=e).handleError.apply(u,(0,g._)(n))}),onLoad:t[1]||(t[1]=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleLoad&&(l=e).handleLoad.apply(l,(0,g._)(n))})},null,42,I)]),(0,a._)("div",_,["loading"===e.loadStatus?(0,a.WI)(e.$slots,"loading",{key:0}):(0,a.kq)("",!0),"error"===e.loadStatus?(0,a.WI)(e.$slots,"error",{key:1}):(0,a.kq)("",!0),(0,a.WI)(e.$slots,"default",{loadStatus:e.loadStatus})])],2)}var getSizeStyleByProps=function getSizeStyleByProps_getSizeStyleByProps(e,t,n){return n?{paddingTop:"".concat(1/n*100,"%")}:(!e&&!t&&console.warn("Image 组件必须设置 width 或 height 属性"),{width:e?"".concat(e,"px"):void 0,height:t?"".concat(t,"px"):void 0})},w=n(41622),k=n(377);n(36277),n(34333);var S=n(64704),b=JSON.parse('{"v":"5.6.9","fr":24,"ip":0,"op":16,"w":22,"h":22,"nm":"light","ddd":0,"assets":[{"id":"comp_0","layers":[{"ddd":0,"ind":9,"ty":4,"nm":"“图层 7”轮廓","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[1,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.552,0],[0,0],[0,-0.552],[0,0],[0.552,0],[0,0.552],[0,0]],"o":[[0,0],[0.552,0],[0,0],[0,0.552],[-0.552,0],[0,0],[0,-0.552]],"v":[[0,-3],[0,-3],[1,-2],[1,2],[0,3],[-1,2],[-1,-2]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[1,3],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0},{"ddd":0,"ind":10,"ty":4,"nm":"“图层 6”轮廓","sr":1,"ks":{"o":{"a":0,"k":10,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[-3.243,8.071,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.391,0.391],[0,0],[-0.391,0.39],[0,0],[-0.391,-0.39],[0.39,-0.391],[0,0]],"o":[[0,0],[-0.391,-0.391],[0,0],[0.391,-0.39],[0.39,0.391],[0,0],[-0.39,0.391]],"v":[[-2.121,2.121],[-2.121,2.121],[-2.121,0.707],[0.707,-2.122],[2.122,-2.122],[2.122,-0.707],[-0.707,2.121]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.20000001496,0.20000001496,0.20000001496,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[2.414,2.414],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0},{"ddd":0,"ind":11,"ty":4,"nm":"“图层 5”轮廓","sr":1,"ks":{"o":{"a":0,"k":25,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[-5,1,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0.552],[0,0],[-0.552,0],[0,0],[0,-0.552],[0.552,0],[0,0]],"o":[[0,0],[0,-0.552],[0,0],[0.552,0],[0,0.552],[0,0],[-0.552,0]],"v":[[-3,0],[-3,0],[-2,-1],[2,-1],[3,0],[2,1],[-2,1]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.20000001496,0.20000001496,0.20000001496,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[3,1],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0},{"ddd":0,"ind":12,"ty":4,"nm":"“图层 4”轮廓","sr":1,"ks":{"o":{"a":0,"k":40,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[-3.242,-3.243,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.391,0.391],[0,0],[-0.39,-0.391],[0,0],[0.39,-0.391],[0.391,0.39],[0,0]],"o":[[0,0],[0.391,-0.391],[0,0],[0.39,0.391],[-0.391,0.39],[0,0],[-0.391,-0.39]],"v":[[-2.121,-2.121],[-2.121,-2.121],[-0.707,-2.121],[2.122,0.707],[2.122,2.122],[0.707,2.122],[-2.121,-0.707]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.20000001496,0.20000001496,0.20000001496,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[2.414,2.414],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0},{"ddd":0,"ind":13,"ty":4,"nm":"“图层 3”轮廓","sr":1,"ks":{"o":{"a":0,"k":55,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[1,-5,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.552,0],[0,0],[0,-0.552],[0,0],[0.552,0],[0,0.552],[0,0]],"o":[[0,0],[0.552,0],[0,0],[0,0.552],[-0.552,0],[0,0],[0,-0.552]],"v":[[0,-3],[0,-3],[1,-2],[1,2],[0,3],[-1,2],[-1,-2]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.20000001496,0.20000001496,0.20000001496,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[1,3],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0},{"ddd":0,"ind":14,"ty":4,"nm":"“图层 2”轮廓","sr":1,"ks":{"o":{"a":0,"k":70,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[8.071,-3.243,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.391,0.391],[0,0],[-0.391,0.39],[0,0],[-0.391,-0.39],[0.39,-0.391],[0,0]],"o":[[0,0],[-0.391,-0.391],[0,0],[0.391,-0.39],[0.39,0.391],[0,0],[-0.39,0.391]],"v":[[-2.121,2.121],[-2.121,2.121],[-2.121,0.707],[0.707,-2.122],[2.122,-2.122],[2.122,-0.707],[-0.707,2.121]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.20000001496,0.20000001496,0.20000001496,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[2.414,2.414],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0},{"ddd":0,"ind":15,"ty":4,"nm":"“图层 5”轮廓 2","sr":1,"ks":{"o":{"a":0,"k":85,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[-5,1,0],"ix":1},"s":{"a":0,"k":[-100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0.552],[0,0],[-0.552,0],[0,0],[0,-0.552],[0.552,0],[0,0]],"o":[[0,0],[0,-0.552],[0,0],[0.552,0],[0,0.552],[0,0],[-0.552,0]],"v":[[-3,0],[-3,0],[-2,-1],[2,-1],[3,0],[2,1],[-2,1]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.20000001496,0.20000001496,0.20000001496,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[3,1],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0},{"ddd":0,"ind":16,"ty":4,"nm":"“图层 1”轮廓","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[5.343,5.343,0],"ix":2},"a":{"a":0,"k":[2.414,2.414,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.391,0.391],[0,0],[-0.39,-0.391],[0,0],[0.39,-0.391],[0.391,0.39],[0,0]],"o":[[0,0],[0.391,-0.391],[0,0],[0.39,0.391],[-0.391,0.39],[0,0],[-0.391,-0.39]],"v":[[-2.121,-2.121],[-2.121,-2.121],[-0.707,-2.121],[2.122,0.707],[2.122,2.122],[0.707,2.122],[-2.121,-0.707]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.20000001496,0.20000001496,0.20000001496,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[2.414,2.414],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0}]}],"layers":[{"ddd":0,"ind":1,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":0,"op":2,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":45,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":2,"op":4,"st":2,"bm":0},{"ddd":0,"ind":3,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":90,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":4,"op":6,"st":4,"bm":0},{"ddd":0,"ind":4,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":135,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":6,"op":8,"st":6,"bm":0},{"ddd":0,"ind":5,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":180,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":8,"op":10,"st":8,"bm":0},{"ddd":0,"ind":6,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":225,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":10,"op":12,"st":10,"bm":0},{"ddd":0,"ind":7,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":270,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":12,"op":14,"st":12,"bm":0},{"ddd":0,"ind":8,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":-45,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":14,"op":16,"st":14,"bm":0}],"markers":[]}'),M=JSON.parse('{"v":"5.6.9","fr":24,"ip":0,"op":16,"w":22,"h":22,"nm":"light","ddd":0,"assets":[{"id":"comp_0","layers":[{"ddd":0,"ind":1,"ty":4,"nm":"“图层 7”轮廓 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[1,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.552,0],[0,0],[0,-0.552],[0,0],[0.552,0],[0,0.552],[0,0]],"o":[[0,0],[0.552,0],[0,0],[0,0.552],[-0.552,0],[0,0],[0,-0.552]],"v":[[0,-3],[0,-3],[1,-2],[1,2],[0,3],[-1,2],[-1,-2]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.960784313725,0.960784313725,0.960784313725,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[1,3],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"“图层 6”轮廓 2","sr":1,"ks":{"o":{"a":0,"k":10,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[-3.243,8.071,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.391,0.391],[0,0],[-0.391,0.39],[0,0],[-0.391,-0.39],[0.39,-0.391],[0,0]],"o":[[0,0],[-0.391,-0.391],[0,0],[0.391,-0.39],[0.39,0.391],[0,0],[-0.39,0.391]],"v":[[-2.121,2.121],[-2.121,2.121],[-2.121,0.707],[0.707,-2.122],[2.122,-2.122],[2.122,-0.707],[-0.707,2.121]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.960784313725,0.960784313725,0.960784313725,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[2.414,2.414],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"“图层 5”轮廓 4","sr":1,"ks":{"o":{"a":0,"k":25,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[-5,1,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0.552],[0,0],[-0.552,0],[0,0],[0,-0.552],[0.552,0],[0,0]],"o":[[0,0],[0,-0.552],[0,0],[0.552,0],[0,0.552],[0,0],[-0.552,0]],"v":[[-3,0],[-3,0],[-2,-1],[2,-1],[3,0],[2,1],[-2,1]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.960784313725,0.960784313725,0.960784313725,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[3,1],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"“图层 4”轮廓 2","sr":1,"ks":{"o":{"a":0,"k":40,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[-3.242,-3.243,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.391,0.391],[0,0],[-0.39,-0.391],[0,0],[0.39,-0.391],[0.391,0.39],[0,0]],"o":[[0,0],[0.391,-0.391],[0,0],[0.39,0.391],[-0.391,0.39],[0,0],[-0.391,-0.39]],"v":[[-2.121,-2.121],[-2.121,-2.121],[-0.707,-2.121],[2.122,0.707],[2.122,2.122],[0.707,2.122],[-2.121,-0.707]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.960784313725,0.960784313725,0.960784313725,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[2.414,2.414],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"“图层 3”轮廓 2","sr":1,"ks":{"o":{"a":0,"k":55,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[1,-5,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.552,0],[0,0],[0,-0.552],[0,0],[0.552,0],[0,0.552],[0,0]],"o":[[0,0],[0.552,0],[0,0],[0,0.552],[-0.552,0],[0,0],[0,-0.552]],"v":[[0,-3],[0,-3],[1,-2],[1,2],[0,3],[-1,2],[-1,-2]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.960784313725,0.960784313725,0.960784313725,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[1,3],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"“图层 2”轮廓 2","sr":1,"ks":{"o":{"a":0,"k":70,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[8.071,-3.243,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0.391,0.391],[0,0],[-0.391,0.39],[0,0],[-0.391,-0.39],[0.39,-0.391],[0,0]],"o":[[0,0],[-0.391,-0.391],[0,0],[0.391,-0.39],[0.39,0.391],[0,0],[-0.39,0.391]],"v":[[-2.121,2.121],[-2.121,2.121],[-2.121,0.707],[0.707,-2.122],[2.122,-2.122],[2.122,-0.707],[-0.707,2.121]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.960784313725,0.960784313725,0.960784313725,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[2.414,2.414],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0},{"ddd":0,"ind":7,"ty":4,"nm":"“图层 5”轮廓 3","sr":1,"ks":{"o":{"a":0,"k":85,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[-5,1,0],"ix":1},"s":{"a":0,"k":[-100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0.552],[0,0],[-0.552,0],[0,0],[0,-0.552],[0.552,0],[0,0]],"o":[[0,0],[0,-0.552],[0,0],[0.552,0],[0,0.552],[0,0],[-0.552,0]],"v":[[-3,0],[-3,0],[-2,-1],[2,-1],[3,0],[2,1],[-2,1]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.960784313725,0.960784313725,0.960784313725,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[3,1],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0},{"ddd":0,"ind":8,"ty":4,"nm":"“图层 1”轮廓 2","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[5.343,5.343,0],"ix":2},"a":{"a":0,"k":[2.414,2.414,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-0.391,0.391],[0,0],[-0.39,-0.391],[0,0],[0.39,-0.391],[0.391,0.39],[0,0]],"o":[[0,0],[0.391,-0.391],[0,0],[0.39,0.391],[-0.391,0.39],[0,0],[-0.391,-0.39]],"v":[[-2.121,-2.121],[-2.121,-2.121],[-0.707,-2.121],[2.122,0.707],[2.122,2.122],[0.707,2.122],[-2.121,-0.707]],"c":true},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.960784313725,0.960784313725,0.960784313725,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"填充 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[2.414,2.414],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":73,"st":0,"bm":0}]}],"layers":[{"ddd":0,"ind":1,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":0,"op":2,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":45,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":2,"op":4,"st":2,"bm":0},{"ddd":0,"ind":3,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":90,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":4,"op":6,"st":4,"bm":0},{"ddd":0,"ind":4,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":135,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":6,"op":8,"st":6,"bm":0},{"ddd":0,"ind":5,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":180,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":8,"op":10,"st":8,"bm":0},{"ddd":0,"ind":6,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":225,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":10,"op":12,"st":10,"bm":0},{"ddd":0,"ind":7,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":270,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":12,"op":14,"st":12,"bm":0},{"ddd":0,"ind":8,"ty":0,"nm":"预合成 2","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":60,"ix":11},"r":{"a":0,"k":-45,"ix":10},"p":{"a":0,"k":[11,11,0],"ix":2},"a":{"a":0,"k":[11,11,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":22,"h":22,"ip":14,"op":16,"st":14,"bm":0}],"markers":[]}'),L=JSON.parse('{"nm":"loading","mn":"","layers":[{"ty":0,"nm":"素材x","mn":"","sr":1,"st":0,"op":60,"ip":0,"hd":false,"cl":"","ln":"","ddd":0,"bm":0,"tt":0,"hasMask":false,"td":0,"ao":0,"ks":{"a":{"a":0,"k":[50,50,0]},"s":{"a":0,"k":[100,100,100]},"sk":{"a":0,"k":0},"p":{"a":0,"k":[50,50,0]},"sa":{"a":0,"k":0},"o":{"a":0,"k":100},"r":{"a":0,"k":270}},"ef":[],"w":100,"h":100,"refId":"comp_0","ind":0},{"ty":0,"nm":"素材x","mn":"","sr":1,"st":0,"op":60,"ip":0,"hd":false,"cl":"","ln":"","ddd":0,"bm":0,"tt":0,"hasMask":false,"td":0,"ao":0,"ks":{"a":{"a":0,"k":[50,50,0]},"s":{"a":0,"k":[100,100,100]},"sk":{"a":0,"k":0},"p":{"a":0,"k":[50,50,0]},"sa":{"a":0,"k":0},"o":{"a":0,"k":100},"r":{"a":0,"k":90}},"ef":[],"w":100,"h":100,"refId":"comp_0","ind":1}],"ddd":0,"h":100,"w":100,"meta":{"a":"","k":"","d":"","g":"@lottiefiles/toolkit-js 0.20.0","tc":"#ffffff"},"v":"4.6.10","fr":60,"op":60,"ip":0,"assets":[{"nm":"","mn":"","layers":[{"ty":4,"nm":"“元素1”轮廓","mn":"","sr":1,"st":0,"op":61,"ip":0,"hd":false,"cl":"","ln":"","ddd":0,"bm":0,"tt":0,"hasMask":false,"td":0,"ao":0,"ks":{"a":{"a":0,"k":[50,50,0]},"s":{"a":0,"k":[100,100,100]},"sk":{"a":0,"k":0},"p":{"a":0,"k":[50,50,0]},"sa":{"a":0,"k":0},"o":{"a":0,"k":100},"r":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0.667,"y":1},"s":[90],"t":0},{"o":{"x":0.167,"y":0.167},"i":{"x":0.833,"y":0.833},"s":[810],"t":60}]}},"ef":[],"shapes":[{"ty":"gr","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Group","nm":"组 1","ix":1,"cix":2,"np":2,"it":[{"ty":"sh","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Shape - Group","nm":"路径 1","ix":1,"d":1,"ks":{"a":0,"k":{"c":false,"i":[[0,0],[11.577,0],[2.843,-10.682]],"o":[[-2.844,-10.682],[-11.578,0],[0,0]],"v":[[24.157,9.276],[0.001,-9.277],[-24.156,9.277]]}}},{"ty":"st","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Graphic - Stroke","nm":"描边 1","lc":2,"lj":1,"ml":10,"o":{"a":0,"k":100},"w":{"a":0,"k":6},"d":[],"c":{"a":0,"k":[0.5216,0.5216,0.5216]}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[50,34.277],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]},{"ty":"tm","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Filter - Trim","nm":"修剪路径 1","ix":2,"e":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0.667,"y":1},"s":[100],"t":0},{"o":{"x":0.333,"y":0},"i":{"x":0.667,"y":1},"s":[1],"t":29},{"o":{"x":0.167,"y":0.167},"i":{"x":0.833,"y":0.833},"s":[100],"t":58}],"ix":2},"o":{"a":0,"k":0,"ix":3},"s":{"a":0,"k":0,"ix":1},"m":1}],"ind":0}],"id":"comp_0","fr":30}]}'),x=JSON.parse('{"nm":"loading","mn":"","layers":[{"ty":0,"nm":"素材x","mn":"","sr":1,"st":0,"op":60,"ip":0,"hd":false,"cl":"","ln":"","ddd":0,"bm":0,"tt":0,"hasMask":false,"td":0,"ao":0,"ks":{"a":{"a":0,"k":[50,50,0]},"s":{"a":0,"k":[100,100,100]},"sk":{"a":0,"k":0},"p":{"a":0,"k":[50,50,0]},"sa":{"a":0,"k":0},"o":{"a":0,"k":100},"r":{"a":0,"k":270}},"ef":[],"w":100,"h":100,"refId":"comp_0","ind":0},{"ty":0,"nm":"素材x","mn":"","sr":1,"st":0,"op":60,"ip":0,"hd":false,"cl":"","ln":"","ddd":0,"bm":0,"tt":0,"hasMask":false,"td":0,"ao":0,"ks":{"a":{"a":0,"k":[50,50,0]},"s":{"a":0,"k":[100,100,100]},"sk":{"a":0,"k":0},"p":{"a":0,"k":[50,50,0]},"sa":{"a":0,"k":0},"o":{"a":0,"k":100},"r":{"a":0,"k":90}},"ef":[],"w":100,"h":100,"refId":"comp_0","ind":1}],"ddd":0,"h":100,"w":100,"meta":{"a":"","k":"","d":"","g":"@lottiefiles/toolkit-js 0.20.0","tc":"#ffffff"},"v":"4.6.10","fr":60,"op":60,"ip":0,"assets":[{"nm":"","mn":"","layers":[{"ty":4,"nm":"“元素1”轮廓","mn":"","sr":1,"st":0,"op":61,"ip":0,"hd":false,"cl":"","ln":"","ddd":0,"bm":0,"tt":0,"hasMask":false,"td":0,"ao":0,"ks":{"a":{"a":0,"k":[50,50,0]},"s":{"a":0,"k":[100,100,100]},"sk":{"a":0,"k":0},"p":{"a":0,"k":[50,50,0]},"sa":{"a":0,"k":0},"o":{"a":0,"k":100},"r":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0.667,"y":1},"s":[90],"t":0},{"o":{"x":0.167,"y":0.167},"i":{"x":0.833,"y":0.833},"s":[810],"t":60}]}},"ef":[],"shapes":[{"ty":"gr","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Group","nm":"组 1","ix":1,"cix":2,"np":2,"it":[{"ty":"sh","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Shape - Group","nm":"路径 1","ix":1,"d":1,"ks":{"a":0,"k":{"c":false,"i":[[0,0],[11.577,0],[2.843,-10.682]],"o":[[-2.844,-10.682],[-11.578,0],[0,0]],"v":[[24.157,9.276],[0.001,-9.277],[-24.156,9.277]]}}},{"ty":"st","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Graphic - Stroke","nm":"描边 1","lc":2,"lj":1,"ml":10,"o":{"a":0,"k":100},"w":{"a":0,"k":6},"d":[],"c":{"a":0,"k":[0.5843,0.5843,0.5922]}},{"ty":"tr","a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"sk":{"a":0,"k":0,"ix":4},"p":{"a":0,"k":[50,34.277],"ix":2},"r":{"a":0,"k":0,"ix":6},"sa":{"a":0,"k":0,"ix":5},"o":{"a":0,"k":100,"ix":7}}]},{"ty":"tm","bm":0,"cl":"","ln":"","hd":false,"mn":"ADBE Vector Filter - Trim","nm":"修剪路径 1","ix":2,"e":{"a":1,"k":[{"o":{"x":0.333,"y":0},"i":{"x":0.667,"y":1},"s":[100],"t":0},{"o":{"x":0.333,"y":0},"i":{"x":0.667,"y":1},"s":[1],"t":29},{"o":{"x":0.167,"y":0.167},"i":{"x":0.833,"y":0.833},"s":[100],"t":58}],"ix":2},"o":{"a":0,"k":0,"ix":3},"s":{"a":0,"k":0,"ix":1},"m":1}],"ind":0}],"id":"comp_0","fr":30}]}'),T=JSON.parse('{"v":"5.5.0","fr":24,"ip":0,"op":24,"w":50,"h":50,"nm":"loading@1x","ddd":0,"assets":[{"id":"comp_0","layers":[{"ddd":0,"ind":1,"ty":0,"nm":"素材x","refId":"comp_1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":270,"ix":10},"p":{"a":0,"k":[50,50,0],"ix":2},"a":{"a":0,"k":[50,50,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":100,"h":100,"ip":0,"op":24,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":0,"nm":"素材x","refId":"comp_1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":90,"ix":10},"p":{"a":0,"k":[50,50,0],"ix":2},"a":{"a":0,"k":[50,50,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"w":100,"h":100,"ip":0,"op":24,"st":0,"bm":0}]},{"id":"comp_1","layers":[{"ddd":0,"ind":1,"ty":4,"nm":"“元素1”轮廓","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":0,"s":[90],"e":[810]},{"t":24}],"ix":10},"p":{"a":0,"k":[50,50,0],"ix":2},"a":{"a":0,"k":[50,50,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[11.577,0],[2.843,-10.682]],"o":[[-2.844,-10.682],[-11.578,0],[0,0]],"v":[[24.157,9.276],[0.001,-9.277],[-24.156,9.277]],"c":false},"ix":2},"nm":"路径 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,0.1411764705882353,0.25882352941176473,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":1,"ml":10,"bm":0,"nm":"描边 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[50,34.277],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"变换"}],"nm":"组 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":0,"s":[100],"e":[1]},{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":11.6,"s":[1],"e":[100]},{"t":23.2}],"ix":2},"o":{"a":0,"k":0,"ix":3},"m":1,"ix":2,"nm":"修剪路径 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":24.4,"st":0,"bm":0}]}],"layers":[{"ddd":0,"ind":1,"ty":0,"nm":"loading","refId":"comp_0","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[25,25,0],"ix":2},"a":{"a":0,"k":[50,50,0],"ix":1},"s":{"a":0,"k":[50,50,100],"ix":6}},"ao":0,"w":100,"h":100,"ip":0,"op":720,"st":0,"bm":0}],"markers":[]}'),D={key:0,class:"reds-progress-indicator__media"},N=["width","height"],E=["r","cx","cy","stroke-width"],R=["r","cx","cy","stroke-width","stroke-dasharray","stroke-dashoffset","stroke"],U={key:0,class:"reds-progress-indicator__media-box__text"},P={key:1,class:"reds-progress-indicator__media-spinner"},F=(0,a.aZ)({__name:"ProgressIndicator",props:{type:{default:"assetLoading"},percentage:{default:0},showPercentage:{type:Boolean,default:!1},color:{default:"ThemeTertiaryLabel"},showBackground:{type:Boolean,default:!1},duration:{default:1500}},setup:function(e){var t=(0,a.f3)("redsTheme",function(){return{value:""}}),r=(0,a.iH)(),i=(0,a.iH)(40),o=(0,a.iH)(0),u=(0,a.iH)(2),l=(0,a.Fl)(function(){return""}),s=(0,a.Fl)(function(){return o.value}),c=(0,a.Fl)(function(){return i.value/2}),d=(0,a.Fl)(function(){return i.value/2}),v=(0,a.Fl)(function(){return(i.value-u.value)/2}),f=(0,a.Fl)(function(){return 2*Math.PI*v.value}),p=(0,a.Fl)(function(){return(1-o.value/100)*f.value}),runPercentageAnimation=function(){if(0!==e.percentage)var t=setInterval(function(){o.value>=e.percentage?clearInterval(t):o.value+=1},e.duration/e.percentage)},h=(0,a.iH)(null),g=(0,a.iH)(null);return(0,a.bv)((0,w._)(function(){var a,o;return(0,k.Jh)(this,function(u){switch(u.label){case 0:return[4,n.e("395").then(n.t.bind(n,48572,23))];case 1:if(a=u.sent(),o=function(e,t){t&&(r.value=a.loadAnimation({container:t,renderer:"svg",loop:!0,autoplay:!0,animationData:e}))},"assetLoading"===e.type&&e.percentage&&runPercentageAnimation(),e.showPercentage&&(i.value=48),"activityIndicator"===e.type&&((null==t?void 0:t.value)==="dark"?o(M,h.value):o(b,h.value)),"pageLoading"===e.type){if(e.showBackground)return o(T,g.value),[2];(null==t?void 0:t.value)==="dark"?o(x,g.value):o(L,g.value)}return[2]}})})),(0,a.Jd)(function(){r.value&&r.value.destroy()}),function(e,t){return(0,a.wg)(),(0,a.iD)("div",(0,a.dG)({class:"reds-progress-indicator"},e.$attrs),["assetLoading"===e.type&&e.percentage?((0,a.wg)(),(0,a.iD)("div",D,[(0,a._)("div",{class:"reds-progress-indicator__media-box",style:(0,a.j5)([{width:i.value+"px",height:i.value+"px"}])},[((0,a.wg)(),(0,a.iD)("svg",{width:i.value,height:i.value,class:"reds-progress-indicator__media-box-circle"},[(0,a._)("circle",{r:v.value,cx:c.value,cy:d.value,fill:"transparent","stroke-width":u.value,class:"reds-progress-indicator__media-box-circle--inactive"},null,8,E),(0,a._)("circle",{r:v.value,cx:c.value,cy:d.value,fill:"transparent","stroke-width":u.value,"stroke-linecap":"round","stroke-dasharray":f.value,"stroke-dashoffset":p.value,stroke:l.value},null,8,R)],8,N)),e.showPercentage?((0,a.wg)(),(0,a.iD)("span",U,(0,a.zw)(s.value)+"%",1)):(0,a.kq)("",!0)],4)])):(0,a.kq)("",!0),"assetLoading"!==e.type||e.percentage?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",P,[(0,a.Wm)(S.Z,{icon:"loading_mini",class:"reds-progress-indicator__media-spinner__icon"})])),"activityIndicator"===e.type?((0,a.wg)(),(0,a.iD)("div",{key:2,ref_key:"redsActivityIndicator",ref:h,class:"reds-progress-indicator__activity-indicator"},null,512)):(0,a.kq)("",!0),"pageLoading"===e.type?((0,a.wg)(),(0,a.iD)("div",{key:3,class:(0,a.C_)(["reds-progress-indicator__page-loading",e.showBackground?"has-background":""])},[(0,a._)("div",{ref_key:"redsPageLoading",ref:g,class:"reds-progress-indicator__page-loading__spinner"},null,512)],2)):(0,a.kq)("",!0)],16)}}}),j=(0,a.aZ)({name:"RedsImage",components:{ProgressIndicator:F},props:{src:{type:String,required:!0},alt:{type:String},width:{type:Number,required:!0},height:{type:Number,required:!0},aspectRatio:{type:Number},backgroundColor:{type:String},lazyLoad:{type:Boolean,default:!0},animated:{type:Boolean,default:!1},loadingAnimation:{type:Boolean,default:!1}},emits:["load","error"],setup:function(e,t){var n=t.emit,r=(0,a.iH)("loading"),i=(0,a.iH)(!1),o=(0,a.Fl)(function(){return getSizeStyleByProps(e.width,e.height,e.aspectRatio)}),u=(0,a.Fl)(function(){return[e.backgroundColor,{responsive:e.aspectRatio}]}),l=(0,a.iH)(80);(0,a.YP)(function(){return e.src},function(){r.value="loading"}),(0,a.bv)(function(){i.value=!0});var s=(0,a.Fl)(function(){return i.value?e.src:""});return{classNames:u,sizeStyle:o,handleLoad:function(e){r.value="loaded",l.value=100,n("load",e)},handleError:function(e){r.value="error",n("error",e)},loadStatus:r,showImg:i,renderSrc:s,loadingProgress:l}}});let O=(0,u.default)(j,[["render",Imagevue_type_template_id_149388ce_ts_true_render]]);var H=(0,a.aZ)({__name:"AvatarOutline",props:{color:{type:String,validator:function(e){return["red","yellow","white","gray"].includes(e)},default:"red"}},setup:function(e){return function(t,n){return(0,a.wg)(),(0,a.iD)("i",{class:(0,a.C_)(["reds-avatar-outline",[e.color]])},null,2)}}}),W=(0,a.aZ)({__name:"avatar-live",props:{animated:{type:Boolean,default:!1},text:{type:String,default:"直播"}},setup:function(e){return function(t,n){var r=(0,a.up)("reds-avatar-outline");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(H,{color:"red",class:(0,a.C_)([{animated:e.animated}])},null,8,["class"]),e.animated?((0,a.wg)(),(0,a.j4)(r,{key:0,color:"red",class:"animated-outside"})):(0,a.kq)("",!0),(0,a._)("i",{class:(0,a.C_)([e.animated?"reds-avatar-live-animation":"","reds-avatar-live"])},[(0,a.WI)(t.$slots,"default",{},function(){return[(0,a.Uk)((0,a.zw)(e.text||"直播"),1)]})],2)],64)}}}),getSizeInfo=function(e){var t=Number(e),n=!t,r="";return r=n?"size-auto":t<=32?"size-s":t<=44?"size-m":t<=52?"size-l":"size-xl",{classNameSize:r,styleSize:n?null:{width:"".concat(e,"px")}}},z=(0,a.aZ)({name:"Avatar",components:{RedsImage:O},props:{size:{type:Number}},setup:function(e){return{sizeInfo:(0,a.Fl)(function(){return getSizeInfo(e.size)}),size:e.size||48}}});z.AvatarOutline=H,z.AvatarLive=W;var Z=(0,u.default)(z,[["render",Avatarvue_type_template_id_fb4722b8_ts_true_render]]);(0,a.aZ)({name:"DialogAvatar",components:{Avatar:Z}});var q=n(51899),V=n.n(q),Y=["disabled"],G={class:"reds-button-new-box"},J={key:1,class:"reds-button-new-text"};function Buttonvue_type_template_id_13a85d7b_ts_true_render(e,t,n,r,i,o){var u=(0,a.up)("RedsIcon");return(0,a.wg)(),(0,a.iD)("button",(0,a.dG)({disabled:e.disabled,class:"reds-button-new"},e.$attrs,{class:[e.size,e.type,{"has-icon":e.icon||e.$slots.icon,"pure-icon":(e.icon||e.$slots.icon)&&!e.$slots.default,block:e.block,disabled:e.disabled,active:e.active,"color-outline":"outline"===e.color}],style:{width:e.fixedWidth}}),[(0,a._)("span",G,[e.icon?((0,a.wg)(),(0,a.j4)(u,{key:0,class:"reds-button__icon",icon:e.icon},null,8,["icon"])):(0,a.kq)("",!0),(0,a.WI)(e.$slots,"icon"),e.$slots.default?((0,a.wg)(),(0,a.iD)("span",J,[(0,a.WI)(e.$slots,"default")])):(0,a.kq)("",!0)])],16,Y)}var Q=n(70879),K=n(27337),X=n(56362),$=(0,a.aZ)({name:"RedsButton",components:{RedsIcon:i.i},props:(0,K._)((0,Q._)({},{type:{type:String,validator:function(e){return["primary","outlined","text","dark","icon"].includes(e)},default:"primary"},size:{type:String,validator:function(e){return["mini","small","medium","large","extraLarge"].includes(e)},default:"large"},icon:{type:String,default:""},active:{type:Boolean,default:!1},disabled:{type:Boolean},block:{type:Boolean},fixedWidth:{type:String}}),{icon:(0,K._)((0,Q._)({},X.Z.icon),{required:!1}),color:{type:String,required:!1}})}),ee=(0,u.default)($,[["render",Buttonvue_type_template_id_13a85d7b_ts_true_render]]),et={key:1,class:"reds-alert-wrapper__media__asset"},en={key:2,class:"reds-alert-title"},er={key:3,class:"reds-alert-content"},ei={key:0,class:"reds-dialog__message__overlay"},ea=(0,a.aZ)({__name:"Alert",props:{maskShow:{type:Boolean,default:!0},show:{type:Boolean},title:{type:String},width:{type:Number,default:270},message:{type:String},messageAlign:{type:String,validator:function(e){return["left","center"].includes(e)},default:"center"},confirmText:{type:String},cancelText:{type:String},footerLayout:{type:String,validator:function(e){return["horizontal","vertical"].includes(e)},default:"horizontal"},isBtnRounded:{type:Boolean,default:!1},isBtnMono:{type:Boolean,default:!1},showScrollOverlay:{type:Boolean,default:!1},mediaType:{type:String,validator:function(e){return["none","cover","asset"].includes(e)},default:"none"},mediaSrc:{type:String,default:""}},emits:["cancel","confirm","maskClick","close","open"],setup:function(e,t){var n=this,r=t.emit,i=(0,a.iH)(null),o=(0,a.iH)(!1),u=V()(function(){if(null==i?void 0:i.value){var e=i.value;e.scrollTop+e.clientHeight+30>e.scrollHeight?o.value=!0:o.value=!1}},100);return(0,a.YP)(function(){return e.show},function(e,t){t&&!e&&(r("close"),document.body.style.overflow="visible"),!t&&e&&(r("open"),document.body.style.overflow="hidden")}),function(e,t){return(0,a.wg)(),(0,a.iD)("div",(0,a.dG)({class:"reds-alert"},e.$attrs),[(0,a.Wm)(a.uT,{name:"reds-alert-mask-slide-fade","enter-active-class":"reds-alert-mask-slide-fade-enter-active","leave-active-class":"reds-alert-mask-slide-fade-leave-active","enter-from-class":"reds-alert-mask-slide-fade-enter-from","leave-to-class":"reds-alert-mask-slide-fade-leave-to"},{default:(0,a.w5)(function(){return[(0,a.wy)((0,a._)("div",{class:"reds-alert-mask",onClick:t[0]||(t[0]=function(e){return r("maskClick")})},null,512),[[a.F8,e.show&&e.maskShow]])]}),_:1}),(0,a.Wm)(a.uT,{name:"reds-alert-slide-fade","enter-active-class":"reds-alert-slide-fade-enter-active","leave-active-class":"reds-alert-slide-fade-leave-active","enter-from-class":"reds-alert-slide-fade-enter-from","leave-to-class":"reds-alert-slide-fade-leave-to"},{default:(0,a.w5)(function(){return[(0,a.wy)((0,a._)("div",{class:(0,a.C_)(["reds-alert-wrapper",[{"has-content":e.message,"slot-content":e.$slots.default,"has-media":"cover"===e.mediaType||"asset"===e.mediaType}]]),style:(0,a.j5)({width:e.width+"px"})},[e.mediaSrc&&"cover"===e.mediaType?((0,a.wg)(),(0,a.j4)(O,{key:0,src:e.mediaSrc,width:270,height:135},null,8,["src"])):(0,a.kq)("",!0),e.mediaSrc&&"asset"===e.mediaType?((0,a.wg)(),(0,a.iD)("div",et,[(0,a.Wm)((0,a.SU)(Z),{src:e.mediaSrc,size:48},null,8,["src"])])):(0,a.kq)("",!0),e.title||e.$slots.title?((0,a.wg)(),(0,a.iD)("div",en,[(0,a.WI)(e.$slots,"title"),(0,a.Uk)(" "+(0,a.zw)(e.title),1)])):(0,a.kq)("",!0),e.message||e.$slots.default?((0,a.wg)(),(0,a.iD)("div",er,[e.showScrollOverlay&&!o.value?((0,a.wg)(),(0,a.iD)("div",ei)):(0,a.kq)("",!0),e.message?((0,a.wg)(),(0,a.iD)("div",{key:1,ref_key:"messageRef",ref:i,class:(0,a.C_)(["reds-dialog__message",[{left:"left"===e.messageAlign}]]),onScroll:t[1]||(t[1]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.SU)(u)&&(0,a.SU)(u).apply(n,(0,g._)(t))})},(0,a.zw)(e.message),35)):(0,a.kq)("",!0),(0,a.WI)(e.$slots,"default")])):(0,a.kq)("",!0),e.confirmText||e.cancelText||e.$slots.footer?((0,a.wg)(),(0,a.iD)("div",{key:4,class:(0,a.C_)(["reds-alert-footer",[{"reds-alert-footer__round-button":e.isBtnRounded,vertical:"vertical"===e.footerLayout,mono:e.isBtnMono}]])},[(0,a.WI)(e.$slots,"footer"),e.cancelText?((0,a.wg)(),(0,a.j4)(ee,{key:0,type:"text",class:"reds-alert-footer__left",size:e.isBtnRounded?"small":"extraLarge",onClick:t[2]||(t[2]=function(e){return r("cancel")})},{default:(0,a.w5)(function(){return[(0,a.Uk)((0,a.zw)(e.cancelText),1)]}),_:1},8,["size"])):(0,a.kq)("",!0),e.confirmText?((0,a.wg)(),(0,a.j4)(ee,{key:1,type:e.isBtnRounded?"primary":"text",size:e.isBtnRounded?"medium":"extraLarge",class:(0,a.C_)(["reds-alert-footer__right",[{block:e.confirmText&&!e.cancelText,rounded:e.isBtnRounded}]]),onClick:t[3]||(t[3]=function(e){return r("confirm")})},{default:(0,a.w5)(function(){return[(0,a.Uk)((0,a.zw)(e.confirmText),1)]}),_:1},8,["type","size","class"])):(0,a.kq)("",!0)],2)):(0,a.kq)("",!0)],6),[[a.F8,e.show]])]}),_:3})],16)}}}),eo=ea,eu={class:"foot-btns"},el=(0,a.aZ)({__name:"Alert",props:{show:{type:Boolean},width:{},title:{},confirmText:{},cancelText:{},strongAlert:{type:Boolean}},emits:["cancel","confirm","maskClick","close","open"],setup:function(e,t){var n=t.emit,r=(0,a.iH)(e.show),handleCancel=function(){r.value=!1,n("cancel")},handleConfirm=function(){r.value=!1,n("confirm")},handleMaskClick=function(){r.value=!0};return(0,a.YP)(function(){return e.show},function(e){r.value=e}),function(t,i){return(0,a.wg)(),(0,a.j4)(eo,{show:r.value,width:e.width,title:e.title,onOpen:i[0]||(i[0]=function(e){return n("open")}),onMaskClick:handleMaskClick,onClose:i[1]||(i[1]=function(e){return n("close")})},{default:(0,a.w5)(function(){return[(0,a.WI)(t.$slots,"content")]}),footer:(0,a.w5)(function(){return[(0,a._)("div",eu,[(0,a._)("div",{class:(0,a.C_)(["foot-btn",{strong:e.strongAlert}]),onClick:handleConfirm},(0,a.zw)(t.confirmText),3),(0,a._)("div",{class:"foot-btn",onClick:handleCancel},(0,a.zw)(t.cancelText),1)])]}),_:3},8,["show","width","title"])}}}),es=(0,u.default)(el,[["__scopeId","data-v-76bb4847"]]),ec=n(7471),ed=n(64593);function apmLog(e,t){try{var n,r;null===(r=window.insight)||void 0===r||null===(n=r.sendCustomPoint)||void 0===n||n.call(r,{measurement_name:e,measurement_data:t})}catch(e){}}function apmLogToastMessage(e,t){try{["Cannot read properties of undefined","Cannot read properties of null","Cannot read property","is not a function","is not iterable","is not defined","undefined is not an object","null is not an object","Unexpected token"].some(function(t){return e.includes(t)})&&apmLog("log_toast_message",{stack:Error(e).stack,message:t?"".concat(e,": ").concat(t):e})}catch(e){}}n(1154),n(80013),n(97357),n(41593);var ev=((r={}).TOAST="toast",r.H5TOAST="h5Toast",r),ef="toast",ep={key:0,class:"reds-toast-container"},eh=(0,a.aZ)({__name:"reds-toast-web",props:{content:{type:String,required:!0},fixed:{type:Boolean,default:function(){return!0}},mode:{type:String,validator:function(e){return["light","dark"].includes(e)},default:function(){return"dark"}},position:{type:String,validator:function(e){return["top-center","center","top-left","top-right","bottom-left","bottom-center","bottom-right"].includes(e)},default:function(){return"center"}}},setup:function(e){var t=(0,a.Fl)(function(){return"light"===e.mode?"is-light":"is-dark"}),n=(0,a.iH)(!0);return function(r,i){return(0,a.wg)(),(0,a.j4)(a.uT,{name:"fade"},{default:(0,a.w5)(function(){return[n.value?((0,a.wg)(),(0,a.iD)("div",ep,[(0,a._)("div",{class:(0,a.C_)(["reds-toast",[r.position,t.value,e.fixed?"is-fixed":"is-absolute"]])},(0,a.zw)(r.content),3)])):(0,a.kq)("",!0)]}),_:1})}}});let eg=(0,u.default)(eh,[["__scopeId","data-v-286985d4"]]);var em={timeout:2e3,position:"center",mode:"dark"};function normalizeToastOptions(e){return e?(0,Q._)({},em,e):em}function h5Toast(e,t){if(!!e){var n=normalizeToastOptions(t),r=("string"==typeof n.container?document.querySelector(n.container):n.container)||document.body,i=r===document.body,o=document.createElement("div");r.appendChild(o),n.container;var u=(0,ed._)(n,["container"]),l=(0,a.ri)(eg,(0,K._)((0,Q._)({},u),{fixed:i,content:e}));l.mount(o),setTimeout(function(){l.unmount(),o.parentNode&&o.parentNode.removeChild(o)},n.timeout),apmLogToastMessage(e,null==t?void 0:t.extra)}}function toast(e,t){if(!!e){if(ef===ev.H5TOAST){h5Toast(e,t);return}h5Toast(e,t)}}n(20266);var ey=n(14978),eI=n.n(ey),useSticky=function useSticky_useSticky(e,t){var n=(0,a.iH)(!1),r=(0,a.iH)(null);if("undefined"==typeof window)return{element:r,sticky:n};var i=eI()(function(){var t,i=((null==r?void 0:null===(t=r.value)||void 0===t?void 0:t.getBoundingClientRect())||{}).top;if(void 0!==i){var a=i-e.value<=0;n.value!==a&&(n.value=a)}});return(0,a.bv)(function(){(null!=t?t:window).addEventListener("scroll",i)}),(0,a.Jd)(function(){(null!=t?t:window).removeEventListener("scroll",i)}),{element:r,sticky:n}},e_=(0,a.aZ)({__name:"reds-sticky-web",props:{offset:{default:0},container:{default:void 0}},emits:["sticky"],setup:function(e,t){var n=t.emit,r=(0,a.iH)({}),i=(0,a.iH)({}),o=(0,a.iH)(),computedWidth=function(){if(!!e.container){var t=getComputedStyle(e.container);o.value=Math.ceil(e.container.getBoundingClientRect().width-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10))}},u=useSticky((0,a.Fl)(function(){return e.offset}),e.container),l=u.element,s=u.sticky,setPlaceHolderHeight=function(){var e;(null===(e=l.value)||void 0===e?void 0:e.offsetHeight)&&(r.value={height:"".concat(l.value.offsetHeight,"px")})},whenSticky=function(){setPlaceHolderHeight(),e.offset&&(i.value={top:"".concat(e.offset,"px"),width:o.value?"".concat(o.value,"px"):""})},whenUnSticky=function(){r.value={},e.offset&&(i.value={})};(0,a.YP)(function(){return s.value},function(e){e?whenSticky():whenUnSticky(),n("sticky",e)});var setSize=function(){return computedWidth()};return(0,a.bv)(function(){computedWidth(),window.addEventListener("resize",setSize),s.value?whenSticky():whenUnSticky()}),(0,a.SK)(function(){window.removeEventListener("resize",setSize)}),function(e,t){return(0,a.wg)(),(0,a.iD)("div",{ref_key:"eleBox",ref:l,class:(0,a.C_)(["reds-sticky-box",{sticky:(0,a.SU)(s)}]),style:(0,a.j5)(r.value)},[(0,a._)("div",{class:"reds-sticky",style:(0,a.j5)(i.value)},[(0,a.WI)(e.$slots,"default")],4)],6)}}}),ew=(0,u.default)(e_,[["__scopeId","data-v-73916935"]]);n(74719),n(13396),n(43648),n(27461),n(23339),n(51109),n(6045),n(10364),n(67673),n(29273);var ek=n(30418),eS={class:"reds-uploader"},eb={class:"reds-uploader__wrapper"},eC={class:"reds-uploader__preview__image"},eM={class:"image_loading"},eA={key:2,class:"reds-uploader__preview__mask__msg"},eL=["onClick"],ex={class:"reds-uploader_input_desc"},eT={key:0},eD={key:2,class:"reds-uploader__desc"},eN=["disabled","multiple","accept"],eE=(0,a.aZ)({__name:"Uploader",props:{modelValue:{default:function(){return[]}},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},showDesc:{type:Boolean,default:!1},maxCount:{default:1/0},maxSize:{default:1/0},maxNumInRow:{default:void 0},accept:{default:"image/*"},description:{default:""},resultType:{default:"dataUrl"},beforeRead:{type:Function,default:void 0},afterRead:{type:Function,default:void 0}},emits:["update:modelValue","delete","clickUpload","oversize","uploadFailed","overUploaded"],setup:function(e,t){var n=t.emit,r=(0,a.iH)(),o=(0,a.iH)(!1);(0,a.YP)(function(){return[e.modelValue,e.maxCount]},function(){e.modelValue.length>=e.maxCount?o.value=!0:o.value=!1,!e.multiple&&(1===e.modelValue.length?o.value=!0:o.value=!1)},{deep:!0});var resetInput=function(){r.value&&(r.value.value="")},u=(0,a.Fl)(function(){if(e.showDesc){if(e.multiple){var t=e.modelValue.length;return"".concat(t,"/").concat(e.maxCount)}return"0/1"}return e.description||""}),l=(0,a.Fl)(function(){return e.maxNumInRow?{four:4===e.maxNumInRow,three:3===e.maxNumInRow,two:2===e.maxNumInRow}:{}}),onAfterRead=function(t){if((0,ek.zf)(t,e.maxSize)){if(Array.isArray(t)){var r=(0,ek.Rz)(t,e.maxSize);if(t=r.valid,n("oversize",r.invalid),!t.length){resetInput();return}}else{n("oversize",t),resetInput();return}}resetInput(),!e.multiple&&(o.value=!0),n("update:modelValue",(0,g._)(e.modelValue).concat((0,g._)((0,ek.qo)(t)))),e.afterRead&&e.afterRead(t)},readFile=function(t){var r=e.maxCount,i=e.modelValue,a=e.resultType;if(Array.isArray(t)){var o=+r-i.length;t.length>o&&(n("overUploaded"),t=t.slice(0,o)),Promise.all(t.map(function(e){return(0,ek.O2)(e,a)})).then(function(e){onAfterRead(t.map(function(t,n){var r={file:t,status:"success",message:""};if(e[n])r.content=e[n];else throw Error;return r}))}).catch(function(){onAfterRead(t.map(function(e){return{file:e,status:"failed",message:"",content:""}}))})}else(0,ek.O2)(t,a).then(function(e){var n={file:t};if(e)n.content=e;else throw Error;onAfterRead([n])}).catch(function(){onAfterRead([{file:t,content:"",status:"failed"}])})},onChange=function(t){if(o.value)return;var r=t.target.files;if(n("clickUpload",t),!e.disabled&&!!r&&!!r.length){var i=1===r.length?r[0]:[].slice.call(r);if("function"==typeof e.beforeRead){var a=e.beforeRead(i);if(!a){resetInput();return}(0,ek.tI)(a)&&a.then(function(e){e?readFile(e):readFile(i)}).catch(resetInput);return}readFile(i)}},deleteFile=function(t,r){var i=e.modelValue.slice(0);i.splice(r,1),n("update:modelValue",i),n("delete",t)};return function(e,t){return(0,a.wg)(),(0,a.iD)("div",eS,[(0,a._)("div",eb,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.modelValue,function(n,r){return(0,a.wg)(),(0,a.iD)("div",{key:r,class:(0,a.C_)(["reds-uploader__preview",[(0,Q._)({"reds-uploader__preview--narrowMargin":3===e.maxNumInRow||4===e.maxNumInRow},l.value)]])},[(0,a._)("div",eC,[n?((0,a.wg)(),(0,a.j4)((0,a.SU)(O),{key:0,class:(0,a.C_)(["reds-uploader__preview__image__content",[(0,K._)((0,Q._)({},l.value),{hidden:n.status&&["uploading","failed"].includes(n.status)})]]),src:n.content||n.url,width:"100%",height:"100%"},{loading:(0,a.w5)(function(){return[(0,a._)("div",eM,[(0,a.Wm)((0,a.SU)(F)),t[0]||(t[0]=(0,a._)("p",{class:"msg"}," 上传中 ",-1))])]}),_:2},1032,["class","src"])):(0,a.kq)("",!0)]),n.status&&["uploading","failed"].includes(n.status)?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,a.C_)(["reds-uploader__preview__mask",[(0,Q._)({},l.value)]])},["uploading"===n.status?((0,a.wg)(),(0,a.j4)((0,a.SU)(F),{key:0})):(0,a.kq)("",!0),"failed"===n.status?((0,a.wg)(),(0,a.j4)((0,a.SU)(i.i),{key:1,icon:(0,a.SU)("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjAgMjAiPjxwYXRoIGQ9Ik05LjI1IDYuMTA1YzAtLjM4LjMzNi0uNjg4Ljc1LS42ODhzLjc1LjMwOC43NS42ODh2NS4yOWMwIC4zOC0uMzM2LjY4OC0uNzUuNjg4cy0uNzUtLjMwOC0uNzUtLjY4OHpNMTAgMTQuNTg0YS43NS43NSAwIDEgMCAwLTEuNS43NS43NSAwIDAgMCAwIDEuNSIvPjxwYXRoIGQ9Ik0xOC4zMzMgMTBhOC4zMzMgOC4zMzMgMCAxIDEtMTYuNjY2IDAgOC4zMzMgOC4zMzMgMCAwIDEgMTYuNjY2IDBtLTEuNSAwYTYuODMzIDYuODMzIDAgMSAwLTEzLjY2NiAwIDYuODMzIDYuODMzIDAgMCAwIDEzLjY2NiAwIi8+PC9zdmc+"),class:"reds-uploader__preview__mask__fail",size:"20"},null,8,["icon"])):(0,a.kq)("",!0),n.message?((0,a.wg)(),(0,a.iD)("p",eA,(0,a.zw)(n.message),1)):(0,a.kq)("",!0)],2)):(0,a.kq)("",!0),(0,a._)("div",{class:"reds-uploader__preview__delete",onClick:function(e){return deleteFile(n,r)}},[(0,a.Wm)((0,a.SU)(i.i),{icon:(0,a.SU)("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxwYXRoIGQ9Ik0xOS4yMyA0Ljc3MmEuOTIuOTIgMCAwIDEgMCAxLjMwMWwtNS45MjggNS45MjggNS45MjYgNS45MjVhLjkyLjkyIDAgMCAxLTEuMzAyIDEuMzAybC01LjkyNS01LjkyNi01LjkyOCA1LjkyOWEuOTIuOTIgMCAwIDEtMS4yMTQuMDc2bC0uMDg3LS4wNzZhLjkyLjkyIDAgMCAxIDAtMS4zMDJsNS45MjgtNS45MjgtNS45My01LjkzYS45Mi45MiAwIDAgMSAxLjMtMS4zMDFsNS45MzEgNS45MyA1LjkyOC01LjkyOGEuOTIuOTIgMCAwIDEgMS4yMTUtLjA3N3oiLz48L3N2Zz4="),class:"reds-uploader__preview__delete__icon",width:"16",height:"16"},null,8,["icon"])],8,eL)],2)}),128)),(0,a._)("div",{class:(0,a.C_)(["reds-uploader__upload",[(0,Q._)({"reds-uploader__upload--disabled":o.value},l.value)]])},[(0,a._)("div",ex,[e.$slots.icon?((0,a.wg)(),(0,a.iD)("div",eT,[(0,a.WI)(e.$slots,"icon")])):((0,a.wg)(),(0,a.j4)((0,a.SU)(i.i),{key:1,icon:2===e.maxNumInRow?(0,a.SU)("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjAgMjAiPjxwYXRoIGQ9Ik0zLjI1IDQuMTY3aDEzLjVhLjc1Ljc1IDAgMCAxIDAgMS41SDMuMjVhLjc1Ljc1IDAgMCAxIDAtMS41TTMuMjUgOS4yNWgxMy41YS43NS43NSAwIDAgMSAwIDEuNUgzLjI1YS43NS43NSAwIDAgMSAwLTEuNU0xNi43NSAxNC4zMzNIMy4yNWEuNzUuNzUgMCAwIDAgMCAxLjVoMTMuNWEuNzUuNzUgMCAwIDAgMC0xLjUiLz48L3N2Zz4="):(0,a.SU)("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDIwIDIwIj48cGF0aCBmaWxsPSJjdXJyZW50Q29sb3IiIGQ9Ik04LjA4MiA5Ljg3N2EuMTcuMTcgMCAwIDAgMCAuMjI0bDUuNDc3IDYuMTQ0YS43Ni43NiAwIDAgMS0uMDUgMS4wNi43MjcuNzI3IDAgMCAxLTEuMDQtLjA1TDYuNDQgMTAuNDkyYS43Ni43NiAwIDAgMSAwLTEuMDFsNi4wMTctNi43MzhhLjcyNy43MjcgMCAwIDEgMS4wNC0uMDUuNzYuNzYgMCAwIDEgLjA0OSAxLjA2eiIvPjwvc3ZnPg=="),class:"reds-uploader__upload__add-icon",size:"24"},null,8,["icon"])),u.value?((0,a.wg)(),(0,a.iD)("p",eD,(0,a.zw)(u.value),1)):(0,a.kq)("",!0)]),(0,a._)("input",{ref_key:"inputRef",ref:r,type:"file",class:(0,a.C_)(["reds-uploader__input",{"reds-uploader__input_disabled":o.value}]),disabled:o.value,multiple:e.multiple,accept:e.accept,onChange:onChange},null,42,eN)],2)])])}}}),eR=eE,eU=["onClick"];function Tabvue_type_template_id_acd62c72_ts_true_render(e,t,n,r,i,o){var u,l;return(0,a.wg)(),(0,a.iD)("div",{ref:"tablistDom",class:(0,a.C_)([e.type,e.align,"reds-tabs-list"]),style:(0,a.j5)({padding:"0px ".concat(e.paddingContainer,"px")})},[(0,a.WI)(e.$slots,"default",{paddingLabel:e.paddingLabel}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.labelList,function(t,n){return(0,a.wg)(),(0,a.iD)("div",{key:n,ref_for:!0,ref:e.setRef,class:(0,a.C_)(t.className),style:(0,a.j5)({padding:"0px ".concat(e.paddingLabel,"px"),marginRight:"".concat(e.marginLabel,"px"),fontSize:"".concat(e.fontSize,"px")}),onClick:function(t){return e.clickHandler(n)}},[(0,a._)("span",null,(0,a.zw)(t.labelText),1)],14,eU)}),128)),"primary"===e.type?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"active-bar",style:(0,a.j5)({width:e.activeBarStyle.width+"px",left:e.activeBarStyle.left+"px",transition:e.enableIndicatorTrans?e.activeBarStyle.transition:""}),onTransitionend:t[0]||(t[0]=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleTransitionEnd&&(u=e).handleTransitionEnd.apply(u,(0,g._)(n))})},null,36)):(0,a.kq)("",!0),"tertiary"===e.type?((0,a.wg)(),(0,a.iD)("div",{key:1,class:"active-tag",style:(0,a.j5)({width:e.activeTagStyle.width+"px",left:e.activeTagStyle.left+"px",transition:e.enableIndicatorTrans?e.activeTagStyle.transition:""}),onTransitionend:t[1]||(t[1]=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.handleTransitionEnd&&(l=e).handleTransitionEnd.apply(l,(0,g._)(n))})},null,36)):(0,a.kq)("",!0)],6)}n(86651);var eP=n(84409);function useParent(e){var t=(0,a.f3)(e,null);if(t){var n=(0,a.FN)(),r=t.link,i=t.unlink,o=t.internalChildren;return n&&r(n),(0,a.SK)(function(){n&&i(n)}),{parent:t,index:(0,a.Fl)(function(){return n?o.indexOf(n):-1})}}return{parent:null,index:(0,a.iH)(-1)}}var eF=Symbol("tab"),ej={key:0,class:"reds-tab-item__left"},eO={key:2},eH=(0,a.aZ)({__name:"TabItem",props:{label:{default:""},itemKey:{default:""}},setup:function(e){var t=useParent(eF).parent,n={primary:{compact:10,regular:16,loose:16},secondary:{compact:10,regular:14,loose:14},tertiary:{compact:16,regular:16,loose:16}},r={primary:{compact:0,regular:0,loose:16},secondary:{compact:0,regular:0,loose:16},tertiary:{compact:0,regular:0,loose:0}},i=(0,a.Fl)(function(){if(t){var e=t.props,r=e.type,i=e.gap;return r&&i?n[r][i]:0}return 0}),o=(0,a.Fl)(function(){if(t){var e=t.props,n=e.type,i=e.gap;return n&&i?r[n][i]:0}return 0}),u=(0,a.Fl)(function(){if(t){var e=t.props,n=e.type,r=e.size;return"tertiary"===n||"regular"===r?16:14}return 0}),l=(0,a.Fl)(function(){return!!t&&t.props.activeKey===e.itemKey});return function(e,n){var r;return(0,a.wg)(),(0,a.iD)("div",{ref:null===(r=(0,a.SU)(t))||void 0===r?void 0:r.setRef,class:(0,a.C_)(["reds-tab-item",{active:l.value}]),style:(0,a.j5)({padding:"0px ".concat(i.value,"px"),marginRight:"".concat(o.value,"px"),fontSize:"".concat(u.value,"px")}),onClick:n[0]||(n[0]=function(n){var r;return null===(r=(0,a.SU)(t))||void 0===r?void 0:r.handleChildClick(e.itemKey)})},[e.$slots.left?((0,a.wg)(),(0,a.iD)("div",ej,[(0,a.WI)(e.$slots,"left")])):(0,a.kq)("",!0),e.$slots.default?(0,a.WI)(e.$slots,"default",{key:1}):(0,a.kq)("",!0),!e.$slots.default&&e.label?((0,a.wg)(),(0,a.iD)("span",eO,(0,a.zw)(e.label),1)):(0,a.kq)("",!0)],6)}}});n(69903),n(70805),n(5317),n(81167),n(22583),n(89655),n(88598),n(11530),n(16765),n(3398),n(90621),n(35904),n(73982),n(87683),n(59735),n(69167),n(27151),n(95341),n(53395),n(10074),n(31899),n(98398),n(94837),n(53077),n(14340),n(31578),n(46521),n(49932),n(78246),n(62444),n(34076),n(12334),n(68802),n(76267),n(83257),n(90834),n(907),n(18552);var eW=.1,ez="function"==typeof Float32Array;function A(e,t){return 1-3*t+3*e}function B(e,t){return 3*t-6*e}function C(e){return 3*e}function calcBezier(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}function getSlope(e,t,n){return 3*(1-3*n+3*t)*e*e+2*(3*n-6*t)*e+3*t}function binarySubdivide(e,t,n,r,i){var a,o,u=0;do(a=calcBezier(o=t+(n-t)/2,r,i)-e)>0?n=o:t=o;while(Math.abs(a)>1e-7&&++u<10);return o}function newtonRaphsonIterate(e,t,n,r){for(var i=t,a=0;a<4;++a){var o=getSlope(t,n,r);if(0===o)return t;i-=(calcBezier(t,n,r)-e)/o}return i}function LinearEasing(e){return e}var eB=function BezierEasing(e,t,n,r){if(!(e>=0&&e<=1&&n>=0&&n<=1))throw Error("bezier x values must be in [0, 1] range");if(e===t&&n===r)return LinearEasing;for(var i=ez?new Float32Array(11):Array(11),a=0;a<11;++a)i[a]=calcBezier(a*eW,e,n);function getTForX(t){for(var r=0,a=1,o=10;a!==o&&i[a]<=t;++a)r+=eW;var u=r+(t-i[a-=1])/(i[a+1]-i[a])*eW,l=getSlope(u,e,n);return l>=.001?newtonRaphsonIterate(t,u,e,n):0===l?u:binarySubdivide(t,r,r+eW,e,n)}return function(e){return 0===e||1===e?e:calcBezier(getTForX(e),t,r)}}(.2,0,.25,1),eZ=null,animateScrollTo=function scrollTo(e,t,n){var r=e.scrollLeft,i=t-r,a=Date.now();function animateScroll(){var t=Date.now()-a,o=eB(t/n);e.scrollLeft=o*i+r,t<n&&eZ(animateScroll)}!eZ&&(eZ=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function mockRaf(e){window.setTimeout(e,1e3/60)}),animateScroll()};function flattenVNodes(e){var t=[],traverse=function(e){Array.isArray(e)&&e.forEach(function(e){if((0,a.lA)(e)){var n;t.push(e),(null===(n=e.component)||void 0===n?void 0:n.subTree)&&(t.push(e.component.subTree),traverse(e.component.subTree.children)),e.children&&traverse(e.children)}})};return traverse(e),t}function sortChildren(e,t,n){var r,i=flattenVNodes(null==e?void 0:null===(r=e.subTree)||void 0===r?void 0:r.children);n.sort(function(e,t){return i.indexOf(e.vnode)-i.indexOf(t.vnode)});var a=n.map(function(e){return e.proxy});t.sort(function(e,t){return a.indexOf(e)-a.indexOf(t)})}function useChildren(e){var t=(0,a.qj)([]),n=(0,a.qj)([]),r=(0,a.FN)();return{children:t,linkChildren:function(i){(0,a.JJ)(e,(0,Q._)({link:function(e){e.proxy&&(n.push(e),t.push(e.proxy),sortChildren(r,t,n))},unlink:function(e){var r=n.indexOf(e);t.splice(r,1),n.splice(r,1)},children:t,internalChildren:n},i))}}}n(87535),n(75204),n(28636);var eq={width:0,height:0,left:0,scrollWidth:0,fontSize:0,offsetLeft:0},eV={width:0,height:0,left:0,scrollWidth:0,fontSize:0,offsetLeft:0,top:0,transition:"left 0.3s cubic-bezier(0.2, 0, 0.25, 1), width 0.3s cubic-bezier(0.2, 0, 0.25, 1)"};function getDomInfo(e){if(!e)return(0,Q._)({},eq);var t=e.getBoundingClientRect(),n=parseInt(window.getComputedStyle(e).fontSize,10),r={width:t.width,height:t.height,offsetLeft:e.offsetLeft,fontSize:n};return(0,Q._)({},eq,r)}function getContainerSize(e){return(0,K._)((0,Q._)({},eq),{width:e.clientWidth,scrollWidth:e.scrollWidth})}var eY=(0,a.aZ)({name:"RedsTabs",props:{labels:{type:Array,default:function(){return[]}},size:{type:String,default:"regular"},gap:{type:String,default:"regular"},type:{type:String,default:"primary"},activeKey:{type:[String,Number]},defaultActiveKey:{type:[String,Number],default:"0"},align:{type:String,default:"left"},containerPadding:{type:Number,default:void 0}},emits:["tab-click","change","tab-item-click"],setup:function(e,t){var n=t.emit,r=(0,a.iH)(!1),i=(0,a.iH)(Number(e.defaultActiveKey)),o=[],setRef=function(e){!o.includes(e)&&o.push(e)};(0,useChildren(eF).linkChildren)({props:e,setRef:setRef,handleChildClick:function(e){r.value=!0,n("tab-item-click",e)}});var u=(0,a.iH)(null),l=(0,a.qj)((0,Q._)({},eV)),s=(0,a.qj)((0,Q._)({},eV)),c=(0,Q._)({},eq),d=(0,a.qj)((0,Q._)({},eq)),getSize=function(){return"tertiary"===e.type?14:"regular"===e.size?16:14},v=(0,a.Fl)(getSize),f={primary:{compact:10,regular:16,loose:16},secondary:{compact:10,regular:14,loose:14},tertiary:{compact:14,regular:14,loose:14}},p={primary:{compact:0,regular:0,loose:16},secondary:{compact:0,regular:0,loose:16},tertiary:{compact:0,regular:0,loose:0}},h={primary:{compact:10,regular:4,loose:4},secondary:{compact:10,regular:6,loose:6},tertiary:{compact:0,regular:12,loose:12}},g=(0,a.Fl)(function(){return f[e.type][e.gap]}),m=(0,a.Fl)(function(){return p[e.type][e.gap]}),y=(0,a.Fl)(function(){return e.containerPadding||h[e.type][e.gap]});if(!e.labels)throw Error("props labels is required");function clickHandler(e){r.value=!0,i.value=e,n("tab-click",e)}var I=(0,a.iH)([]);(null==e?void 0:e.labels)&&(I=(0,a.Fl)(function(){return e.labels.map(function(t,n){return{labelText:t,className:{active:n===i.value,"reds-tab-item":!0},style:{padding:f[e.type][e.gap]}}})}));var scrollInToView=function(){var e=getDomInfo(o[i.value]),t=0,n=0;n=60==(t=(null==e?void 0:e.width)-2*g.value-4>60?60:(null==e?void 0:e.width)-2*g.value-4)?((null==e?void 0:e.width)-2*g.value-4-60)/2+(null==e?void 0:e.offsetLeft)+g.value+2:(null==e?void 0:e.offsetLeft)+g.value+2,l.width=t,s.width=null==e?void 0:e.width,s.top=((null==e?void 0:e.height)-2*(null==e?void 0:e.fontSize))/2;var r=n,a=null==e?void 0:e.offsetLeft;l.left=r,s.left=a,l.fontSize=getSize();var v=o[i.value];d.left=null==v?void 0:v.offsetLeft,d.width=null==v?void 0:v.offsetWidth;var f=null==u?void 0:u.value;if(f){var p=f.scrollLeft,h=c.width/2-(d.width/2+d.left-p),m=f.scrollWidth-f.offsetWidth,y=0;y=h>0?h-p>0?0:p-h:Math.min(p-h,m),p!==y&&null!==f&&animateScrollTo(f,y,300)}};(0,a.ic)(function(){(0,eP.DI)(scrollInToView,200)()});var _=(0,a.iH)(!1);function resizeDebounce(){(0,eP.DI)(scrollInToView,100)()}return(0,a.bv)(function(){null!==u.value&&(c=getContainerSize(u.value),_.value=u.value.scrollWidth>u.value.offsetWidth),_.value&&(0,a.Y3)(scrollInToView),e.activeKey&&(i.value=Number(e.activeKey)),(0,a.YP)(function(){return e.activeKey},function(e){i.value=Number(e)}),(0,a.YP)(function(){return i.value},function(e,t){n("change",e,t)}),(0,a.m0)(scrollInToView),window.addEventListener("resize",resizeDebounce)}),(0,a.SK)(function(){window.removeEventListener("resize",resizeDebounce)}),{clickHandler:clickHandler,labelList:I,setRef:setRef,activeBarStyle:l,tablistDom:u,activeTagStyle:s,isOverSize:_,paddingLabel:g,marginLabel:m,paddingContainer:y,fontSize:v,enableIndicatorTrans:r,handleTransitionEnd:function(){r.value&&(r.value=!1)}}}});eY.TabItem=eH;var eG=(0,u.default)(eY,[["render",Tabvue_type_template_id_acd62c72_ts_true_render]]),eJ=n(69790),eQ=n(99681),eK={class:"badge-container"},eX={key:0,class:"count"},e$=(0,a.aZ)({__name:"Index",props:{count:{},showZero:{type:Boolean,default:!1},overflowCount:{default:99}},setup:function(e){var t=(0,a.Fl)(function(){return!!e.showZero||0!==e.count});return function(e,n){return(0,a.wg)(),(0,a.iD)("div",eK,[(0,a.WI)(e.$slots,"default"),t.value?((0,a.wg)(),(0,a.iD)("div",eX,(0,a.zw)(e.count>=e.overflowCount?"".concat(e.overflowCount,"+"):e.count),1)):(0,a.kq)("",!0)])}}}),e0=(0,u.default)(e$,[["__scopeId","data-v-0755b6ef"]]),e1=n(79924),e3=n(53861),e2={class:"left-area"},e4={class:"text"},e5=(0,a.aZ)({__name:"Content",props:{content:{},to:{},class:{},style:{},duration:{},operateText:{},disabled:{type:Boolean}},emits:["close","operate"],setup:function(e,t){var n=t.emit,r=(0,a.iH)(!0),o=(0,a.iH)(),handleClose=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:150;r.value=!1,setTimeout(function(){n("close")},e)},u=(0,eP.KS)(e.duration||3e3,{controls:!0,callback:handleClose}),l=u.start,s=u.stop;(0,a.bv)(function(){l(),(0,e3.i9H)(o,function(){return handleClose(0)})});var handleMouseEnter=function(){s()},handleMouseLeave=function(){l()},handleClick=function(){s(),n("operate"),handleClose()};return(0,a.SK)(function(){s()}),function(t,n){return(0,a.wg)(),(0,a.iD)("div",{ref_key:"messageContainer",ref:o,class:(0,a.C_)(["msg-container",[e.class,r.value?"fade-in":"fade-out"]]),style:(0,a.j5)((0,Q._)({},e.style)),onMouseenter:handleMouseEnter,onMouseleave:handleMouseLeave},[(0,a._)("div",e2,[(0,a.Wm)((0,a.SU)(i.i),{icon:(0,a.SU)("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMjQgMjQiPjxnIGZpbGw9IiMzMzMiIGZpbGwtb3BhY2l0eT0iLjYiPjxwYXRoIGQ9Ik0yMiAxMmMwIDUuNTIzLTQuNDc3IDEwLTEwIDEwUzIgMTcuNTIzIDIgMTIgNi40NzcgMiAxMiAyczEwIDQuNDc3IDEwIDEwbS0xLjggMGE4LjIgOC4yIDAgMSAwLTE2LjQgMCA4LjIgOC4yIDAgMCAwIDE2LjQgMCIvPjxwYXRoIGQ9Ik0xNy4wNjkgOC44NjVhLjkuOSAwIDAgMSAuMDUgMS4yNzFsLTQuODA3IDUuMjFhMS45IDEuOSAwIDAgMS0yLjc4NS4wMDdsLTIuNjE5LTIuODExYS45LjkgMCAxIDEgMS4zMTYtMS4yMjlsMi42MTkgMi44MTJhLjEuMSAwIDAgMCAuMTQ2IDBsNC44MDgtNS4yMWEuOS45IDAgMCAxIDEuMjcyLS4wNSIvPjwvZz48L3N2Zz4="),size:"24"},null,8,["icon"]),(0,a._)("span",e4,(0,a.zw)(t.content),1)]),t.operateText?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"right-area",onClick:handleClick},[(0,a._)("span",null,(0,a.zw)(t.operateText),1),(0,a.Wm)((0,a.SU)(i.i),{icon:(0,a.SU)("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgZmlsbD0iY3VycmVudENvbG9yIiB2aWV3Qm94PSIwIDAgMTYgMTYiPjxwYXRoIGZpbGw9IiMzMzMiIGZpbGwtb3BhY2l0eT0iLjYiIGQ9Ik02LjE5NSAyLjg2MmMuMjYtLjI2LjY4My0uMjYuOTQzIDBsNC42NjcgNC42NjZjLjI2LjI2LjI2LjY4MyAwIC45NDNsLTQuNjY3IDQuNjY3YS42NjcuNjY3IDAgMSAxLS45NDMtLjk0M0wxMC4zOSA4IDYuMTk1IDMuODA1YS42NjcuNjY3IDAgMCAxIDAtLjk0MyIvPjwvc3ZnPg=="),size:"16"},null,8,["icon"])])):(0,a.kq)("",!0)],38)}}});let e8=(0,u.default)(e5,[["__scopeId","data-v-2a210922"]]);var e9=null,e6=null,messageApply=function(e){var t=e.to,n=e.duration,r=e.onClose,i=e.disabled,o=(0,ed._)(e,["to","duration","onClose","disabled"]);!e9&&(e9=document.createElement("div"),document.body.appendChild(e9)),null==e6||e6.unmount();var handleRemove=function(){null==e6||e6.unmount(),e9&&document.body.removeChild(e9),e6=null,e9=null};return(e6=(0,a.ri)((0,a.h)(a.lR,{to:void 0===t?"body":t,disabled:i},(0,a.h)(e8,(0,K._)((0,Q._)({},o),{duration:void 0===n?3e3:n,disableTeleport:!1,onClose:function(){null==r||r(),handleRemove()}}))))).mount(e9),function(){handleRemove()}},e7={success:function(e){messageApply(e)},MessageContent:e8},te={class:"text-limit"},tt=(0,a.aZ)({__name:"LimitText",props:{maxLength:{},curLength:{}},setup:function(e){return function(e,t){return(0,a.wg)(),(0,a.iD)("span",te,[(0,a._)("span",{class:(0,a.C_)({"over-limit":e.curLength>e.maxLength})},(0,a.zw)(e.curLength),3),(0,a._)("span",null,(0,a.zw)("/".concat(e.maxLength)),1)])}}});let tn=(0,u.default)(tt,[["__scopeId","data-v-09155e13"]]);var tr={key:0,class:"input-label"},ti=["value","placeholder","rows"],ta=["value","placeholder"],to={key:1,class:"limit-wrapper"},tu=(0,a.aZ)({__name:"Input",props:{type:{default:"text"},direction:{default:"column"},rows:{default:3},value:{},label:{},placeholder:{},maxLength:{},required:{type:Boolean}},emits:["update:value"],setup:function(e,t){var n=t.expose,r=t.emit,i=(0,a.iH)(),o=(0,a.Fl)(function(){return"row"===e.direction}),u=(0,a.Fl)(function(){var t;return(null===(t=e.value)||void 0===t?void 0:t.length)||0}),l=(0,a.Fl)(function(){return!!e.maxLength&&u.value/e.maxLength>=2/3}),handleInput=function(e){r("update:value",e.target.value)};return n({input:i,focus:function(){var e;return null===(e=i.value)||void 0===e?void 0:e.focus()},blur:function(){var e;return null===(e=i.value)||void 0===e?void 0:e.blur()},isOverLimit:function(){return u.value>(e.maxLength||0)}}),function(t,n){return(0,a.wg)(),(0,a.iD)("div",{class:(0,a.C_)(["input-basic",{"input-direction":o.value}])},[t.label?((0,a.wg)(),(0,a.iD)("div",tr,[(0,a._)("label",null,(0,a.zw)(t.label),1),l.value?((0,a.wg)(),(0,a.j4)(tn,{key:0,"max-length":e.maxLength||0,"cur-length":u.value},null,8,["max-length","cur-length"])):(0,a.kq)("",!0)])):(0,a.kq)("",!0),(0,a._)("div",{class:(0,a.C_)(["input-wrapper",{"input-wrapper-row":o.value}])},["textarea"===e.type?((0,a.wg)(),(0,a.iD)("textarea",{key:0,ref_key:"inputEl",ref:i,value:e.value,class:"textarea-content",placeholder:t.placeholder,rows:e.rows,onInput:handleInput},null,40,ti)):(0,a.kq)("",!0),"text"===e.type?((0,a.wg)(),(0,a.iD)("input",{key:1,ref_key:"inputEl",ref:i,type:"text",value:e.value,class:"input-content",placeholder:t.placeholder,onInput:handleInput},null,40,ta)):(0,a.kq)("",!0)],2),o.value?((0,a.wg)(),(0,a.iD)("div",to,[l.value?((0,a.wg)(),(0,a.j4)(tn,{key:0,"max-length":e.maxLength||0,"cur-length":u.value},null,8,["max-length","cur-length"])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)],2)}}}),tl=(0,u.default)(tu,[["__scopeId","data-v-8da5899a"]]),ts=(0,a.aZ)({__name:"Switch",props:{disabled:{type:Boolean,default:!1},modelValue:{type:Boolean,required:!0}},emits:["update:modelValue","change","click"],setup:function(e,t){var n=t.emit,r=(0,a.Fl)(function(){return e.disabled}),i=(0,a.Fl)(function(){return e.modelValue}),updateChecked=function(){var e=!i.value;n("update:modelValue",e),n("change",e)},handleClick=function(e){if(!r.value)updateChecked(),n("click",e)};return function(e,t){return(0,a.wg)(),(0,a.iD)("div",{class:(0,a.C_)(["dot-container",{"turn-on":i.value,disabled:r.value}]),onClick:handleClick},[(0,a.Wm)(S.Z,{size:"16",icon:"switch_dot",class:"dot"})],2)}}}),tc=(0,u.default)(ts,[["__scopeId","data-v-147b1aa0"]])},30418:function(e,t,n){"use strict";n.d(t,{O2:function(){return readFileContent},Rz:function(){return filterFiles},qo:function(){return toArray},tI:function(){return isPromise},zf:function(){return isOversize}});var r=n(31547);function readFileContent(e,t){return new Promise(function(n){if("file"===t){n();return}var r=new FileReader;r.onload=function(e){n(e.target.result)},"dataUrl"===t?r.readAsDataURL(e):"text"===t&&r.readAsText(e)})}n(36277),n(34333),n(1154),n(80013),n(97357),n(87535),n(75204),n(86651);var toArray=function(e){return Array.isArray(e)?e:[e]},isFunction=function(e){return"function"==typeof e},isPromise=function(e){var t;return null!==(t=e)&&(void 0===t?"undefined":(0,r._)(t))==="object"&&isFunction(e.then)&&isFunction(e.catch)};function isOversize(e,t){return toArray(e).some(function(e){return!!e.file&&e.file.size>t})}function filterFiles(e,t){var n=[],r=[];return e.forEach(function(e){isOversize(e,t)?r.push(e):n.push(e)}),{valid:n,invalid:r}}},69790:function(e,t,n){"use strict";n.d(t,{i:function(){return a}});var r=n(93328),i=(0,r.aZ)({__name:"divider",props:{margin:{}},setup:function(e){return function(t,n){return(0,r.wg)(),(0,r.iD)("div",{class:"divider",style:(0,r.j5)({margin:e.margin})},null,4)}}}),a=(0,n(5010).default)(i,[["__scopeId","data-v-39ecb380"]])},79924:function(e,t,n){"use strict";n.d(t,{Lt:function(){return v},hP:function(){return M}});var r=n(41622),i=n(377);n(6045),n(10364),n(67673),n(86651),n(42876),n(33933),n(87989),n(1154),n(80013),n(97357),n(34333);var a=n(93328),o=n(53861),u=n(36877),l=n(6453),s=n(99681),c=(0,a.aZ)({__name:"dropdown",props:{trigger:{default:"hover"},placement:{default:"bottom"},selected:{type:Boolean},multiSelected:{type:Boolean},value:{},itemClass:{}},emits:["itemClick","update:value"],setup:function(e,t){var n,c,d,v,f,p=t.emit,h=(0,a.iH)(!1),g=(0,a.iH)(),m=(0,a.iH)(),y=(0,a.iH)(),handleWheel=function(e){e.stopPropagation(),e.preventDefault()},I=(0,a.Rr)(),_=null!==(v=(0,s.td)(null===(c=I.items)||void 0===c?void 0:c.call(I)).map(function(t){return(0,s.Tm)(t,{trigger:e.trigger,selected:e.selected,multiSelected:e.multiSelected})}))&&void 0!==v?v:[],w=(0,a.iH)(null!==(f=null===(d=I.default)||void 0===d?void 0:d.call(I).map(function(e){return(0,s.Tm)(e)}))&&void 0!==f?f:[]),handleBefore=function(){if(null!=g.value)g.value.style.display="inline-block",g.value.style.visibility="hidden",g.value.style.display="none",g.value.style.visibility="visible"};var k=(n=(0,r._)(function(t,n){return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,u.oo)(n,t,{placement:e.placement,middleware:[(0,l.cv)(8),(0,l.uY)({padding:12})]})];case 1:return[2,r.sent()];case 2:return console.warn(r.sent()),[2,void 0];case 3:return[2]}})}),function getPosition(e,t){return n.apply(this,arguments)}),showItems=function(){if(!h.value||null==m.value)return;var t=(0,s.TN)(m);if(null!=g.value)k(g.value,t).then(function(n){if(null!=g.value)!e.placement.includes("top")&&(g.value.style.maxHeight="".concat(window.innerHeight-t.getBoundingClientRect().bottom-16,"px")),g.value.style.transform="translateX(".concat(null==n?void 0:n.x,"px) translateY(").concat(null==n?void 0:n.y,"px)")})},handleClick=function(){if("click"===e.trigger)h.value=!h.value},handleItemClick=function(e){p("itemClick",e)},S=(0,a.iH)(!1),mouseenter=function(){if("hover"===e.trigger)h.value=!0},posBetweenTwoElement=function(e,t,n,r){var i=t.getBoundingClientRect(),a=i.top,o=i.left,u=i.right,l=e.getBoundingClientRect(),s=l.top,c=l.left,d=l.right;if(n<o||n>u||n<c||n>d)return!1;if(a>s){if(!(r<a&&r>s))return!1}else if(!(r<s&&r>a))return!1;return!0},mouseMove=function(t){if("hover"!==e.trigger||null==m.value||!h.value)return;var n,r,i=t.target,a=(0,s.TN)(m);if(!((null==a?void 0:a.contains(i))||(null===(n=g.value)||void 0===n?void 0:n.contains(i))||(null===(r=y.value)||void 0===r?void 0:r.some(function(e){return e.visible})))){if(!g.value){h.value=!1;return}h.value=posBetweenTwoElement(g.value,a,t.clientX,t.clientY)}},handleCloseClick=function(t){if(!h.value)return;var n=(0,s.TN)(m);if(!(h.value&&(null==n?void 0:n.contains(t.target)))&&"click"===e.trigger)h.value=!1};(0,a.bv)(function(){S.value=!0,(0,o.ORN)(document,"click",handleCloseClick),(0,o.ORN)(document,"mousemove",mouseMove),(0,o.ORN)(window,["resize","scroll"],showItems);var e=(0,o.xKQ)();(0,a.m0)(function(){"hidden"===e.value&&(h.value=!1)}),(0,o.ORN)(document,"mouseleave",function(){h.value=!1})});var updateValue=function(e,t){var n,r;p("update:value",e,t),w.value=null!==(r=null===(n=I.default)||void 0===n?void 0:n.call(I).map(function(e){return(0,s.Tm)(e)}))&&void 0!==r?r:[]};return function(t,n){return(0,a.wg)(),(0,a.iD)("div",null,[((0,a.wg)(),(0,a.j4)((0,a.LL)(w.value[0]),{ref_key:"trigger",ref:m,onMouseenter:mouseenter,onClick:handleClick,onWheel:handleWheel},null,544)),S.value?((0,a.wg)(),(0,a.j4)(a.lR,{key:0,to:"body"},[(0,a._)("div",(0,a.dG)({class:"dropdown-container"},t.$attrs,{onWheel:handleWheel}),[(0,a.Wm)(a.uT,{onBeforeEnter:handleBefore,onEnter:showItems},{default:(0,a.w5)(function(){return[(0,a.wy)((0,a._)("div",{ref_key:"itemsEl",ref:g,style:{display:"inline-block"},class:(0,a.C_)(["dropdown-items",t.itemClass])},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,a.SU)(_),function(t){return(0,a.wg)(),(0,a.j4)((0,a.LL)(t),{key:t,ref_for:!0,ref_key:"itemList",ref:y,value:e.value,"onUpdate:value":updateValue,onItemClick:handleItemClick},null,40,["value"])}),128))],2),[[a.F8,!0===h.value]])]}),_:1})],16)])):(0,a.kq)("",!0)])}}}),d=n(5010),v=(0,d.default)(c,[["__scopeId","data-v-1b03e45c"]]),f=n(69790),p={key:0,class:"title"},h=(0,a.aZ)({__name:"dropdownGroup",props:{title:{},divider:{type:Boolean},trigger:{},selected:{type:Boolean},multiSelected:{type:Boolean},value:{},groupValue:{}},emits:["itemClick","update:value"],setup:function(e,t){var n,r,i,o=t.expose,u=t.emit,l=(0,a.iH)(),handleItemClick=function(e){u("itemClick",e)},c=(0,a.Rr)(),d=null!==(i=null===(n=c.default)||void 0===n?void 0:n.call(c).map(function(t){return(0,s.Tm)(t,{trigger:e.trigger,selected:e.selected,multiSelected:e.multiSelected,value:e.value})}))&&void 0!==i?i:[],updateValue=function(e,t){u("update:value",e,t)};return o({visible:null===(r=l.value)||void 0===r?void 0:r.some(function(e){return e.visible})}),function(t,n){return(0,a.wg)(),(0,a.iD)(a.HY,null,[e.title?((0,a.wg)(),(0,a.iD)("span",p,(0,a.zw)(e.title),1)):(0,a.kq)("",!0),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,a.SU)(d),function(t){return(0,a.wg)(),(0,a.j4)((0,a.LL)(t),{key:t,ref_for:!0,ref_key:"itemList",ref:l,value:e.value,"onUpdate:value":updateValue,onItemClick:handleItemClick},null,40,["value"])}),128)),e.divider?((0,a.wg)(),(0,a.j4)((0,a.SU)(f.i),{key:1})):(0,a.kq)("",!0)],64)}}});let g=(0,d.default)(h,[["__scopeId","data-v-6a50ee07"]]);var m=n(66993);n(87394),n(94941),n(48421);var y=n(681),I={key:0,class:"left-icon"},_={key:1},w={key:2,class:"right-icon"},k={key:3,class:"done"},S={class:"dropdown-container"},b=(0,a.aZ)({__name:"dropdownItem",props:{name:{},trigger:{},selected:{type:Boolean},placement:{},multiSelected:{type:Boolean},value:{}},emits:["itemClick","update:value"],setup:function(e,t){var n,c,d,v,f=t.expose,p=t.emit,h=(0,a.Rr)(),g=h.leftIcon,b=h.rightIcon,M=null!==(v=null===(c=h.options)||void 0===c?void 0:c.call(h).map(function(t){return(0,s.Tm)(t,{trigger:e.trigger,selected:e.selected,multiSelected:e.multiSelected,value:e.value})}))&&void 0!==v?v:[],L=(0,s.Tm)(null===(d=h.custom)||void 0===d?void 0:d.call(h)),handleClick=function(){if(p("itemClick",e.name),0===M.length)e.multiSelected&&(Array.isArray(e.value)?p("update:value",e.value.includes(e.name)?e.value.filter(function(t){return t!==e.name}):(0,m._)(e.value).concat([e.name]),e.name):console.warn("multiSelected 时传入的value必须为数组")),e.selected&&p("update:value",e.name,e.name)},x=(0,a.iH)(!1),T=(0,a.iH)(!1),D=(0,a.iH)(),N=(0,a.iH)(),handleBefore=function(){if(null!=D.value)D.value.style.display="inline-block",D.value.style.visibility="hidden",D.value.style.display="none",D.value.style.visibility="visible"};var E=(n=(0,r._)(function(){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(null==N.value)return[2];if(t=(0,s.TN)(N),null==D.value)return[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,u.oo)(t,D.value,{placement:e.placement,middleware:[(0,l.cv)(-8),(0,l.uY)(),!e.placement&&(0,l.X5)()]})];case 2:return n=r.sent(),D.value.style.maxHeight="100vh",D.value.style.transform="translateX(".concat(n.x,"px) translateY(").concat(n.y,"px)"),[3,4];case 3:return console.warn(r.sent()),[3,4];case 4:return[2]}})}),function showItems(){return n.apply(this,arguments)}),mouseenter=function(){if("hover"===e.trigger)T.value=!0},mouseMove=function(t){if("hover"!==e.trigger)return;var n,r=(0,s.TN)(N);if(!((null==r?void 0:r.contains(t.target))||(null===(n=D.value)||void 0===n?void 0:n.contains(t.target))))T.value=!1},R=(0,a.Fl)(function(){return(!!e.multiSelected||!!e.selected)&&0===M.length&&(Array.isArray(e.value)?e.value.includes(e.name):e.value===e.name)});(0,a.bv)(function(){x.value=!0,(0,o.ORN)(document,"mousemove",mouseMove),(0,o.ORN)(window,["resize","scroll"],E);var e=(0,o.xKQ)();(0,a.m0)(function(){"hidden"===e.value&&(T.value=!1)}),(0,o.ORN)(document,"mouseleave",function(){T.value=!1})});var updateValue=function(t){p("update:value",t,e.name)};return f({visible:T}),function(t,n){return(0,a.wg)(),(0,a.iD)(a.HY,null,[null==(0,a.SU)(L)?((0,a.wg)(),(0,a.iD)("li",(0,a.dG)({key:0,ref_key:"triggerEl",ref:N},t.$attrs,{onClick:handleClick,onMouseenter:mouseenter}),[null!=(0,a.SU)(g)?((0,a.wg)(),(0,a.iD)("span",I,[(0,a.Wm)((0,a.SU)(g))])):(0,a.kq)("",!0),(0,a._)("span",{class:(0,a.C_)(["text",{selected:R.value}])},[(0,a.WI)(t.$slots,"default")],2),0!==(0,a.SU)(M).length?((0,a.wg)(),(0,a.iD)("span",_,[(0,a.Wm)((0,a.SU)(y.i),{size:"20",icon:"arrow_right"})])):(0,a.kq)("",!0),null!=(0,a.SU)(b)&&0===(0,a.SU)(M).length?((0,a.wg)(),(0,a.iD)("span",w,[(0,a.Wm)((0,a.SU)(b))])):(0,a.kq)("",!0),R.value?((0,a.wg)(),(0,a.iD)("span",k,[(0,a.Wm)((0,a.SU)(y.i),{size:"20",icon:"done"})])):(0,a.kq)("",!0)],16)):(0,a.kq)("",!0),null!=(0,a.SU)(L)?((0,a.wg)(),(0,a.j4)((0,a.LL)((0,a.SU)(L)),{key:1,ref_key:"triggerEl",ref:N,mouseenter:"mouseenter"},null,512)):(0,a.kq)("",!0),x.value&&0!==(0,a.SU)(M).length?((0,a.wg)(),(0,a.j4)(a.lR,{key:2,to:"body"},[(0,a._)("div",S,[(0,a.Wm)(a.uT,{name:"dropdown-fade",onBeforeEnter:handleBefore,onEnter:E},{default:(0,a.w5)(function(){return[(0,a.wy)((0,a._)("div",{ref_key:"itemsEl",ref:D,style:{display:"inline-block"},class:"dropdown-items"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,a.SU)(M),function(t){return(0,a.wg)(),(0,a.j4)((0,a.LL)(t),{key:t,value:e.value,"onUpdate:value":updateValue},null,40,["value"])}),128))],512),[[a.F8,!0===T.value]])]}),_:1})])])):(0,a.kq)("",!0)],64)}}}),M=(0,d.default)(b,[["__scopeId","data-v-141cfafe"]]);v.DropdownGroup=g,v.DropdownItem=M},56362:function(e,t){"use strict";t.Z={icon:{type:[String,Object],required:!0},width:{type:String},height:{type:String},size:{type:String,default:function(){return"16px"}}}},681:function(e,t,n){"use strict";n.d(t,{i:function(){return r.Z}});var r=n(64704)},99681:function(e,t,n){"use strict";n.d(t,{TN:function(){return getRefEl},Tm:function(){return cloneElement},td:function(){return filterFragment}});var r=n(70879),i=n(66993);n(85203),n(87535),n(75204),n(97357),n(34333),n(86651),n(87394),n(94941),n(48421);var a=n(93328);function isEmptyElement(e){var t,n;return e&&(e.type===Comment||e.type===a.HY&&(null===(t=e.children)||void 0===t?void 0:t.length)===0||e.type===Text&&(null===(n=e.children)||void 0===n?void 0:n.trim())==="")}function filterEmpty(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach(function(e){var n;Array.isArray(e)?t.push.apply(t,(0,i._)(e)):(null==e?void 0:e.type)===a.HY?t.push.apply(t,(0,i._)(filterEmpty(null!==(n=e.children)&&void 0!==n?n:void 0))):t.push(e)}),t.filter(function(e){return!isEmptyElement(e)})}function cloneElement(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null==e)return null;var o=e;if(Array.isArray(e)&&(o=filterEmpty(e)[0]),!o)return null;var u=(0,a.Ho)(o,t,i);return u.props=n?(0,r._)({},u.props,t):u.props,u}var getRefEl=function(e){var t,n;return null!==(n=null===(t=e.value)||void 0===t?void 0:t.$el)&&void 0!==n?n:e.value},filterFragment=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];return e.forEach(function(e){if((null==e?void 0:e.type)===a.HY)t.push.apply(t,(0,i._)(filterFragment(e.children)));else t.push(e)}),t}},90948:function(e,t,n){"use strict";n.d(t,{K:function(){return g}});var r,i,a=n(46490),o=n(90251),u=n(51606),l=n(77630),s=n(41622),c=n(377);n(42876),n(33933),n(67930),n(58486),n(86651);var d=n(24216);n(19077),n(75973),n(7608),n(41593);var v=n(64732),f=n(4659),p=v.dJ.get;function getTokenFromStorage(e){try{var t=window.localStorage.getItem("RWP_LOGIN_TOKEN");if(!t)return null;var n=JSON.parse(t);if(n.uid!==e||Date.now()>=n.expiredAt)return window.localStorage.removeItem("RWP_LOGIN_TOKEN"),null;return n}catch(e){return window.localStorage.removeItem("RWP_LOGIN_TOKEN"),null}}function saveTokenToStorage(e){try{window.localStorage.setItem("RWP_LOGIN_TOKEN",JSON.stringify(e))}catch(e){console.warn("localStorage is not available")}}function getTabDeviceId(){try{var e=window.sessionStorage.getItem("XHS_TAB_DEVICE_ID");return!e&&(e=(0,f.Z)(),window.sessionStorage.setItem("XHS_TAB_DEVICE_ID",e)),e}catch(e){return(0,f.Z)()}}function fetchLoginToken(e,t){return _fetchLoginToken.apply(this,arguments)}function _fetchLoginToken(){return(_fetchLoginToken=(0,s._)(function(e,t){var n,r,i,a,o;return(0,c.Jh)(this,function(u){switch(u.label){case 0:return[4,p("/api/sns/web/v1/celestial/lt",{headers:{c_device_id:t},timeout:1e4,withCredentials:!0})];case 1:if(!(n=u.sent()))throw Error("获取登录 token 失败");return r=n.aLt,i=n.rLt,a=n.expiredTime,saveTokenToStorage(o={aLt:r,rLt:i,expiredAt:Date.now()+1e3*a/2,uid:e}),[2,o]}})})).apply(this,arguments)}function getLoginToken(e,t,n){return _getLoginToken.apply(this,arguments)}function _getLoginToken(){return(_getLoginToken=(0,s._)(function(e,t,n){var r;return(0,c.Jh)(this,function(i){switch(i.label){case 0:if(!n&&(r=getTokenFromStorage(e)))return[2,r];return[4,fetchLoginToken(e,t)];case 1:return[2,i.sent()]}})})).apply(this,arguments)}function getOrCreateTabDeviceId(){return getTabDeviceId()}function getOrCreateFingerprint(){try{var e=window.sessionStorage.getItem("XHS_RWP_FINGERPRINT");return!e&&(e=String(Date.now()),window.sessionStorage.setItem("XHS_RWP_FINGERPRINT",e)),e}catch(e){return String(Date.now())}}function getRwpEnv(){var e=window.location.origin.includes("beta"),t=window.location.origin.includes("local"),n=window.location.search.includes("forceProd=true");return t||e&&!n?l.EEnv.BETA:l.EEnv.PROD}function defineRwpConfig(e){var t,n=e.uid,r=getOrCreateTabDeviceId();return{appId:"xhs-pc",version:e.pkgVersion,env:getRwpEnv(),retryConnectInterval:[300],authRetryIgnoreCondition:!0,autoReconnect:!0,authInfoHooks:(t=(0,s._)(function(t){var i,a,o;return(0,c.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,getLoginToken(n,r,t>1)];case 1:return i=u.sent(),[2,{authType:d.AuthTypeConstant.GENERIC,sid:i.aLt,uid:n,domain:"red"}];case 2:return a=u.sent(),null===(o=e.onTokenError)||void 0===o||o.call(e,a),[2,{authType:d.AuthTypeConstant.GENERIC,sid:"",uid:n,domain:"red"}];case 3:return[2]}})}),function(e){return t.apply(this,arguments)}),deviceInfo:function(){return{deviceId:r,fingerprint:getOrCreateFingerprint(),platform:l.EPlatformType.BROWSER,os:l.EOSType.WEB,osVersion:"10.15",deviceName:"Chrome",appVersion:"131.0.0.0",userAgent:navigator.userAgent}}}}var h=null,g=function(){function IMInstance(e){(0,a._)(this,IMInstance),(0,u._)(this,"longlink",void 0),(0,u._)(this,"rwpConfig",void 0),!r&&(i=defineRwpConfig(e),r=new l.LonglinkSdk(i)),this.rwpConfig=i,this.longlink=r,this.longlink.on(l.EVENTS.ERROR,function(e){h=null,console.warn("IM error:",e)}),this.longlink.on(l.EVENTS.CLOSE,function(e){console.warn("IM connection closed:",e),h=null})}return(0,o._)(IMInstance,[{key:"login",value:function login(){if(!h){var e;h=null===(e=this.longlink)||void 0===e?void 0:e.login()}return h}},{key:"reLogin",value:function reLogin(){var e;return h=null===(e=this.longlink)||void 0===e?void 0:e.login()}},{key:"getLonglink",value:function getLonglink(){return this.longlink}}]),IMInstance}()},23755:function(e,t,n){"use strict";n.d(t,{jl:function(){return S.j},aR:function(){return et},ZP:function(){return iO},mM:function(){return nw},as:function(){return eK},C9:function(){return h.C9}});var r,i,a,o,u,l,s,c,d,v,f,p,h=n(76779),g=n(93328),m=n(60506),y=n(35909),I=n(59484);n(87535),n(75204),n(97357),n(34333),n(9557);var _=n(29642),w=n(40223),k=n(99505),S=n(83166),b={class:"channel-container"},M=["id","onClick"],L=(0,g.aZ)({__name:"ChannelContainer",props:{channelList:{},activeKey:{},verticalChannelKey:{},permitSticky:{type:Boolean}},emits:["update:active-key","channelClick"],setup:function(e,t){var n=t.emit,r=(0,S.j)("ChannelContainer");function handleChannelClick(e){r.info("handleChannelClick:",e),(0,k.eJ)(93035,{channelTabIndex:e.key,channelTabName:e.label}),n("update:active-key",e.key),n("channelClick",e)}return(0,g.bv)(function(){e.channelList.forEach(function(e){(0,k.eJ)(93034,{channelTabName:e.label})})}),function(t,n){return(0,g.wg)(),(0,g.iD)("div",b,[(0,g.Wm)(_.Z,{offset:72,permit:e.permitSticky},{default:(0,g.w5)(function(){return[(0,g.Wm)(w.Z,{id:"channel-container",class:"channel-scroll-container",button:!1,draggable:!0},{default:(0,g.w5)(function(){return[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)(e.channelList,function(n){return(0,g.wg)(),(0,g.iD)("div",{id:n.key,key:n.key,class:(0,g.C_)(["channel",{active:Number(n.key)===Number(e.activeKey),"vertical-channel-bg":Number(n.key)===Number(e.verticalChannelKey)}]),onClick:function(){return handleChannelClick(n)}},[(0,g.WI)(t.$slots,"icon",{channelKey:n.key}),(0,g.Uk)(" "+(0,g.zw)(n.label),1)],10,M)}),128))]}),_:3})]}),_:3},8,["permit"])])}}}),x=n(5010);let T=(0,x.default)(L,[["__scopeId","data-v-6ff8a088"]]);var D={class:"channel-container-ai"},N=["id","onClick"],E=(0,g.aZ)({__name:"ChannelContainerAI",props:{channelList:{},activeKey:{}},emits:["update:active-key","channelClick"],setup:function(e,t){var n=t.emit,r=(0,S.j)("ChannelContainer");function handleChannelClick(e){r.info("handleChannelClick:",e),(0,k.eJ)(93035,{channelTabIndex:e.key,channelTabName:e.label}),n("update:active-key",e.key),n("channelClick",e)}return(0,g.bv)(function(){e.channelList.forEach(function(e){(0,k.eJ)(93034,{channelTabName:e.label})})}),function(t,n){return(0,g.wg)(),(0,g.iD)("div",D,[(0,g.Wm)(w.Z,{id:"channel-container",class:"channel-scroll-container-ai",button:!1,draggable:!0},{default:(0,g.w5)(function(){return[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)(e.channelList,function(n){return(0,g.wg)(),(0,g.iD)("div",{id:n.key,key:n.key,class:(0,g.C_)(["channel",{active:Number(n.key)===Number(e.activeKey)}]),onClick:function(){return handleChannelClick(n)}},[(0,g._)("div",{class:(0,g.C_)(["channel-content",{active:Number(n.key)===Number(e.activeKey)}])},[(0,g.WI)(t.$slots,"icon",{channelKey:n.key}),(0,g.Uk)(" "+(0,g.zw)(n.label),1)],2)],10,N)}),128))]}),_:3})])}}});let R=(0,x.default)(E,[["__scopeId","data-v-c3a78266"]]);var U=n(82726),P=n(14978),F=n.n(P),j=n(94251),O=n(1552),H=n(94186),W=n(41622),z=n(70879),Z=n(27337),q=n(377);n(7608),n(86651),n(72169),n(58486);var V=n(28946),Y=n(51899),G=n.n(Y),J=n(66002),Q=n(95874);function useListDataHandler(e,t,n){return function(){e.forEach(function(e){e.live.tRoomInfo.coverInfo.width=1920,e.live.tRoomInfo.coverInfo.height=2909;var r=(0,Z._)((0,z._)({},e),{exposed:!1,ssrRendered:!1,index:t.value.length});null==n||n(r)})}}n(10571);var K=n(13285),X=n(85537);function useLiveListQuery(){var e=(0,K.yj)(),t=(0,X.L)(),getCateGory=function(){var t,n,r;return Number.isNaN(Number(null==e?void 0:null===(t=e.query)||void 0===t?void 0:t.channel_id))?"0":null!==(r=null==e?void 0:null===(n=e.query)||void 0===n?void 0:n.channel_id)&&void 0!==r?r:"0"},n=(0,g.qj)({cursorScore:"0",source:13,category:getCateGory(),topRoomIds:[],preSource:"",extraInfo:"",size:27}),resetQuery=function(){n.cursorScore="0",n.category="0"};return(0,g.wF)(function(){t.$mitt.on("onLogin",resetQuery)}),{query:n,resetQuery:resetQuery,getCateGory:getCateGory,updateCategory:function(e){n.category=null!=e?e:getCateGory()},DEFAULT_CHANNEL_ID:"0",DEFAULT_CURSCORE:"0"}}n(42876),n(33933),n(67930),n(87989);function getLiveApiEdith(){if(["development","test"].includes("production"))return"//logan.devops.xiaohongshu.com/proxy/xhs-pc-live";var e="live-room",t=window.location.origin.includes("beta"),n=window.location.href.includes("forceProd=true");return t?n?"//".concat(e,".","xiaohongshu.com"):"//".concat(e,".beta.","xiaohongshu.com"):"//".concat(e,".","xiaohongshu.com")}function getReportApiBaseUrl(){if(["development","test"].includes("production"))return"//logan.devops.xiaohongshu.com/proxy/xhs-pc";var e=window.location.origin.includes("beta"),t=window.location.search.includes("forceProd=true");return e?t?"//edith.xiaohongshu.com":"//edith.beta.xiaohongshu.com":"//edith.xiaohongshu.com"}(function getTestBaseUrl(){return})(),function getProductionBaseUrl(){var e=window.location.origin.includes("beta"),t=window.location.search.includes("forceProd=true");return e?t?"//edith.xiaohongshu.com":"//edith.beta.xiaohongshu.com":"//edith.xiaohongshu.com"}();var getEdithLiveApiBaseUrl=function(){return getLiveApiEdith()},$=n(84409),ee="EMPTY";function useMfRequestShareState(){var e=(0,U._)((0,$.OT)(!1),2),t=e[0],n=e[1],r=(0,U._)((0,$.OT)(!1),2),i=r[0],a=r[1],o=(0,U._)((0,$.OT)(!1),2),u=o[0],l=o[1],s=(0,U._)((0,$.OT)(!1),2);return{isFetching:t,setIsFetching:n,isError:i,setIsError:a,isFirstSuccessFetched:s[0],setIsFirstSuccessFetched:s[1],isReplace:u,setIsReplace:l}}var et=(0,J.Q_)("liveList",function(){var e,t,n,r,i,switchCategoryWithDelay=function switchCategoryWithDelay(e,t){clearTimeout(N.value),N.value=setTimeout(e,t)},a=(0,S.j)("liveListStore"),o=(0,K.yj)(),u=(0,K.tv)(),l=(0,g.iH)(null),s=(0,Q.h)().handleHttpCatch,c=useMfRequestShareState(),d=c.isError,v=c.isReplace,f=c.isFetching,p=c.isFirstSuccessFetched,h=c.setIsError,m=c.setIsReplace,y=c.setIsFetching,I=c.setIsFirstSuccessFetched,_=useLiveListQuery(),w=_.query,k=_.resetQuery,b=_.getCateGory,M=_.updateCategory,L=_.DEFAULT_CURSCORE,x=(0,g.iH)([]),T=(0,g.iH)(b()),D=(0,g.iH)(),N=(0,g.iH)(),E=(0,g.iH)(!1),R=(0,g.iH)(!1),U=(0,g.iH)(),P=(0,g.Fl)(function(){return x.value.length>0&&v.value?"update":x.value.length>0?"liveList":!f&&d.value?"error":"loading"}),updateCursorScore=function(e){U.value=e},onBeforeSendRequest=function(){w.cursorScore=U.value,v.value&&(document.documentElement.scrollTop=0,w.cursorScore=L),w.extra_info=JSON.stringify({image_formats:["jpg","webp","avif"]}),w.category=T.value};var F=(e=(0,W._)(function(e){var t,n,r=arguments;return(0,q.Jh)(this,function(i){switch(i.label){case 0:var a;if(t=r.length>1&&void 0!==r[1]&&r[1],((a=e)&&a.feeds&&!(a.feeds.length<=0)?null:(0===x.value.length&&h(!0),ee))===ee||R.value)return[2];if((n=e.feeds&&e.feeds[e.feeds.length-1].cursorScore||L)&&updateCursorScore(n),!p.value&&(I(!0),document.documentElement.scrollTop=0),!t)return[3,2];return x.value=[],[4,(0,g.Y3)()];case 1:i.sent(),i.label=2;case 2:return useListDataHandler(e.feeds,x,function(e){x.value.push(e)})(),[2]}})}),function onGetResponse(t){return e.apply(this,arguments)});var j=(t=(0,W._)(function(e){return(0,q.Jh)(this,function(t){return s("getApiSnsRedLiveWebFeedV1Squarefeed",e,function(){d.value=!0,H.yN.errorInfo.errorApi="getApiSnsRedLiveWebFeedV1Squarefeed",H.yN.errorInfo.errorApiMsg=JSON.stringify(e.data)}),[2]})}),function onRequestError(e){return t.apply(this,arguments)});var O=(n=(0,W._)(function(){var e,t,n=arguments;return(0,q.Jh)(this,function(r){switch(r.label){case 0:if(e=n.length>0&&void 0!==n[0]&&n[0],f.value)return[2];y(!0),e&&m(!0),r.label=1;case 1:return r.trys.push([1,3,4,5]),onBeforeSendRequest(),[4,(0,V.i9)({params:w,baseURL:getEdithLiveApiBaseUrl("squarefeed"),transform:!0,withCredentials:!0})];case 2:return F(r.sent(),e),h(!1),[3,5];case 3:return t=r.sent(),h(!0),j(t),[3,5];case 4:return y(!1),m(!1),[7];case 5:return[2]}})}),function fetchLiveList(){return n.apply(this,arguments)});var Y=(r=(0,W._)(function(){var e,t,n;return(0,q.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,V.BR)({baseURL:getEdithLiveApiBaseUrl("category"),transform:!0,withCredentials:!0})];case 1:return t=r.sent(),D.value=t.categories,M(null===(e=t.categories)||void 0===e?void 0:e[0].id),[3,3];case 2:return n=r.sent(),a.warn(n),[3,3];case 3:return[2]}})}),function getListChannels(){return r.apply(this,arguments)});var J=(i=(0,W._)(function(e){return(0,q.Jh)(this,function(t){switch(t.label){case 0:if(T.value=e,u.replace({query:(0,Z._)((0,z._)({},o.query),{channel_id:T.value})}),k(),f.value)return switchCategoryWithDelay(function(){return J(e)},800),[2];return updateCursorScore(L),[4,O(!0)];case 1:return t.sent(),[2]}})}),function _switchChannel(e){return i.apply(this,arguments)}),X=G()(J,800,{leading:!0});return{query:w,isError:d,categories:D,liveList:x,isReplace:v,pageStatus:P,isFetching:f,switchChannel:X,isActivityEnd:E,currentChannel:T,liveListWrapper:l,cancelFeedRequest:R,isFirstSuccessFetched:p,reset:function(){O(!0)},setIsReplace:m,fetchLiveList:O,getListChannels:Y}}),en=n(64593),er=n(415);n(43648),n(41593),n(97553);var ei=n(66993),ea=n(53861),composables_useKeepAliveEventListener=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(0,g.iH)(),i=(0,g.iH)(!1),registerEventListener=function(){if(!i.value)r.value=ea.ORN.apply(void 0,(0,ei._)(t)),i.value=!0},removeEventListener=function(){var e;null===(e=r.value)||void 0===e||e.call(r),i.value=!1};(0,g.bv)(function(){registerEventListener()}),(0,g.se)(function(){removeEventListener()}),(0,g.dl)(function(){registerEventListener()})};function useVirtualList(e){var t=e.minRenderNotes,n=e.notePositions,r=e.list,i=e.columns,a=e.onListEnd,o=e.topBuffer,u=void 0===o?700:o,l=e.getContainer,s=e.loadmoreThresholdColumns,c=e.isAISearch,d=void 0!==c&&c,v=(0,g.iH)(0),f=(0,g.iH)(t.value+0*i.value),p=(0,g.Fl)(function(){if(Array.isArray(r.value))return r.value.slice(v.value,f.value);throw TypeError("list should be array")});d&&(0,g.YP)(function(){return r.value.length},function(e,t){e>t&&(f.value=Math.max(f.value,e))});var h=F()(function(){var e=(null==l?void 0:l())||document.documentElement,o=e.scrollTop;if(d){var c=e.scrollHeight,p=e.clientHeight,h=Math.max(n.value.findIndex(function(e){return e.top+u>=o}),0),g=r.value.length-(h+t.value),m=i.value*s;Array.isArray(r.value)&&(c-(o+p)<100||g<m)&&a(),v.value=h;var y=v.value+t.value;f.value=Math.max(y,f.value,r.value.length)}else{var I=Math.max(n.value.findIndex(function(e){return e.top+u>=o}),0);Array.isArray(r.value)&&r.value.length-(I+t.value)<i.value*s&&a(),v.value=I,f.value=v.value+t.value}},50);return d?composables_useKeepAliveEventListener(function(){return(null==l?void 0:l())||document},"scroll",h):composables_useKeepAliveEventListener((null==l?void 0:l())||document,"scroll",h),{renderList:p,resetRenderList:function(){v.value=0,f.value=0,(0,g.Y3)(function(){f.value=t.value+0*i.value})}}}function getShortestColumn(e){for(var t=0,n=1;n<e.length;n++)e[n]<e[t]&&(t=n);return t}function useWaterfallLayout(e,t,n,r,i,a){var o,u,l,s=Array(e.value).fill(0);return(0,g.YP)([function(){return e.value},function(){return t.value},function(){return n.value.horizontal}],function(e){s=Array((0,U._)(e,1)[0]).fill(0),o=void 0,u=void 0,l=void 0}),{getItemPosition:function(c,d){if(r.value[d])return(0,Z._)((0,z._)({},r.value[d]),{totalHeight:i.value});l=void 0!==a&&a.value%e.value!=0&&a.value-d<=a.value%e.value?d%e.value:getShortestColumn(s),o=s[l],u=l*(t.value+n.value.horizontal),s[l]=s[l]+c+n.value.vertical,r.value[d]={left:u,top:o,column:l+1};var v=o+c+n.value.vertical;return{left:u,top:o,totalHeight:Math.max(v,i.value),column:l+1}}}}n(21608),n(36277);var eo=n(6028),eu=n(66398),el=n(33114),es=n(91547);n(29112),n(67275),n(59989),n(7099),n(27461),n(23339),n(51109),n(55947);var useRoomRoute=function useRoomRoute_useRoomRoute(){return{getRoomPageUrl:function getRoomPageUrl(e,t){var n=new URLSearchParams(t);return"/livestream/".concat(e,"?").concat(n.toString())}}},ec="".concat(192,"px");let ed={class:"live-indicator"};function render(e,t){return(0,g.wg)(),(0,g.iD)("div",ed,t[0]||(t[0]=[(0,g.uE)('<div class="live-lines" data-v-1622f8fc><span class="line" data-v-1622f8fc></span><span class="line" data-v-1622f8fc></span><span class="line" data-v-1622f8fc></span></div><span class="text" data-v-1622f8fc>直播中</span>',2)]))}let ev=(0,x.default)({},[["render",render],["__scopeId","data-v-1622f8fc"]]);var ef={key:0,class:"living-avatar"},ep={class:"avatar-container"},eh=(0,g.aZ)({__name:"Index",props:{isLiving:{type:Boolean,default:!1},avatarUrl:{}},setup:function(e){(0,g.sj)(function(e){return{"15780b22":(0,g.SU)(n),"5e9ac85a":(0,g.SU)(t)}});var t=(0,g.Fl)(function(){return"".concat(20,"px")}),n=(0,g.Fl)(function(){return"".concat(29.900000000000002,"px")});return function(t,n){return e.isLiving?((0,g.wg)(),(0,g.iD)("div",ef,[n[1]||(n[1]=(0,g._)("div",{class:"breath-ring"},[(0,g._)("div",{class:"ring-layer inner"}),(0,g._)("div",{class:"ring-layer outer"})],-1)),(0,g._)("div",ep,[(0,g.Wm)((0,g.SU)(eo.yV),{preload:!0,"preload-placeholder":!0,crossorigin:"anonymous",class:"avatar-image",loading:"lazy",width:20,height:20,src:e.avatarUrl},null,8,["src"]),n[0]||(n[0]=(0,g._)("div",{class:"live-badge"},[(0,g._)("span",{class:"live-text"},"直播")],-1))])])):((0,g.wg)(),(0,g.j4)((0,g.SU)(eo.yV),{key:1,crossorigin:"anonymous",class:"author-avatar",loading:"lazy",width:"20",height:"20",src:t.avatarUrl},null,8,["src"]))}}});let eg=(0,x.default)(eh,[["__scopeId","data-v-6e01e668"]]);var em=n(8306),ey=n(48828),eI=["innerHTML"],e_=(0,g.aZ)({__name:"ItemTitle",props:{content:{},supportWebp:{type:Boolean}},setup:function(e){function getTitle(){var t,n;return null===(t=(0,em.Tp)(null!==(n=e.content)&&void 0!==n?n:""))||void 0===t?void 0:t.replace(/\[(.*?)]/g,function(t){return ey[t]?'<img src="'.concat(ey[t],"?imageView2/2/w/100/format/").concat(e.supportWebp?"webp":"png",'">'):t})}return function(e,t){return(0,g.wg)(),(0,g.iD)("span",{innerHTML:getTitle()},null,8,eI)}}});let ew=(0,x.default)(e_,[["__scopeId","data-v-4cf4517a"]]);n(30149),n(69308),n(63630);var ek=["data-width","data-height","data-index"],eS={class:"live-indicator-wrapper"},eb=["href"],eC={class:"footer"},eM=["href"],eA={class:"author-wrapper"},eL=["href"],ex={class:"name"},eT={class:"fans-persona-wrapper"},eD=(0,g.aZ)({__name:"Index",props:{feed:{},columns:{},responsiveWidth:{},gap:{},getPosition:{type:Function},position:{},prevPosition:{},supportWebp:{type:Boolean},staticLayout:{type:Boolean},gray:{type:Boolean},preloadThreshold:{}},emits:["impression","roomInfoClick"],setup:function(e,t){var r,i=t.emit;(0,g.sj)(function(e){return{"9a30fe7e":(0,g.SU)(_),e6a3b798:(0,g.SU)(w)}});var a=(0,g.iH)(),o=(0,g.iH)(!!e.feed.exposed),u=(0,g.qj)({}),l=(0,g.iH)(0),s=useRoomRoute().getRoomPageUrl,c=(0,g.Fl)(function(){return e.feed.exposed?"card-exposed":void 0}),d=(0,g.Fl)(function(){return!!e.preloadThreshold&&e.feed.index<e.preloadThreshold}),v=e.feed.live||{},f=(null==v?void 0:v.tRoomInfo)||{},p=(null==v?void 0:v.tLiveHostInfo)||{},m=(null==f?void 0:f.coverInfo)||{},y=s(null==f?void 0:f.roomIdStr,{track_id:v.trackId||"",source:h.Hx.WEB_FEED}),I=(0,g.Fl)(function(){if(m.width&&m.height)return(null==e?void 0:e.responsiveWidth)?"".concat(Math.round(e.responsiveWidth/(null==m?void 0:m.width)*(null==m?void 0:m.height)),"px"):"".concat(Math.round(192/m.width*m.height),"px");return"0px"}),_=(0,g.Fl)(function(){return(null==e?void 0:e.responsiveWidth)?"".concat(e.responsiveWidth,"px"):ec}),w=(0,g.Fl)(function(){return e.columns<3?"12px":"16px"});function createObserver(){return new IntersectionObserver(function(t,n){if(t[0].isIntersecting){if(!e.feed.exposed)i("impression",e.feed),e.feed.exposed=!0,es.A.updateState(es.T.noteImpression,function(e){return(null!=e?e:0)+1}),n.disconnect()}},{threshold:[.5,1]})}function handleRoomInfoClick(){i("roomInfoClick",e.feed)}function onImgLoaded(){return _onImgLoaded.apply(this,arguments)}function _onImgLoaded(){return(_onImgLoaded=(0,W._)(function(){return(0,q.Jh)(this,function(e){return m.coverImage&&(0,g.Y3)(function(){o.value=!0}),[2]})})).apply(this,arguments)}function calcPosition(){var t=e.feed.index;if(e.staticLayout&&a.value){var n=e.getPosition(a.value.clientHeight,t).column;l.value=n}if(!e.position&&!!a.value&&!e.staticLayout)if(0===t||e.prevPosition){var r=e.getPosition(a.value.clientHeight,t),i=r.left,o=r.top,s=r.column;l.value=s,u.transform="translate(".concat(i,"px, ").concat(o,"px)")}else(0,g.Y3)(calcPosition)}return(0,g.vl)(function(){var t;(null==e?void 0:null===(t=e.feed)||void 0===t?void 0:t.ssrRendered)!==void 0&&(e.feed.ssrRendered=!0,o.value=!0)}),(0,g.wF)(function(){var t;(null==e?void 0:null===(t=e.feed)||void 0===t?void 0:t.ssrRendered)&&(o.value=!0)}),e.position&&(u.transform="translate(".concat(e.position.left,"px, ").concat(e.position.top,"px)"),l.value=+(null==e?void 0:null===(r=e.position)||void 0===r?void 0:r.column)),(0,g.bv)((0,W._)(function(){return(0,q.Jh)(this,function(t){switch(t.label){case 0:if(calcPosition(),e.feed.exposed)return[3,3];if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype)return[3,2];return[4,n.e("5688").then(n.t.bind(n,15886,23))];case 1:t.sent(),t.label=2;case 2:createObserver().observe(a.value),t.label=3;case 3:return[2]}})})),(0,g.YP)(function(){return e.staticLayout},calcPosition),function(t,n){var r,i,l,s;return(0,g.wg)(),(0,g.iD)("section",{ref_key:"roomInfoEl",ref:a,class:(0,g.C_)(["live-item",{"static-layout":t.staticLayout,gray:t.gray}]),style:(0,g.j5)((0,g.SU)(u)),"data-width":null===(r=(0,g.SU)(m))||void 0===r?void 0:r.width,"data-height":null===(i=(0,g.SU)(m))||void 0===i?void 0:i.height,"data-index":t.feed.index},[(0,g._)("div",eS,[(0,g.Wm)(ev)]),(0,g.Wm)((0,g.SU)(K.rH),{custom:"",to:(0,g.SU)(y)},{default:(0,g.w5)(function(){return[(0,g._)("a",{class:(0,g.C_)(["cover mask",{ld:(0,g.SU)(o)}]),target:"_blank",style:(0,g.j5)({height:(0,g.SU)(I)}),href:(0,g.SU)(y),onClick:handleRoomInfoClick},[(0,g.Wm)((0,g.SU)(eo.yV),{src:(0,g.SU)(el._1)((0,g.SU)(m).coverImage),placeholder:e.feed.exposed&&(0,g.SU)(o)?void 0:(0,g.SU)(el._1)((0,g.SU)(m).coverImage),preload:(0,g.SU)(d),"preload-placeholder":(0,g.SU)(d),loading:(0,g.SU)(d)?"eager":"lazy",elementtiming:(0,g.SU)(c),style:{width:"100%",height:"100%","object-fit":"cover"},onPlaceholderLoaded:onImgLoaded},null,8,["src","placeholder","preload","preload-placeholder","loading","elementtiming"])],14,eb)]}),_:1},8,["to"]),(0,g._)("div",eC,[(null===(l=(0,g.SU)(f))||void 0===l?void 0:l.name)?((0,g.wg)(),(0,g.j4)((0,g.SU)(K.rH),{key:0,to:(0,g.SU)(y),custom:""},{default:(0,g.w5)(function(){var e;return[(0,g._)("a",{target:"_blank'",class:"title",href:(0,g.SU)(y),onClick:handleRoomInfoClick},[(0,g.Wm)(ew,{"support-webp":t.supportWebp,content:null===(e=(0,g.SU)(f))||void 0===e?void 0:e.name},null,8,["support-webp","content"])],8,eM)]}),_:1},8,["to"])):(0,g.kq)("",!0),(0,g._)("div",eA,[(0,g.Wm)((0,g.SU)(K.rH),{custom:"",to:(0,g.SU)(y)},{default:(0,g.w5)(function(){var e,t;return[(0,g._)("a",{class:"author",href:(0,g.SU)(y),target:"_blank"},[(0,g.Wm)(eg,{"is-living":!0,"avatar-url":(null===(e=(0,g.SU)(p))||void 0===e?void 0:e.avatar)||""},null,8,["avatar-url"]),(0,g._)("span",ex,(0,g.zw)(null===(t=(0,g.SU)(p))||void 0===t?void 0:t.nickname),1)],8,eL)]}),_:1},8,["to"]),(0,g._)("div",eT,[(0,g.Wm)((0,g.SU)(eu.i8),{size:"16",icon:"fans_person",class:"fans"}),(0,g.Uk)(" "+(0,g.zw)(null===(s=(0,g.SU)(f))||void 0===s?void 0:s.displayCount),1)])])])],14,ek)}}});let eN=(0,x.default)(eD,[["__scopeId","data-v-3b74d2df"]]);var eE=n(6890),eR=n(28860),eU=["id"],eP=(0,g.aZ)({__name:"ListLives",props:{dataSource:{},useSkeleton:{type:Boolean,default:!0},supportRefresh:{type:Boolean,default:!1},infinite:{type:Boolean,default:!0},topBuffer:{default:void 0},targetRoute:{},getContainer:{type:Function,default:void 0},staticLayout:{type:Boolean,default:!1},feedsBufferRow:{default:3},firstScreenGray:{type:Boolean},containerId:{default:""},isSsrRendering:{type:Boolean},customLayout:{},loadmoreThresholdColumns:{default:2},disableOpenNote:{type:Boolean},preloadThreshold:{default:0},preloadPlaceholder:{type:Boolean},isAISearch:{type:Boolean}},emits:["onLiveListEnd","impression","roomInfoClick"],setup:function(e,t){var n=t.expose,r=t.emit,i=(0,g.BK)(e).feedsBufferRow,a=(0,eE.s6)();(0,er.x)();var o=(0,g.iH)([]),u=(0,g.iH)(0),l=(0,g.iH)(0),s=(0,g.iH)(!1),c=(0,J.Jk)((0,eR.E)()),d=c.columns,v=c.columnWidth,f=c.gap,p=c.minRenderNotes,h=c.bufferRow;h.value=i.value;var m=(0,g.Fl)(function(){var t,n;return null!==(n=null===(t=e.customLayout)||void 0===t?void 0:t.columns)&&void 0!==n?n:d.value});function onListEnd(){e.infinite&&r("onLiveListEnd")}var y=useVirtualList({columns:m,notePositions:o,minRenderNotes:p,list:(0,g.Fl)(function(){return e.dataSource||[]}),topBuffer:null==e?void 0:e.topBuffer,loadmoreThresholdColumns:e.loadmoreThresholdColumns,onListEnd:onListEnd,getContainer:e.getContainer,isAISearch:e.isAISearch}),I=y.resetRenderList,_=y.renderList,w=useWaterfallLayout(m,v,f,o,u,(0,g.Fl)(function(){var t;return null==e?void 0:null===(t=e.dataSource)||void 0===t?void 0:t.length})).getItemPosition;function getPosition(e,t){var n=w(e,t),r=n.totalHeight,i=(0,en._)(n,["totalHeight"]);return u.value=r,i}function setContainerHeight(e){u.value=e}function shouldBeGray(t){return e.firstScreenGray&&t<p.value-(h.value-1)*m.value}return(0,g.YP)([m,v],function(){if(!s.value)document.documentElement.scrollTop=0,o.value=[],u.value=0,I()}),e.isAISearch&&(0,g.YP)(function(){return e.dataSource},function(e,t){e!==t&&e.length>0&&(o.value=[],u.value=0,I())},{deep:!1}),(0,g.se)(function(){s.value=!0,l.value=window.innerWidth}),(0,g.dl)(function(){s.value=!1,window.innerWidth!==l.value&&(document.documentElement.scrollTop=0,o.value=[],u.value=0,I())}),n({containerHeight:u,setContainerHeight:setContainerHeight}),function(t,n){return(0,g.wg)(),(0,g.iD)(g.HY,null,[(0,g._)("div",{id:t.containerId,class:(0,g.C_)(["liveList-container",{"static-layout":t.staticLayout}]),style:(0,g.j5)({width:t.isSsrRendering?"auto":"100%",height:0===(0,g.SU)(u)?"auto":"".concat((0,g.SU)(u),"px"),visibility:t.isSsrRendering?"hidden":"visible"})},[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)((0,g.SU)(_),function(t){return(0,g.wg)(),(0,g.j4)(eN,{key:t.live.tRoomInfo.roomId+t.cursorScore,gray:shouldBeGray(t.index),feed:t,columns:(0,g.SU)(m),"responsive-width":(0,g.SU)(v),gap:(0,g.SU)(f),position:(0,g.SU)(o)[t.index],"prev-position":(0,g.SU)(o)[t.index-1],"get-position":getPosition,"support-webp":(0,g.SU)(a).supportWebp,"static-layout":null==e?void 0:e.staticLayout,"preload-threshold":e.preloadThreshold,onImpression:function(e){return r("impression",e)},onRoomInfoClick:function(e){return r("roomInfoClick",e)}},null,8,["gray","feed","columns","responsive-width","gap","position","prev-position","support-webp","static-layout","preload-threshold","onImpression","onRoomInfoClick"])}),128)),(0,g.WI)(t.$slots,"reload"),(0,g.WI)(t.$slots,"backtop"),(0,g.WI)(t.$slots,"emptyNotes")],14,eU),(0,g.WI)(t.$slots,"loadingMore")],64)}}});let eF=(0,x.default)(eP,[["__scopeId","data-v-b8337d36"]]);var ej=n(12115),eO=n(8172),eH=(0,g.aZ)({__name:"LiveLoading",props:{active:{type:Boolean}},emits:["loadingImpression"],setup:function(e,t){var n=t.emit,r=(0,U._)((0,$.OT)(!0),2),i=r[0],a=r[1],o=(0,g.iH)(),u=(0,g.qj)({animateStartTime:0,animateEndTime:0});function initLoadingMetas(){u.animateStartTime=0,u.animateEndTime=0}return(0,g.bv)((0,W._)(function(){var e,t;return(0,q.Jh)(this,function(r){switch(r.label){case 0:return t=(e=(0,eO.Z)(function(){return 0},o.value,{autoCleanObserverAfterImpression:!1})).isIntersecting,[4,(0,e.startObserve)()];case 1:return r.sent(),(0,g.YP)(t,function(e,t){e&&!t?(a(!1),u.animateStartTime=Date.now()):!e&&t&&(a(!0),u.animateEndTime=Date.now(),n("loadingImpression",u),initLoadingMetas())}),[2]}})})),function(e,t){return(0,g.wg)(),(0,g.iD)("div",{ref_key:"loadingElement",ref:o,class:(0,g.C_)(["live-loading",{active:e.active}])},[(0,g.Wm)(ej.Z,{size:30,"is-paused":(0,g.SU)(i)},null,8,["is-paused"]),t[0]||(t[0]=(0,g._)("span",null,"加载中",-1))],2)}}});let eW=(0,x.default)(eH,[["__scopeId","data-v-020162e5"]]);n(17048);var ez={class:"btn-wrapper"},eB=(0,g.aZ)({__name:"Reload",setup:function(e){var t=this,n=et(),r=G()((0,W._)(function(){return(0,q.Jh)(this,function(e){switch(e.label){case 0:return[4,n.fetchLiveList(!0)];case 1:return e.sent(),(0,k.eJ)(93038),[2]}})}),500,{leading:!0,trailing:!1});return function(e,n){return(0,g.wg)(),(0,g.iD)("div",{class:"reload",onClick:n[0]||(n[0]=function(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return(0,g.SU)(r)&&(0,g.SU)(r).apply(t,(0,ei._)(n))})},[(0,g._)("div",ez,[(0,g.Wm)((0,g.SU)(eu.i8),{size:"20",icon:"reload"})]),n[1]||(n[1]=(0,g._)("div",{class:"tip-container"},[(0,g._)("span",{class:"tip-text"},"刷新")],-1))])}}});let eZ=(0,x.default)(eB,[["__scopeId","data-v-34e23062"]]);var eq=(0,g.aZ)({__name:"Index",props:{isAISearch:Boolean},setup:function(e){var t=et(),n=(0,eR.E)(),r=(0,U._)((0,$.OT)(!1),2),i=r[0],a=r[1],o=(0,g.Fl)(function(){return t.liveList||[]});function onListEnd(){t.fetchLiveList(!1)}function getPointData(e){var t,n,r,i;return{anchorId:(null==e?void 0:null===(n=e.live)||void 0===n?void 0:null===(t=n.tLiveHostInfo)||void 0===t?void 0:t.userId)||"",liveId:(null==e?void 0:null===(i=e.live)||void 0===i?void 0:null===(r=i.tRoomInfo)||void 0===r?void 0:r.roomIdStr)||""}}function handleImpression(e){(0,k.eJ)(93036,getPointData(e))}function handleRoomInfoClick(e){(0,k.eJ)(93037,getPointData(e))}function handleReportLoading(e){(0,H.Nw)({time:e.animateEndTime-e.animateStartTime,source:H.vT.MF,flag:2})}return(0,g.bv)(function(){var e=F()(function(){a(document.documentElement.scrollTop>200)},50);(0,ea.ORN)(document,"scroll",e)}),function(r,a){return(0,g.wg)(),(0,g.j4)(eF,{"data-source":(0,g.SU)(o),"get-container":function(){return(0,g.SU)(t).liveListWrapper},"first-screen-gray":!1,"container-id":"liveList","is-ssr-rendering":!(0,g.SU)(n).layoutInfoReady,"loadmore-threshold-columns":1,"is-a-i-search":e.isAISearch,onOnLiveListEnd:onListEnd,onImpression:handleImpression,onRoomInfoClick:handleRoomInfoClick},{loadingMore:(0,g.w5)(function(){return[(0,g.Wm)(eW,{active:(0,g.SU)(o).length>0&&(0,g.SU)(t).isFetching&&!(0,g.SU)(t).isError,onLoadingImpression:handleReportLoading},null,8,["active"])]}),backtop:(0,g.w5)(function(){return[(0,g.Wm)(m.Z,null,{default:(0,g.w5)(function(){return[(0,g.Wm)(O.Z,null,{default:(0,g.w5)(function(){return[(0,g.SU)(i)?((0,g.wg)(),(0,g.j4)(j.Z,{key:0})):(0,g.kq)("",!0),(0,g.Wm)(eZ)]}),_:1})]}),_:1})]}),_:1},8,["data-source","get-container","is-ssr-rendering","is-a-i-search"])}}}),eV=(0,g.aZ)({__name:"Loading",props:{visible:{type:Boolean}},setup:function(e){(0,g.sj)(function(e){return{"9bf226ba":(0,g.SU)(i)}});var t,n=(0,g.iH)(),r=(0,g.iH)(72),i=(0,g.iH)(1),a=(0,g.iH)(!0);return(0,g.m0)((0,W._)(function(){return(0,q.Jh)(this,function(t){return!e.visible&&(r.value=0,i.value=0),[2]})})),(0,g.YP)(function(){return e.visible},(t=(0,W._)(function(e){return(0,q.Jh)(this,function(t){return e&&(r.value=72,i.value=1),[2]})}),function(e){return t.apply(this,arguments)})),function(e,t){return(0,g.SU)(a)?((0,g.wg)(),(0,g.iD)("div",{key:0,id:"feeds-replace-loading",ref_key:"container",ref:n,class:"loading-container",style:(0,g.j5)({height:"".concat((0,g.SU)(r),"px")})},t[0]||(t[0]=[(0,g._)("div",{style:{height:"24px",width:"100%"}},null,-1),(0,g._)("svg",{class:"spinner",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[(0,g._)("path",{d:"M12.0001 4.70002C8.58381 4.70002 5.71358 7.04759 4.91874 10.2188C4.7979 10.7009 4.30908 10.9938 3.82694 10.873C3.34479 10.7521 3.0519 10.2633 3.17275 9.78117C4.16351 5.8283 7.73871 2.90002 12.0001 2.90002C16.2615 2.90002 19.8367 5.8283 20.8274 9.78117C20.9483 10.2633 20.6554 10.7521 20.1733 10.873C19.6911 10.9938 19.2023 10.7009 19.0815 10.2188C18.2866 7.04759 15.4164 4.70002 12.0001 4.70002ZM3.82692 13.127C4.30907 13.0061 4.79788 13.299 4.91872 13.7812C5.71353 16.9524 8.58378 19.3 12.0001 19.3C15.4164 19.3 18.2867 16.9524 19.0815 13.7812C19.2023 13.299 19.6911 13.0061 20.1733 13.127C20.6554 13.2478 20.9483 13.7366 20.8275 14.2188C19.8368 18.1717 16.2615 21.1 12.0001 21.1C7.73867 21.1 4.16344 18.1717 3.17272 14.2188C3.05188 13.7366 3.34478 13.2478 3.82692 13.127Z",fill:"currentColor","fill-opacity":"0.3"})],-1),(0,g._)("div",{style:{height:"24px",width:"100%"}},null,-1)]),4)):(0,g.kq)("",!0)}}});let eY=(0,x.default)(eV,[["__scopeId","data-v-bc710fe2"]]);n(6045),n(10364),n(67673);var eG=n(51401),eJ=[{id:0,desc:"全部"},{id:1,desc:"游戏"},{id:2,desc:"才艺颜值"},{id:3,desc:"生活分享"},{id:4,desc:"兴趣手工"},{id:5,desc:"科技财经"},{id:6,desc:"运动户外"}];function useList(){var e,t,n,r=(0,X.L)(),i=(0,eR.E)(),a=(0,eE.s6)(),o=et(),u=(0,J.Jk)(o),l=u.liveList,s=u.currentChannel,c=u.categories,d=u.cancelFeedRequest,v=u.pageStatus;(0,g.bv)(function(){eG.Z.remove("mfcache",{domain:".xiaohongshu.com"})});var f=(0,g.iH)(0),p=(0,g.iH)(!1),h=(0,g.Fl)(function(){var e;return c.value?null===(e=c.value)||void 0===e?void 0:e.map(function(e){return{key:null==e?void 0:e.id,label:null==e?void 0:e.desc}}):eJ}),m=(0,g.Fl)(function(){return!["0",0].includes(s.value)}),y=(0,g.Fl)(function(){return"".concat(i.gap.horizontal-.5,"px")});var I=(e=(0,W._)(function(){var e,t,n,u;return(0,q.Jh)(this,function(s){switch(s.label){case 0:if(e=function(){return l.value.length<i.minRenderNotes-2*i.columns},o.cancelFeedRequest)return[2];if(!(a.appSettings.retryFeeds&&e()))return[3,2];return[4,o.fetchLiveList()];case 1:s.sent(),s.label=2;case 2:return e()&&!o.isError&&(u={currentnum:null!==(n=null===(t=o.liveList)||void 0===t?void 0:t.length)&&void 0!==n?n:0,mincnt:i.minRenderNotes-2*i.columns,webid:eG.Z.get("webId")||"unknown",login:r.loggedIn},H.Ti.trackLoseNote(JSON.stringify(u))),[2]}})}),function retryOnFirstScreenFeedsNotEnough(){return e.apply(this,arguments)});(0,g.wF)((0,W._)(function(){return(0,q.Jh)(this,function(e){return 0===o.liveList.length?o.fetchLiveList(!1):I(),[2]})})),(0,g.vl)((0,W._)(function(){return(0,q.Jh)(this,function(e){return[2]})})),(0,g.bv)((0,W._)(function(){return(0,q.Jh)(this,function(e){switch(e.label){case 0:if(c.value)return[3,2];return[4,o.getListChannels()];case 1:e.sent(),e.label=2;case 2:return[2]}})}));var _=(t=(0,W._)(function(){return(0,q.Jh)(this,function(e){switch(e.label){case 0:return[4,o.fetchLiveList()];case 1:return e.sent(),[2]}})}),function refresh(){return t.apply(this,arguments)});return(0,K.iS)(function(e,t,n){f.value=document.documentElement.scrollTop,d.value=!0,n()}),(0,g.dl)(function(){d.value=!1,p.value&&"loading"===v.value&&o.fetchLiveList(),document.documentElement.scrollTop=f.value,p.value=!0}),{handleChannelClick:(n=(0,W._)(function(e){return(0,q.Jh)(this,function(t){return document.documentElement.scrollTop=0,d.value=!1,o.switchChannel(e.key),[2]})}),function handleChannelClick(e){return n.apply(this,arguments)}),gap:y,refresh:_,permitSticky:m,channelList:h,pageStatus:v,currentChannel:s,channelReducer:function(e){return e}}}var eQ=(0,g.aZ)({__name:"Index",props:{isAISearch:Boolean},setup:function(e){var t=useList(),n=t.channelList,r=t.currentChannel,i=t.handleChannelClick,a=t.pageStatus,o=t.refresh,u=t.permitSticky,l=t.channelReducer,s=(0,g.Fl)(function(){return!e.isAISearch&&!!u.value}),c=(0,eR.E)();return function(t,u){return(0,g.wg)(),(0,g.iD)(g.HY,null,[e.isAISearch?((0,g.wg)(),(0,g.j4)(R,{key:0,"active-key":(0,g.SU)(r),"onUpdate:activeKey":u[0]||(u[0]=function(e){return(0,g.dq)(r)?r.value=e:null}),"channel-list":(0,g.SU)(l)((0,g.SU)(n)),onChannelClick:(0,g.SU)(i)},null,8,["active-key","channel-list","onChannelClick"])):((0,g.wg)(),(0,g.j4)(T,{key:1,"active-key":(0,g.SU)(r),"onUpdate:activeKey":u[1]||(u[1]=function(e){return(0,g.dq)(r)?r.value=e:null}),"channel-list":(0,g.SU)(l)((0,g.SU)(n)),"permit-sticky":(0,g.SU)(s),onChannelClick:(0,g.SU)(i)},null,8,["active-key","channel-list","permit-sticky","onChannelClick"])),"error"===(0,g.SU)(a)?((0,g.wg)(),(0,g.j4)(y.Z,{key:2,refresh:(0,g.SU)(o)},null,8,["refresh"])):(0,g.kq)("",!0),(0,g.Wm)(m.Z,null,{default:(0,g.w5)(function(){return[(0,g.Wm)(eY,{visible:"update"===(0,g.SU)(a)},null,8,["visible"])]}),_:1}),"loading"===(0,g.SU)(a)?((0,g.wg)(),(0,g.j4)(I.Z,{key:3,columns:(0,g.SU)(c).columns},null,8,["columns"])):(0,g.kq)("",!0),"liveList"===(0,g.SU)(a)||"update"===(0,g.SU)(a)?((0,g.wg)(),(0,g.j4)(eq,{key:4,"is-a-i-search":e.isAISearch},null,8,["is-a-i-search"])):(0,g.kq)("",!0)],64)}}}),eK=eQ;n(97542),n(64961),n(12996),n(59564),n(19077),n(75973);var eX=n(64732),e$=n(17792),e0=n(17352);n(87394),n(94941),n(48421),n(74719),n(13396),n(91313);var e1="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDQwIDQwIj48cGF0aCBmaWxsPSJ1cmwoI2EpIiBkPSJNMTIuODgyIDEuMTYxYTEgMSAwIDAgMSAxLjA5IDEuNjc4Yy0uNjAxLjM5LS43OS42Ny0uODQ2LjgwNi0uMDQuMDk1LS4wNS4xOTIuMDI0LjM4LjA5LjIzLjI1NS40NzkuNTA4Ljg0MS4yMTYuMzEuNTM0Ljc1Ni43MDkgMS4yMzYuMzUuOTYuMzgyIDEuODkyLjAyNSAyLjc1My0uMzQ3LjgzNy0xLjAwOCAxLjQ3Ny0xLjc4OSAxLjk4NGExIDEgMCAwIDEtMS4wOS0xLjY3OGMuNTg4LS4zODIuODk1LS43NDMgMS4wMzEtMS4wNzIuMTI3LS4zMDUuMTYtLjcwNy0uMDU2LTEuMzAyLS4wNjgtLjE4Ny0uMjE1LS40MDgtLjQ3Mi0uNzc4LS4yMi0uMzE4LS41MzgtLjc2NS0uNzMtMS4yNTctLjIwNy0uNTMzLS4yOTctMS4xODYtLjAwNC0xLjg4Mi4yNzUtLjY1Ni44MzItMS4yMSAxLjYtMS43MDltNS45MzggMGExIDEgMCAwIDEgMS4wODkgMS42NzhjLS42LjM5LS43ODkuNjctLjg0Ni44MDYtLjA0LjA5NS0uMDQ5LjE5Mi4wMjQuMzguMDkuMjMuMjU2LjQ3OS41MDguODQxLjIxNi4zMS41MzQuNzU2LjcxIDEuMjM2LjM1Ljk2LjM4MiAxLjg5Mi4wMjUgMi43NTMtLjM0OC44MzctMS4wMDkgMS40NzctMS43OSAxLjk4NGExIDEgMCAwIDEtMS4wOS0xLjY3OGMuNTg5LS4zODIuODk1LS43NDMgMS4wMzItMS4wNzIuMTI3LS4zMDUuMTYtLjcwNy0uMDU3LTEuMzAyLS4wNjgtLjE4Ny0uMjE0LS40MDgtLjQ3MS0uNzc4LS4yMjEtLjMxOC0uNTM4LS43NjUtLjczLTEuMjU3LS4yMDgtLjUzMy0uMjk3LTEuMTg2LS4wMDUtMS44ODIuMjc2LS42NTYuODMzLTEuMjEgMS42LTEuNzA5bTUuOTM3IDBhMSAxIDAgMCAxIDEuMDkgMS42NzhjLS42MDEuMzktLjc5LjY3LS44NDcuODA2LS4wNC4wOTUtLjA0OS4xOTIuMDI1LjM4LjA5LjIzLjI1Ni40NzkuNTA4Ljg0MS4yMTYuMzEuNTM0Ljc1Ni43MDkgMS4yMzYuMzUuOTYuMzgzIDEuODkyLjAyNSAyLjc1My0uMzQ3LjgzNy0xLjAwOCAxLjQ3Ny0xLjc4OSAxLjk4NGExIDEgMCAwIDEtMS4wOS0xLjY3OGMuNTg4LS4zODIuODk1LS43NDMgMS4wMzEtMS4wNzIuMTI3LS4zMDUuMTYtLjcwNy0uMDU2LTEuMzAyLS4wNjgtLjE4Ny0uMjE1LS40MDgtLjQ3Mi0uNzc4LS4yMi0uMzE4LS41MzgtLjc2NS0uNzMtMS4yNTctLjIwNy0uNTMzLS4yOTctMS4xODYtLjAwNC0xLjg4Mi4yNzUtLjY1Ni44MzItMS4yMSAxLjYtMS43MDkiLz48cGF0aCBmaWxsPSIjRDlEOUQ5IiBkPSJtMzAgMTIuMDctLjA1OC4wMVEzMC40NiAxMiAzMSAxMmE3IDcgMCAxIDEtMS4wMDggMTMuOTI2bC4wMDguMDAyVjI4YTYgNiAwIDAgMS02IDZIMTRhNiA2IDAgMCAxLTYtNlYxMmgyMnptLS4zMyAxMy44MDEuMDU4LjAxem0tLjMyNC0uMDcuMDc2LjAxN3ptLS4zMDEtLjA4LjA1Ni4wMTV6bS0uNjA0LS4yMDUuMDUzLjAyem0tMS41OTQtLjg4MS4wNDQuMDMxem0tLjQ5OC0uNDA1LjA3OS4wNjh6bS0uMjMzLS4yMTYuMDkuMDg1em0tLjIwNi0uMjExLjA0Ny4wNXptLS4yMzgtLjI2NnEuMDQ1LjA1NC4wOTIuMTA3em0tLjE4OS0uMjMuMDcyLjA5em0tLjE4My0uMjQ1LjA1NS4wNzdxLS4wMjktLjAzOS0uMDU1LS4wNzhtLS4yMS0uMzEzLjA4OC4xMzdxLS4wNDUtLjA2OC0uMDg4LS4xMzdNMzEgMTUuNWEzLjUgMy41IDAgMSAwIDAgNyAzLjUgMy41IDAgMCAwIDAtN20tNi4zIDYuNTUzcS4wMjUuMDUxLjA1Mi4xMDJ6bS0uMTM0LS4yOTJxLjAzLjA3LjA2NC4xNDF6bS0uMTE4LS4yOTMuMDUuMTIzem0tLjM5OC0xLjY0NXEuMDExLjEwMy4wMjUuMjA0LS4wMTQtLjEwMS0uMDI1LS4yMDRtLS4wMy0uMzA3LjAxMy4xNjR6bS4wMTMtMS4xOTctLjAxMy4xNjR6bS43NjMtMi41NjFxLS4wNTIuMDk3LS4xLjE5Ni4wNDgtLjA5OS4xLS4xOTZtLjIxNy0uMzg3cS0uMDYuMS0uMTE2LjIuMDU2LS4xLjExNi0uMm0uMzUyLS41MjQtLjA5LjEyN3ptLjg3LS45NzQtLjE0LjEzM3ptMS43MTYtMS4xNzdxLS4xMDIuMDUyLS4yMDMuMTA1LjEtLjA1NS4yMDMtLjEwNW0xLjk1LS42MSIvPjxkZWZzPjxsaW5lYXJHcmFkaWVudCBpZD0iYSIgeDE9IjIwLjE3OCIgeDI9IjIwLjE3OCIgeTE9IjExIiB5Mj0iMSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjgiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmZmYiIHN0b3Atb3BhY2l0eT0iLjMiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48L3N2Zz4=",e3=n(73078),e2="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii44IiBkPSJNMTIgMTdhLjc1Ljc1IDAgMCAxLS43NS0uNzV2LTMuNWgtMy41YS43NS43NSAwIDAgMSAwLTEuNWgzLjV2LTMuNWEuNzUuNzUgMCAwIDEgMS41IDB2My41aDMuNWEuNzUuNzUgMCAwIDEgMCAxLjVoLTMuNXYzLjVBLjc1Ljc1IDAgMCAxIDEyIDE3Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuOCIgZD0iTTIyIDEyYzAgNS41MjMtNC40NzcgMTAtMTAgMTBTMiAxNy41MjMgMiAxMiA2LjQ3NyAyIDEyIDJzMTAgNC40NzcgMTAgMTBtLTEuNSAwYTguNSA4LjUgMCAxIDAtMTcgMCA4LjUgOC41IDAgMCAwIDE3IDAiLz48L3N2Zz4=";var e4=((r={})[r.Video=0]="Video",r[r.AudioChat=1]="AudioChat",r[r.Game=2]="Game",r);var e5=((i={})[i.MasterSlave=0]="MasterSlave",i[i.Grid=1]="Grid",i);var e8=((a={})[a.Grid=0]="Grid",a[a.Mixed=1]="Mixed",a);function maskNickname(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?"".concat(e[0],"***"):"匿名用户"}function getDisplayNicknameForLinkmic(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return!i||3===a||1===t||n&&r&&r===n?e||"无昵称":maskNickname(e)}var e9={key:0,class:"mode-audio-chat-mixed"},e6={key:0,class:"mixed-host-content"},e7={class:"mixed-host-avatar-wrapper"},te=["src","alt"],tt={key:1,class:"mixed-suspended-overlay"},tn={class:"mixed-host-nickname"},tr={key:0,class:"mixed-guest-empty"},ti={key:1,class:"mixed-guest-content"},ta={class:"mixed-guest-avatar-wrapper"},to=["src","alt"],tu={key:1,class:"mixed-suspended-overlay"},tl={class:"mixed-guest-info-row"},ts={class:"mixed-guest-nickname"},tc={key:0,class:"grid-empty"},td={key:0,class:"grid-avatar-overlay"},tv={class:"avatar-border-wrapper"},tf=["src","alt"],tp={key:1,class:"grid-suspended-overlay"},th={class:"grid-user-info"},tg={key:0,class:"host-badge-grid"},tm={key:2,class:"mode-master-slave"},ty={key:0,class:"avatar-overlay"},tI=["src","alt"],t_={key:0,class:"master-slave-suspended-overlay"},tw={key:1,class:"enlarged-user-hint"},tk={class:"enlarged-hint-content"},tS={key:0,class:"enlarged-hint-host-badge"},tb={class:"enlarged-user-nickname"},tC={key:2,class:"user-info-bar-master-slave"},tM={class:"nickname-container"},tA={key:0,class:"room-owner-badge"},tL={key:3,class:"mode-grid mode-video-grid"},tx={key:0,class:"grid-avatar-overlay"},tT={class:"avatar-border-wrapper"},tD=["src","alt"],tN={key:1,class:"grid-suspended-overlay"},tE={class:"grid-user-info"},tR={key:0,class:"host-badge-grid"},tU={class:"nickname-grid"},tP=(0,g.aZ)({__name:"LinkmicPlayer",props:{user:{},contentType:{default:0},layoutType:{default:0},audioChatLayoutType:{default:0},totalUserCount:{default:1}},emits:["follow-user","click-user"],setup:function(e,t){var n=t.emit,handleFollowClick=function(e,t){t.stopPropagation(),n("follow-user",e)},handleUserClick=function(t){var r=e.user.userId;if(!(!r||r.includes("null")))t.stopPropagation(),n("click-user",r,e.user.isHost||!1,t)},r=(0,g.Fl)(function(){return e.contentType===e4.AudioChat}),i=(0,g.Fl)(function(){return r.value&&e.audioChatLayoutType===e8.Mixed}),a=(0,g.Fl)(function(){return r.value&&e.audioChatLayoutType===e8.Grid}),o=(0,g.Fl)(function(){return!r.value&&e.layoutType===e5.Grid}),u=(0,g.Fl)(function(){return a.value||o.value}),l=(0,g.Fl)(function(){return e.totalUserCount<=4?"center":"left"}),s=(0,g.Fl)(function(){if(u.value)return!1;var t,n=e.user.mediaStatusList||[],r=e.user.hostId;if(!n.length||!r)return!1;var i=null===(t=n[0])||void 0===t?void 0:t.uid;return e.user.userId===i&&i!==r}),c=(0,g.Fl)(function(){return e.user.userId===e.user.hostId}),d=(0,g.Fl)(function(){return(e.user.mediaStatusList||[]).findIndex(function(t){return t.uid===e.user.userId})}),v=(0,g.Fl)(function(){return d.value>0}),f=(0,g.Fl)(function(){var t,n,r;return getDisplayNicknameForLinkmic(e.user.nickname,null!==(t=e.user.userRole)&&void 0!==t?t:0,e.user.currentUserId,e.user.userId,null!==(n=e.user.isAnonymousRoom)&&void 0!==n&&n,null!==(r=e.user.currentUserRole)&&void 0!==r?r:0)});return function(e,t){return(0,g.wg)(),(0,g.iD)("div",{class:"linkmic-player",onClick:handleUserClick},[i.value?((0,g.wg)(),(0,g.iD)("div",e9,[("user"in e?e.user:(0,g.SU)(e3.Z)).isHost?((0,g.wg)(),(0,g.iD)("div",e6,[(0,g._)("div",e7,[("user"in e?e.user:(0,g.SU)(e3.Z)).avatar?((0,g.wg)(),(0,g.iD)("img",{key:0,src:("user"in e?e.user:(0,g.SU)(e3.Z)).avatar,alt:("user"in e?e.user:(0,g.SU)(e3.Z)).nickname,class:"mixed-host-avatar"},null,8,te)):(0,g.kq)("",!0),("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended?((0,g.wg)(),(0,g.iD)("div",tt,t[3]||(t[3]=[(0,g._)("img",{src:e1,alt:"暂时离开",class:"mixed-suspended-icon"},null,-1)]))):(0,g.kq)("",!0)]),t[4]||(t[4]=(0,g._)("div",{class:"mixed-host-badge"}," 主播 ",-1)),(0,g._)("div",tn,(0,g.zw)(("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended?"暂时离开":f.value),1)])):((0,g.wg)(),(0,g.iD)(g.HY,{key:1},[!("user"in e?e.user:(0,g.SU)(e3.Z)).userId||("user"in e?e.user:(0,g.SU)(e3.Z)).userId.includes("null")?((0,g.wg)(),(0,g.iD)("div",tr,t[5]||(t[5]=[(0,g._)("div",{class:"mixed-empty-avatar"},[(0,g._)("span",{class:"mixed-empty-icon"},"+")],-1),(0,g._)("div",{class:"mixed-empty-text"},"暂无人连线",-1)]))):((0,g.wg)(),(0,g.iD)("div",ti,[(0,g._)("div",ta,[("user"in e?e.user:(0,g.SU)(e3.Z)).avatar?((0,g.wg)(),(0,g.iD)("img",{key:0,src:("user"in e?e.user:(0,g.SU)(e3.Z)).avatar,alt:("user"in e?e.user:(0,g.SU)(e3.Z)).nickname,class:"mixed-guest-avatar"},null,8,to)):(0,g.kq)("",!0),("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended?((0,g.wg)(),(0,g.iD)("div",tu,t[6]||(t[6]=[(0,g._)("img",{src:e1,alt:"暂时离开",class:"mixed-suspended-icon"},null,-1)]))):(0,g.kq)("",!0)]),(0,g._)("div",tl,[(0,g._)("span",ts,(0,g.zw)(("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended?"暂时离开":f.value),1),("user"in e?e.user:(0,g.SU)(e3.Z)).isHost||("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended||!("user"in e?e.user:(0,g.SU)(e3.Z)).followInfo||("user"in e?e.user:(0,g.SU)(e3.Z)).followInfo.following||("user"in e?e.user:(0,g.SU)(e3.Z)).isAnonymousRoom?(0,g.kq)("",!0):((0,g.wg)(),(0,g.iD)("img",{key:0,src:e2,alt:"关注",class:"mixed-follow-icon",onClick:t[0]||(t[0]=(0,g.iM)(function(t){return handleFollowClick(("user"in e?e.user:(0,g.SU)(e3.Z)).userId,t)},["stop"]))}))])]))],64))])):a.value?((0,g.wg)(),(0,g.iD)("div",{key:1,class:(0,g.C_)(["mode-grid mode-audio-chat-grid",{"has-video":("user"in e?e.user:(0,g.SU)(e3.Z)).hasVideo}])},[!("user"in e?e.user:(0,g.SU)(e3.Z)).userId||("user"in e?e.user:(0,g.SU)(e3.Z)).userId.includes("null")?((0,g.wg)(),(0,g.iD)("div",tc,t[7]||(t[7]=[(0,g._)("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDQ4IDQ4Ij48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLW9wYWNpdHk9Ii4zNiIgZD0iTTI0IDhhMS44IDEuOCAwIDAgMSAxLjggMS44djEyLjRoMTIuNGExLjggMS44IDAgMCAxIDAgMy42SDI1Ljh2MTIuNGExLjggMS44IDAgMCAxLTMuNiAwVjI1LjhIOS44YTEuOCAxLjggMCAwIDEgMC0zLjZoMTIuNFY5LjhBMS44IDEuOCAwIDAgMSAyNCA4Ii8+PC9zdmc+",alt:"添加",class:"grid-empty-plus"},null,-1),(0,g._)("div",{class:"grid-empty-text"}," 暂无人连线 ",-1)]))):((0,g.wg)(),(0,g.iD)(g.HY,{key:1},[("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended||!("user"in e?e.user:(0,g.SU)(e3.Z)).hasVideo?((0,g.wg)(),(0,g.iD)("div",td,[(0,g._)("div",tv,[("user"in e?e.user:(0,g.SU)(e3.Z)).avatar?((0,g.wg)(),(0,g.iD)("img",{key:0,src:("user"in e?e.user:(0,g.SU)(e3.Z)).avatar,alt:("user"in e?e.user:(0,g.SU)(e3.Z)).nickname,class:"avatar-grid"},null,8,tf)):(0,g.kq)("",!0),("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended?((0,g.wg)(),(0,g.iD)("div",tp,t[8]||(t[8]=[(0,g._)("img",{src:e1,alt:"暂时离开",class:"grid-suspended-icon"},null,-1)]))):(0,g.kq)("",!0)])])):(0,g.kq)("",!0),(0,g._)("div",{class:(0,g.C_)(["grid-info-container audio-chat-grid-info",l.value])},[(0,g._)("div",th,[("user"in e?e.user:(0,g.SU)(e3.Z)).isMaster?((0,g.wg)(),(0,g.iD)("span",tg," 主持 ")):(0,g.kq)("",!0),(0,g._)("span",{class:(0,g.C_)(["nickname-grid",{"is-suspended":("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended}])},(0,g.zw)(("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended?"暂时离开":f.value),3),("user"in e?e.user:(0,g.SU)(e3.Z)).isRoomOwner||("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended||!("user"in e?e.user:(0,g.SU)(e3.Z)).followInfo||("user"in e?e.user:(0,g.SU)(e3.Z)).followInfo.following||("user"in e?e.user:(0,g.SU)(e3.Z)).isAnonymousRoom?(0,g.kq)("",!0):((0,g.wg)(),(0,g.iD)("img",{key:1,src:e2,alt:"关注",class:"follow-icon-grid",onClick:t[1]||(t[1]=(0,g.iM)(function(t){return handleFollowClick(("user"in e?e.user:(0,g.SU)(e3.Z)).userId,t)},["stop"]))}))])],2)],64))],2)):u.value?((0,g.wg)(),(0,g.iD)("div",tL,[("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended||!("user"in e?e.user:(0,g.SU)(e3.Z)).hasVideo?((0,g.wg)(),(0,g.iD)("div",tx,[(0,g._)("div",tT,[("user"in e?e.user:(0,g.SU)(e3.Z)).avatar?((0,g.wg)(),(0,g.iD)("img",{key:0,src:("user"in e?e.user:(0,g.SU)(e3.Z)).avatar,alt:("user"in e?e.user:(0,g.SU)(e3.Z)).nickname,class:"avatar-grid"},null,8,tD)):(0,g.kq)("",!0),("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended?((0,g.wg)(),(0,g.iD)("div",tN,t[12]||(t[12]=[(0,g._)("img",{src:e1,alt:"暂时离开",class:"grid-suspended-icon"},null,-1)]))):(0,g.kq)("",!0)])])):(0,g.kq)("",!0),!("user"in e?e.user:(0,g.SU)(e3.Z)).isHost||("user"in e?e.user:(0,g.SU)(e3.Z)).shouldShowNickname||("user"in e?e.user:(0,g.SU)(e3.Z)).isHost&&("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended?((0,g.wg)(),(0,g.iD)("div",{key:1,class:(0,g.C_)(["grid-info-container",l.value])},[(0,g._)("div",tE,[("user"in e?e.user:(0,g.SU)(e3.Z)).isMaster?((0,g.wg)(),(0,g.iD)("span",tR," 主持 ")):(0,g.kq)("",!0),(0,g._)("span",tU,(0,g.zw)(("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended?"暂时离开":f.value),1),("user"in e?e.user:(0,g.SU)(e3.Z)).isHost||("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended||!("user"in e?e.user:(0,g.SU)(e3.Z)).followInfo||("user"in e?e.user:(0,g.SU)(e3.Z)).followInfo.following||("user"in e?e.user:(0,g.SU)(e3.Z)).isAnonymousRoom?(0,g.kq)("",!0):((0,g.wg)(),(0,g.iD)("img",{key:1,src:e2,alt:"关注",class:"follow-icon-grid",onClick:t[2]||(t[2]=(0,g.iM)(function(t){return handleFollowClick(("user"in e?e.user:(0,g.SU)(e3.Z)).userId,t)},["stop"]))}))])],2)):(0,g.kq)("",!0)])):((0,g.wg)(),(0,g.iD)("div",tm,[!("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended&&("user"in e?e.user:(0,g.SU)(e3.Z)).hasVideo||s.value?(0,g.kq)("",!0):((0,g.wg)(),(0,g.iD)("div",ty,[(0,g._)("img",{src:("user"in e?e.user:(0,g.SU)(e3.Z)).avatar,alt:("user"in e?e.user:(0,g.SU)(e3.Z)).nickname,class:"avatar-master-slave"},null,8,tI),("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended?((0,g.wg)(),(0,g.iD)("div",t_,t[9]||(t[9]=[(0,g._)("img",{src:e1,alt:"暂时离开",class:"master-slave-suspended-icon"},null,-1)]))):(0,g.kq)("",!0)])),s.value?((0,g.wg)(),(0,g.iD)("div",tw,[t[10]||(t[10]=(0,g._)("div",{class:"enlarged-hint-tip"},[(0,g._)("div",{class:"enlarged-hint-dot"}),(0,g._)("div",{class:"enlarged-hint-text"}," 画面放大中 ")],-1)),t[11]||(t[11]=(0,g._)("div",{class:"enlarged-hint-line"},null,-1)),(0,g._)("div",tk,[("user"in e?e.user:(0,g.SU)(e3.Z)).isMaster?((0,g.wg)(),(0,g.iD)("div",tS," 主持 ")):(0,g.kq)("",!0),(0,g._)("div",tb,(0,g.zw)(("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended?"暂时离开":f.value),1)])])):(0,g.kq)("",!0),v.value||("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended&&("user"in e?e.user:(0,g.SU)(e3.Z)).isHost?((0,g.wg)(),(0,g.iD)("div",tC,[(0,g._)("div",tM,[c.value?((0,g.wg)(),(0,g.iD)("span",tA," 本房 ")):(0,g.kq)("",!0),(0,g._)("span",{class:(0,g.C_)(["nickname-master-slave",{"with-badge":c.value}])},(0,g.zw)(("user"in e?e.user:(0,g.SU)(e3.Z)).isSuspended?"暂时离开":f.value),3)])])):(0,g.kq)("",!0)]))])}}});let tF=(0,x.default)(tP,[["__scopeId","data-v-60dd9f30"]]);var tj={key:0,class:"game-linkmic-container"},tO=["onClick"],tH={class:"game-linkmic-window-content"},tW={class:"game-linkmic-avatar-wrapper"},tz=["src","alt"],tB={key:1,class:"game-linkmic-suspended-overlay"},tZ={class:"game-linkmic-nickname"},tq={class:"audio-chat-mixed-container"},tV={class:"audio-chat-mixed-guests"},tY=["onMousemove"],tG=(0,g.aZ)({__name:"LinkmicLayout",props:{linkmicUsers:{type:Array,default:function(){return[]}},containerSize:{type:Object,required:!0},enableAnimation:{type:Boolean,default:!0},wrapperClass:{type:String,default:""},contentType:{type:Number,default:0},layoutType:{type:Number,default:0},audioChatLayoutType:{type:Number,default:0},onContainerSizeChange:{type:Function,default:void 0},backgroundUrl:{type:String,default:""}},emits:["follow-user","click-user"],setup:function(e,t){var n=t.emit,handleUserClick=function(e,t,r){n("click-user",e,t,r)};function getDisplayNickname(e){var t,n,r;return e.isSuspended?"暂时离开":getDisplayNicknameForLinkmic(e.nickname,null!==(t=e.userRole)&&void 0!==t?t:0,e.currentUserId,e.userId,null!==(n=e.isAnonymousRoom)&&void 0!==n&&n,null!==(r=e.currentUserRole)&&void 0!==r?r:0)}var handlePlayerWrapperMouseEnter=function(){var e=document.querySelector(".xhsplayer-skin-live");if(e){var t=new MouseEvent("mouseenter",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}},handlePlayerWrapperMouseLeave=function(){var e=document.querySelector(".xhsplayer-skin-live");if(e){var t=new MouseEvent("mouseleave",{bubbles:!0,cancelable:!0,view:window});e.dispatchEvent(t)}},r=(0,g.qj)({}),handlePlayerWrapperMouseMove=function(e,t){var n=e.currentTarget;if(!!n){var i=n.getBoundingClientRect(),a=i.height,o=e.clientY-i.top,u=o>=a-100;!r[t]&&(r[t]={isInBottomArea:!1});var l=r[t].isInBottomArea;u&&!l?(r[t].isInBottomArea=!0,handlePlayerWrapperMouseLeave()):!u&&l&&(r[t].isInBottomArea=!1,handlePlayerWrapperMouseEnter())}},i=(0,g.iH)(),a=null,o=null,u=null,l=(0,g.Fl)(function(){return e.contentType===e4.Game}),s=(0,g.Fl)(function(){return e.contentType===e4.AudioChat&&e.audioChatLayoutType===e8.Mixed}),c=(0,g.Fl)(function(){return e.linkmicUsers.filter(function(e){return e.isHost})}),d=(0,g.Fl)(function(){return e.linkmicUsers.filter(function(e){return!e.isHost})});(0,g.bv)(function(){if(!!i.value)(a=new ResizeObserver(function(t){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var u=a.value.contentRect,l=u.width,s=u.height;if(l>0&&s>0){var c={width:Math.round(l),height:Math.round(s)};e.onContainerSizeChange&&e.onContainerSizeChange(c)}}}catch(e){r=!0,i=e}finally{try{!n&&null!=o.return&&o.return()}finally{if(r)throw i}}})).observe(i.value),o=window.setInterval(function(){if(!!i.value){var t=i.value.getBoundingClientRect(),n={x:Math.round(t.x),y:Math.round(t.y),width:Math.round(t.width),height:Math.round(t.height)};if(!u){u=n;return}if((Math.abs(n.x-u.x)>=2||Math.abs(n.y-u.y)>=2||Math.abs(n.width-u.width)>=2||Math.abs(n.height-u.height)>=2)&&(u=n,e.onContainerSizeChange&&n.width>0&&n.height>0)){var r={width:n.width,height:n.height};e.onContainerSizeChange(r)}}},100)}),(0,g.Jd)(function(){a&&(a.disconnect(),a=null),null!==o&&(clearInterval(o),o=null)});var v=(0,g.Fl)(function(){return{position:"absolute",width:"100%",height:"100%",overflow:"hidden",top:0,left:0,pointerEvents:"none"}}),f=(0,g.Fl)(function(){var t=["linkmic-layout"];return e.wrapperClass&&t.push(e.wrapperClass),t.join(" ")});function getPlayerStyle(e){var t;return{position:"absolute",left:"".concat(e.x,"px"),top:"".concat(e.y,"px"),width:"".concat(e.w+.5,"px"),height:"".concat(e.h+.2,"px"),zIndex:(null!==(t=e.zorder)&&void 0!==t?t:0)+9}}return function(t,r){return(0,g.wg)(),(0,g.iD)("div",{ref_key:"containerRef",ref:i,class:(0,g.C_)([f.value]),style:(0,g.j5)(v.value)},[l.value?((0,g.wg)(),(0,g.iD)("div",tj,[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)(t.linkmicUsers,function(e,t){var n;return(0,g.wy)(((0,g.wg)(),(0,g.iD)("div",{key:"game-window-".concat(null!==(n=e.userId)&&void 0!==n?n:t),class:"game-linkmic-window",style:(0,g.j5)({"--bg-image":e.avatar?"url('".concat(e.avatar,"')"):"none"}),onClick:function(t){return handleUserClick(e.userId,e.isHost||!1,t)}},[(0,g._)("div",tH,[(0,g._)("div",tW,[e.avatar?((0,g.wg)(),(0,g.iD)("img",{key:0,src:e.avatar,alt:e.nickname,class:"game-linkmic-avatar"},null,8,tz)):(0,g.kq)("",!0),e.isSuspended?((0,g.wg)(),(0,g.iD)("div",tB,r[2]||(r[2]=[(0,g._)("img",{src:e1,alt:"暂时离开",class:"game-linkmic-suspended-icon"},null,-1)]))):(0,g.kq)("",!0)]),(0,g._)("div",tZ,(0,g.zw)(getDisplayNickname(e)),1)])],12,tO)),[[g.F8,!e.isHost&&e.userId&&!e.userId.includes("null")]])}),128))])):s.value?((0,g.wg)(),(0,g.iD)(g.HY,{key:1},[e.backgroundUrl?((0,g.wg)(),(0,g.iD)("div",{key:0,class:"linkmic-background-image",style:(0,g.j5)({backgroundImage:"url(".concat(e.backgroundUrl,")")})},null,4)):(0,g.kq)("",!0),(0,g._)("div",tq,[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)(c.value,function(t,i){var a;return(0,g.wg)(),(0,g.iD)("div",{key:null!==(a=t.userId)&&void 0!==a?a:"host-".concat(i),class:"mixed-host-wrapper"},[(0,g.Wm)(tF,{user:t,"content-type":e.contentType,"layout-type":e.layoutType,"audio-chat-layout-type":e.audioChatLayoutType,"total-user-count":e.linkmicUsers.length,onClickUser:handleUserClick,onFollowUser:r[0]||(r[0]=function(e){return n("follow-user",e)})},null,8,["user","content-type","layout-type","audio-chat-layout-type","total-user-count"])])}),128)),(0,g._)("div",tV,[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)(d.value,function(t,i){var a;return(0,g.wg)(),(0,g.iD)("div",{key:null!==(a=t.userId)&&void 0!==a?a:"guest-".concat(i),class:"audio-chat-mixed-guest-item"},[(0,g.Wm)(tF,{user:t,"content-type":e.contentType,"layout-type":e.layoutType,"audio-chat-layout-type":e.audioChatLayoutType,"total-user-count":e.linkmicUsers.length,onClickUser:handleUserClick,onFollowUser:r[1]||(r[1]=function(e){return n("follow-user",e)})},null,8,["user","content-type","layout-type","audio-chat-layout-type","total-user-count"])])}),128))])])],64)):((0,g.wg)(!0),(0,g.iD)(g.HY,{key:2},(0,g.Ko)(t.linkmicUsers,function(n,r){var i;return(0,g.wg)(),(0,g.iD)("div",{key:null!==(i=n.userId)&&void 0!==i?i:r,ref_for:!0,ref:"playerWrapperRefs",class:(0,g.C_)(["linkmic-player-wrapper",{"is-host":n.isHost,"is-center":n.isCenter}]),style:(0,g.j5)(n.position?getPlayerStyle(n.position):{}),onMouseenter:handlePlayerWrapperMouseEnter,onMouseleave:handlePlayerWrapperMouseLeave,onMousemove:function(e){return handlePlayerWrapperMouseMove(e,r)}},[(0,g.WI)(t.$slots,"user",{user:n,contentType:e.contentType,layoutType:e.layoutType,audioChatLayoutType:e.audioChatLayoutType,totalUserCount:e.linkmicUsers.length},function(){return[(0,g.Wm)(tF,{user:n,"content-type":e.contentType,"layout-type":e.layoutType,"audio-chat-layout-type":e.audioChatLayoutType,"total-user-count":e.linkmicUsers.length,onClickUser:handleUserClick},null,8,["user","content-type","layout-type","audio-chat-layout-type","total-user-count"])]})],46,tY)}),128))],6)}}});let tJ=(0,x.default)(tG,[["__scopeId","data-v-b149cc3e"]]);function calculateScale(e,t){var n=e.w/e.h,r=t.width/t.height,i=1,a=1,o=0,u=0;return n>r?(a=i=t.width/e.w,u=(t.height-e.h*a)/2):(i=a=t.height/e.h,o=(t.width-e.w*i)/2),{scaleX:i,scaleY:a,offsetX:o,offsetY:u}}function transformRegion(e,t){return(0,Z._)((0,z._)({},e),{x:e.x*t.scaleX+t.offsetX,y:e.y*t.scaleY+t.offsetY,w:e.w*t.scaleX,h:e.h*t.scaleY})}function calculateScaleForVideoZoom(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:60,i=(t.height-r)/n.validHeight,a=n.canvasWidth*i,o=(t.width-a)/2,u=r-n.validStartY*i;return{scaleX:i,scaleY:i,offsetX:o,offsetY:u}}function transformRegions(e,t,n,r){var i=r&&!r.isLandscape&&(5===r.contentType&&0===r.audioChatLayoutType||0===r.contentType&&1===r.layoutType)?calculateScaleForVideoZoom(t,n,r):calculateScale(t,n);return e.map(function(e){return transformRegion(e,i)})}n(63712),n(25069),n(63235),n(15368),n(12970),n(8503),n(32207),n(13598),n(23541),n(63827),n(30488),n(82236),n(51938),n(33913),n(94949),n(17891),n(44258),n(38609),n(4787),n(44211),n(29338),n(73405),n(98754),n(31832),n(88402),n(56712),n(99808),n(43412);var tQ=n(46490),tK=n(90251),tX=n(51606);n(96205),n(18638),n(96336),n(87168),n(14190),n(4137),n(70805),n(5317),n(81167),n(22583),n(89655),n(88598),n(11530),n(16765),n(3398),n(90621),n(35904),n(73982),n(87683),n(59735),n(69167),n(27151),n(95341),n(53395),n(10074),n(31899),n(98398),n(94837),n(53077),n(14340),n(31578),n(46521),n(49932),n(78246),n(62444),n(34076),n(12334),n(68802),n(76267),n(83257),n(90834),n(907),n(18552);var t$=n(77630),t0=n(39284),t1=n(90948),t3=n(71708),t2=n(93342),t4=n.n(t2),t5=n(15313).Buffer,t8=t4()({storeAsString:!0}),t9="LIVE",t6="room";var t7=((o={}).Init="init",o.Connecting="connecting",o.Resolve="resolve",o.Reject="reject",o.Hung="hung",o.Close="close",o);var ne=((u={}).Ready="ready",u.LoginSuccess="login-success",u.LogoutSuccess="logout-success",u.LoginFail="login-fail",u.ReLogin="relogin",u.Reconnecting="reconnecting",u.JoinRoomError="join-room-error",u),nt=[t$.EVENTS.READY,t$.EVENTS.CONNECT,t$.EVENTS.CONNECTING,t$.EVENTS.CONNECT_FAILED,t$.EVENTS.AUTHING,t$.EVENTS.AUTH_FAILED,t$.EVENTS.RECONNECTING,t$.EVENTS.CLOSE,t6,t$.EVENTS.PUSH_MESSAGE,t$.EVENTS.KICK_OUT_ROOM,t$.EVENTS.DISMISS_ROOM,t$.EVENTS.KICK_OUT];var nn=((l={})[l.ERR_SDK_NET_CONN_TIMEOUT=2000001]="ERR_SDK_NET_CONN_TIMEOUT",l[l.ERR_SDK_NET_SOCKET_LIMIT=2000007]="ERR_SDK_NET_SOCKET_LIMIT",l[l.ERR_SDK_NET_CLOSE_KICK_OUT=2000008]="ERR_SDK_NET_CLOSE_KICK_OUT",l[l.ERR_SDK_NET_CLOSE_UN_AUTH=2000009]="ERR_SDK_NET_CLOSE_UN_AUTH",l[l.ERR_SDK_NET_SEND_FAILED=2000011]="ERR_SDK_NET_SEND_FAILED",l[l.ERR_SDK_NET_WAIT_ACK_TIMEOUT=2000012]="ERR_SDK_NET_WAIT_ACK_TIMEOUT",l[l.ERR_ACCOUNT_LOGIN_EXPIRED=31e5]="ERR_ACCOUNT_LOGIN_EXPIRED",l[l.ERR_ACCOUNT_NO_AUTH=3100001]="ERR_ACCOUNT_NO_AUTH",l[l.ERR_ACCOUNT_TICK_OUT=3100002]="ERR_ACCOUNT_TICK_OUT",l[l.LINK_SYSTEM_ERROR=-1]="LINK_SYSTEM_ERROR",l);var nr=((s={})[s.Server=1006]="Server",s[s.Pull=3103]="Pull",s[s.Normal=4e3]="Normal",s[s.Ping=4001]="Ping",s[s.Frequently=5104300]="Frequently",s[s.Socket=5104301]="Socket",s[s.Network=5104302]="Network",s),ni=(0,S.j)("im-sdk"),na=function(){function IM(e){(0,tQ._)(this,IM),(0,tX._)(this,"emitter",null),(0,tX._)(this,"isReuse",!1),(0,tX._)(this,"sdk",null),(0,tX._)(this,"imIns",null),(0,tX._)(this,"sid",""),(0,tX._)(this,"status","init"),(0,tX._)(this,"userInfo",{userId:"",nickname:"",avatar:"",sid:""}),(0,tX._)(this,"opts",{heartStep:3e4,reloginStep:6e4}),(0,tX._)(this,"roomId",""),(0,tX._)(this,"sendLiveHeartTimerId",0),(0,tX._)(this,"isInRoom",!1),(0,tX._)(this,"longlink",null),(0,tX._)(this,"count",0);var t=e||{heartStep:3e4,reloginStep:6e4},n=t.heartStep,r=t.reloginStep;this.opts={heartStep:void 0===n?12e3:n,reloginStep:void 0===r?6e4:r},this.isInRoom=!1,this.setStatus("init"),this.emitter=new t3.Z}return(0,tK._)(IM,[{key:"isOk",get:function get(){return!!this.sdk&&"resolve"===this.status}},{key:"setStatus",value:function setStatus(e){this.status=e}},{key:"updateUserInfo",value:function updateUserInfo(e){this.userInfo=e}},{key:"login",value:function login(e){var t=this;return(0,W._)(function(){return(0,q.Jh)(this,function(n){return t.sid=e.sid||"",t.userInfo={userId:e.userId||"",nickname:e.nickname||"",avatar:e.avatar||"",sid:e.sid||""},[2,new Promise(function(e,n){var r,i;ni.log("IM create 开始登录"),t.sdk=t.create(),null===(r=t.imIns)||void 0===r||r.login().then((i=(0,W._)(function(r){var i;return(0,q.Jh)(this,function(a){switch(a.label){case 0:if(ni.log("IM login 返回结果",r),0!==r.code)return[3,2];return ni.log("IM登录成功"),t.setStatus("resolve"),t.emit("login-success"),[4,null===(i=t.sdk)||void 0===i?void 0:i.bizRegister({bizName:t6,serializeType:t0.SerializeType.JSON},!0)];case 1:return a.sent(),e("success"),[3,3];case 2:ni.warn("IM登录失败",r.code),t.setStatus("reject"),t.emit("login-fail"),n(r),a.label=3;case 3:return[2]}})}),function(e){return i.apply(this,arguments)}))})]})})()}},{key:"logout",value:function logout(){var e,t=this;null===(e=this.sdk)||void 0===e||e.logOut().then(function(){ni.log("IM登出"),t.sid="",t.userInfo={},t.emit("logout-success"),t.destroy()})}},{key:"create",value:function create(){var e=this;if(ni.log("IM创建 sid",eG.Z.get("webSession"),this.userInfo),this.longlink)return this.longlink;var t=new t1.K({uid:this.userInfo.userId,pkgVersion:"1.0.1",onTokenError:function(e){ni.warn("IM鉴权失败",e)}});this.imIns=t;var n=t.getLonglink();return n.on(t$.EVENTS.READY,function(t){e.setStatus("resolve"),ni.log("IM鉴权成功",t)}),nt.forEach(function(t){n.on(t,function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];ni.log.apply(ni,["IM事件 ".concat(t," 触发")].concat((0,ei._)(r))),e.eventEmitAgent.apply(e,[t].concat((0,ei._)(r)))})}),this.longlink=n,n}},{key:"eventEmitAgent",value:function eventEmitAgent(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.emit.apply(this,[e].concat((0,ei._)(n)))}},{key:"destroy",value:function destroy(){ni.log("IM销毁"),this.closeHeart(),this.emitter=null,this.sdk=null,this.setStatus("close")}},{key:"reLogin",value:function reLogin(){var e=this;return(0,W._)(function(){var t,n,r;return(0,q.Jh)(this,function(i){switch(i.label){case 0:return ni.log("IM重建","isInRoom = ".concat(e.isInRoom),"roomId = ".concat(e.roomId)),n=e.isInRoom,r=e.roomId,[4,null===(t=e.sdk)||void 0===t?void 0:t.logOut()];case 1:return i.sent(),e.closeHeart(),e.setStatus("close"),[2,e.login((0,Z._)((0,z._)({},e.userInfo),{sid:e.sid})).then(function(){n&&r&&e.joinRoom(r),e.emit("relogin")})]}})})()}},{key:"startHeart",value:function startHeart(){var e=this;this.count=0;this.closeHeart(),this._sendHeartBeat(),this.sendLiveHeartTimerId=window.setInterval(function(){e.isOk&&(e.count,e._sendHeartBeat())},this.opts.heartStep)}},{key:"_sendHeartBeat",value:function _sendHeartBeat(){var e=this;this.sendLiveHeartBeat().then(function(){e.count=0}).catch(function(t){e.count+=1,ni.warn("业务心跳发送失败",t)})}},{key:"closeHeart",value:function closeHeart(){window.clearInterval(this.sendLiveHeartTimerId)}},{key:"joinRoom",value:function joinRoom(e){var t=this;return(0,W._)(function(){return(0,q.Jh)(this,function(n){if(t.roomId=e,ni.log("尝试手动加入IM房间",t.roomId),!t.isOk)throw ni.log("sdk 不存在（长连接断开或者其他异常导致），当前状态为".concat(t.status)),Error("开播出错了，请重新登录账号");return[2,new Promise(function(n,r){var i;null===(i=t.sdk)||void 0===i||i.joinRoom({bizName:t6,roomId:e,roomType:t9}).then(function(e){0===e.code?(t.isInRoom=!0,t.startHeart(),ni.log("手动加入IM房间成功",t.roomId,e),n(e)):(t.isInRoom=!1,t.setStatus("reject"),ni.warn("手动加入IM房间失败",t.roomId,e),r(e),t.emit("join-room-error",{code:e.code,msg:e.msg}))}).catch(function(e){t.isInRoom=!1,t.setStatus("reject"),ni.warn("手动加入IM房间异常",t.roomId,e),r(e),t.emit("join-room-error",{code:e.code,msg:e.msg})})})]})})()}},{key:"leave",value:function leave(){var e,t=this,n=this.roomId;if(!this.isOk){ni.log("出错了, im离房时 房间已经被销毁");return}ni.log("尝试手动离开IM房间",n),null===(e=this.sdk)||void 0===e||e.leaveRoom({bizName:t6,roomId:n,roomType:t9}).then(function(e){0===e.code?(t.roomId="",t.isInRoom=!1,ni.log("手动离开IM房间成功",t.roomId)):ni.warn("手动离开IM房间失败",t.roomId),t.closeHeart()})}},{key:"onMessageReceived",value:function onMessageReceived(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.c2c,i=void 0===r||r,a=n.group,o=void 0===a||a,u=n.tag,l=void 0===u?"default":u;ni.log("IM注册消息回调 for ".concat(l),{c2c:i,group:o});var offGroupFn=function offGroupFn(){},offC2cFn=function offC2cFn(){};return o&&(offGroupFn=this.on(t6,function(n){n.forEach(function(n){var r=JSON.parse((0,t$.toUtf8String)(n.data instanceof t5?new Uint8Array(n.data):n.data)||"{}");if((1===r.command||2===r.command)&&t.isInRoom){if((null==r?void 0:r.roomId)===t.roomId)try{var i=IM.parseCustomData(r.customData);e((0,Z._)((0,z._)({},r),{data:i}))}catch(e){ni.warn("im callback(".concat(l,")"),e)}else ni.warn("评论串台了:当前roomId=".concat(t.roomId,",评论roomId=").concat(r.roomId),r)}})},l)),i&&(offC2cFn=this.on(t6,function(t){t.forEach(function(t){var n=JSON.parse((0,t$.toUtf8String)(t.data instanceof t5?new Uint8Array(t.data):t.data)||"{}");if(3===n.command)try{e((0,Z._)((0,z._)({},n),{data:IM.parseCustomData(n.customData)}))}catch(e){ni.warn("im callback(".concat(l,")"),e)}})},l)),function(){o&&offGroupFn(),i&&offC2cFn()}}},{key:"onMessagePush",value:function onMessagePush(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this.on(t$.EVENTS.PUSH_MESSAGE,function(t){var n=null;try{t.forEach(function(e){(n=e.data).payload=JSON.parse(n.payload)})}catch(e){}n&&"live-livehelper"===n.topic&&(ni.log("im PUSH消息",n),e(n.payload))},t)}},{key:"sendMessage",value:function sendMessage(e){var t=this;if(!this.isOk||!this.isInRoom)throw Error("消息发送出错");return ni.log("IM 状态",this.isOk,this.isInRoom),new Promise(function(n,r){ni.log("发送IM消息",t.userInfo);var i,a=IM.stringifyMessageCustomData(e,{nickname:t.userInfo.nickname,avatar:t.userInfo.avatar,user_id:t.userInfo.userId});null===(i=t.sdk)||void 0===i||i.sendMessage(IM.toBinary({roomId:t.roomId,roomType:t9,command:1,customData:a}),{bizName:t6,cmd:"sendMessage",serviceId:"rrmp.o.l"}).then(function(e){0===e.code?n(e):r(e)})})}},{key:"sendLiveHeartBeat",value:function sendLiveHeartBeat(){var e=this;return new Promise(function(t,n){var r;null===(r=e.sdk)||void 0===r||r.sendMessage(IM.toBinary({roomId:e.roomId,roomType:t9,command:1,customData:IM.stringifyHeartCustomData({nickname:e.userInfo.nickname,avatar:e.userInfo.avatar,user_id:e.userInfo.userId})}),{bizName:t6,cmd:"liveHeartBeat",serviceId:"rrmp.o.l"}).then(function(e){ni.log("IM 发送业务心跳结果",e),0===e.code?t(e):n(e)})})}},{key:"syncTimeStamp",value:function syncTimeStamp(){if(!this.isOk)throw Error("时间同步出错");return this.longlink?this.longlink.syncTimeStamp():Promise.reject(Error("longlink is not initialized"))}},{key:"onDismiss",value:function onDismiss(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this.on(t$.EVENTS.DISMISS_ROOM,function(n){n.roomId===t.roomId&&n.roomType===t9&&(ni.log("IM房间解散",n),e({message:"该直播间已关播",detail:n}))},n)}},{key:"onKickedOut",value:function onKickedOut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this.on(t$.EVENTS.KICK_OUT,function(t){ni.log("被踢出IM",t),e({action:"alert",message:"该账号由于进入多个直播间而掉线，当前直播间关播，请重新开播",detail:t})},t)}},{key:"onKickedRoomOut",value:function onKickedRoomOut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this.on(t$.EVENTS.KICK_OUT_ROOM,function(t){ni.log("被踢出IM房间",t),e({action:"alert",message:"该账号由于进入多个直播间而掉线，当前直播间关播，请重新开播",detail:t})},t)}},{key:"on",value:function on(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";return ni.log("监听 ".concat(e," 事件 for ").concat(i)),null===(n=this.emitter)||void 0===n||n.on(e,t),function(){return r.off(e,t,i)}}},{key:"off",value:function off(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";ni.log("卸载监听 ".concat(e," 事件 for ").concat(r)),null===(n=this.emitter)||void 0===n||n.off(e,t)}},{key:"emit",value:function emit(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null===(t=this.emitter)||void 0===t||t.emit.apply(t,[e].concat((0,ei._)(r)))}},{key:"onError",value:function onError(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this.on(t$.EVENTS.ERROR,function(n){var r=n.code;(2000001===r||2000009===r)&&(t.setStatus("reject"),2000001===r&&ni.warn("IM状态错误","建连超时",n),2000009===r&&ni.warn("IM状态错误","没有鉴权",n)),e(n)},n)}},{key:"onClose",value:function onClose(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this.on(t$.EVENTS.CLOSE,function(n){4e3===n.code?(t.setStatus("close"),ni.log("IM正常关闭",n)):(t.setStatus("reject"),ni.warn("IM异常关闭",n)),e(n)},n)}}],[{key:"parseCustomData",value:function parseCustomData(e){try{return t8.parse(e)}catch(t){return e}}},{key:"stringifyMessageCustomData",value:function stringifyMessageCustomData(e,t){return JSON.stringify({type:"text",priority:0,profile:(0,Z._)((0,z._)({},t),{role:0}),desc:e})}},{key:"stringifyHeartCustomData",value:function stringifyHeartCustomData(e){return JSON.stringify({type:"viewer_heart",priority:0,profile:(0,Z._)((0,z._)({},e),{role:0}),source:"web_live",desc:""})}},{key:"toBinary",value:function toBinary(e){var t=JSON.stringify(e);return new TextEncoder().encode(t)}}]),IM}(),no=(0,S.j)("getOrCreateIM"),nu=null;function getOrCreateIM(){return nu?nu.status===t7.Close?(no.log("原IM实例已关闭，创建新IM实例"),nu=new na):(no.log("使用已有IM实例"),nu.isReuse=!0):(no.log("不存在的话创建IM实例"),nu=new na),nu}var nl=n(37107);var ns=((c={}).LIVE_PLAYER_LOAD="live_player_load",c.LIVE_VIDEO_PLAY="live_video_play",c.LIVE_START_TO_VIDEO_PLAY="live_start_to_video_play",c.LIVE_STATUS="live_status",c.LIVE_SHARE="live_share",c.IM_JOIN_ROOM="im_join_room",c.IM_REJOIN_ROOM="im_rejoin_room",c.IM_LOGIN="im_login",c.DANMU="danmu",c.IM_KICK_OUT="im_kick_out",c.IM_DISMISS="im_dismiss",c.IM_ERROR="im_error",c.IM_CLOSE="im_close",c.PLAY_ERROR="play_error",c.PLAY_ENDED="play_ended",c);var nc=((d={})[d.PRE=0]="PRE",d[d.LIVING=1]="LIVING",d[d.STOP=2]="STOP",d[d.ADMIN_STOP=3]="ADMIN_STOP",d[d.LOST_HEARTBEAT_STOP=4]="LOST_HEARTBEAT_STOP",d[d.LEAVE=5]="LEAVE",d[d.NOT_STARTED=6]="NOT_STARTED",d[d.PAUSE_STOP=7]="PAUSE_STOP",d[d.LIVE_ROOM_NOT_FOUND=8]="LIVE_ROOM_NOT_FOUND",d[d.LIVE_INFO_FAIL=9]="LIVE_INFO_FAIL",d),nd=(0,S.j)("apm-live-report");function reportLiveReport(e,t){var n={};n.act_name=e,n.create_time=Date.now(),n.data=JSON.stringify(t),nd.log("reportLiveReport",e,n),nl.Z.sendCustomPoint({measurement_name:"apm_web_live_act_metric",measurement_data:n})}var useInitIM=function useInitIM_useInitIM(e){var t=(0,S.j)("useInitIM"),n=(0,K.yj)(),r=[],i=[],a=getOrCreateIM(),o=(0,g.iH)(!1),imJoin=function imJoin(e){return new Promise(function(t,n){var success=function success(){t()};a.joinRoom(e).then(function(){success(),reportLiveReport(ns.IM_JOIN_ROOM,{success:1,message:"IM join room success"})}).catch(function(e){reportLiveReport(ns.IM_JOIN_ROOM,{success:0,error:(null==e?void 0:e.msg)||"unknown"}),n(e)})})};function dismissHandle(e){t.warn("dismissHandle",e),reportLiveReport(ns.IM_DISMISS,{success:0,message:"dismiss"})}function kickOutHandle(e){t.warn("被踢出房间",e),reportLiveReport(ns.IM_KICK_OUT,{success:0,message:"kick_out"})}function errorHandle(e){e.code===nn.ERR_SDK_NET_CONN_TIMEOUT?t.warn("超时:".concat(JSON.stringify(e))):e.code===nn.ERR_SDK_NET_CLOSE_UN_AUTH?t.warn("鉴权失败:".concat(JSON.stringify(e))):t.warn("未知错误:".concat(JSON.stringify(e))),reportLiveReport(ns.IM_ERROR,{success:0,message:e.message||"unknown",code:e.code||-1})}function closeHandle(e){var n=e.code;n===nr.Frequently||n===nr.Network?t.warn("当前网络不稳定，请改善网络环境"):n!==nr.Normal?t.warn("异常关闭:".concat(JSON.stringify(e))):t.warn("im链接正常关闭"),reportLiveReport(ns.IM_CLOSE,{success:0,message:e.message||"unknown",code:e.code||-1})}function reconnectingHandle(e){o.value=!0,t.warn("im重连中",e),reportLiveReport(ns.IM_JOIN_ROOM,{success:0,message:"IM重连中"})}function reLoginHandle(){t.warn("im重新登录"),reportLiveReport(ns.IM_LOGIN,{success:0,message:"IM重新登录"})}function readyHandle(){o.value&&(o.value=!1,imJoin(n.params.roomId).then(function(){t.log("im重连加入房间成功"),reportLiveReport(ns.IM_REJOIN_ROOM,{success:1,message:"IM reconnect login success"})}).catch(function(e){t.warn("im重连加入房间失败",e),reportLiveReport(ns.IM_REJOIN_ROOM,{success:0,message:"IM reconnect login failed".concat((null==e?void 0:e.msg)||"unknown")})}),t.log("im重连鉴权成功"))}a.login({userId:(null==e?void 0:e.userId)||"",nickname:(null==e?void 0:e.nickname)||"",sid:(null==e?void 0:e.sid)||"",avatar:(null==e?void 0:e.avatar)||""}).then(function(){imJoin((null==e?void 0:e.roomId)||n.params.roomId),reportLiveReport(ns.IM_LOGIN,{success:1,message:"IM登录成功"})}).catch(function(e){t.warn("IM登录失败",e),reportLiveReport(ns.IM_LOGIN,{success:0,error:(null==e?void 0:e.msg)||"unknown"})}),(0,g.bv)(function(){t.log("onMounted"),r.push(a.onError(errorHandle,"IM异常")),r.push(a.onClose(closeHandle,"IM异常")),i.push(a.onDismiss(dismissHandle,"频道内异常")),i.push(a.onKickedOut(kickOutHandle,"频道内异常")),a.on(ne.Reconnecting,reconnectingHandle),a.on(ne.ReLogin,reLoginHandle),a.on(ne.Ready,readyHandle)}),(0,g.SK)(function(){t.log("onUnmounted"),r.forEach(function(e){e()}),a.off(ne.Reconnecting,reconnectingHandle),a.off(ne.ReLogin,reLoginHandle),a.off(ne.Ready,readyHandle),i.length=0})};var nv=((v={})[v.viewer=0]="viewer",v[v.host=1]="host",v[v.admin=2]="admin",v[v.superAdmin=3]="superAdmin",v[v.guest=4]="guest",v);var nf=((f={}).AudienceJoinV2="audience_join_v2",f.Text="text",f.Share="share",f.FollowEmcee="follow_emcee",f.Praise="praise",f.Light="light",f.ComboPraise="combo_praise",f.JoinFansGroup="join_fans_group",f.FansGroupUpLevel="fans_group_up_level",f.BatchCart="batch_cart",f.Remind="remind",f.textMessage="text_message",f.GiftComment="gift_comment",f.JoinFamily="join_family",f.RedPacketV2Comment="red_packet_v2_comment",f.LiveCommonMsgAction="live_common_msg_action",f.TopMessageChange="top_message_change",f.RoomHideViewers="room_hide_viewers",f.ChangeRole="change_role",f.Refresh="refresh",f.LuckyDrawStart="lucky_draw_start",f.Toast="toast",f.Kickout="kickout",f),np=n(11205),nh=(0,S.j)("anchorService");function toFollow(e,t){return _toFollow.apply(this,arguments)}function _toFollow(){return(_toFollow=(0,W._)(function(e,t){var n,r;return(0,q.Jh)(this,function(i){switch(i.label){case 0:n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,np.Yf)({targetUserId:e,roomId:t})];case 2:return n=i.sent(),[3,4];case 3:return r=i.sent(),nh.warn(r),[3,4];case 4:return[2,n]}})})).apply(this,arguments)}function unfollow(e,t){return _unfollow.apply(this,arguments)}function _unfollow(){return(_unfollow=(0,W._)(function(e,t){var n,r;return(0,q.Jh)(this,function(i){switch(i.label){case 0:n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,np.vW)({targetUserId:e,roomId:t})];case 2:return n=i.sent(),[3,4];case 3:return r=i.sent(),nh.warn(r),[3,4];case 4:return[2,n]}})})).apply(this,arguments)}function fetchAnchorInfo(e,t){return _fetchAnchorInfo.apply(this,arguments)}function _fetchAnchorInfo(){return(_fetchAnchorInfo=(0,W._)(function(e,t){var n,r;return(0,q.Jh)(this,function(i){switch(i.label){case 0:n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,V.gD)({params:{userId:e,roomId:Number(t),forceHostView:!0,source:h.f2.SOURCE},resourceParams:{sourceId:t},baseURL:getEdithLiveApiBaseUrl(),transform:!0,withCredentials:!0})];case 2:return n=i.sent(),[3,4];case 3:return r=i.sent(),nh.warn(r),[3,4];case 4:return[2,n]}})})).apply(this,arguments)}var ng=((p={}).NONE="none",p.BOTH="both",p.FOLLOWS="follows",p.FANS="fans",p.SAME="same",p),nm=(0,J.Q_)("anchor",function(){var e,t,n,r=(0,K.yj)(),i=(0,S.j)("RoomUserInfo"),a=(0,g.iH)({}),o=(0,g.iH)(ng.NONE),u=(0,g.iH)({}),l=(0,g.iH)(ng.NONE),s=(0,g.iH)(!1),c=(0,g.iH)(!0),d=(0,g.Fl)(function(){var e,t,n,i,a;return(null===(e=r.params)||void 0===e?void 0:e.roomId)&&(null===(t=r.params)||void 0===t?void 0:t.roomId).startsWith("dynpath")?r.params.antiBlockAlias:(null===(n=r.params)||void 0===n?void 0:n.antiBlockAlias)&&(null===(i=r.params)||void 0===i?void 0:i.antiBlockAlias).startsWith("dynpath")?r.params.roomId:null===(a=r.params)||void 0===a?void 0:a.roomId}),v=(0,g.Fl)(function(){return[ng.BOTH,ng.FOLLOWS].includes(o.value)}),f=(0,g.Fl)(function(){return[ng.BOTH,ng.FOLLOWS].includes(l.value)});var p=(e=(0,W._)(function(e){var t;return(0,q.Jh)(this,function(n){switch(n.label){case 0:if(s.value)return[2];n.label=1;case 1:return n.trys.push([1,3,4,5]),s.value=!0,[4,toFollow(e,d.value)];case 2:return[2,n.sent()];case 3:return t=n.sent(),i.warn(t),[3,5];case 4:return s.value=!1,[7];case 5:return[2]}})}),function toFollowAnchor(t){return e.apply(this,arguments)});var h=(t=(0,W._)(function(e){var t;return(0,q.Jh)(this,function(n){switch(n.label){case 0:if(s.value)return[2];n.label=1;case 1:return n.trys.push([1,3,4,5]),s.value=!0,[4,unfollow(e,d.value)];case 2:return[2,n.sent()];case 3:return t=n.sent(),i.warn(t),[3,5];case 4:return s.value=!1,[7];case 5:return[2]}})}),function unFollowAnchor(e){return t.apply(this,arguments)});var m=(n=(0,W._)(function(e,t){var n,r,s,v;return(0,q.Jh)(this,function(f){switch(f.label){case 0:if(!e)return[2];f.label=1;case 1:return f.trys.push([1,3,4,5]),c.value=!0,[4,fetchAnchorInfo(e,d.value)];case 2:return n=f.sent(),t?(a.value=n||{},o.value=null==n?void 0:null===(r=n.user)||void 0===r?void 0:r.fstatus):(u.value=n||{},l.value=null==n?void 0:null===(s=n.user)||void 0===s?void 0:s.fstatus),[2,n];case 3:return v=f.sent(),i.warn(v),[3,5];case 4:return c.value=!1,[7];case 5:return[2]}})}),function getAnchorInfo(e,t){return n.apply(this,arguments)});return{anchorInfo:a,commentUserInfo:u,isFollowing:s,anchorFollwed:v,commentUserFollwed:f,anchorFstatus:o,commentUserFstatus:l,roomId:d,toFollowAnchor:p,unFollowAnchor:h,getAnchorInfo:m,clearCommentUserInfo:function(){u.value={},l.value=ng.NONE}}}),ny=n(31547);n(28636);var nI=(0,S.j)("livestreamService");function getRoomInfo(e,t){return _getRoomInfo.apply(this,arguments)}function _getRoomInfo(){return(_getRoomInfo=(0,W._)(function(e,t){var n,r;return(0,q.Jh)(this,function(i){switch(i.label){case 0:n=null,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,V.Mn)({params:{roomId:e,requestUserId:t,source:h.f2.SOURCE,clientType:h.Bh},baseURL:getEdithLiveApiBaseUrl(),transform:!0,withCredentials:!0})];case 2:return n=i.sent(),nI.log("Fetching room info for roomId:",e,"Response:",n),[3,4];case 3:return r=i.sent(),nI.warn("Error fetching room info for roomId:",e,"Error:",r),[3,4];case 4:return[2,n]}})})).apply(this,arguments)}function postJoinRoom(e,t){return _postJoinRoom.apply(this,arguments)}function _postJoinRoom(){return(_postJoinRoom=(0,W._)(function(e,t){return(0,q.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,V.Se)({roomId:e,source:h.f2.SOURCE,preSource:"pc_web",clientType:h.Bh,appId:1,viewSessionId:"".concat(t,"-").concat(Date.now())},{baseURL:getEdithLiveApiBaseUrl(),transform:!0,withCredentials:!0})];case 1:return[2,n.sent()]}})})).apply(this,arguments)}function getLiveComments(e){return _getLiveComments.apply(this,arguments)}function _getLiveComments(){return(_getLiveComments=(0,W._)(function(e){return(0,q.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,V.F8)({params:{roomId:e,source:h.f2.SOURCE,preSource:"pc_web",trackId:"",clientType:h.Bh},transform:!0,baseURL:getEdithLiveApiBaseUrl(),withCredentials:!0})];case 1:return[2,t.sent()]}})})).apply(this,arguments)}function postLiveComments(e,t){return _postLiveComments.apply(this,arguments)}function _postLiveComments(){return(_postLiveComments=(0,W._)(function(e,t){return(0,q.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,V.QW)({roomId:e,comment:t,source:h.f2.SOURCE,clientType:h.Bh},{transform:!0,baseURL:getEdithLiveApiBaseUrl(),withCredentials:!0})];case 1:return[2,n.sent()]}})})).apply(this,arguments)}function postRoomShare(e,t,n,r){return _postRoomShare.apply(this,arguments)}function _postRoomShare(){return(_postRoomShare=(0,W._)(function(e,t,n,r){return(0,q.Jh)(this,function(i){switch(i.label){case 0:return[4,(0,V.PL)({roomId:e,deeplink:t,shareTo:n,requestUserId:r,clientType:h.Bh},{baseURL:getEdithLiveApiBaseUrl(),transform:!0,withCredentials:!0})];case 1:return[2,i.sent()]}})})).apply(this,arguments)}function getRoomShareInfo(e){return _getRoomShareInfo.apply(this,arguments)}function _getRoomShareInfo(){return(_getRoomShareInfo=(0,W._)(function(e){return(0,q.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,V.Uw)({params:{roomId:e,shareSource:h.Hx.WEB_SHARE},baseURL:getEdithLiveApiBaseUrl(),transform:!0,withCredentials:!0})];case 1:return[2,t.sent()]}})})).apply(this,arguments)}function getRoomJoinBusinessBaseInfo(e){return _getRoomJoinBusinessBaseInfo.apply(this,arguments)}function _getRoomJoinBusinessBaseInfo(){return(_getRoomJoinBusinessBaseInfo=(0,W._)(function(e){return(0,q.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,V.Sq)({params:{roomId:e,source:h.f2.SOURCE},baseURL:getEdithLiveApiBaseUrl(),transform:!0,withCredentials:!0})];case 1:return[2,t.sent()]}})})).apply(this,arguments)}function getWebCommentUserViolation(){return _getWebCommentUserViolation.apply(this,arguments)}function _getWebCommentUserViolation(){return(_getWebCommentUserViolation=(0,W._)(function(){return(0,q.Jh)(this,function(e){switch(e.label){case 0:return[4,(0,V.WM)({baseURL:getEdithLiveApiBaseUrl(),transform:!0,withCredentials:!0,extractData:!1})];case 1:return[2,e.sent()]}})})).apply(this,arguments)}function formatAccuracyNum(e){if(void 0===e)return"";var t=String(e),n=Number(t);if(n<1e4)return t;if(n<1e6){if(n<1e5){var r=Number("".concat(t.slice(0,1),".").concat(t.slice(1)));return"".concat(Math.round(10*r)/10,"万")}var i=Number("".concat(t.slice(0,2),".").concat(t.slice(2)));return"".concat(Math.round(10*i)/10,"万")}if(n<1e7){var a=Number("".concat(t.slice(0,3),".").concat(t.slice(3)));return"".concat(Math.round(10*a)/10,"万")}return"999万+"}var n_=(0,S.j)("live-store"),nw=(0,J.Q_)("liveStream",function(){var e,t,n,r,i,a,initTrackDataReady=function initTrackDataReady(){!z.value&&(z.value=new Promise(function(e){Z=e}))},o=(0,g.iH)("pending"),u=(0,g.iH)("success"),l=(0,g.iH)({roomInfo:{roomId:0,roomTitle:void 0,roomCover:void 0,pullConfig:void 0,deeplink:void 0,status:void 0,displayPraiseCount:void 0,displayViewerCount:void 0,displayMemberCount:void 0}}),s=(0,g.iH)([]),c=(0,g.iH)(null),d=(0,g.iH)({}),v=(0,g.iH)(null),f=(0,g.iH)(-1),p=(0,g.iH)(!1),m=(0,g.iH)(""),y=(0,g.iH)(!1),I=(0,g.iH)(!1),_=(0,g.iH)(!1),w=(0,g.Fl)(function(){if(y.value)return I.value;try{var e=l.value.roomInfo,t=null==e?void 0:e.settings;if("string"==typeof t){var n=JSON.parse(t);return 1===n.hideViewerSwitch}if((void 0===t?"undefined":(0,ny._)(t))==="object"&&null!==t)return 1===t.hideViewerSwitch}catch(e){n_.warn("解析 settings 失败",e)}return!1}),k=(0,g.Fl)(function(){try{var e;if(null===(e=l.value.roomInfo)||void 0===e?void 0:e.pullConfig)return JSON.parse(l.value.roomInfo.pullConfig)}catch(e){return n_.warn("解析直播间拉流配置失败",e),null}return{}}),S=(0,g.Fl)(function(){var e,t,n,r,i;return{avatar:null===(e=l.value.hostInfo)||void 0===e?void 0:e.avatar,nickname:null===(t=l.value.hostInfo)||void 0===t?void 0:t.nickName,praiseCount:null===(n=l.value.roomInfo)||void 0===n?void 0:n.displayPraiseCount,viewerCount:null===(r=l.value.roomInfo)||void 0===r?void 0:r.displayViewerCount,hostId:null===(i=l.value.hostInfo)||void 0===i?void 0:i.userId}}),b=(0,g.iH)(""),M=(0,g.iH)(""),L=(0,g.iH)(""),x=(0,g.iH)(""),T=(0,g.iH)(""),D=(0,g.iH)(""),N=(0,g.iH)(""),E=(0,g.iH)(""),R=(0,g.iH)(""),U=(0,g.iH)(""),P=(0,g.iH)(""),F=(0,g.Fl)(function(){var e,t,n,r=P.value||String((null===(e=l.value.roomInfo)||void 0===e?void 0:e.roomId)||""),i=null===(t=l.value.roomInfo)||void 0===t?void 0:t.status,a=void 0!==i?String(i):"";return{anchorId:String((null===(n=l.value.hostInfo)||void 0===n?void 0:n.userId)||""),liveId:r,liveSessionId:U.value,viewSessionId:R.value,liveSource:h.f2.SOURCE,liveStatus:a||"0",liveType:_.value?"goods":"interaction",preSource:N.value||b.value||"live_room",liveInternalTrafficLayerSessionId:U.value,adsTarget_trackId:L.value||"",trackUrl:D.value||"",noteTarget_trackId:x.value||"",noteId:T.value||"",instanceId:r}}),j=(0,g.Fl)(function(){return d.value}),O=(0,g.Fl)(function(){return!!d.value&&(!!d.value.familyExclusiveRoom||!!d.value.family_exclusive_room)}),H=(0,g.Fl)(function(){return!!d.value&&(!!d.value.activeFamily||!!d.value.active_family)}),z=(0,g.iH)(null),Z=null,V=(0,g.iH)(null);var Y=(e=(0,W._)(function(e,t){var n,r,i,a;return(0,q.Jh)(this,function(s){switch(s.label){case 0:initTrackDataReady(),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,getRoomInfo(e,t)];case 2:return n=s.sent(),V.value=n,n?(n_.log("fetchRoomInfo success",n),l.value=n,3===(i=null===(r=n.roomInfo)||void 0===r?void 0:r.status)&&(p.value=!0),p.value?f.value=3:"number"==typeof i&&(f.value=i),u.value=f.value>=3?"end":"success",o.value="success",reportLiveReport(ns.LIVE_STATUS,{status:f.value,room_id:e})):(o.value="error",m.value="未找到直播间，请稍后再试",reportLiveReport(ns.LIVE_STATUS,{status:nc.LIVE_ROOM_NOT_FOUND,room_id:e,reason:"未找到直播间"})),[3,4];case 3:return a=s.sent(),o.value="error",m.value=a.message||"未找到直播间，请稍后再试",reportLiveReport(ns.LIVE_STATUS,{status:nc.LIVE_INFO_FAIL,room_id:e,reason:m.value}),[3,4];case 4:return Z&&(Z(F.value),Z=null),[2]}})}),function fetchRoomInfo(t,n){return e.apply(this,arguments)});function _waitTrackDataReady(){return(_waitTrackDataReady=(0,W._)(function(){return(0,q.Jh)(this,function(e){return V.value?[2,V.value]:(initTrackDataReady(),[2,z.value])})})).apply(this,arguments)}var G=(t=(0,W._)(function(e,t){var n,r,i;return(0,q.Jh)(this,function(a){switch(a.label){case 0:return[4,postJoinRoom(e,t)];case 1:return(n=a.sent())&&(v.value=n,d.value=n.familyInfo,"number"==typeof(i=null===(r=n.roomInfo)||void 0===r?void 0:r.status)&&i>=3&&(p.value=!0),p.value?f.value=3:"number"==typeof i&&(f.value=i),u.value=3===f.value?"end":"success"),[2,n]}})}),function postJoinRoomInfo(e,n){return t.apply(this,arguments)});var J=(n=(0,W._)(function(e){var t,n,r,i;return(0,q.Jh)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,getRoomJoinBusinessBaseInfo(e)];case 1:if(t=a.sent())return _.value=(null===(n=t.roomInfo)||void 0===n?void 0:n.hasGoods)||!1,[2,null===(r=t.viewerInfo)||void 0===r?void 0:r.role];return[3,3];case 2:return i=a.sent(),n_.warn("获取进房业务信息失败",i),[3,3];case 3:return[2]}})}),function getJoinBusinessBaseInfo(e){return n.apply(this,arguments)});var Q=(r=(0,W._)(function(e){var t,n,r,i,a;return(0,q.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,getLiveComments(e)];case 1:return n=o.sent(),c.value=n,r=n.chatMsgs||[],i=n.chatMsgsPart2||[],(t=s.value).push.apply(t,(0,ei._)(r).concat((0,ei._)(i))),[3,3];case 2:return a=o.sent(),n_.warn("获取评论失败",a),[3,3];case 3:return[2]}})}),function getComments(e){return r.apply(this,arguments)});var K=(i=(0,W._)(function(e,t){return(0,q.Jh)(this,function(n){switch(n.label){case 0:return[4,postLiveComments(e,t)];case 1:return[2,n.sent()]}})}),function sendComment(e,t){return i.apply(this,arguments)});return{pageStatus:o,liveStatus:u,errorMessage:m,roomData:l,mediaInfo:k,comments:s,commentInfo:c,hostInfo:S,familyInfo:j,isFamilyOnlyRoom:O,isFamilyMember:H,isAnonymousRoom:w,isSetHideViewers:y,isHideViewers:I,roomStatus:f,liveSource:b,liveType:M,noteTrackId:x,trackData:F,joinRoomData:v,fetchRoomInfo:Y,waitTrackDataReady:function waitTrackDataReady(){return _waitTrackDataReady.apply(this,arguments)},postJoinRoomInfo:G,getComments:Q,sendComment:K,setRoomStatus:function(e){var t=f.value;if(e>=3&&(p.value=!0),p.value?f.value=3:f.value=e,u.value=3===f.value?"end":"success",t!==f.value){var n,r=String((null===(n=l.value.roomInfo)||void 0===n?void 0:n.roomId)||"");reportLiveReport(ns.LIVE_STATUS,{status:f.value>=3?nc.LIVE_END:nc.LIVE_ING,room_id:r})}},setLiveSourceAndType:function(e,t,n,r,i,a,o,u,l){b.value=e||"",M.value=t||"",L.value=n||"",T.value=r||"",D.value=i||"",N.value=a||"",x.value=o||"",E.value=u||"",P.value=l||""},setDisplayPraiseCount:function(e){l.value.roomInfo.displayPraiseCount=formatAccuracyNum(e)},setDisplayMemberCount:function(e){l.value.roomInfo.displayMemberCount=formatAccuracyNum(e)},setTopMsg:function(e){var t;(null===(t=c.value)||void 0===t?void 0:t.topMsg)&&(c.value.topMsg.msg=e)},setIsHideViewers:function(e){y.value=!0,I.value=e},getJoinBusinessBaseInfo:J,setPageStatus:function(e){o.value=e},setSessionIds:function(e,t){R.value=e,U.value=t},getWebCommentUserViolationInfo:(a=(0,W._)(function(){return(0,q.Jh)(this,function(e){switch(e.label){case 0:return[4,getWebCommentUserViolation()];case 1:return[2,e.sent()]}})}),function getWebCommentUserViolationInfo(){return a.apply(this,arguments)}),hasGoods:_}});function adaptPosition(e,t){return{w:e.width,h:e.height,x:e.x,y:e.y,zorder:e.zIndex||0,uid:t}}function adaptMediaStatus(e){return{uid:e.uid,suspend:e.suspend,audio:e.audio,video:e.video}}function adaptLinkmicUser(e){var t,n,r,i=e.userId||"";return{userId:i,nickname:e.nickname,avatar:e.avatar,isHost:e.isHost,isRoomOwner:e.isHost,isMaster:e.isMaster,hasVideo:(null===(t=e.mediaStatus)||void 0===t?void 0:t.video)===1,hasAudio:(null===(n=e.mediaStatus)||void 0===n?void 0:n.audio)===1,isSuspended:(null===(r=e.mediaStatus)||void 0===r?void 0:r.suspend)===1,position:e.position?adaptPosition(e.position,i):void 0,mediaStatus:e.mediaStatus?adaptMediaStatus(e.mediaStatus):void 0,isCenter:e.isCenterControl,team:e.team,followInfo:e.followInfo?{following:e.followInfo.following,status:0}:void 0,background:e.background,shouldShowNickname:e.shouldShowNickname,hostId:e.hostId,mediaStatusList:e.mediaStatusList}}function adaptContainerSize(e){return{width:e.width,height:e.height}}function adaptLinkmicUsers(e,t,n){var r=nw().isAnonymousRoom;return e.map(function(e){var i=adaptLinkmicUser(e),a=+!!i.isHost;return(0,Z._)((0,z._)({},i),{userRole:a,currentUserId:t,currentUserRole:n,isAnonymousRoom:r})})}function adaptContentType(e){var t;return null!==(t=({0:e4.Video,2:e4.Game,5:e4.AudioChat})[e])&&void 0!==t?t:e4.Video}function adaptLayoutType(e){var t;return null!==(t=({0:e5.MasterSlave,1:e5.Grid})[e])&&void 0!==t?t:e5.MasterSlave}function detectAudioChatLayoutType(e){var t;return null!==(t=({1:e8.Grid,2:e8.Mixed})[e])&&void 0!==t?t:e8.Mixed}var nk=(0,S.j)("linkmicService");function getLinkmicRelations(e,t){return _getLinkmicRelations.apply(this,arguments)}function _getLinkmicRelations(){return(_getLinkmicRelations=(0,W._)(function(e,t){var n,r,i,a=arguments;return(0,q.Jh)(this,function(o){switch(o.label){case 0:n=a.length>2&&void 0!==a[2]?a[2]:0,r=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(0,V.z9)({roomId:e,userIds:t,clientType:h.Bh,appId:1,source:h.f2.SOURCE,sequence:n},{baseURL:getEdithLiveApiBaseUrl(),transform:!0,withCredentials:!0})];case 2:return r=o.sent(),nk.log("Fetching room info for roomId:",e,"Response:",r),[3,4];case 3:return i=o.sent(),nk.warn("Error fetching room info for roomId:",e,"Error:",i),[3,4];case 4:return[2,r]}})})).apply(this,arguments)}n(29273);var nS=n(42177),nb=n.n(nS);function padNum(e,t){var n=e.toString(),r=Math.max(0,t-n.length);return"0".repeat(r)+n}function utc(){return Math.round(Date.now()/1e3)}function getDateTimeStr(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=new Date,n=t.getFullYear(),r=padNum(t.getMonth()+1,2),i=padNum(t.getDate(),2),a=padNum(t.getHours(),2),o=padNum(t.getMinutes(),2),u=padNum(t.getSeconds(),2),l="".concat(n,"-").concat(r,"-").concat(i," ").concat(a,":").concat(o,":").concat(u);if(e){var s=padNum(t.getMilliseconds(),3);l+=".".concat(s)}return l}n(74934);var nC={now:function timeUtil_now(){if("undefined"!=typeof window&&window.performance){var e=window.performance;if(e.now)return e.now();if(e.webkitNow)return e.webkitNow();if(e.mozNow)return e.mozNow();if(e.msNow)return e.msNow()}return Date.now()}},nM=(0,S.j)("timeThreads"),nA=!1,nL=[],nx=0,nT=!1,nD=null,nN=!1;function initWorker(){if(!nT){nT=!0;try{(nD=nb()(18223)).addEventListener("message",function(e){0===e.data.type&&(nN=!0,run()),1===e.data.type&&tick()}),nD.addEventListener("error",function(e){return nM.warn("TimerWorker.error:","".concat(e.lineno,",").concat(e.colno),e.message),null==nD||nD.terminate(),nD=null,nN=!1,nM.warn("[ TimerWorker terminate ]"),run(),e.preventDefault(),!0})}catch(e){nN=!1,nM.warn("TimerThreads.error",e)}}}function timerThreads_get(e,t){for(var n=0,r=nL.length;n<r;n++){var i=nL[n];if(i.callback===e&&i.thisObj===t)return i}return null}function has(e,t){return!!timerThreads_get(e,t)}function add(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if((n=0|(Number(n)||0))<10||n%10!=0||!e)return nM.warn("Timer.add Invalide interval value or callback function."),!1;var a=timerThreads_get(e,t);return!a&&(a={callback:e,thisObj:t,bindCallback:t?e.bind(t):e,param:r,times:0,tickCount:0,interval:0,delayDel:!1},nL.push(a)),a.times=i,a.tickCount=0,a.interval=n/10,a.delayDel=!1,run(),!0}function remove(e,t){for(var n=0,r=nL.length;n<r;n++){var i=nL[n];if(i.callback===e&&i.thisObj===t)return nA?i.delayDel=!0:nL.splice(n,1),!0}return!1}function once(e,t,n,r){add(e,t,n+10,r,1)}function run(){nT=!0,nD&&nN?(nD.postMessage("start"),clearInterval(nx),nx=0):!nx&&nL.length>0&&(nx=window.setInterval(tick,10))}function tick(){if(0!==nL.length){nA=!0;for(var e=nC.now(),t=nL.length-1;t>=0;t--){var n=nL[t];if(!n||n.delayDel){nL.splice(t,1);continue}if(++n.tickCount%n.interval==0){var r=n.bindCallback,i=n.tickCount/n.interval;r(e,i,n.param),n.times>0&&n.times<=i&&n.tickCount>0&&nL.splice(t,1)}}nA=!1}}var nE={initWorker:initWorker,add:add,remove:remove,once:once},nR=(0,J.Q_)("linkmic",function(){var e,t,timeoutHandler=function timeoutHandler(){var e=Date.now()-m.value;e>=1e4&&(y.warn("[SEI监控] 10秒未收到SEI，重置连麦 (距上次: ".concat(e,"ms)")),resetLinkmic())},n=(0,g.iH)(!1),r=(0,g.iH)([]),i=(0,g.iH)({width:0,height:0}),a=(0,g.iH)(0),o=(0,g.iH)(0),u=(0,g.iH)(0),l=(0,g.iH)(""),s=(0,g.iH)("host-host"),c=(0,g.iH)(0),d=(0,g.iH)(0),v=(0,g.iH)(0),f=(0,g.iH)(!1),p=(0,g.iH)(null),h=(0,g.iH)(null),m=(0,g.iH)(0),y=(0,S.j)("linkmicStore"),I=(0,g.Fl)(function(){return r.value.length}),_=(0,g.Fl)(function(){return r.value.length>0}),w=(0,g.Fl)(function(){return i.value.width>0&&i.value.height>0});var k=(e=(0,W._)(function(e){var t,n,r,i,a=arguments;return(0,q.Jh)(this,function(o){switch(o.label){case 0:t=a.length>1&&void 0!==a[1]?a[1]:[],n=a.length>2&&void 0!==a[2]?a[2]:0,r=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,getLinkmicRelations(e,t,n)];case 2:return r=o.sent(),[3,4];case 3:return i=o.sent(),y.warn("获取连麦用户信息失败",i),[3,4];case 4:return[2,r]}})}),function getLinkmicRelationsRes(t){return e.apply(this,arguments)}),extractVideoStreamInfo=function(e,t){try{var n=e.canvas,r=e.regions;if(n.h<n.w){f.value=!0,c.value=0,d.value=n.h;return}var i=null==t?void 0:t.crop;if(i&&"number"==typeof i.h&&"number"==typeof i.y)a=i.y,o=i.h,u=1/(i.h/n.h);else if(a=(null===(l=r[0])||void 0===l?void 0:l.y)||0,2===r.length||3===r.length)o=(null===(s=r[0])||void 0===s?void 0:s.h)||n.h;else if(r.length>3){var a,o,u,l,s,p=r[r.length-1];p&&(o=p.y+p.h-a)}f.value=!1,c.value=a,d.value=o,v.value=u}catch(e){y.warn("[Store] 提取视频流信息失败:",e),f.value=!1,c.value=0,d.value=0,v.value=1}},updateUsersPosition=function(e){var t={width:i.value.width,height:i.value.height},n={validStartY:c.value,validHeight:d.value,isLandscape:f.value,canvasWidth:e.canvas.w,canvasHeight:e.canvas.h,contentType:a.value,layoutType:o.value,audioChatLayoutType:u.value},l=transformRegions(e.regions,e.canvas,t,n);r.value=l.map(function(e){var t=r.value.find(function(t){return t.userId===e.uid});return(0,Z._)((0,z._)({},t),{userId:e.uid,position:{x:e.x,y:e.y,width:e.w,height:e.h,zIndex:e.zorder},hostId:null==t?void 0:t.hostId,mediaStatusList:null==t?void 0:t.mediaStatusList})})},markSEIReceived=function(){m.value=Date.now()},isSEIChanged=function(e,t){if(!p.value)return!0;var n=p.value.regions||[],r=e.regions||[];if(n.length!==r.length||n.map(function(e){return e.uid}).sort().join(",")!==r.map(function(e){return e.uid}).sort().join(","))return!0;var i=!0,a=!1,o=void 0;try{for(var u,l,s=r[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=function(){var e=l.value,t=n.find(function(t){return t.uid===e.uid});return t?Math.abs(t.x-e.x)>5||Math.abs(t.y-e.y)>5||Math.abs(t.w-e.w)>5||Math.abs(t.h-e.h)>5?{v:!0}:void 0:"continue"}();if("object"===(0,ny._)(c))return c.v}}catch(e){a=!0,o=e}finally{try{!i&&null!=s.return&&s.return()}finally{if(a)throw o}}var d=(null===(u=h.value)||void 0===u?void 0:u.media_status)||[],v=(null==t?void 0:t.media_status)||[];if(d.length!==v.length)return!0;var f=!0,g=!1,m=void 0;try{for(var y,I=v[Symbol.iterator]();!(f=(y=I.next()).done);f=!0){var _=function(){var e=y.value,t=d.find(function(t){return t.uid===e.uid});if(!t||t.video!==e.video||t.audio!==e.audio||t.suspend!==e.suspend)return{v:!0}}();if("object"===(0,ny._)(_))return _.v}}catch(e){g=!0,m=e}finally{try{!f&&null!=I.return&&I.return()}finally{if(g)throw m}}return!1},updateLayout=function(e,t,v){if(void 0!==t.content_type&&(a.value=t.content_type),void 0!==t.type&&(o.value=t.type),5===a.value){var p,h,g,m=null==v?void 0:null===(p=v.linkmicBaseInfo)||void 0===p?void 0:p.subLayoutType;u.value=detectAudioChatLayoutType(m);var y=null==v?void 0:null===(g=v.linkmicBaseInfo)||void 0===g?void 0:null===(h=g.background)||void 0===h?void 0:h.url;l.value=y||""}else l.value="";var I=(null==v?void 0:v.micRelations)||[];if(I.length>=2){var _,w=null===(_=I[1])||void 0===_?void 0:_.role;"audience"===w?s.value="host-audience":"host"===w&&(s.value="host-host")}var k={validStartY:c.value,validHeight:d.value,isLandscape:f.value,canvasWidth:e.canvas.w,canvasHeight:e.canvas.h,contentType:a.value,layoutType:o.value,audioChatLayoutType:u.value},S={width:i.value.width,height:i.value.height},b=transformRegions(e.regions,e.canvas,S,k);r.value=b.map(function(e){var n=null===(i=v.micRelations)||void 0===i?void 0:i.find(function(t){return t.userId===e.uid}),r=null===(o=t.media_status)||void 0===o?void 0:o.find(function(t){return t.uid===e.uid});if(e.uid===t.host_id&&5===a.value&&1===u.value){var i,o,l,c,d,f,p=null==v?void 0:null===(f=v.linkmicBaseInfo)||void 0===f?void 0:f.background;p&&(d={url:p.url,dynamicResource:p.dynamicResource,gif:p.gif?{url:p.gif.url,filename:p.gif.filename,md5:p.gif.md5,isLottie:p.gif.isLottie}:void 0})}var h=e.uid===t.host_id,g=!h||"host-audience"===s.value,m=(null==n?void 0:n.master)===!0;return{userId:e.uid,mediaStatus:r||{},nickname:(null==n?void 0:null===(l=n.userInfo)||void 0===l?void 0:l.nickname)||"用户",avatar:(null==n?void 0:null===(c=n.userInfo)||void 0===c?void 0:c.avatar)||"",isHost:h,isMaster:m,followInfo:(null==n?void 0:n.followInfo)||{},background:d,shouldShowNickname:g,hostId:t.host_id,mediaStatusList:t.media_status||[],position:{x:e.x,y:e.y,width:e.w,height:e.h,zIndex:e.zorder}}}),n.value=!0},saveSEIData=function(e){p.value=e},stopSEITimeout=function(){nE.remove(timeoutHandler,null)},resetLinkmic=function(){n.value=!1,r.value=[],a.value=0,o.value=0,u.value=0,p.value=null,h.value=null,m.value=0,c.value=0,d.value=0,f.value=!1,stopSEITimeout()},startSEITimeout=function(){stopSEITimeout()};var b=(t=(0,W._)(function(e,t,n,r){var i,a;return(0,q.Jh)(this,function(o){switch(o.label){case 0:if(e.regions.length<=1)return resetLinkmic(),[2];if(markSEIReceived(),extractVideoStreamInfo(e,t),!isSEIChanged(e,t))return[3,5];if(i={},!n)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,n(r.roomId,r.userIds,r.sequence)];case 2:return i=o.sent(),[3,4];case 3:return a=o.sent(),y.warn("[Store] 获取用户信息失败:",a),[3,4];case 4:updateLayout(e,t,i),saveSEIData(e),h.value=t,o.label=5;case 5:return startSEITimeout(),[2]}})}),function handleSEIData(e,n,r,i){return t.apply(this,arguments)});return{isLinkmicActive:n,linkmicUsers:r,containerSize:i,contentType:a,layoutType:o,audioChatLayoutType:u,backgroundUrl:l,linkmicRelationType:s,videoStreamValidStartY:c,videoStreamValidHeight:d,videoStreamIsLandscape:f,videoStreamValidScale:v,lastSEIData:p,participantCount:I,hasLinkmicUsers:_,isContainerReady:w,initContainerSize:function(){try{var e=document.querySelector(".player-el");if(e){var t=e.getBoundingClientRect();if(t.width>0&&t.height>0){i.value={width:Math.round(t.width),height:Math.round(t.height)};return}}var n=document.querySelector(".main-player");if(n){var r=n.getBoundingClientRect();if(r.width>0&&r.height>0){i.value={width:Math.round(r.width),height:Math.round(r.height)};return}}i.value={width:784,height:694}}catch(e){y.warn("[Store] 尺寸获取异常，使用兜底尺寸:",e),i.value={width:600,height:400}}},updateContainerSize:function(e){var t=i.value;if(t.width!==e.width||t.height!==e.height)i.value=e,p.value&&r.value.length>0&&updateUsersPosition({canvas:p.value.canvas,regions:p.value.regions||[],mediaStatus:p.value.media_status||[]})},markSEIReceived:markSEIReceived,handleSEIData:b,updateLayout:updateLayout,isSEIChanged:isSEIChanged,saveSEIData:saveSEIData,startSEITimeout:startSEITimeout,stopSEITimeout:stopSEITimeout,resetLinkmic:resetLinkmic,clearLinkmicStyleAndSEI:function(){r.value=[],p.value=null,h.value=null,c.value=0,d.value=0,f.value=!1,m.value=0},getLinkmicRelationsRes:k,updateUserFollowStatus:function(e,t){var n=r.value.find(function(t){return t.userId===e});n&&n.followInfo&&(n.followInfo.following=t)},extractVideoStreamInfo:extractVideoStreamInfo}});n(25037);var nU=n(43460),nP=(0,S.j)("emojiStore"),nF=(0,J.Q_)("moji",function(){var e,t,n,r=(0,nU.p)(),i=(0,g.iH)(null),a=(0,g.Fl)(function(){return r.mojiData.redmojiMap});var o=(e=(0,W._)(function(e){var t;return(0,q.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),[4,fetch(e)];case 1:return[4,n.sent().blob()];case 2:return[4,createImageBitmap(n.sent())];case 3:return[2,n.sent()];case 4:return t=n.sent(),nP.warn("Failed to load image bitmap:",e,t),[2,null];case 5:return[2]}})}),function loadImageBitmap(t){return e.apply(this,arguments)});var u=(t=(0,W._)(function(){var e;return(0,q.Jh)(this,function(t){switch(t.label){case 0:var n;return e={},[4,Promise.all(Object.entries(a.value).map((n=(0,W._)(function(t){var n,r,i;return(0,q.Jh)(this,function(a){switch(a.label){case 0:return r=(n=(0,U._)(t,2))[0],[4,o(n[1])];case 1:return(i=a.sent())&&(e[r]=i),[2,{imageName:r,success:!!i}]}})}),function(e){return n.apply(this,arguments)})))];case 1:return t.sent(),i.value=e,[2]}})}),function convertEmojisTobitmap(){return t.apply(this,arguments)});return(0,g.YP)(a,(n=(0,W._)(function(e){return(0,q.Jh)(this,function(t){switch(t.label){case 0:if(nP.log("redmojiMap changed:",Object.keys(e).length,"emojis available"),!(Object.keys(e).length>0))return[3,2];return[4,u()];case 1:t.sent(),t.label=2;case 2:return[2]}})}),function(e){return n.apply(this,arguments)}),{immediate:!0}),{emojis:i,redmojiMap:a}}),nj=(0,S.j)("reportService");function getReportConfig(e){return _getReportConfig.apply(this,arguments)}function _getReportConfig(){return(_getReportConfig=(0,W._)(function(e){var t,n,r,i,a,o;return(0,q.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,(0,V.oP)({id:e},{baseURL:getReportApiBaseUrl()})];case 1:if(!(a=((null===(t=(i=u.sent()).data)||void 0===t?void 0:t.moduleList)||[]).find(function(e){return"TagCheck"===e.moduleType})))throw Error("未找到举报选项配置");return[2,{success:!0,data:{options:((null===(n=JSON.parse(a.content).tagInfo1)||void 0===n?void 0:n.tags)||[]).map(function(e){return{label:e.tagName||e.name||e.label,value:e.tagId||e.id||e.value,desc:e.tagName||e.name||e.label}}),title:(null===(r=i.data)||void 0===r?void 0:r.pageTitle)||"举报",descriptionTitle:"举报描述",descriptionPlaceholder:"请详细描述举报原因",imageTitle:"图片证据",maxImageCount:9}}];case 2:return o=u.sent(),nj.warn("[举报配置接口] 请求失败:",o),[2,{success:!1,message:(null==o?void 0:o.message)||(null==o?void 0:o.msg)||"获取举报配置失败"}];case 3:return[2]}})})).apply(this,arguments)}function report_submitReport(e){return services_report_submitReport.apply(this,arguments)}function services_report_submitReport(){return(services_report_submitReport=(0,W._)(function(e){var t,n;return(0,q.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t={bizId:"report",scenarioId:e.scenarioId||"live",userId:e.userId,params:(0,Z._)((0,z._)({},e),{langType:e.langType||"zh-Hans",helpUserAppeal:"number"==typeof e.helpUserAppeal?e.helpUserAppeal:0}),biz_id:"report",scenario_id:e.scenarioId||"live",user_id:e.userId,lang_type:e.langType||"zh-Hans"},[4,(0,V.a2)(t,{baseURL:getReportApiBaseUrl(),transform:!1})];case 1:return[2,{success:!0,data:r.sent()}];case 2:return n=r.sent(),nj.warn("[举报接口] 请求失败:",n),[2,{success:!1,message:(null==n?void 0:n.message)||(null==n?void 0:n.msg)||"举报提交失败"}];case 3:return[2]}})})).apply(this,arguments)}var nO=(0,S.j)("liveReport"),nH=(0,J.Q_)("liveReport",function(){var loadReportConfig=function loadReportConfig(e){return _loadReportConfig.apply(this,arguments)},resetFormData=function resetFormData(){p.value={reportType:"",description:"",imageList:[]}},e=(0,g.iH)(!1),t=(0,g.iH)(""),n=(0,g.iH)(""),r=(0,g.iH)("Interaction"),i=(0,g.iH)(""),a=(0,g.iH)(""),o=(0,g.iH)(""),u=(0,g.iH)(""),l=(0,g.iH)([]),s=(0,g.iH)("直播举报"),c=(0,g.iH)("举报描述"),d=(0,g.iH)("请描述详细的举报原因"),v=(0,g.iH)("图片证据"),f=(0,g.iH)(9),p=(0,g.iH)({reportType:"",description:"",imageList:[]}),h=(0,g.iH)(!1),m=(0,g.iH)(!1),y=(0,g.iH)("");function _loadReportConfig(){return(_loadReportConfig=(0,W._)(function(e){var t,n,r;return(0,q.Jh)(this,function(i){switch(i.label){case 0:m.value=!0,y.value="",i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,getReportConfig(e)];case 2:if((n=i.sent()).success&&(null===(t=n.data)||void 0===t?void 0:t.options))l.value=n.data.options.map(function(e){return{label:e.label,value:e.value,desc:e.desc}}),n.data.title&&(s.value=n.data.title),n.data.descriptionTitle&&(c.value=n.data.descriptionTitle),n.data.descriptionPlaceholder&&(d.value=n.data.descriptionPlaceholder),n.data.imageTitle&&(v.value=n.data.imageTitle),n.data.maxImageCount&&(f.value=n.data.maxImageCount);else throw Error(n.message||"获取举报配置失败");return[3,5];case 3:return r=i.sent(),nO.warn("[主播举报] 加载举报配置失败",r),y.value=(null==r?void 0:r.message)||"加载失败，请稍后重试",l.value=[],[3,5];case 4:return m.value=!1,[7];case 5:return[2]}})})).apply(this,arguments)}function _openReportModal(){return(_openReportModal=(0,W._)(function(l){return(0,q.Jh)(this,function(s){switch(s.label){case 0:return t.value=l.userId,n.value=l.roomId,r.value=l.liveType,i.value=l.liveSource,a.value=l.trackId||"",o.value=l.noteId||"",u.value=l.currentUserId||"",[4,loadReportConfig("goods"===l.liveType?"199":"200")];case 1:return s.sent(),e.value=!0,[2]}})})).apply(this,arguments)}function _submitReport(){return(_submitReport=(0,W._)(function(){var e,s,c,d,v;return(0,q.Jh)(this,function(f){switch(f.label){case 0:h.value=!0,f.label=1;case 1:if(f.trys.push([1,3,4,5]),!u.value)return nO.warn("[举报功能] 未获取到当前用户ID"),[2,!1];if(!(e=l.value.find(function(e){return e.value===p.value.reportType})))return nO.warn("[举报功能] 未选择举报类型"),[2,!1];return s=JSON.stringify([{tagId:e.value,tagName:e.label,children:[]}]),c=[],p.value.imageList.filter(function(e){return!!e}).forEach(function(e){c.push(JSON.stringify({cdn:e.url||"",fileId:e.fileId||"",fileid:e.fileId||"",bizName:e.bizName||"",scene:e.scene||""}))}),[4,report_submitReport({pageId:"goods"===r.value?"199":"200",liveId:n.value,liveSource:i.value,liveType:"goods"===r.value?"goods":"Interaction",source:"web_live_room",reportType:"goods"===r.value?"live_goods":"live_content",userId:u.value,uid:u.value,targetId:n.value,reportTargetId:n.value,targetUserId:t.value,tagList:s,description:p.value.description||"",imageUrlList:c.length>0?JSON.stringify(c):"",noteId:o.value||"",trackId:a.value||"",commentId:"",content:""})];case 2:if((d=f.sent()).success)return[2,!0];return nO.warn("[举报功能] 提交失败:",d.message),[2,!1];case 3:return v=f.sent(),nO.warn("[举报功能] 提交失败:",v),[2,!1];case 4:return h.value=!1,[7];case 5:return[2]}})})).apply(this,arguments)}return{reportModalVisible:e,reportTargetUserId:t,reportTargetRoomId:n,liveType:r,liveSource:i,trackId:a,noteId:o,reportTypes:l,reportFormData:p,submitting:h,configLoading:m,configError:y,reportTitle:s,descriptionTitle:c,descriptionPlaceholder:d,imageTitle:v,maxImageCount:f,loadReportConfig:loadReportConfig,openReportModal:function openReportModal(e){return _openReportModal.apply(this,arguments)},closeReportModal:function closeReportModal(){e.value=!1,nE.once(function(){resetFormData()},null,300)},resetFormData:resetFormData,submitReport:function submitReport(){return _submitReport.apply(this,arguments)}}}),nW="liveSessionByRoomId";function generateSessionId(e){return"".concat(e,"_").concat(Date.now())}function loadLiveSessions(){if("undefined"==typeof window)return{};try{var e=localStorage.getItem(nW);if(!e)return{};return JSON.parse(e)}catch(e){return{}}}function saveLiveSessions(e){if("undefined"!=typeof window)try{localStorage.setItem(nW,JSON.stringify(e))}catch(e){}}function getSessions(e,t){var n=generateSessionId(e),r=loadLiveSessions(),i=r[t];if(!i){i=n;var a=Object.keys(r);if(a.length>=10){var o=a[0];delete r[o]}r[t]=i,saveLiveSessions(r)}return{viewSessionId:n,liveSessionId:i}}var nz=n(52997),nB=n(63611),nZ={key:0,class:"user-card"},nq={class:"uc-top-row"},nV={class:"user-actions"},nY={class:"user-desc"},nG={class:"user-desc-line"},nJ={class:"uc-stats"},nQ={class:"stat-item"},nK={class:"stat-value"},nX={class:"stat-item"},n$={class:"stat-value"},n0={class:"stat-item"},n1={class:"stat-value"},n3=(0,g.aZ)({__name:"Index",props:{showAt:{type:Boolean,default:!1},showFollow:{type:Boolean,default:!0},showReport:{type:Boolean,default:!0},loggedIn:{type:Boolean,default:!1},userId:{type:String,default:""},isAnchor:{type:Boolean,default:!1}},emits:["onAt","onReport","onFollow","onCancelFollow","noLogin"],setup:function(e,t){var n=t.emit,r=nm(),i=nR(),a=nw(),o=(0,K.yj)(),u=(0,nz.g2)().getUserPageHref,l=(0,J.Jk)(r),s=l.anchorInfo,c=l.commentUserInfo,d=l.anchorFollwed,v=l.commentUserFollwed,f=l.anchorFstatus,p=l.commentUserFstatus,m=(0,g.Fl)(function(){return!!c.value.user}),y=(0,g.Fl)(function(){return e.isAnchor?d.value:v.value}),I=(0,g.Fl)(function(){return e.isAnchor?f.value:p.value}),_=(0,g.Fl)(function(){return y.value?I.value===ng.BOTH?"互相关注":"已关注":"关注"}),w=(0,g.Fl)(function(){return e.isAnchor?s.value.user:c.value.user}),S=(0,g.Fl)(function(){var t,n;return e.isAnchor?null===(n=s.value.user)||void 0===n?void 0:n.xsecToken:null===(t=c.value.user)||void 0===t?void 0:t.xsecToken}),b=(0,g.Fl)(function(){var e,t,n,r,i,a;return w.value&&((null==w?void 0:null===(e=w.value)||void 0===e?void 0:e.likeNumber)||(null==w?void 0:null===(t=w.value)||void 0===t?void 0:t.collectNumber))?(null==w?void 0:null===(n=w.value)||void 0===n?void 0:n.likeNumber)?(null==w?void 0:null===(r=w.value)||void 0===r?void 0:r.collectNumber)?(null==w?void 0:w.value.likeNumber)+(null==w?void 0:w.value.collectNumber):null==w?void 0:null===(a=w.value)||void 0===a?void 0:a.likeNumber:null==w?void 0:null===(i=w.value)||void 0===i?void 0:i.collectNumber:0});function targetPath(){return(0,nB.T)({targetPath:u((null==e?void 0:e.userId)||""),pageInstance:o.meta.pageInstance,isOwnPage:!1,isOwnBoard:!1,xsecToken:S.value||"",xsecSource:"web_live_user_card"})}function handleAvatarClick(){e.isAnchor&&(0,k.zx)(93015,(0,z._)({},a.trackData)),handleGoToProfile()}function handleGoToProfile(){e.isAnchor?(0,k.zx)(93028,(0,z._)({},a.trackData)):(0,k.zx)(93014,(0,Z._)((0,z._)({},a.trackData),{targetUserId:e.userId}))}function handleAt(){(0,k.zx)(93011,(0,Z._)((0,z._)({},a.trackData),{targetUserId:e.userId})),n("onAt")}function handleReport(){(0,k.zx)(93013,(0,Z._)((0,z._)({},a.trackData),{targetUserId:e.userId})),n("onReport")}var M=G()((0,W._)(function(){return(0,q.Jh)(this,function(t){switch(t.label){case 0:return e.isAnchor?(0,k.zx)(93029,(0,z._)({},a.trackData)):(0,k.zx)(93012,(0,Z._)((0,z._)({},a.trackData),{targetUserId:e.userId})),[4,r.toFollowAnchor(e.userId)];case 1:return t.sent()&&(getAnchorInfo(),i.updateUserFollowStatus(e.userId,!0),n("onFollow")),[2]}})}),500,{leading:!0,trailing:!1}),L=G()((0,W._)(function(){return(0,q.Jh)(this,function(t){switch(t.label){case 0:return[4,r.unFollowAnchor(e.userId)];case 1:return t.sent()&&(getAnchorInfo(),i.updateUserFollowStatus(e.userId,!1),n("onCancelFollow")),[2]}})}),500,{leading:!0,trailing:!1});function handleClick(){if(!e.loggedIn){n("noLogin",h.C9.FOLLOW);return}y.value?L():M()}function getAnchorInfo(){e.userId&&r.getAnchorInfo(e.userId,e.isAnchor)}return(0,g.bv)(function(){getAnchorInfo(),e.isAnchor?(0,k.zx)(93027,(0,z._)({},a.trackData)):(0,k.zx)(93010,(0,Z._)((0,z._)({},a.trackData),{targetUserId:e.userId}))}),function(t,n){var r,i,a;return e.isAnchor||(0,g.SU)(m)?((0,g.wg)(),(0,g.iD)("div",nZ,[(0,g._)("div",nq,[(0,g.Wm)((0,g.SU)(K.rH),{target:"_blank",to:targetPath(),onClick:handleAvatarClick},{default:(0,g.w5)(function(){var e,t;return[(null===(e=(0,g.SU)(w))||void 0===e?void 0:e.avatar)?((0,g.wg)(),(0,g.j4)((0,g.SU)(eo.yV),{key:0,src:null===(t=(0,g.SU)(w))||void 0===t?void 0:t.avatar,loading:"lazy",class:"user-avatar"},null,8,["src"])):(0,g.kq)("",!0)]}),_:1},8,["to"]),(0,g.Wm)((0,g.SU)(K.rH),{target:"_blank",to:targetPath(),class:"user-name",onClick:handleGoToProfile},{default:(0,g.w5)(function(){var e;return[(0,g.Uk)((0,g.zw)((null===(e=(0,g.SU)(w))||void 0===e?void 0:e.nickName)||""),1)]}),_:1},8,["to"]),(0,g._)("div",nV,[e.showAt?((0,g.wg)(),(0,g.j4)((0,g.SU)(eu.hU),{key:0,width:32,height:32,class:"warning-btn",onClick:handleAt},{default:(0,g.w5)(function(){return[(0,g.Wm)((0,g.SU)(eu.i8),{icon:"mention_b",size:"15"})]}),_:1})):(0,g.kq)("",!0),e.showReport?((0,g.wg)(),(0,g.j4)((0,g.SU)(eu.hU),{key:1,width:32,height:32,class:"warning-btn",onClick:handleReport},{default:(0,g.w5)(function(){return[(0,g.Wm)((0,g.SU)(eu.i8),{icon:"warning_b",size:"15"})]}),_:1})):(0,g.kq)("",!0),e.showFollow?((0,g.wg)(),(0,g.j4)((0,g.SU)(eu.zx),{key:2,class:(0,g.C_)(["follow-btn",{followed:(0,g.SU)(y)}]),onClick:handleClick},{default:(0,g.w5)(function(){return[(0,g.Uk)((0,g.zw)((0,g.SU)(_)),1)]}),_:1},8,["class"])):(0,g.kq)("",!0)])]),(0,g._)("div",nY,[(0,g._)("div",nG,(0,g.zw)((null===(r=(0,g.SU)(w))||void 0===r?void 0:r.desc)||"还没有简介"),1)]),(0,g._)("div",nJ,[(0,g._)("div",nQ,[(0,g._)("span",nK,(0,g.zw)((0,g.SU)(formatAccuracyNum)(null===(i=(0,g.SU)(w))||void 0===i?void 0:i.followingNumber)||0),1),n[0]||(n[0]=(0,g._)("span",{class:"stat-label"},"关注",-1))]),(0,g._)("div",nX,[(0,g._)("span",n$,(0,g.zw)((0,g.SU)(formatAccuracyNum)(null===(a=(0,g.SU)(w))||void 0===a?void 0:a.fanNumber)||0),1),n[1]||(n[1]=(0,g._)("span",{class:"stat-label"},"粉丝",-1))]),(0,g._)("div",n0,[(0,g._)("span",n1,(0,g.zw)((0,g.SU)(formatAccuracyNum)((0,g.SU)(b))||0),1),n[2]||(n[2]=(0,g._)("span",{class:"stat-label"},"获赞与收藏",-1))])])])):(0,g.kq)("",!0)}}});let n2=(0,x.default)(n3,[["__scopeId","data-v-df2ee266"]]);var n4={class:"anchor-wrapper"},n5={class:"anchor-name"},n8={class:"like-num"},n9=(0,g.aZ)({__name:"index",props:{userId:{},loggedIn:{type:Boolean}},emits:["noLogin"],setup:function(e,t){var n=t.emit,r=(0,K.yj)(),i=nw(),a=nH(),o=nm(),u=(0,g.iH)(!1),l=(0,g.iH)(!1),s=(0,g.iH)(!1),c=(0,J.Jk)(i),d=c.hostInfo,v=c.liveSource,f=(0,J.Jk)(o),p=f.anchorFollwed,m=f.roomId;function noLogin(e){n("noLogin",e)}function follow(){return _follow.apply(this,arguments)}function _follow(){return(_follow=(0,W._)(function(){return(0,q.Jh)(this,function(t){switch(t.label){case 0:if(!e.loggedIn)return noLogin(h.C9.FOLLOW),[2];if(!d.value.hostId)return[2];return[4,o.toFollowAnchor(d.value.hostId)];case 1:return t.sent()&&getAnchorInfo(),[2]}})})).apply(this,arguments)}var y=G()(follow,500,{leading:!0,trailing:!1});function handleReport(){if(!e.loggedIn){n("noLogin",h.C9.REPORT);return}var t,o=(null===(t=d.value)||void 0===t?void 0:t.hostId)||"";if(!!m.value&&!!o){var u=i.hasGoods?"goods":r.query.liveType||r.query.live_type||"Interaction",l=v.value||"live_room",s=r.query.trackId||r.query.track_id||"",c=r.query.noteId||"",f=e.userId||"";a.openReportModal({userId:o,roomId:m.value,liveType:u,liveSource:l,trackId:s,noteId:c,currentUserId:f})}}function hideInfoCard(){!l.value&&(u.value=!1)}function handleMouseenter(){nE.remove(hideInfoCard,null),u.value=!0}function handleMouseleave(){!l.value&&nE.once(hideInfoCard,null,200)}function handleCardEnter(){l.value=!0,nE.remove(hideInfoCard,null),u.value=!0}function handleCardLeave(){l.value=!1,nE.once(hideInfoCard,null,200)}function getAnchorInfo(){return _getAnchorInfo.apply(this,arguments)}function _getAnchorInfo(){return(_getAnchorInfo=(0,W._)(function(){return(0,q.Jh)(this,function(e){switch(e.label){case 0:if(!d.value.hostId)return[2];return[4,o.getAnchorInfo(d.value.hostId,!0)];case 1:return e.sent(),[2]}})})).apply(this,arguments)}return(0,g.bv)((0,W._)(function(){return(0,q.Jh)(this,function(e){switch(e.label){case 0:return[4,getAnchorInfo()];case 1:return e.sent(),s.value=!0,[2]}})})),(0,g.SK)(function(){nE.remove(hideInfoCard,null)}),function(e,t){var n,r,i;return(0,g.wg)(),(0,g.iD)("div",n4,[(0,g._)("div",{class:"anchor-info",style:(0,g.j5)({paddingRight:(0,g.SU)(p)?"16px":"0"})},[(0,g._)("div",{class:"anchor-info-card",onMouseenter:handleMouseenter,onMouseleave:handleMouseleave},[(0,g.Wm)((0,g.SU)(eo.yV),{src:null===(n=(0,g.SU)(d))||void 0===n?void 0:n.avatar,loading:"lazy",class:"anchor-avatar"},null,8,["src"]),(0,g._)("div",null,[(0,g._)("div",n5,(0,g.zw)((null===(r=(0,g.SU)(d))||void 0===r?void 0:r.nickname)||""),1),(0,g._)("div",n8,(0,g.zw)((null===(i=(0,g.SU)(d))||void 0===i?void 0:i.praiseCount)||0)+"赞 ",1)]),(0,g.Wm)(g.uT,{name:"fade"},{default:(0,g.w5)(function(){var t;return[(0,g.SU)(u)?((0,g.wg)(),(0,g.iD)("div",{key:0,class:"info-card",onMouseenter:handleCardEnter,onMouseleave:handleCardLeave},[(0,g.Wm)(n2,{"is-anchor":!0,"user-id":null===(t=(0,g.SU)(d))||void 0===t?void 0:t.hostId,"logged-in":e.loggedIn,"show-at":!1,onOnReport:handleReport,onNoLogin:noLogin},null,8,["user-id","logged-in"])],32)):(0,g.kq)("",!0)]}),_:1})],32),!(0,g.SU)(p)&&(0,g.SU)(s)?((0,g.wg)(),(0,g.j4)((0,g.SU)(eu.zx),{key:0,class:"button",onClick:(0,g.SU)(y)},{default:(0,g.w5)(function(){return t[0]||(t[0]=[(0,g.Uk)(" 关注 ")])}),_:1,__:[0]},8,["onClick"])):(0,g.kq)("",!0)],4)])}}});let n6=(0,x.default)(n9,[["__scopeId","data-v-3190aa2a"]]);n(85203);var n7=function(){function DanmakuManager(e,t){var n=this;(0,tQ._)(this,DanmakuManager),(0,tX._)(this,"worker",null),(0,tX._)(this,"onErrorBind",void 0),(0,tX._)(this,"onError",void 0),(0,tX._)(this,"logger",void 0),(0,tX._)(this,"renderType","canvas2d"),(0,tX._)(this,"handleError",function(e){return e.preventDefault(),n.logger.warn("创建弹幕 Worker 失败:",e),n.onError(e),reportLiveReport(ns.DANMU,{success:0,scene:"worker",message:e.message||"Worker error"}),!0}),(0,tX._)(this,"init",function(e,t,r){try{var i,a=e.transferControlToOffscreen();if(!a){n.logger.warn("OffscreenCanvas 创建失败"),n.onError(Error("OffscreenCanvas 创建失败")),reportLiveReport(ns.DANMU,{success:0,scene:"create_offscreen_canvas",message:"OffscreenCanvas error"});return}var o=n.serializeMojiData(t),u=e.getBoundingClientRect();null===(i=n.worker)||void 0===i||i.postMessage({type:"INIT",data:{config:(0,z._)({canvasWidth:u.width,canvasHeight:u.height,pixelRatio:window.devicePixelRatio||1,emojis:o},r),danmuRenderType:localStorage.getItem("danmuRenderType"),renderType:n.renderType,offScreenCanvas:a}},[a])}catch(e){n.logger.warn("postMessage init 失败",e),n.onError(e),reportLiveReport(ns.DANMU,{success:0,scene:"post_message_init",message:"postMessage init error"})}reportLiveReport(ns.DANMU,{success:1,scene:"init",message:"Danmaku init success"})}),(0,tX._)(this,"serializeMojiData",function(e){if(!e)return null;var t={};for(var n in e)e[n]instanceof ImageBitmap?t[n]={type:"imageBitmap",bitmap:e[n]}:t[n]=e[n];return t}),this.onError=e,this.onErrorBind=this.handleError.bind(this),this.logger=t;try{this.worker=nb()(10116),this.worker.onerror=this.onErrorBind}catch(t){this.logger.warn("创建弹幕 Worker 失败:",t),reportLiveReport(ns.DANMU,{success:0,scene:"create_worker",message:"create Worker error"}),e(t)}}return(0,tK._)(DanmakuManager,[{key:"addDanmaku",value:function addDanmaku(e,t){var n;null===(n=this.worker)||void 0===n||n.postMessage({type:"ADD_DANMAKU",data:{message:e,options:t}})}},{key:"start",value:function start(){var e;null===(e=this.worker)||void 0===e||e.postMessage({type:"START"})}},{key:"pause",value:function pause(){var e;null===(e=this.worker)||void 0===e||e.postMessage({type:"PAUSE"})}},{key:"play",value:function play(){var e;null===(e=this.worker)||void 0===e||e.postMessage({type:"PLAY"})}},{key:"clear",value:function clear(){var e;null===(e=this.worker)||void 0===e||e.postMessage({type:"CLEAR"})}},{key:"close",value:function close(){var e;null===(e=this.worker)||void 0===e||e.postMessage({type:"CLOSE"})}},{key:"updateConfig",value:function updateConfig(e){var t;null===(t=this.worker)||void 0===t||t.postMessage({type:"UPDATE_CONFIG",data:{newConfig:e}})}},{key:"destroy",value:function destroy(){var e;null===(e=this.worker)||void 0===e||e.terminate()}}]),DanmakuManager}(),re=(0,g.aZ)({__name:"DanmakuCanvas",props:{position:{type:String,default:"top"},emojis:null,showDanmaku:{type:Boolean,default:!0},config:{type:Object,default:null}},emits:["onError"],setup:function(e,t){var n=t.expose,r=t.emit,i={scroll:"scroll"},a=(0,S.j)("DanmakuCanvas"),o=(0,g.iH)(),u=(0,g.iH)(),l=(0,g.iH)(localStorage.getItem("danmuRenderType")||"webgpu");function init(){if(!o.value){handleError("Canvas element not found");return}u.value=new n7(handleError,a),u.value.init(o.value,e.emojis,e.config)}function handleError(e){r("onError",e)}function addDanmaku(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:i.scroll};u.value&&e.trim()&&(null===(t=u.value)||void 0===t||t.addDanmaku(e,n))}function openDanmaku(){var e;null===(e=u.value)||void 0===e||e.start()}function closeDanmaku(){var e;null===(e=u.value)||void 0===e||e.close()}function playDanmaku(){var e;null===(e=u.value)||void 0===e||e.play()}function pauseDanmaku(){var e;null===(e=u.value)||void 0===e||e.pause()}function updateCanvasSize(){if(u.value&&o.value){var e=o.value.getBoundingClientRect(),t={canvasWidth:e.width,canvasHeight:e.height};u.value.updateConfig(t)}}function handleResize(){(0,g.Y3)(function(){updateCanvasSize()})}function danmuRenderTypeChanged(){(localStorage.getItem("danmuRenderType")||"webgpu")!==l.value&&window.location.reload()}return(0,g.bv)(function(){a.log("DanmakuCanvas mounted",e.showDanmaku),init(),e.showDanmaku&&openDanmaku(),window.addEventListener("resize",handleResize),window.addEventListener("fullscreenchange",handleResize),window.addEventListener("danmuRenderTypeChanged",danmuRenderTypeChanged)}),(0,g.SK)(function(){var e;a.log("DanmakuCanvas unmounted"),null===(e=u.value)||void 0===e||e.destroy(),window.removeEventListener("resize",handleResize),window.removeEventListener("fullscreenchange",handleResize),window.removeEventListener("danmuRenderTypeChanged",danmuRenderTypeChanged)}),(0,g.YP)(function(){return e.showDanmaku},function(e){e?openDanmaku():closeDanmaku()}),n({addDanmaku:addDanmaku,openDanmaku:openDanmaku,closeDanmaku:closeDanmaku,playDanmaku:playDanmaku,pauseDanmaku:pauseDanmaku}),function(t,n){return(0,g.wg)(),(0,g.iD)("div",{class:(0,g.C_)(["danmaku-container","top"===e.position?"danmaku-top":"danmaku-bottom"])},[(0,g._)("canvas",{ref_key:"canvasRef",ref:o,class:"danmaku-container-canvas"},null,512)],2)}}});let rt=(0,x.default)(re,[["__scopeId","data-v-0a94e256"]]);n(74093),n(20768),n(41648),n(59339),n(47444),n(34757),n(85908),n(39995),n(22943),n(54767),n(55820),n(93225),n(33708),n(64322),n(47771),n(1154),n(80013),n(29744);var rn=(0,S.j)("liveCommentReport"),rr=(0,J.Q_)("liveCommentReport",function(){var e=(0,g.iH)(!1),t=(0,g.iH)(null),n=(0,g.iH)(!1);function _submitReport(){return(_submitReport=(0,W._)(function(e){var r,i,a;return(0,q.Jh)(this,function(o){switch(o.label){case 0:if(!t.value)return rn.warn("[评论用户举报] 无举报参数"),[2,!1];n.value=!0,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,report_submitReport({pageId:"42",scenarioId:"live_user",anchorId:(r=t.value).anchorId,liveId:r.liveId,liveSource:r.liveSource,liveType:r.liveType,source:"web_live_room",userId:r.currentUserId||"",uid:r.currentUserId||"",targetId:r.reportTargetId,reportTargetId:r.reportTargetId,targetUserId:r.reportTargetId,commentId:r.commentId||"",content:r.content||"",nickname:r.nickname,tagList:JSON.stringify([{tagId:e.reportTypeId,tagName:e.reportTypeName,children:[]}]),description:e.description||"",imageUrls:e.imageFileIds?JSON.stringify(e.imageFileIds):"",userIp:"",noteId:"",trackId:r.trackId||""})];case 2:if((i=o.sent()).success)return[2,!0];return rn.warn("[评论用户举报] 提交失败:",i.message),[2,!1];case 3:return a=o.sent(),rn.warn("[评论用户举报] 提交失败:",a),[2,!1];case 4:return n.value=!1,[7];case 5:return[2]}})})).apply(this,arguments)}return{reportModalVisible:e,currentReportParams:t,submitting:n,openReportModal:function openReportModal(n){t.value=n,e.value=!0},closeReportModal:function closeReportModal(){e.value=!1,nE.once(function(){t.value=null},null,300)},submitReport:function submitReport(e){return _submitReport.apply(this,arguments)},getTargetUserId:function getTargetUserId(){var e;return(null===(e=t.value)||void 0===e?void 0:e.reportTargetId)||""},getLiveId:function getLiveId(){var e;return(null===(e=t.value)||void 0===e?void 0:e.liveId)||""},handleAnonymousEncryption:function handleAnonymousEncryption(e){var n;return(null===(n=t.value)||void 0===n?void 0:n.isAnonymous)?(0,Z._)((0,z._)({},e),{_encrypted:!0}):e},generateReportTitle:function generateReportTitle(){if(!t.value)return"举报";var e=t.value,n=e.nickname||"匿名用户";return e.isAnonymous&&"匿名用户"!==n&&(n="".concat(n[0],"***")),n.length>8&&(n="".concat(n.substring(0,8),"…")),"举报\xb7".concat(n)}}}),ri={class:"comment-report-dialog"},ra={class:"crd-header"},ro={class:"crd-title"},ru={class:"crd-body"},rl={class:"crd-card"},rs={key:0,class:"crd-loading"},rc={key:1,class:"crd-reason-tags"},rd=["onClick"],rv={key:2,class:"crd-error"},rf={class:"crd-footer"},rp=["disabled"],rh=(0,g.aZ)({__name:"CommentReportDialog",setup:function(e){var t=(0,S.j)("CommentReport"),n=rr(),r=(0,g.iH)(!1),i=(0,g.iH)(""),a=(0,g.iH)(!1),o=(0,g.iH)([]),u=(0,g.iH)(""),l=(0,g.iH)(null),s=(0,g.Fl)(function(){return n.generateReportTitle()}),c=(0,g.Fl)(function(){return!!u.value&&!r.value});function loadReportConfig(){return _loadReportConfig.apply(this,arguments)}function _loadReportConfig(){return(_loadReportConfig=(0,W._)(function(){var e,n,a;return(0,q.Jh)(this,function(u){switch(u.label){case 0:r.value=!0,i.value="",u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,getReportConfig("42")];case 2:if((n=u.sent()).success&&(null===(e=n.data)||void 0===e?void 0:e.options))o.value=n.data.options.map(function(e){return{label:e.label,value:e.value,desc:e.desc}});else throw Error(n.message||"获取举报配置失败");return[3,5];case 3:return a=u.sent(),t.warn("[评论举报] 加载举报配置失败",a),i.value=(null==a?void 0:a.message)||"加载失败，请稍后重试",o.value=[],[3,5];case 4:return r.value=!1,[7];case 5:return[2]}})})).apply(this,arguments)}function selectReason(e){u.value=e.value,l.value=e}function handleSubmit(){return _handleSubmit.apply(this,arguments)}function _handleSubmit(){return(_handleSubmit=(0,W._)(function(){var e;return(0,q.Jh)(this,function(r){switch(r.label){case 0:if(!c.value||a.value||!l.value)return[2];a.value=!0,r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,n.submitReport({reportTypeId:l.value.value,reportTypeName:l.value.label})];case 2:return r.sent()&&((0,eu.Am)("提交成功",{container:"#live-layout",position:"center"}),nE.once(function(){handleClose()},null,100)),[3,5];case 3:return e=r.sent(),t.warn("[评论举报] 提交失败",e),[3,5];case 4:return a.value=!1,[7];case 5:return[2]}})})).apply(this,arguments)}function handleClose(){n.closeReportModal(),u.value="",l.value=null,i.value=""}return(0,g.YP)(function(){return n.reportModalVisible},function(e){e?loadReportConfig():(u.value="",l.value=null,i.value="",o.value=[])}),function(e,t){return(0,g.wg)(),(0,g.j4)(g.lR,{to:"#live-layout"},[(0,g.Wm)((0,g.SU)(eu.ce),{open:(0,g.SU)(n).reportModalVisible,"onUpdate:open":handleClose},{default:(0,g.w5)(function(){return[(0,g._)("div",ri,[(0,g._)("div",ra,[(0,g._)("div",ro,(0,g.zw)(s.value),1),(0,g._)("button",{class:"crd-close-btn",onClick:handleClose},t[0]||(t[0]=[(0,g._)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},[(0,g._)("path",{d:"M15.5 4.5L4.5 15.5M4.5 4.5L15.5 15.5",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1)]))]),(0,g._)("div",ru,[(0,g._)("div",rl,[t[1]||(t[1]=(0,g._)("div",{class:"crd-section-title"},[(0,g.Uk)(" 选择举报原因 "),(0,g._)("span",{class:"required"},"*")],-1)),r.value?((0,g.wg)(),(0,g.iD)("div",rs," 加载中... ")):((0,g.wg)(),(0,g.iD)("div",rc,[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)(o.value,function(e){return(0,g.wg)(),(0,g.iD)("button",{key:e.value,class:(0,g.C_)(["crd-reason-tag",{"is-selected":u.value===e.value}]),onClick:function(t){return selectReason(e)}},(0,g.zw)(e.label),11,rd)}),128))])),i.value?((0,g.wg)(),(0,g.iD)("div",rv,(0,g.zw)(i.value),1)):(0,g.kq)("",!0)])]),(0,g._)("div",rf,[(0,g._)("button",{class:(0,g.C_)(["crd-submit-btn",{"is-disabled":!c.value||a.value}]),disabled:!c.value||a.value,onClick:handleSubmit},(0,g.zw)(a.value?"提交中...":"提交"),11,rp)])])]}),_:1},8,["open"])])}}});let rg=(0,x.default)(rh,[["__scopeId","data-v-bab7eaf0"]]);var rm={class:"anonymous-user-card"},ry={class:"uc-top-row"},rI={class:"user-name"},r_={class:"user-actions"},rw=(0,g.aZ)({__name:"AnonymousInfoCard",props:{avatar:{type:String,default:""},displayName:{type:String,default:"匿名用户"},showAt:{type:Boolean,default:!0},showReport:{type:Boolean,default:!0},loggedIn:{type:Boolean,default:!1}},emits:["onAt","onReport","noLogin"],setup:function(e,t){var n=t.emit;function handleAt(){n("onAt")}function handleReport(){if(!e.loggedIn){n("noLogin",h.C9.REPORT);return}n("onReport")}return function(t,n){return(0,g.wg)(),(0,g.iD)("div",rm,[(0,g._)("div",ry,[(0,g.Wm)((0,g.SU)(eo.yV),{src:e.avatar,loading:"lazy",class:"user-avatar"},null,8,["src"]),(0,g._)("div",rI,(0,g.zw)(e.displayName),1),(0,g._)("div",r_,[e.showAt?((0,g.wg)(),(0,g.j4)((0,g.SU)(eu.hU),{key:0,width:32,height:32,class:"warning-btn",onClick:handleAt},{default:(0,g.w5)(function(){return[(0,g.Wm)((0,g.SU)(eu.i8),{icon:"mention_b",size:"15"})]}),_:1})):(0,g.kq)("",!0),e.showReport?((0,g.wg)(),(0,g.j4)((0,g.SU)(eu.hU),{key:1,width:32,height:32,class:"warning-btn",onClick:handleReport},{default:(0,g.w5)(function(){return[(0,g.Wm)((0,g.SU)(eu.i8),{icon:"warning_b",size:"15"})]}),_:1})):(0,g.kq)("",!0)])])])}}});let rk=(0,x.default)(rw,[["__scopeId","data-v-207ce5ee"]]);n(64091);var rS={class:"input-bar"},rb=["data-placeholder"],rC=(0,g.aZ)({__name:"index",props:{showRedmoji:{type:Boolean,default:!1},liveChatRef:{type:Object,required:!1}},emits:["update:showRedmoji","inputClick","send","emojiChoose"],setup:function(e,t){var n=t.expose,r=t.emit,i=(0,g.iH)(null),a=(0,g.iH)(null),o=(0,g.iH)(null),u=null,l=(0,g.iH)(""),s=(0,g.iH)(!1);function toast(t){if(t){var n=e.liveChatRef||document.body,r=!!e.liveChatRef;n.querySelectorAll(".xhs-live-toast").forEach(function(e){return e.remove()});var i=document.createElement("div");i.className="xhs-live-toast",i.textContent=t,i.classList.add("xhs-live-toast"),r?i.classList.add("xhs-live-toast--absolute"):i.classList.add("xhs-live-toast--fixed"),n.appendChild(i),requestAnimationFrame(function(){requestAnimationFrame(function(){i.style.opacity="1",i.style.transform="translate(-50%, -50%) scale(1)"})}),setTimeout(function(){i.style.opacity="0",i.style.transform="translate(-50%, -50%) scale(0.9)",setTimeout(function(){i.parentNode&&n.removeChild(i)},300)},2e3)}}function extractTextFromInput(e){if(!e)return"";var t="";return e.childNodes.forEach(function(e){e.nodeType===Node.TEXT_NODE?t+=(e.textContent||"").replace(/\u200B/g,""):e.nodeType===Node.ELEMENT_NODE&&("IMG"===e.tagName&&e.hasAttribute("data-emoji")?t+=e.getAttribute("data-emoji")||"":t+=extractTextFromInput(e))}),t}function getEditableText(e){return e?extractTextFromInput(e):""}function calculateCharWeight(e){return/[\u4E00-\u9FA5]/.test(e)?1:.5}function getEditableTextLength(e){if(!e)return 0;var t=0;return e.childNodes.forEach(function(e){if(e.nodeType===Node.TEXT_NODE){var n=(e.textContent||"").replace(/\u200B/g,""),r=!0,i=!1,a=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;t+=calculateCharWeight(l)}}catch(e){i=!0,a=e}finally{try{!r&&null!=u.return&&u.return()}finally{if(i)throw a}}}else if(e.nodeType===Node.ELEMENT_NODE){if("IMG"===e.tagName&&e.hasAttribute("data-emoji")){var s=e.getAttribute("data-emoji")||"",c=!0,d=!1,v=void 0;try{for(var f,p=s[Symbol.iterator]();!(c=(f=p.next()).done);c=!0){var h=f.value;t+=calculateCharWeight(h)}}catch(e){d=!0,v=e}finally{try{!c&&null!=p.return&&p.return()}finally{if(d)throw v}}}else t+=getEditableTextLength(e)}}),t}function setEditableText(e,t){e&&(e.textContent=t)}function handlePaste(e){e.preventDefault();var t=(null===(d=e.clipboardData)||void 0===d?void 0:d.getData("text/plain"))||"",n=i.value;if(n){var r=40-getEditableTextLength(n);if(r<=0){toast("已达字数上限，无法输入更多内容");return}var a="",o=0,u=!0,s=!1,c=void 0;try{for(var d,v,f=t[Symbol.iterator]();!(u=(v=f.next()).done);u=!0){var p=v.value,h=calculateCharWeight(p);if(o+h<=r)a+=p,o+=h;else break}}catch(e){s=!0,c=e}finally{try{!u&&null!=f.return&&f.return()}finally{if(s)throw c}}a&&document.execCommand("insertText",!1,a),a.length<t.length&&toast("已达字数上限，无法输入更多内容"),(0,g.Y3)(function(){l.value=getEditableText(n)})}}function handleInput(e){var t=e.target;if(t){var n=getEditableText(t);if(getEditableTextLength(t)>40&&!s.value){toast("已达字数上限，无法输入更多内容");var r=0,i=[],a=!0,o=!1,u=void 0;try{for(var c,d=Array.from(t.childNodes)[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var v=c.value;if(r>=40)break;if(v.nodeType===Node.TEXT_NODE){var f=(v.textContent||"").replace(/\u200B/g,""),p=0,h=!0,m=!1,y=void 0;try{for(var I,_=f[Symbol.iterator]();!(h=(I=_.next()).done);h=!0){var w=I.value;p+=calculateCharWeight(w)}}catch(e){m=!0,y=e}finally{try{!h&&null!=_.return&&_.return()}finally{if(m)throw y}}if(r+p<=40)i.push(v.cloneNode(!0)),r+=p;else{var k=40-r,S="",b=0,M=!0,L=!1,x=void 0;try{for(var T,D=f[Symbol.iterator]();!(M=(T=D.next()).done);M=!0){var N=T.value,E=calculateCharWeight(N);if(b+E<=k)S+=N,b+=E;else break}}catch(e){L=!0,x=e}finally{try{!M&&null!=D.return&&D.return()}finally{if(L)throw x}}if(S){var R=document.createTextNode(S);i.push(R),r+=b}break}}else if(v.nodeType===Node.ELEMENT_NODE&&"IMG"===v.tagName&&v.hasAttribute("data-emoji")){var U=v.getAttribute("data-emoji")||"",P=0,F=!0,j=!1,O=void 0;try{for(var H,W=U[Symbol.iterator]();!(F=(H=W.next()).done);F=!0){var z=H.value;P+=calculateCharWeight(z)}}catch(e){j=!0,O=e}finally{try{!F&&null!=W.return&&W.return()}finally{if(j)throw O}}r+P<=40&&(i.push(v.cloneNode(!0)),r+=P)}}}catch(e){o=!0,u=e}finally{try{!a&&null!=d.return&&d.return()}finally{if(o)throw u}}t.innerHTML="",i.forEach(function(e){return t.appendChild(e)});var Z=document.createRange(),q=window.getSelection();Z.selectNodeContents(t),Z.collapse(!1),null==q||q.removeAllRanges(),null==q||q.addRange(Z),(!(n=getEditableText(t))||0===n.trim().length)&&(t.innerHTML="",i.forEach(function(e){return t.appendChild(e)}),n=getEditableText(t))}else if(!n||0===n.trim().length){l.value="",t.innerHTML="";return}l.value=n,(0,g.Y3)(function(){requestAnimationFrame(function(){var e=t.closest(".input-wrapper");if(e){if(!n||0===n.trim().length){e.classList.remove("multiline"),t.classList.remove("multiline");return}e.classList.remove("multiline"),t.classList.remove("multiline"),t.offsetHeight,t.scrollHeight>t.clientHeight+1&&(e.classList.add("multiline"),t.classList.add("multiline"))}})})}}function handleInputClick(){r("inputClick")}function onCompositionStart(){s.value=!0}function onCompositionEnd(){s.value=!1,(0,g.Y3)(function(){var e=i.value;e&&e.dispatchEvent(new Event("input",{bubbles:!0}))})}function handleEnterKey(e){if(e.preventDefault(),!s.value){var t=i.value;t&&(l.value=getEditableText(t)),handleSendClick()}}function handleOpenRedmoji(){r("update:showRedmoji",!e.showRedmoji)}function handleSendClick(){r("send",l.value.trim())}return(0,g.bv)(function(){var e=i.value;e&&e.addEventListener("mousedown",function(t){var n=e.getBoundingClientRect(),r=t.clientX-n.left,i=document.createRange();i.selectNodeContents(e),r>i.getBoundingClientRect().width&&(t.preventDefault(),requestAnimationFrame(function(){var t=window.getSelection();if(t){var n=document.createRange();n.selectNodeContents(e),n.collapse(!1),t.removeAllRanges(),t.addRange(n)}}))})}),(0,g.bv)(function(){var e=i.value;if(e){var saveRange=function(){var t=window.getSelection();if(t&&0!==t.rangeCount){var n=t.getRangeAt(0);e.contains(n.startContainer)&&(u=n.cloneRange())}};e.addEventListener("keyup",saveRange),e.addEventListener("mouseup",saveRange),e.addEventListener("input",saveRange),e.addEventListener("click",saveRange)}}),n({handleEmojiChoose:function handleEmojiChoose(e){if(!!e.imageName){var t=i.value;if(t){t.focus();var n=new Image;n.src=e.image||"",n.className="emoji-img",n.setAttribute("data-emoji",e.imageName);var r=window.getSelection(),a=null;u?a=u.cloneRange():((a=document.createRange()).selectNodeContents(t),a.collapse(!1)),a.deleteContents(),a.insertNode(n),a.setStartAfter(n),a.collapse(!0),null==r||r.removeAllRanges(),null==r||r.addRange(a),u=a.cloneRange(),(0,g.Y3)(function(){t.dispatchEvent(new Event("input",{bubbles:!0}))})}}},clearInput:function clearInput(){if(l.value="",i.value){var e=i.value,t=e.closest(".input-wrapper");setEditableText(e,""),null==t||t.classList.remove("multiline"),e.classList.remove("multiline")}},getInputRef:function getInputRef(){return i.value},getShowEmojiRef:function getShowEmojiRef(){return o.value},getInputWrapperRef:function getInputWrapperRef(){return a.value}}),function(e,t){return(0,g.wg)(),(0,g.iD)("div",rS,[(0,g._)("div",{ref_key:"inputWrapperRef",ref:a,class:(0,g.C_)(["input-wrapper",{"has-button":l.value.trim().length}])},[(0,g._)("div",{id:"input-area",ref_key:"inputRef",ref:i,contenteditable:"true",class:(0,g.C_)(["input-editable",{"with-button":l.value.trim().length}]),"data-placeholder":l.value.trim()?"":"说点什么...",onInput:handleInput,onKeydown:(0,g.D2)(handleEnterKey,["enter"]),onCompositionstart:onCompositionStart,onCompositionend:onCompositionEnd,onPaste:handlePaste,onClick:handleInputClick},null,42,rb),(0,g._)("div",{ref_key:"showEmojiRef",ref:o,class:"emoji-icon-wrapper",onClick:handleOpenRedmoji,onMousedown:t[0]||(t[0]=(0,g.iM)(function(){},["prevent"]))},[(0,g.Wm)((0,g.SU)(eu.i8),{id:"showEmojiEl",class:"emoji-icon",size:"24",icon:"emoji"})],544),l.value.trim().length?((0,g.wg)(),(0,g.iD)("button",{key:0,class:"send",onClick:handleSendClick,onMousedown:t[1]||(t[1]=(0,g.iM)(function(){},["prevent"]))}," 发送 ",32)):(0,g.kq)("",!0)],2)])}}});let rM=(0,x.default)(rC,[["__scopeId","data-v-20c6a8e7"]]);function utils_maskNickname(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?"".concat(e[0],"***"):"匿名用户"}function getTagOf(e){return e.role?e.role===nv.superAdmin?"超级助手":e.role===nv.admin?"小助手":e.role===nv.host?"主播":"":""}function getDisplayNameOf(e,t,n,r){if(void 0!==n?n:e.isAnonymous)return r===nv.superAdmin||e.role===nv.host||t&&e.userId&&e.userId===t?e.nickname:utils_maskNickname(e.nickname);return e.nickname}function escapeHtml(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/[&<>"']/g,function(e){return({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"})[e]})}function utils_formatContent(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return"";function processTextPart(e){var t=escapeHtml(e);return t=(t=t.replace(/(@[^\s\n]+?)(?=\s|$|<)/g,'<span class="at-mention">$1</span>')).replace(/(https?:\/\/[^\s]+)/g,'<a href="$1" target="_blank" rel="noopener noreferrer">$1</a>')}for(var r=[],i=0,a=/\[([^\]]+)\]/g;null!==(e=a.exec(t));){if(e.index>i){var o=t.slice(i,e.index);r.push(processTextPart(o))}var u=e[0],l=n[u];l?r.push('<img class="emoji-img" src="'.concat(l,'" alt="').concat(u,'" />')):r.push(escapeHtml(e[0])),i=a.lastIndex}if(i<t.length){var s=t.slice(i);r.push(processTextPart(s))}return r.join("")}function utils_toast(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(e){var n=t||document.body,r=!!t;n.querySelectorAll(".xhs-live-toast").forEach(function(e){return e.remove()});var i=document.createElement("div");i.className="xhs-live-toast",i.textContent=e,Object.assign(i.style,{position:r?"absolute":"fixed",top:r?"50%":"20%",left:"50%",transform:"translate(-50%, -50%) scale(0.9)",padding:"12px 16px",minWidth:"120px",backgroundColor:"#ffffff",color:"rgba(0, 0, 0, 1)",fontFamily:"SF Pro Text",fontSize:"14px",fontStyle:"normal",lineHeight:"1.6",fontWeight:"400",borderRadius:"20px",zIndex:"99999",pointerEvents:"none",whiteSpace:"nowrap",textAlign:"center",opacity:"0",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}),n.appendChild(i),requestAnimationFrame(function(){requestAnimationFrame(function(){i.style.opacity="1",i.style.transform="translate(-50%, -50%) scale(1)"})}),setTimeout(function(){i.style.opacity="0",i.style.transform="translate(-50%, -50%) scale(0.9)",setTimeout(function(){i.parentNode&&n.removeChild(i)},300)},2e3)}}function utils_generateSessionId(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}n(84355),n(58051);var rA=(0,S.j)("CommentMessageManager"),rL=function(){function MessageManager(e){(0,tQ._)(this,MessageManager),(0,tX._)(this,"visible",[]),(0,tX._)(this,"incoming",[]),(0,tX._)(this,"folded",[]),(0,tX._)(this,"pendingSelfInteractions",[]),(0,tX._)(this,"isPaused",!1),(0,tX._)(this,"newMsgCount",0),(0,tX._)(this,"countedIncomingLength",0),(0,tX._)(this,"currentUserId",""),(0,tX._)(this,"timerId",null),(0,tX._)(this,"selfInteractionDelay",1500),(0,tX._)(this,"config",void 0),(0,tX._)(this,"maxVisibleMessages",1e3),(0,tX._)(this,"updateCallback",void 0),(0,tX._)(this,"stateCallback",void 0),(0,tX._)(this,"foldedCallback",void 0),(0,tX._)(this,"onFlushBind",void 0),this.config=e,this.onFlushBind=this.onFlush.bind(this)}return(0,tK._)(MessageManager,[{key:"setCurrentUserId",value:function setCurrentUserId(e){this.currentUserId=e}},{key:"onUpdate",value:function onUpdate(e){this.updateCallback=e}},{key:"onStateChange",value:function onStateChange(e){this.stateCallback=e}},{key:"onFoldedUpdate",value:function onFoldedUpdate(e){this.foldedCallback=e}},{key:"pushMessage",value:function pushMessage(e){rA.log("pushMessage",e),!e.id&&(e.id=utils_generateSessionId()),!e.timestamp&&(e.timestamp=Date.now()),e._followed=!!e._followed,this.incoming.push(e)}},{key:"flushOnce",value:function flushOnce(){var e=this;if(this.isPaused){var t,n,r,i=this.incoming.length-this.countedIncomingLength;i>0&&(this.newMsgCount=Math.min(999,this.newMsgCount+i),this.countedIncomingLength=this.incoming.length,null===(r=this.stateCallback)||void 0===r||r.call(this,{isPaused:this.isPaused,newMsgCount:this.newMsgCount}));return}if(!!this.incoming.length){var a=Math.min(this.config.flushCount,this.incoming.length),o=this.incoming.splice(0,a),u=["enter"];o.forEach(function(t){var n=u.includes(t.type),r=e.currentUserId&&t.userId&&t.userId===e.currentUserId;n?(e.folded.push(t),r&&(e.pendingSelfInteractions.push({message:t,timestamp:Date.now()}),setTimeout(function(){e.pushPendingSelfInteraction(t.id)},e.selfInteractionDelay))):e.visible.push(t)}),null===(t=this.foldedCallback)||void 0===t||t.call(this,(0,ei._)(this.folded)),this.limitVisibleMessages(),null===(n=this.updateCallback)||void 0===n||n.call(this,this.visible)}}},{key:"limitVisibleMessages",value:function limitVisibleMessages(){if(this.visible.length>this.maxVisibleMessages){var e=this.visible.length-this.maxVisibleMessages;this.visible.splice(0,e)}}},{key:"pushPendingSelfInteraction",value:function pushPendingSelfInteraction(e){var t=this.pendingSelfInteractions.findIndex(function(t){return t.message.id===e});if(-1!==t){var n,r,i=this.pendingSelfInteractions[t];this.visible.push(i.message),this.pendingSelfInteractions.splice(t,1);var a=this.folded.findIndex(function(t){return t.id===e});-1!==a&&(this.folded.splice(a,1),null===(r=this.foldedCallback)||void 0===r||r.call(this,(0,ei._)(this.folded))),null===(n=this.updateCallback)||void 0===n||n.call(this,this.visible)}}},{key:"onFlush",value:function onFlush(){this.flushOnce()}},{key:"flushAll",value:function flushAll(){var e,t,n=this;if(!this.isPaused&&!!this.incoming.length){var r=["enter"];this.incoming.splice(0,this.incoming.length).forEach(function(e){var t=r.includes(e.type),i=n.currentUserId&&e.userId&&e.userId===n.currentUserId;t?(n.folded.push(e),i&&(n.pendingSelfInteractions.push({message:e,timestamp:Date.now()}),setTimeout(function(){n.pushPendingSelfInteraction(e.id)},n.selfInteractionDelay))):n.visible.push(e)}),null===(e=this.foldedCallback)||void 0===e||e.call(this,(0,ei._)(this.folded)),this.limitVisibleMessages(),null===(t=this.updateCallback)||void 0===t||t.call(this,this.visible)}}},{key:"startFlush",value:function startFlush(){this.stopFlush(),nE.add(this.onFlushBind,this,this.config.flushInterval)}},{key:"stopFlush",value:function stopFlush(){nE.remove(this.onFlushBind,this)}},{key:"setPaused",value:function setPaused(e){var t;this.isPaused=e,!e&&(this.newMsgCount=0,this.countedIncomingLength=0,this.incoming.length>0&&(rA.log("刷新缓存",this.incoming.length),this.flushOnce())),null===(t=this.stateCallback)||void 0===t||t.call(this,{isPaused:this.isPaused,newMsgCount:this.newMsgCount})}},{key:"getState",value:function getState(){return{isPaused:this.isPaused,newMsgCount:this.newMsgCount,visibleCount:this.visible.length,incomingCount:this.incoming.length}}},{key:"getVisible",value:function getVisible(){return this.visible}},{key:"getFolded",value:function getFolded(){return this.folded}},{key:"clear",value:function clear(){var e,t;this.visible.length=0,this.incoming.length=0,this.folded.length=0,this.pendingSelfInteractions.length=0,this.newMsgCount=0,null===(e=this.updateCallback)||void 0===e||e.call(this,[]),null===(t=this.stateCallback)||void 0===t||t.call(this,{isPaused:this.isPaused,newMsgCount:0})}},{key:"destroy",value:function destroy(){this.stopFlush(),this.clear()}}]),MessageManager}(),rx=n(30740),rT=["onMouseenter","onClick"],rD=["src","alt"],rN=["src","alt"],rE={class:"hover-name"},rR=(0,g.aZ)({__name:"index",props:{onClick:{type:Function},onClose:{type:Function},inputEl:{},boundary:{},placement:{}},setup:function(e,t){var n,r=t.expose,i=(0,J.Jk)((0,nU.p)()).mojiData,a=(0,g.iH)(),o=(0,g.qj)({}),u=(0,g.iH)(!1),l=(0,g.iH)({}),s=(0,g.iH)(),c=(0,g.qj)({}),d=null,v=null;function handleClick(t){e.onClick(t)}function formatMojiName(e){return e?e.slice(1,e.length-2):""}(0,ea.i9H)(a,function(){e.onClose()},{ignore:[document.querySelector("#showEmojiEl")]});var f=G()((n=(0,W._)(function(e,t){var n;return(0,q.Jh)(this,function(r){switch(r.label){case 0:var i;return u.value=!0,c.display="block",!c.transform&&(c.visibility="hidden"),l.value=t,v&&(v(),v=null),i=(0,W._)(function(){var t,n,r;return(0,q.Jh)(this,function(i){switch(i.label){case 0:return[4,(0,rx.oo)(e.target,s.value,{placement:"top",middleware:[(0,rx.cv)(8),(0,rx.RR)({fallbackPlacements:["top","bottom"]}),(0,rx.uY)({padding:8})]})];case 1:return n=(t=i.sent()).x,r=t.y,c.left="".concat(n,"px"),c.top="".concat(r,"px"),[2]}})}),[4,(n=function updateHoverPosition(){return i.apply(this,arguments)})()];case 1:return r.sent(),v=(0,rx.Me)(e.target,s.value,n,{ancestorScroll:!0,ancestorResize:!0,elementResize:!0,animationFrame:!1}),setTimeout(function(){c.visibility="visible"},200),[2]}})}),function(e,t){return n.apply(this,arguments)}),200);function onMouseLeave(){u.value=!1,v&&(v(),v=null),setTimeout(function(){!u.value&&(c.display="none")},200)}function updatePosition(){return _updatePosition.apply(this,arguments)}function _updatePosition(){return(_updatePosition=(0,W._)(function(){var t,n,r;return(0,q.Jh)(this,function(i){switch(i.label){case 0:if(!e.inputEl||!a.value)return[2];return t=[(0,rx.cv)(10),(0,rx.RR)({fallbackPlacements:["top","bottom"],boundary:e.boundary||void 0}),(0,rx.uY)({boundary:e.boundary||void 0,padding:8})],[4,(0,rx.oo)(e.inputEl,a.value,{placement:"top",middleware:t})];case 1:return n=i.sent().y,r=e.inputEl.getBoundingClientRect(),o.left="".concat(r.left,"px"),o.top="".concat(n,"px"),[2]}})})).apply(this,arguments)}return(0,g.bv)((0,W._)(function(){return(0,q.Jh)(this,function(t){switch(t.label){case 0:if(!e.inputEl||!a.value)return[2];return[4,updatePosition()];case 1:return t.sent(),d=(0,rx.Me)(e.inputEl,a.value,updatePosition,{ancestorScroll:!0,ancestorResize:!0,elementResize:!0,animationFrame:!1}),[2]}})})),(0,g.Jd)(function(){d&&(d(),d=null),v&&(v(),v=null)}),r({emojiEl:a}),function(e,t){return(0,g.wg)(),(0,g.j4)(g.lR,{to:"body"},[(0,g._)("div",{ref_key:"containerEl",ref:a,class:"moji-container",style:(0,g.j5)(o),onWheel:t[0]||(t[0]=(0,g.iM)(function(){},["stop"]))},[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)((0,g.SU)(i).redmojiTabs,function(e){return(0,g.wg)(),(0,g.iD)("div",{key:e.name,class:"tab-content"},[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)(e.emoji,function(e){return(0,g.wg)(),(0,g.iD)("div",{key:e.imageName,class:"item",onMouseenter:function(t){return(0,g.SU)(f)(t,e)},onMouseleave:onMouseLeave,onClick:function(t){return handleClick(e)}},[(0,g._)("img",{crossorigin:"anonymous",lazy:"",src:e.image,alt:e.imageName},null,8,rD)],40,rT)}),128))])}),128)),((0,g.wg)(),(0,g.j4)(g.lR,{to:"body"},[(0,g._)("div",{ref_key:"previewEl",ref:s,class:"hover-moji",style:(0,g.j5)(c)},[(0,g._)("img",{lazy:"",src:l.value.image,alt:l.value.imageName,class:"hover-img"},null,8,rN),(0,g._)("div",rE,(0,g.zw)(formatMojiName(l.value.imageName)),1),t[1]||(t[1]=(0,g._)("div",{class:"arrow"},[(0,g._)("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSI2IiBmaWxsPSJub25lIiB2aWV3Qm94PSIwIDAgMTIgNiI+PHBhdGggZmlsbD0iIzM4M0M0MiIgZD0iTTQuNTg2IDQuNTg2YTIgMiAwIDAgMCAyLjgyOCAwTDEyIDBIMHoiLz48L3N2Zz4=",alt:"at"})],-1))],4)]))],36)])}}});let rU=(0,x.default)(rR,[["__scopeId","data-v-34698080"]]);var rP={key:0},rF={class:"intro-wrap"},rj={class:"online-count"},rO={class:"count-number"},rH={class:"intro-row"},rW=["innerHTML"],rz={class:"chat-area"},rB={class:"risk-text"},rZ={class:"risk-item"},rq={class:"risk-item"},rV=["onClick"],rY={key:0,class:"msg-tag"},rG=["onClick"],rJ=["onClick","innerHTML"],rQ={key:2},rK={key:3},rX={key:4},r$={key:5},r0={key:0,class:"msg-tag"},r1={class:"folded-interaction-text"},r3=(0,g.aZ)({__name:"Comments",props:{introHtml:{type:String,default:""},riskText:{type:String,default:"欢迎来到直播间！平台倡导文明健康的直播环境，严禁违法违规、色情低俗等不良内容，严禁未成年人打赏或进行直播。购买商品请谨慎判断，切勿轻信可疑广告信息，谨防网络诈骗，理性消费。如发现违规行为请及时举报！"},riskWelcome:{type:String,default:"欢迎来到直播间,主播第一次直播点个赞鼓励一下TA吧!"},flushCount:{type:Number,default:2},flushInterval:{type:Number,default:500},cacheLimit:{type:Number,default:50},foldedLimit:{type:Number,default:20},im:{type:Object,default:null},loggedIn:{type:Boolean,default:!0},historyCommentMessage:{type:Array,default:function(){return[]}},roomId:{type:String,default:""},selfEnterSignal:{type:Number,default:0}},emits:["sendDanmaku","sendCommentNoLogin","sendReportNoLogin","sendFollowNoLogin","inputClick","commentSendSuccess"],setup:function(e,t){var n,r=t.expose,i=t.emit,a=(0,S.j)("Comments"),o=(0,J.Jk)((0,nU.p)()).mojiData;function formatContent(e){return utils_formatContent(e,o.value.redmojiMap||{})}var u=(n={},(0,tX._)(n,nv.viewer,"user"),(0,tX._)(n,nv.host,"host"),(0,tX._)(n,nv.admin,"assistant"),(0,tX._)(n,nv.superAdmin,"super-assistant"),(0,tX._)(n,nv.guest,"guest"),n),l=(0,K.yj)(),s=nw(),c=rr(),d=nm(),v=(0,J.Jk)(s),f=v.roomData,p=v.hostInfo,h=v.roomStatus,m=v.isAnonymousRoom,y=v.commentInfo,I=v.liveSource.value||"live_room",_=(0,g.Fl)(function(){var e,t,n;return h.value>=3||(null!==(n=null===(t=f.value)||void 0===t?void 0:null===(e=t.roomInfo)||void 0===e?void 0:e.status)&&void 0!==n?n:0)>=3}),w=(0,g.iH)(),k=(0,g.iH)(null),b=(0,g.iH)(null),M=(0,g.iH)(null),L=(0,g.iH)(null),x=(0,g.iH)(null),T=(0,g.iH)(!1),D=(0,g.iH)(0),N=(0,g.iH)(null),E=(0,g.iH)({}),R=(0,g.iH)([]),U=(0,g.iH)([]),P=(0,g.iH)(0),F=(0,g.iH)(!1),j=(0,g.iH)(!1),O=(0,g.iH)(!1),H=(0,g.iH)(new Map),z=(0,g.Fl)(function(){var t,n,r,i,a,o;return(null===(n=e.im)||void 0===n?void 0:null===(t=n.userInfo)||void 0===t?void 0:t.userId)||(null===(i=e.im)||void 0===i?void 0:null===(r=i.userInfo)||void 0===r?void 0:r.user_id)||(null===(o=e.im)||void 0===o?void 0:null===(a=o.userInfo)||void 0===a?void 0:a.id)||""}),Z=(0,g.Fl)(function(){var t,n;return null===(n=e.im)||void 0===n?void 0:null===(t=n.userInfo)||void 0===t?void 0:t.role}),V=(0,g.Fl)(function(){return R.value}),Y=(0,g.Fl)(function(){return 0===U.value.length?null:U.value[U.value.length-1]});function getInteractionText(e){switch(e){case"enter":return" 来了";case"praise":case"light":return" 为主播点赞了";case"share":return" 分享了主播";case"follow":return" 关注了主播";default:return""}}var G=(0,g.iH)(!1),Q=(0,g.iH)(null),X=(0,g.iH)(!1),$=(0,g.Fl)(function(){if(!Q.value)return!1;var e=Q.value.userId,t=z.value;return e&&t&&e===t}),ee=(0,g.iH)(!1),et=getTagOf,displayNameOf=function(e){return getDisplayNameOf(e,z.value,m.value,Z.value)},toast=function(e){return utils_toast(e,N.value)};function cardFollow(){!e.loggedIn&&i("sendFollowNoLogin")}function cardAt(){if(Q.value){var e,t=Q.value.userId&&z.value&&Q.value.userId===z.value,n=(m.value||Q.value.isAnonymous)&&!t&&Q.value.role!==nv.host,r=n?utils_maskNickname(Q.value.nickname):Q.value.nickname;if(n&&Q.value.nickname){var i=utils_maskNickname(Q.value.nickname);H.value.set(i,Q.value)}var a=null===(e=L.value)||void 0===e?void 0:e.getInputRef();a&&(a.appendChild(document.createTextNode("@".concat(r," "))),a.dispatchEvent(new Event("input",{bubbles:!0})),(0,g.Y3)(function(){if(!!a){var e=document.createRange(),t=window.getSelection();t&&(e.selectNodeContents(a),e.collapse(!1),t.removeAllRanges(),t.addRange(e),a.focus())}})),closeCard()}}function cardReport(){if(!e.loggedIn){i("sendReportNoLogin"),closeCard();return}if(!!Q.value){var t,n,r,o,u,s,d,v=Q.value,h=String((null===(n=f.value)||void 0===n?void 0:null===(t=n.roomInfo)||void 0===t?void 0:t.roomId)||""),g=(null===(r=p.value)||void 0===r?void 0:r.hostId)||"",m=v.userId||v.id,y=(null===(u=e.im)||void 0===u?void 0:null===(o=u.userInfo)||void 0===o?void 0:o.userId)||(null===(d=e.im)||void 0===d?void 0:null===(s=d.userInfo)||void 0===s?void 0:s.user_id)||"";a.log("[评论举报] 主播ID:",g,"被举报用户ID:",m,"举报人ID:",y);var _=l.query.trackId||l.query.track_id||"";c.openReportModal({reportTargetId:m,nickname:v.nickname||"匿名用户",commentId:v.id,content:v.content||"",anchorId:g,liveId:h,liveSource:I,liveType:"Interaction",trackId:_,isAnonymous:v.isAnonymous||!1,currentUserId:y}),closeCard()}}function handleCardNoLogin(e){"report"===e?i("sendReportNoLogin"):"follow"===e&&i("sendFollowNoLogin")}function positionCardByAnchorRect(e){(0,g.Y3)(function(){var t=X.value?M.value:b.value;if(!!t)requestAnimationFrame(function(){var n,r=t.getBoundingClientRect(),i=null===(n=N.value)||void 0===n?void 0:n.getBoundingClientRect();if(!!i){var a=e.left-i.left,o=e.top-i.top,u=e.bottom-i.top,l=a+e.width/2;l=Math.min(Math.max(l,r.width/2),i.width-r.width/2);var s=o-8-r.height,c=o-8,d=i.height-u-8,v=s;v=c>=r.height?s:d>=r.height?u+8:c>=d?8:i.height-r.height-8,E.value={left:"".concat(l,"px"),top:"".concat(v,"px")}}})})}function openUserCard(e,t){var n,r=e.userId&&z.value&&e.userId===z.value;if((m.value||e.isAnonymous)&&!r&&e.role!==nv.superAdmin&&e.role!==nv.host&&Z.value!==nv.host&&Z.value!==nv.superAdmin&&Z.value!==nv.admin){toast("因主播设置，暂不支持查看个人资料");return}d.clearCommentUserInfo(),Q.value=e,G.value=!0,t&&(n=t.target.closest(".msg-item")||t.currentTarget),n?positionCardByAnchorRect(n.getBoundingClientRect()):E.value={}}function closeCard(){G.value=!1,X.value=!1,Q.value=null}function openAnonymousCard(e,t){if(Q.value=e,X.value=!0,G.value=!1,t){var n;n=t.target.closest(".msg-item")||t.currentTarget}n?positionCardByAnchorRect(n.getBoundingClientRect()):E.value={}}function scrollToBottomSmooth(){return _scrollToBottomSmooth.apply(this,arguments)}function _scrollToBottomSmooth(){return(_scrollToBottomSmooth=(0,W._)(function(){var e,t,n;return(0,q.Jh)(this,function(r){switch(r.label){case 0:return O.value=!0,[4,(0,g.Y3)()];case 1:return r.sent(),[4,new Promise(function(e){return requestAnimationFrame(function(){return e()})})];case 2:if(r.sent(),!(e=k.value)||e.scrollHeight<=e.clientHeight)return cancelProgrammaticScroll(),[2];return e.scrollTo({top:e.scrollHeight,behavior:"smooth"}),t=Date.now(),[4,new Promise(function(n){var r=e.scrollTop,i=0,check=function(){if("hidden"===document.visibilityState||Date.now()-t>1e3){n();return}var a=e.scrollTop;if(.5>Math.abs(a-r)?i++:i=0,r=a,i>=5){n();return}requestAnimationFrame(check)};requestAnimationFrame(check)})];case 3:return r.sent(),cancelProgrammaticScroll(),(n=k.value)&&updateScrollState(n),[2]}})})).apply(this,arguments)}function updateScrollState(e){var t,n=e.scrollTop,r=e.scrollHeight,i=e.clientHeight,a=n+i>=r-20,o=!a;null===(t=w.value)||void 0===t||t.setPaused(o),F.value=o;j.value=r>i&&n>5,a&&(P.value=0)}function onScroll(){return _onScroll.apply(this,arguments)}function _onScroll(){return(_onScroll=(0,W._)(function(){var e;return(0,q.Jh)(this,function(t){return(e=k.value)&&!O.value?(requestAnimationFrame(function(){updateScrollState(e)}),[2]):[2]})})).apply(this,arguments)}function onWheel(){var e=k.value;if(!!e){var t=e.scrollTop;e.scrollTop=t,requestAnimationFrame(function(){updateScrollState(e)}),cancelProgrammaticScroll()}}function cancelProgrammaticScroll(){O.value=!1}function jumpToBottom(){if(!!k.value)cancelProgrammaticScroll(),F.value=!1,P.value=0,(0,g.Y3)(function(){var e,t;null===(e=w.value)||void 0===e||e.setPaused(!1),null===(t=w.value)||void 0===t||t.flushAll()})}function onNicknameClick(e){var t=e.userId&&z.value&&e.userId===z.value;(m.value||e.isAnonymous)&&!t&&Z.value!==nv.host&&Z.value!==nv.superAdmin&&Z.value!==nv.admin&&toast("因主播设置，暂不支持查看个人资料")}function onMessageClick(e,t){if("comment"!==t.type&&"system"!==t.type){var n=t.userId&&z.value&&t.userId===z.value;m.value||t.isAnonymous?Z.value===nv.superAdmin?openUserCard(t,e):t.role===nv.host||n?openUserCard(t,e):openAnonymousCard(t,e):openUserCard(t,e)}}function onContentClick(e,t){if(e.target.classList.contains("at-mention"))openUserCard(t,e);else{var n=t.userId&&z.value&&t.userId===z.value;m.value||t.isAnonymous?Z.value===nv.superAdmin?openUserCard(t,e):t.role===nv.host||n?openUserCard(t,e):openAnonymousCard(t,e):openUserCard(t,e)}}function receiveMessageHandle(e){if(_.value)return;var t,n,r,i,a,o,u,l,s,c,d,v,f,p,h,g,y,I="comment";switch(null===(t=e.data)||void 0===t?void 0:t.type){case nf.AudienceJoinV2:I="enter";break;case nf.Share:I="share";break;case nf.FollowEmcee:I="follow";break;case nf.Light:I="light";break;case nf.Text:I="comment";break;default:return}var k=(null===(r=e.data)||void 0===r?void 0:null===(n=r.profile)||void 0===n?void 0:n.user_id)||(null===(a=e.data)||void 0===a?void 0:null===(i=a.profile)||void 0===i?void 0:i.userId)||(null===(u=e.data)||void 0===u?void 0:null===(o=u.profile)||void 0===o?void 0:o.id)||e.from||"";if(!k||!z.value||k!==z.value||"comment"!==I){var S={id:e.id||utils_generateSessionId(),userId:k,type:I,nickname:null===(s=e.data)||void 0===s?void 0:null===(l=s.profile)||void 0===l?void 0:l.nickname,avatar:null===(d=e.data)||void 0===d?void 0:null===(c=d.profile)||void 0===c?void 0:c.avatar,content:null===(v=e.data)||void 0===v?void 0:v.desc,role:null===(p=e.data)||void 0===p?void 0:null===(f=p.profile)||void 0===f?void 0:f.role,isAnonymous:m.value,timestamp:Date.now(),desc:formatContent(null===(h=e.data)||void 0===h?void 0:h.content),_followed:!1};S.nickname&&S.userId&&H.value.set(S.nickname,S),null===(g=w.value)||void 0===g||g.pushMessage(S),null===(y=w.value)||void 0===y||y.flushOnce()}}function pushSelfEnterMessage(){var t,n,r,i,o,u,l,s=w.value;if(!!s){var c=z.value;if(c){var d=null===(n=e.im)||void 0===n?void 0:null===(t=n.userInfo)||void 0===t?void 0:t.nickname;if(!d||""===d.trim()){a.warn("不存在有效的 nickname,跳过",{hasIm:!!e.im,hasUserInfo:!!(null===(l=e.im)||void 0===l?void 0:l.userInfo),nickname:d});return}var v="self-enter:".concat(e.roomId,":").concat(c);if(s.getVisible().some(function(e){return e.id===v})){a.log("[进入消息] 已存在，避免重复插入");return}var f={id:v,userId:c,type:"enter",nickname:d,avatar:null===(i=e.im)||void 0===i?void 0:null===(r=i.userInfo)||void 0===r?void 0:r.avatar,role:null===(u=e.im)||void 0===u?void 0:null===(o=u.userInfo)||void 0===o?void 0:o.role,isAnonymous:m.value,timestamp:Date.now()};a.log("进入消息",{nickname:d,userId:c}),s.pushMessage(f),s.flushOnce()}}}function handleInputClick(){i("inputClick")}function handleCloseRedmoji(){T.value=!1}function handleEmojiChoose(e){var t;null===(t=L.value)||void 0===t||t.handleEmojiChoose(e)}(0,g.YP)(function(){return e.selfEnterSignal},function(e){if(!!e)e!==D.value&&(D.value=e,pushSelfEnterMessage())},{immediate:!0});var en=!1,er=(0,g.iH)(!0),ea=(0,g.iH)(!1),eo=(0,g.iH)("存在违反平台规范的内容");function sendComment(e){return _sendComment.apply(this,arguments)}function _sendComment(){return(_sendComment=(0,W._)(function(t){var n,r,o,u;return(0,q.Jh)(this,function(l){switch(l.label){case 0:if(_.value)return toast("直播已结束，无法发送评论"),[2];if(!1===e.loggedIn)return i("sendCommentNoLogin"),[2];if(!(n=t.trim()))return toast("发送内容不能为空"),[2];if(en)return[2];if(en=!0,!er.value)return[3,4];er.value=!1,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,s.getWebCommentUserViolationInfo()];case 2:return r=l.sent(),a.log("获取评论用户违规信息成功:",r,null==r?void 0:r.code),[3,4];case 3:if(0!==((null==(o=l.sent())?void 0:o.code)||0)){try{(u=JSON.parse(null==o?void 0:o.message).violationReasonDesc||"存在违反平台规范的内容").value=u}catch(e){a.warn("解析评论用户违规信息失败:",e)}ea.value=!0}return a.warn("获取评论用户违规信息失败:",o),[3,4];case 4:if(ea.value)return toast(eo.value),en=!1,[2];return s.sendComment(e.roomId,n).then(function(t){if((null==t?void 0:null===(r=t.commonResponse)||void 0===r?void 0:r.commonResult)===0){var r,o,u,l,s,c,d,v,f,p,h,g;toast((null==t?void 0:null===(g=t.commonResponse)||void 0===g?void 0:g.toast)||"消息发送失败，换个词儿试试吧"),a.warn("评论审核未通过:",t);return}null===(o=L.value)||void 0===o||o.clearInput(),F.value=!1,null===(u=w.value)||void 0===u||u.setPaused(!1),handleCloseRedmoji();var y={id:utils_generateSessionId(),userId:z.value,type:"comment",nickname:null===(s=e.im)||void 0===s?void 0:null===(l=s.userInfo)||void 0===l?void 0:l.nickname,avatar:null===(d=e.im)||void 0===d?void 0:null===(c=d.userInfo)||void 0===c?void 0:c.avatar,content:n,role:null===(f=e.im)||void 0===f?void 0:null===(v=f.userInfo)||void 0===v?void 0:v.role,isAnonymous:m.value,timestamp:Date.now(),desc:formatContent(n),_followed:!1};null===(p=w.value)||void 0===p||p.pushMessage(y),null===(h=w.value)||void 0===h||h.flushOnce(),a.warn("评论发送成功"),i("commentSendSuccess"),i("sendDanmaku",n,{type:"scroll",showBorder:!0,prior:!0})}).catch(function(e){a.warn("评论发送失败:",e),toast((null==e?void 0:e.message)||"评论发送失败，请稍后重试")}).finally(function(){setTimeout(function(){en=!1},500)}),[2]}})})).apply(this,arguments)}function onDocumentClick(e){if(G.value||X.value){var t=X.value?M.value:b.value,n=e.target;t&&n&&!t.contains(n)&&closeCard()}}function init(){w.value=new rL({flushCount:e.flushCount,flushInterval:e.flushInterval,cacheLimit:e.cacheLimit,foldedLimit:e.foldedLimit}),w.value.setCurrentUserId(z.value),w.value.onUpdate(function(e){R.value=(0,ei._)(e),!F.value&&scrollToBottomSmooth()}),w.value.onFoldedUpdate(function(e){U.value=e}),w.value.onStateChange(function(e){F.value=e.isPaused,P.value=e.newMsgCount}),w.value.startFlush()}function getBusinessBaseInfo(){return _getBusinessBaseInfo.apply(this,arguments)}function _getBusinessBaseInfo(){return(_getBusinessBaseInfo=(0,W._)(function(){var t;return(0,q.Jh)(this,function(n){switch(n.label){case 0:return[4,s.getJoinBusinessBaseInfo(e.roomId)];case 1:return(t=n.sent())&&updateCurrentUserRole(t),[2]}})})).apply(this,arguments)}function updateCurrentUserRole(t){var n;if(!(null===(n=e.im)||void 0===n?void 0:n.userInfo)){a.warn("userInfo 不存在，无法更新角色");return}e.im.userInfo.role=t,a.log("用户角色更新为:",t)}return(0,g.bv)(function(){}),(0,g.YP)(_,function(e){if(e){var t;null===(t=w.value)||void 0===t||t.setPaused(!0),P.value=0}}),(0,g.YP)(function(){return e.historyCommentMessage},function(e){!ee.value&&e.length>0&&(e.forEach(function(e){var t,n,r={id:utils_generateSessionId(),userId:e.userId,type:"comment",nickname:e.nickName,avatar:e.avatar,content:e.msg,role:e.role,isAnonymous:m.value,timestamp:Date.now(),desc:formatContent(e.msg),_followed:!1};r.nickname&&r.userId&&H.value.set(r.nickname,r),null===(t=w.value)||void 0===t||t.pushMessage(r),null===(n=w.value)||void 0===n||n.flushOnce()}),ee.value=!0)}),(0,g.bv)((0,W._)(function(){return(0,q.Jh)(this,function(t){switch(t.label){case 0:return[4,getBusinessBaseInfo()];case 1:return t.sent(),init(),[4,(0,g.Y3)()];case 2:return t.sent(),F.value=!1,O.value=!0,k.value&&(k.value.scrollTop=k.value.scrollHeight),(0,g.Y3)(function(){cancelProgrammaticScroll()}),e.selfEnterSignal&&pushSelfEnterMessage(),"undefined"!=typeof window&&e.im&&(e.im.onMessageReceived(receiveMessageHandle,{c2c:!0,group:!0,tag:"直播间消息"}),a.warn("已注册 IM 消息监听")),document.addEventListener("click",onDocumentClick,!0),[2]}})})),r({updateCurrentUserRole:updateCurrentUserRole}),(0,g.Jd)(function(){var e;null===(e=w.value)||void 0===e||e.destroy(),document.removeEventListener("click",onDocumentClick,!0)}),function(t,n){var r,i,a,o;return(0,g.wg)(),(0,g.iD)("div",{ref_key:"liveChatRef",ref:N,class:"live-chat"},[_.value?((0,g.wg)(),(0,g.iD)("div",rP)):((0,g.wg)(),(0,g.iD)(g.HY,{key:1},[(0,g._)("div",rF,[(0,g._)("div",rj,[(0,g._)("span",null,[n[4]||(n[4]=(0,g.Uk)("在线观众")),(0,g._)("span",rO,"\xb7"+(0,g.zw)((null===(i=(0,g.SU)(f))||void 0===i?void 0:null===(r=i.roomInfo)||void 0===r?void 0:r.displayMemberCount)||"0"),1)])]),(0,g._)("div",rH,[n[5]||(n[5]=(0,g._)("span",{class:"intro-title"}," 直播介绍 ",-1)),(0,g.Uk)(" "+(0,g.zw)(null===(o=(0,g.SU)(y))||void 0===o?void 0:null===(a=o.topMsg)||void 0===a?void 0:a.msg)+" ",1),(0,g._)("span",{class:"intro-body",innerHTML:e.introHtml},null,8,rW)])]),(0,g._)("div",rz,[(0,g._)("div",{ref_key:"scrollRef",ref:k,class:(0,g.C_)(["chat-list",{"is-scrolled":j.value}]),onScroll:onScroll,onWheel:onWheel},[(0,g._)("div",rB,[(0,g._)("div",rZ,[n[6]||(n[6]=(0,g._)("span",{class:"risk-tip"},"通知",-1)),(0,g.Uk)((0,g.zw)(e.riskText),1)]),(0,g._)("div",rq,[n[7]||(n[7]=(0,g._)("span",{class:"risk-tip"},"通知",-1)),(0,g.Uk)((0,g.zw)(e.riskWelcome),1),n[8]||(n[8]=(0,g._)("span",{class:"risk-welcome-tip"},"点赞鼓励",-1))])]),(0,g.Wm)(g.W3,{name:"msg",tag:"div",class:"msg-list"},{default:(0,g.w5)(function(){return[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)(V.value,function(e){return(0,g.wg)(),(0,g.iD)("div",{key:e.id,class:(0,g.C_)(["msg-item",["role-".concat(u[e.role?e.role:(0,g.SU)(nv).viewer])]])},[(0,g._)("div",{class:"msg-content",onClick:function(t){return onMessageClick(t,e)}},[(0,g.SU)(et)(e)?((0,g.wg)(),(0,g.iD)("span",rY,(0,g.zw)((0,g.SU)(et)(e)),1)):(0,g.kq)("",!0),(0,g._)("span",{class:"nickname",onClick:(0,g.iM)(function(t){return onNicknameClick(e)},["stop"])},(0,g.zw)(displayNameOf(e)),9,rG),"comment"===e.type||"system"===e.type?((0,g.wg)(),(0,g.iD)("span",{key:1,class:"content",onClick:function(t){return onContentClick(t,e)},innerHTML:formatContent(e.content||"")},null,8,rJ)):"enter"===e.type?((0,g.wg)(),(0,g.iD)("span",rQ," 来了")):"share"===e.type?((0,g.wg)(),(0,g.iD)("span",rK," 分享了主播")):"follow"===e.type?((0,g.wg)(),(0,g.iD)("span",rX," 关注了主播")):"light"===e.type?((0,g.wg)(),(0,g.iD)("span",r$," 为主播点赞了")):(0,g.kq)("",!0)],8,rV)],2)}),128))]}),_:1})],34),P.value>0&&F.value?((0,g.wg)(),(0,g.iD)("div",{key:0,class:"new-tip",onClick:jumpToBottom},[(0,g.Uk)((0,g.zw)(P.value>99?"99+":P.value)+" 条新消息 ",1),n[9]||(n[9]=(0,g._)("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDEyIDEyIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii40NSIgZD0ibTUuODcgOS4yNS4wMDQuMDA1YS4yLjIgMCAwIDAgLjI4My0uMDA2bDIuOTg1LTMuMDk3YS41LjUgMCAwIDEgLjcxOC42OTZsLTMuMjk2IDMuNDE5LS4wMTcuMDE3YS43NjcuNzY3IDAgMCAxLTEuMDg0LS4wMTdsLTMuMzItMy40MWEuNS41IDAgMSAxIC43MTgtLjY5N3oiLz48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii40NSIgZD0ibTUuODY3IDUuMjUuMDA1LjAwNWEuMi4yIDAgMCAwIC4yODMtLjAwNkw5LjE0IDIuMTUyYS41LjUgMCAwIDEgLjcxOC42OTZMNi41NjIgNi4yNjdsLS4wMTcuMDE3YS43NjcuNzY3IDAgMCAxLTEuMDg0LS4wMTdsLTMuMzItMy40MWEuNS41IDAgMCAxIC43MTgtLjY5N3oiLz48L3N2Zz4=",alt:"at"},null,-1))])):(0,g.kq)("",!0)]),(0,g.Wm)(g.uT,{name:"fade-card"},{default:(0,g.w5)(function(){var t;return[G.value&&Q.value?((0,g.wg)(),(0,g.iD)("div",{key:0,ref_key:"cardRef",ref:b,class:"card-wrapper",style:(0,g.j5)(E.value),onClick:n[0]||(n[0]=(0,g.iM)(function(){},["stop"]))},[(0,g.Wm)(n2,{"user-id":null===(t=Q.value)||void 0===t?void 0:t.userId,"show-at":!$.value,"show-follow":!$.value,"show-report":!$.value,"logged-in":e.loggedIn,"current-user-role":Z.value,onOnFollow:cardFollow,onOnCancelFollow:cardFollow,onOnAt:cardAt,onOnReport:cardReport,onNoLogin:handleCardNoLogin},null,8,["user-id","show-at","show-follow","show-report","logged-in","current-user-role"])],4)):(0,g.kq)("",!0)]}),_:1}),(0,g.Wm)(g.uT,{name:"fade-card"},{default:(0,g.w5)(function(){var t,r;return[X.value&&Q.value?((0,g.wg)(),(0,g.iD)("div",{key:0,ref_key:"anonymousCardRef",ref:M,class:"card-wrapper",style:(0,g.j5)(E.value),onClick:n[1]||(n[1]=(0,g.iM)(function(){},["stop"]))},[(0,g.Wm)(rk,{avatar:null===(t=Q.value)||void 0===t?void 0:t.avatar,"display-name":(0,g.SU)(utils_maskNickname)(null===(r=Q.value)||void 0===r?void 0:r.nickname),"show-at":!$.value,"show-report":!$.value,"logged-in":e.loggedIn,onOnAt:cardAt,onOnReport:cardReport,onNoLogin:handleCardNoLogin},null,8,["avatar","display-name","show-at","show-report","logged-in"])],4)):(0,g.kq)("",!0)]}),_:1}),(0,g.Wm)((0,g.SU)(rg)),(0,g.Wm)(g.uT,{name:"fade-up"},{default:(0,g.w5)(function(){return[Y.value?((0,g.wg)(),(0,g.iD)("div",{key:0,class:(0,g.C_)(["folded-interaction-bar",[{"is-hidden":F.value},"role-".concat(u[Y.value.role?Y.value.role:(0,g.SU)(nv).viewer])]])},[((0,g.wg)(),(0,g.iD)("div",{key:Y.value.id,class:"folded-interaction-content"},[(0,g.SU)(et)(Y.value)?((0,g.wg)(),(0,g.iD)("span",r0,(0,g.zw)((0,g.SU)(et)(Y.value)),1)):(0,g.kq)("",!0),(0,g._)("span",{class:"folded-interaction-nickname",onClick:n[2]||(n[2]=(0,g.iM)(function(e){return onNicknameClick(Y.value)},["stop"]))},(0,g.zw)(displayNameOf(Y.value)),1),(0,g._)("span",r1,(0,g.zw)(getInteractionText(Y.value.type)),1)]))],2)):(0,g.kq)("",!0)]}),_:1}),T.value&&L.value?((0,g.wg)(),(0,g.j4)(rU,{key:0,ref_key:"redmojiRef",ref:x,"input-el":L.value.getInputWrapperRef(),boundary:N.value,placement:["top-start","top","bottom-start","bottom"],"on-click":handleEmojiChoose,"on-close":handleCloseRedmoji},null,8,["input-el","boundary"])):(0,g.kq)("",!0),(0,g.Wm)(rM,{ref_key:"inputComponentRef",ref:L,"show-redmoji":T.value,"onUpdate:showRedmoji":n[3]||(n[3]=function(e){return T.value=e}),"live-chat-ref":N.value,onInputClick:handleInputClick,onSend:sendComment},null,8,["show-redmoji","live-chat-ref"])],64))],512)}}});let r2=(0,x.default)(r3,[["__scopeId","data-v-e0b2722a"]]);var r4={class:"join-owner-room-error"},r5=(0,g.aZ)({__name:"index",props:{cover:{}},setup:function(e){return function(e,t){return(0,g.wg)(),(0,g.iD)("div",r4,[(0,g.Wm)((0,g.SU)(e0.Z),{src:e.cover,class:"cover",crossorigin:"anonymous",style:{width:"100%",height:"100%"},elementtiming:"note-cover"},null,8,["src"]),t[0]||(t[0]=(0,g._)("div",{class:"cover-filter"},[(0,g._)("span",{class:"title"},"暂不支持观看自己直播间")],-1))])}}});let r8=(0,x.default)(r5,[["__scopeId","data-v-b410755e"]]);var r9={class:"live-finish"},r6={class:"cover-filter"},r7={class:"praised-num"},ie={class:"avatar"},it={class:"anchor-name"},ir=(0,g.aZ)({__name:"Index",props:{cover:{},roomStatus:{},hostInfo:{},hostId:{},loggedIn:{type:Boolean},roomId:{}},emits:["liveFinishNoLogin"],setup:function(e,t){var n=t.emit,r=(0,K.yj)(),i=(0,nz.g2)().getUserPageHref,a=(0,g.iH)(!1),o=nm(),u=(0,X.L)(),l=(0,J.Jk)(u).userInfo,s=(0,J.Jk)(o),c=s.anchorFollwed,d=s.anchorInfo,v=(0,g.Fl)(function(){var e;return null===(e=d.value.user)||void 0===e?void 0:e.xsecToken}),f=(0,g.Fl)(function(){return l.value.userId!==e.hostInfo.hostId});function targetPath(){var t;return(0,nB.T)({targetPath:i((null==e?void 0:null===(t=e.hostInfo)||void 0===t?void 0:t.hostId)||""),pageInstance:r.meta.pageInstance,isOwnPage:!1,isOwnBoard:!1,xsecToken:v.value||"",xsecSource:"web_live_user_card"})}function getAnchorInfo(){return _getAnchorInfo.apply(this,arguments)}function _getAnchorInfo(){return(_getAnchorInfo=(0,W._)(function(){var t;return(0,q.Jh)(this,function(n){switch(n.label){case 0:if(!(null==e?void 0:null===(t=e.hostInfo)||void 0===t?void 0:t.hostId))return[2];return[4,o.getAnchorInfo(e.hostInfo.hostId,!0)];case 1:return n.sent(),a.value=!0,[2]}})})).apply(this,arguments)}var p=G()((0,W._)(function(){return(0,q.Jh)(this,function(t){switch(t.label){case 0:return[4,o.toFollowAnchor(e.hostInfo.hostId)];case 1:return t.sent()&&((0,eu.Am)("关注成功"),getAnchorInfo()),[2]}})}),500,{leading:!0,trailing:!1}),h=G()((0,W._)(function(){return(0,q.Jh)(this,function(t){switch(t.label){case 0:return[4,o.unFollowAnchor(e.hostInfo.hostId)];case 1:return t.sent()&&((0,eu.Am)("取消关注成功"),getAnchorInfo()),[2]}})}),500,{leading:!0,trailing:!1});function handleClick(){return _handleClick.apply(this,arguments)}function _handleClick(){return(_handleClick=(0,W._)(function(){return(0,q.Jh)(this,function(t){return e.loggedIn?e.hostInfo.hostId?(c.value?h():p(),[2]):[2]:(n("liveFinishNoLogin"),[2])})})).apply(this,arguments)}return(0,g.bv)(function(){getAnchorInfo()}),function(e,t){var n,r;return(0,g.wg)(),(0,g.iD)("div",r9,[(0,g.Wm)((0,g.SU)(e0.Z),{src:e.cover,class:"cover",crossorigin:"anonymous",style:{width:"100%",height:"100%"},elementtiming:"note-cover"},null,8,["src"]),(0,g._)("div",r6,[t[1]||(t[1]=(0,g.uE)('<div class="live-title" data-v-7f102500><svg class="live-line" xmlns="http://www.w3.org/2000/svg" width="40" height="1" viewBox="0 0 40 1" fill="none" data-v-7f102500><path d="M0 0.5H40" stroke="white" stroke-opacity="0.16" data-v-7f102500></path></svg><span class="live-status" data-v-7f102500>直播已结束</span><svg class="live-line" xmlns="http://www.w3.org/2000/svg" width="40" height="1" viewBox="0 0 40 1" fill="none" data-v-7f102500><path d="M0 0.5H40" stroke="white" stroke-opacity="0.16" data-v-7f102500></path></svg></div>',1)),(0,g._)("span",r7,"累计"+(0,g.zw)((null===(n=e.hostInfo)||void 0===n?void 0:n.praiseCount)||0)+"赞",1),(0,g.Wm)((0,g.SU)(K.rH),{target:"_blank",to:targetPath()},{default:(0,g.w5)(function(){return[(0,g._)("div",ie,[(0,g.SU)(a)?((0,g.wg)(),(0,g.j4)((0,g.SU)(e0.Z),{key:0,src:e.hostInfo.avatar,crossorigin:"anonymous",class:"avatar-img"},null,8,["src"])):(0,g.kq)("",!0)])]}),_:1},8,["to"]),(0,g._)("span",it,(0,g.zw)(null===(r=e.hostInfo)||void 0===r?void 0:r.nickname),1),(0,g.SU)(a)&&!(0,g.SU)(c)&&(0,g.SU)(f)?((0,g.wg)(),(0,g.j4)((0,g.SU)(eu.zx),{key:0,class:(0,g.C_)(["follow-btn",{followed:(0,g.SU)(c)}]),onClick:handleClick},{default:(0,g.w5)(function(){return t[0]||(t[0]=[(0,g.Uk)(" 关注 ")])}),_:1,__:[0]},8,["class"])):(0,g.kq)("",!0)])])}}});let ii=(0,x.default)(ir,[["__scopeId","data-v-7f102500"]]);var ia={class:"load-error"},io={class:"title"},iu=(0,g.aZ)({__name:"Index",props:{icon:{default:""},title:{default:""},actionTitle:{default:"重新加载"},errorType:{default:"LoadError"}},emits:["action"],setup:function(e,t){var n=t.emit,r=(0,g.Fl)(function(){return e.icon?e.icon:"NotFoundError"===e.errorType?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDk2IDk2Ij48cmVjdCB3aWR0aD0iOTUiIGhlaWdodD0iOTUiIHg9Ii41IiB5PSIuNSIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utb3BhY2l0eT0iLjA4IiByeD0iNDcuNSIvPjxwYXRoIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iLjMiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTY0LjYyNCAyNS44NjhjMS4zMzYtLjUzNSAyLjgxNi0uNTYxIDQuMDQ3LjIwMiAxLjU5Ni45OSAyLjE1NSAyLjkwMyAxLjkyNCA0LjgwMyAxLjEzLjM5NiAyLjEwNiAxLjAyOCAyLjgzMiAxLjgxMS45NjcgMS4wNDQgMS41MjIgMi40MDIgMS4yODIgMy44MTUtLjI0MiAxLjQxOC0xLjIxNyAyLjQ5OS0yLjQ4IDMuMTMtMS4yNjEuNjMtMi44NS44NDItNC40NzQuNTM2cy0zLjAzOS0xLjA4MS00LjAwNi0yLjEyNWE2IDYgMCAwIDEtLjIxNi0uMjQ2Yy0uNDUuNDg2LS44NDcgMS4wMDgtMS4xNzQgMS40ODJsLS4wMjIuMDMzYy40NDIuMDczLjk3LjI3NyAxLjMwMS44MzIuMzQuNTY4LjM0MSAxLjMwNS4xNyAyLjEzbC0uMDExLjA1MmMtLjE3My44NTUuMDUxIDEuNzQuNjEzIDIuMzlhMjIuMTQgMjIuMTQgMCAwIDEgNS40MDggMTQuMDI3IDYuOCA2LjggMCAwIDEgMi4wNjQtLjMyYzMuODk2IDAgNyAzLjI3MyA3IDcuMjQydi45OTRoMy4yOTRhLjgyNC44MjQgMCAxIDEgMCAxLjY0N0gxMy44MjRhLjgyNC44MjQgMCAwIDEgMC0xLjY0N2g0Ljk0di0uOTk1YzAtMy44MzYgMi45MDEtNy4wMjIgNi42MTQtNy4yMy42NDQtMTEuNTk1IDkuOTgtMjEuMTg1IDIxLjc1OS0yMS40MTdhMjIuMiAyMi4yIDAgMCAxIDYuNzM4LjljLjc3MS4yMjggMS42MTguMDgyIDIuMzU4LS4zNzcuMTctLjEwNS4zNjMtLjIwNi42LS4zMDFsLjAwMS0uMDAxYy42MjgtLjI1MiAxLjIyMy0uMzA0IDEuNzY4LS4xMDEuNTI3LjE5Ni44NjkuNTgyIDEuMDk4LjkxNC4xNTQuMjIzLjMwNC41LjQyLjcxMmwuMTExLjIwMmMuMDcyLjEyNC4xMjguMjEyLjE3OC4yNzRsLjAxLjAxMWMuMTUzLS4yNTQuMzUtLjU2NS41ODQtLjkwNi4yOTQtLjQyNS42NTQtLjkwOCAxLjA3LTEuMzg2YTEgMSAwIDAgMS0uMTQtLjA3Yy0xLjIzMi0uNzYzLTEuODY0LTIuMS0xLjk3NC0zLjUzMi0uMTEtMS40MzMuMjktMy4wMjIgMS4xODQtNC40NTYuODkzLTEuNDMzIDIuMTQ1LTIuNDk0IDMuNDgxLTMuMDNtLjExIDEwLjc5YS44MjQuODI0IDAgMCAwLS42MjYtMS4yOTQgMi4zIDIuMyAwIDAgMS0uMDE3LS44NjJjLjEzNC0uNzg4LjY4Ny0xLjQ4IDEuNTkyLTEuOTMzLjkwNy0uNDU0IDIuMTI1LS42MzcgMy40MzMtLjM5MXMyLjM5Ni44NjMgMy4xMDMgMS42MjZjLjcwOC43NjQgMS4wMDEgMS42MjcuODY2IDIuNDE5LS4xMzQuNzg4LS42ODcgMS40OC0xLjU5MiAxLjkzMy0uOTA3LjQ1My0yLjEyNi42MzYtMy40MzMuMzktMS4zMDgtLjI0NS0yLjM5Ni0uODYzLTMuMTAzLTEuNjI2YTQgNCAwIDAgMS0uMjI0LS4yNjFtNC4yNDctNi4xN2MuMTI3LTEuNDA0LS4zNS0yLjUwNC0xLjE3Ny0zLjAxOC0uNjgtLjQyMS0xLjU4OC0uNDY2LTIuNTY3LS4wNzMtLjk3OS4zOTItMS45NjkgMS4yMDUtMi42OTYgMi4zNzJzLTEuMDIgMi40MTEtLjk0IDMuNDU4Yy4wNjQuODM4LjM2IDEuNTEyLjgyMiAxLjk2M2E0IDQgMCAwIDEgLjA0NS0uOTY2Yy4yNC0xLjQxNyAxLjIxNi0yLjQ5NyAyLjQ3OS0zLjEyOSAxLjE0Ny0uNTczIDIuNTY1LS44IDQuMDM0LS42MDZNNjAuMjMgNDAuOTNhMS43IDEuNyAwIDAgMS0uNTk2LS4yMDZjLS40MTgtLjI1LS42NzMtLjY2Ny0uODMtLjk0MS0uMDcyLS4xMjUtLjEzLS4yMzQtLjE4NC0uMzMyYTUgNSAwIDAgMC0uMjc1LS40NjdjLS4xNDQtLjIwOC0uMjQ1LS4yOC0uMzE3LS4zMDYtLjA1NC0uMDItLjIxMi0uMDYtLjU3OS4wODYtLjE0Ny4wNi0uMjU2LjExOC0uMzQ3LjE3NC0xLjA4LjY3LTIuNDA4LjkzNi0zLjY5Mi41NTdhMjAuNiAyMC42IDAgMCAwLTYuMjQtLjgzNGMtMTAuODc0LjIxNS0xOS41NTYgOS4wODctMjAuMTQ3IDE5Ljg3NyAzLjI4NS42MTQgNS43NDMgMy41OTQgNS43NDMgNy4xMjV2Ljk5NGgzMi4xMTd2LS45OTVjMC0yLjU5MyAxLjMyNi00Ljg5IDMuMzMyLTYuMTY5YS44LjggMCAwIDEtLjAzOC0uMjQ4IDIwLjUgMjAuNSAwIDAgMC01LjAxMS0xMy40NTMgNC40NSA0LjQ1IDAgMCAxLS45NzctMy44MjJsLjAwNy0uMDM1LjAwMi0uMDA0Yy4xNDMtLjY5NS4wNDQtLjkxNy4wMjYtLjk0NnYtLjAwMWMwLS4wMDItLjAwMi0uMDA0LS4wMTUtLjAxYS42LjYgMCAwIDAtLjIwNi0uMDQ4Yy0uMjA0LS4wMjItLjQyLS4wMDgtLjcwMy4wMWgtLjAwNWEuODI0LjgyNCAwIDAgMS0xLjA2NS0uMDA2bTE3LjAwNiAyNS43MjdINjYuNTN2LS45OTVjMC0zLjExOSAyLjQyNy01LjU5MyA1LjM1My01LjU5MyAyLjkyNyAwIDUuMzUzIDIuNDc0IDUuMzUzIDUuNTk0em0tNDYuMTE3IDB2LS45OTVjMC0zLjExOS0yLjQyNi01LjU5My01LjM1My01LjU5My0yLjkyOCAwLTUuMzUzIDIuNDc0LTUuMzUzIDUuNTk0di45OTR6bTctMTMuMTc2Yy0uNDA2IDAtLjk1Ni4zMTktMS4zIDEuMTRhLjgyNC44MjQgMCAxIDEtMS41MTktLjYzNGMuNTA1LTEuMjA5IDEuNTM0LTIuMTUzIDIuODE4LTIuMTUzIDEuMjg2IDAgMi4zMTQuOTQ0IDIuODIgMi4xNTNhLjgyMy44MjMgMCAxIDEtMS41Mi42MzVjLS4zNDQtLjgyMi0uODk0LTEuMTQxLTEuMy0xLjE0MW0xOC45NDEgMGMtLjQwNiAwLS45NTYuMzE5LTEuMyAxLjE0YS44MjQuODI0IDAgMSAxLTEuNTE5LS42MzRjLjUwNS0xLjIxIDEuNTM0LTIuMTUzIDIuODItMi4xNTMgMS4yODQgMCAyLjMxMi45NDQgMi44MTcgMi4xNTNhLjgyMy44MjMgMCAxIDEtMS41Mi42MzVjLS4zNDMtLjgyMi0uODkzLTEuMTQxLTEuMjk4LTEuMTQxbS0xNy4zMjQgOC4wN2EuOTA2LjkwNiAwIDEgMCAwIDEuODEyLjkwNi45MDYgMCAwIDAgMC0xLjgxMW0tMi41NTIuOTA3YTIuNTUyIDIuNTUyIDAgMSAxIDUuMTA0LS4wMDEgMi41NTIgMi41NTIgMCAwIDEtNS4xMDQgMG0xOC4zNDYtLjkwNmEuOTA2LjkwNiAwIDEgMCAuMDAxIDEuODEuOTA2LjkwNiAwIDAgMCAwLTEuODFtLTIuNTUyLjkwNmEyLjU1MiAyLjU1MiAwIDEgMSA1LjEwNS0uMDAxIDIuNTUyIDIuNTUyIDAgMCAxLTUuMTA1IDAiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDk2IDk2Ij48cmVjdCB3aWR0aD0iOTUiIGhlaWdodD0iOTUiIHg9Ii41IiB5PSIuNSIgc3Ryb2tlPSIjZmZmIiBzdHJva2Utb3BhY2l0eT0iLjA4IiByeD0iNDcuNSIvPjxwYXRoIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iLjMiIGQ9Ik00OCA3NGMxNC4zNiAwIDI2LTExLjY0IDI2LTI2IDAtNS4xMDUtMS40NzItOS44NjctNC4wMTMtMTMuODg0bC0uMDAxLS4wMDIuMDExLS4wMTdjMy4zOTUtNS4zMjcgNC43Ni05LjMzIDMuMzA4LTEwLjc4NC0xLjQ0LTEuNDQxLTUuMzg2LS4xMTQtMTAuNjQ1IDMuMjExQTI1LjkgMjUuOSAwIDAgMCA0OCAyMmMtMTQuMzYgMC0yNiAxMS42NC0yNiAyNmEyNS45IDI1LjkgMCAwIDAgNC41MTcgMTQuNjVjLTMuMzIgNS4yNDctNC42NDYgOS4xODUtMy4yMDcgMTAuNjI1IDEuNDUzIDEuNDU0IDUuNDU3LjA5IDEwLjc4Ni0zLjMwMUEyNS45IDI1LjkgMCAwIDAgNDggNzRtMjMuNTYtNDcuMzQ1Yy0uNTEgMS42MTEtMS41OTkgMy43NzgtMy4yNiA2LjM4NGwtLjY3OCAxLjA2M2MtMy4zODYgNS4xNzUtOC42MzggMTEuNTMzLTE1LjA1IDE3Ljk0LTYuNzU3IDYuNzUzLTEzLjQxMiAxMi4yOC0xOC42ODcgMTUuNjk2cS0uMzguMjQ2LS43NS40NzdsLS4xMTMuMDcyLS4zODcuMjQ0Yy0yLjQzIDEuNTE5LTQuNDYgMi41MjEtNS45ODcgMy4wMDMtLjgwNi4yNTQtMS4zNjguMzMtMS43MTguMzE3YTEuNCAxLjQgMCAwIDEtLjE3OC0uMDE3IDEgMSAwIDAgMS0uMDE2LS4xNjljLS4wMTQtLjM0LjA1Ni0uODkuMzAyLTEuNjguNDkxLTEuNTc4IDEuNTQ4LTMuNzA0IDMuMTctNi4yNjZsLjcwMy0xLjExMS0uNzQyLTEuMDg2QTIzLjkgMjMuOSAwIDAgMSAyNCA0OGMwLTEzLjI1NSAxMC43NDUtMjQgMjQtMjQgNS4wMjMgMCA5LjY4IDEuNTQgMTMuNTMxIDQuMTc1bDEuMDg2Ljc0MyAxLjExMi0uNzAzYzIuNTY3LTEuNjI0IDQuNjk4LTIuNjgyIDYuMjgtMy4xNzQuNzkyLS4yNDcgMS4zNDItLjMxNyAxLjY4NC0uMzAzcS4xMS4wMDUuMTcuMDE2LjAxMi4wNjMuMDE2LjE4Yy4wMTMuMzUtLjA2My45MTMtLjMxOSAxLjcyMU00OCA3MmEyMy45IDIzLjkgMCAwIDEtMTIuMDQzLTMuMjM1YzUuMjU3LTMuNTQ0IDExLjYyMi04LjkwNSAxOC4wMy0xNS4zMDggNi4xNjMtNi4xNiAxMS4zMDUtMTIuMzExIDE0Ljc5LTE3LjQ4QTIzLjkgMjMuOSAwIDAgMSA3MiA0OGMwIDEzLjI1NS0xMC43NDUgMjQtMjQgMjRtMjMuODQyLTQ3LjMzMy0uMDAyLS4wMDUtLjAwMi0uMDAzeiIvPjxwYXRoIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iLjMiIGQ9Ik01Mi44NzUgMzYuNjI1YTQuODc1IDQuODc1IDAgMSAxLTkuNzUgMCA0Ljg3NSA0Ljg3NSAwIDAgMSA5Ljc1IDBNNDggMzkuNWEyLjg3NSAyLjg3NSAwIDEgMCAwLTUuNzUgMi44NzUgMi44NzUgMCAwIDAgMCA1Ljc1Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZmlsbC1vcGFjaXR5PSIuMyIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtNjkuOTk3IDM0LjA5Ny0uMDExLjAxN3YuMDAybC4wMTItLjAxOXptMS44NDMtOS40MzUuMDAyLjAwNS0uMDA0LS4wMDh6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48cGF0aCBmaWxsPSIjZmZmIiBmaWxsLW9wYWNpdHk9Ii4zIiBkPSJNNDMuMTI1IDUwLjAzMWEzLjY1NiAzLjY1NiAwIDEgMS03LjMxMyAwIDMuNjU2IDMuNjU2IDAgMCAxIDcuMzEzIDBtLTMuNjU2IDEuNjU3YTEuNjU2IDEuNjU2IDAgMSAwIDAtMy4zMTMgMS42NTYgMS42NTYgMCAwIDAgMCAzLjMxMyIvPjwvc3ZnPg=="}),i=(0,g.Fl)(function(){return e.title?e.title:"LoadError"===e.errorType?"网络错误":"你访问的页面不见了"});function handleClick(){n("action")}return function(e,t){return(0,g.wg)(),(0,g.iD)("div",ia,[(0,g.Wm)((0,g.SU)(e0.Z),{src:(0,g.SU)(r),class:"load-icon"},null,8,["src"]),(0,g._)("span",io,(0,g.zw)((0,g.SU)(i)),1),(0,g.Wm)((0,g.SU)(eu.zx),{class:"load-btn",onClick:handleClick},{default:(0,g.w5)(function(){return[(0,g.Uk)((0,g.zw)(e.actionTitle),1)]}),_:1})])}}});let il=(0,x.default)(iu,[["__scopeId","data-v-652435d0"]]);function useVideoScaler(e,t,n,r,i,a){var calculateScaleParams=function(){if(!e.value)return null;var a=document.querySelector(".player-el");if(!a)return null;var o=Number.parseFloat(window.getComputedStyle(a).paddingTop)||0,u=(a.clientHeight-o)/n.value,l=r.value*u,s=i.value*u,c=-t.value*u;return{scale:u,translateY:c,videoWidth:l,videoHeight:s}},applyVideoScale=function(){var e=document.querySelector(".player-el video");if(!e){setTimeout(applyVideoScale,100);return}var t=document.createElement("div");t.className="video-wrapper",t.style.overflow="hidden",t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.top="0",t.style.left="0";var n=e.parentNode;null==n||n.insertBefore(t,e),t.appendChild(e);var r=calculateScaleParams();if(!r){e.style.transform="",e.style.width="",e.style.height="",e.style.position="",e.style.left="",e.style.top="";return}e.style.transform="translate(0, ".concat(r.translateY,"px) scale(").concat(a.value,")"),e.style.transformOrigin="top center"},resetVideoScale=function(){var e=document.querySelector(".video-wrapper"),t=document.querySelector(".player-el video");e&&t&&e.parentNode&&(e.parentNode.insertBefore(t,e),e.remove()),t&&(t.style.transform="",t.style.width="",t.style.height="",t.style.position="",t.style.left="",t.style.top="",t.style.transformOrigin="")};(0,g.YP)(e,function(e){(0,g.Y3)(function(){e?applyVideoScale():resetVideoScale()})}),(0,g.YP)([t,n,r,i],function(){e.value&&(0,g.Y3)(applyVideoScale)});var handleResize=function(){e.value&&applyVideoScale()};return(0,g.bv)(function(){window.addEventListener("resize",handleResize),e.value&&(0,g.Y3)(applyVideoScale)}),(0,g.SK)(function(){window.removeEventListener("resize",handleResize),resetVideoScale()}),{applyVideoScale:applyVideoScale,resetVideoScale:resetVideoScale,calculateScaleParams:calculateScaleParams}}n(80156),n(50721),n(36163),n(96118);var is={key:0,class:"live-loading-mask"},ic={key:1,class:"pip-tip-mask"},id={key:0,class:"pip-tip-content"},iv=(0,g.aZ)({__name:"LivePlayer",props:{cover:{},volume:{},autoPlay:{type:Boolean},mediaInfo:{},roomId:{},hostInfo:{},userId:{},loggedIn:{type:Boolean},appSettings:{},isDanmuShow:{type:Boolean},redmojiMap:{}},emits:["showDanmaku","onLinkMicSeiInfo","noLogin","sdkLoadingChange","onPlayerPause","onPlayerPlaying","onPlayerReload","onGearChange","onVolumeClick","onDanmakuSwitchClick","onPipClick","onShareClick","onShareClickSuccess","pictureInPictureChange","fullscreenChange","onEnded","onError","onPlayBtnClick"],setup:function(e,t){var r,i,a,o,u=t.expose,l=t.emit,s=(0,g.iH)(!0),c=(0,g.iH)(-1),d=(0,g.iH)(),v=(0,g.iH)(!1),f=(0,g.iH)(!1),p=(0,g.Fl)(function(){return f.value}),m=(0,g.iH)(!1),y=(0,g.iH)(!1),I=(0,g.Fl)(function(){return m.value||y.value}),_=(0,g.Fl)(function(){return m.value}),w=(0,S.j)("LivePlayer"),k=(0,g.Fl)(function(){var t;return null===(t=e.hostInfo)||void 0===t?void 0:t.avatar}),b=nR(),M="",L="",x=(0,g.iH)(null),T=(0,g.Fl)(function(){var e=0===b.contentType&&1===b.layoutType||5===b.contentType&&0===b.audioChatLayoutType,t=!b.videoStreamIsLandscape,n=b.linkmicUsers.length>1;return e&&t&&n}),D=(0,g.iH)(0);function playerReport(t,n){if(!!n){var r={playerTiming:collectPlayerScriptLoadTiming()};if(["sns_webplayer_play_metric_new","sns_webplayer_play_log_info_new","apm_webplayer_heartbeat_section","apm_webplayer_act_metric"].includes(t.measurement_name)&&t.measurement_data){var i=t.measurement_data;i.extra_info=JSON.stringify(r);var a=Math.round(c.value);i.load_player_time=a,i.room_id=e.roomId||"";var o={measurement_name:t.measurement_name,measurement_data:t.measurement_data};w.log("playerReport metricsPayload:",o),nl.Z.sendCustomPoint(o)}}}function timeoutHandler(){f.value=!1,w.warn("视频流加载超时，自动关闭loading"),nl.Z.sendCustomPoint({measurement_name:"live_player_stream_loading_timeout",measurement_data:{timeout:15e3}})}function setStreamLoading(e){nE.remove(timeoutHandler,null),f.value=e,e&&nE.once(timeoutHandler,null,15e3)}function gearChangeHandler(e){var t=e.from,n=e.to;if(!t||t.id===n.id){w.log("点击当前清晰度，不做处理",{from:t,to:n});return}w.log("清晰度切换:",{from:t,to:n}),n&&n.qualityTypeName&&(b.clearLinkmicStyleAndSEI(),(0,eu.Am)("已为您切换到".concat(n.qualityTypeName,"画质"),{timeout:1e3,position:"center",container:".player-el"}),l("onGearChange",n.qualityTypeName))}function drawCanvasFilter(){try{var e=document.getElementById("video-canvas"),t=e.getContext("2d");e.width=d.value.clientWidth,e.height=d.value.clientHeight,t.drawImage(d.value.querySelector("video"),0,0,d.value.clientWidth,d.value.clientHeight)}catch(e){w.warn("绘制动态背景失败:",e)}}useVideoScaler(T,(0,g.Fl)(function(){return b.videoStreamValidStartY}),(0,g.Fl)(function(){return b.videoStreamValidHeight}),(0,g.Fl)(function(){var e,t;return(null===(t=b.lastSEIData)||void 0===t?void 0:null===(e=t.canvas)||void 0===e?void 0:e.w)||1080}),(0,g.Fl)(function(){var e,t;return(null===(t=b.lastSEIData)||void 0===t?void 0:null===(e=t.canvas)||void 0===e?void 0:e.h)||1920}),(0,g.Fl)(function(){return b.videoStreamValidScale}));var N=0,E=!1,R=0;function getPageRequestStartTimestamp(){if("undefined"==typeof window)return 0;try{var e,t=null===(e=performance.getEntriesByType("navigation"))||void 0===e?void 0:e[0],n=(null==t?void 0:t.requestStart)||0;if(n>0&&performance.timeOrigin)return Math.floor(performance.timeOrigin+n);return Math.floor(performance.timeOrigin||Date.now())}catch(e){return w.warn("获取页面请求起点时间戳失败:",e),Date.now()}}function getNowTimestamp(){return"undefined"==typeof window?Date.now():Math.floor((performance.timeOrigin||Date.now())+performance.now())}function reportVideoPlaySuccessAndSecondsOpen(t,n,r){var i=N||getPageRequestStartTimestamp(),a=n>0&&i>0?Math.max(0,n-i):-1;reportLiveReport(ns.LIVE_VIDEO_PLAY,(0,Z._)((0,z._)({success:t,start_ts:i,end_ts:n,cost_ms:a},r?{reason:r}:{}),{room_id:"".concat(e.roomId||"")}))}function reportStartToVideoPlayMetric(t,n,r){var i=R,a=n>0&&i>0?Math.max(0,n-i):-1;reportLiveReport(ns.LIVE_START_TO_VIDEO_PLAY,(0,Z._)((0,z._)({success:t,start_ts:i,end_ts:n,cost_ms:a},r?{reason:r}:{}),{room_id:"".concat(e.roomId||"")}))}function onPlayTimeout(){!E&&reportVideoPlaySuccessAndSecondsOpen(0,getNowTimestamp(),"timeout_10s")}function onVideoPlayHandler(){w.log("Live Player VIDEO_PLAY"),drawCanvasFilter(),setStreamLoading(!1),!E&&(E=!0,nE.remove(onPlayTimeout,null),reportVideoPlaySuccessAndSecondsOpen(1,getNowTimestamp())),R>0&&(nE.remove(onStartPlayTimeout,null),reportStartToVideoPlayMetric(1,getNowTimestamp()),R=0)}function onStartPlayTimeout(){reportStartToVideoPlayMetric(0,getNowTimestamp(),"timeout_10s"),R=0}function onStartPlayHandler(){w.log("onStartPlayHandler"),setStreamLoading(!0),b.clearLinkmicStyleAndSEI(),R=getNowTimestamp(),nE.remove(onStartPlayTimeout,null),nE.once(onStartPlayTimeout,null,1e4)}function onShowDanmakuChange(e){var t,n;e?null===(t=i.danmu)||void 0===t||t.start():null===(n=i.danmu)||void 0===n||n.stop(),l("showDanmaku",e)}function onLinkMicSeiInfo(e){l("onLinkMicSeiInfo",e)}function handlePlayerClick(e){if(!document.querySelector(".game-linkmic-container")||e.target.closest(".game-linkmic-window"))return;var t=b.linkmicUsers.find(function(e){return e.isHost});if(!!t){var n=new CustomEvent("game-linkmic-main-click",{detail:{userId:t.userId,isHost:t.isHost,clientX:e.clientX,clientY:e.clientY}});document.dispatchEvent(n)}}function onEnterPictureInPicture(){w.log("PIP 进入画中画模式"),m.value=!0,l("pictureInPictureChange",!0)}function handleExitPip(){try{document.pictureInPictureElement&&document.exitPictureInPicture()}catch(e){w.warn("PIP 退出画中画失败:",e)}}function exitPipTimeoutHandler(){w.log("exitPipTimeoutHandler"),y.value=!1}function onExitPictureInPicture(){w.log("PIP 退出画中画模式"),m.value=!1,l("pictureInPictureChange",!1),y.value=!0,nE.remove(exitPipTimeoutHandler,null),nE.once(exitPipTimeoutHandler,null,400)}function onVolumeChange(){}function setPlayerNtpTime(e){try{if(null==i?void 0:i.setNtpServerTime){var t=Date.now();w.log("设置播放器,ntpTs=".concat(e,",localTs=").concat(t,",delta=").concat(e-t)),i.setNtpServerTime(e)}}catch(e){w.warn("透传 NTP 时间给播放器失败:",e)}}function onPrivateFullscreenChange(e){w.log("Live Player privateFullscreenChange:",e),l("fullscreenChange",e)}function copyTextToClipboard(e){return _copyTextToClipboard.apply(this,arguments)}function _copyTextToClipboard(){return(_copyTextToClipboard=(0,W._)(function(e){var t,n,r,i,a;return(0,q.Jh)(this,function(o){switch(o.label){case 0:if(!e||"undefined"==typeof window)return[2,!1];o.label=1;case 1:if(o.trys.push([1,4,,5]),!(window.isSecureContext&&(null===(n=navigator)||void 0===n?void 0:null===(t=n.clipboard)||void 0===t?void 0:t.writeText)))return[3,3];return[4,navigator.clipboard.writeText(e)];case 2:return o.sent(),[2,!0];case 3:return(r=document.createElement("textarea")).value=e,r.setAttribute("readonly","true"),r.style.position="fixed",r.style.top="-9999px",r.style.left="-9999px",document.body.appendChild(r),r.select(),r.setSelectionRange(0,r.value.length),i=document.execCommand("copy"),document.body.removeChild(r),[2,i];case 4:return a=o.sent(),w.warn("复制到剪贴板失败:",a),[2,!1];case 5:return[2]}})})).apply(this,arguments)}function buildShareLink(){return _buildShareLink.apply(this,arguments)}function _buildShareLink(){return(_buildShareLink=(0,W._)(function(){var t,n,r,i,a,o,u,l,s,c,d,v;return(0,q.Jh)(this,function(f){switch(f.label){case 0:if("undefined"==typeof window)return[2,""];o=(null===(t=e.hostInfo)||void 0===t?void 0:t.hostId)||(null===(r=e.mediaInfo)||void 0===r?void 0:null===(n=r.media)||void 0===n?void 0:n.host_id)||(null===(a=e.mediaInfo)||void 0===a?void 0:null===(i=a.media)||void 0===i?void 0:i.hostId)||"",u=window.location.origin+window.location.pathname,f.label=1;case 1:if(f.trys.push([1,3,,4]),"safari"===(0,e$.qs)(navigator.userAgent).toLowerCase())return w.log("Safari 浏览器，使用本地拼接分享链接"),[2,"".concat(u,"?host_id=").concat(o,"&source=").concat(h.Hx.WEB_SHARE,"&timestamp=").concat(Date.now())];return[4,getRoomShareInfo(e.roomId)];case 2:return c=f.sent(),w.log("获取直播间分享信息:",null===(l=c.linkDto)||void 0===l?void 0:l.webPageUrl),d=Object.fromEntries(new URL((null===(s=c.linkDto)||void 0===s?void 0:s.webPageUrl)||"").searchParams.entries()),[2,"".concat(u,"?host_id=").concat(o,"&source=").concat(h.Hx.WEB_SHARE,"&timestamp=").concat(d.timestamp||Date.now())];case 3:return v=f.sent(),w.warn("buildShareLink:",v),[2,"".concat(u,"?host_id=").concat(encodeURIComponent(o),"&source=").concat(h.Hx.WEB_SHARE,"&timestamp=").concat(Date.now())];case 4:return[2]}})})).apply(this,arguments)}function onShareClick(){return _onShareClick.apply(this,arguments)}function _onShareClick(){return(_onShareClick=(0,W._)(function(){var t,n,r,i,a,o,u,s,c;return(0,q.Jh)(this,function(d){switch(d.label){case 0:return l("onShareClick"),t=nw(),[4,buildShareLink()];case 1:if(!(n=d.sent()))return[2];return[4,copyTextToClipboard(n)];case 2:if(!d.sent())return[3,8];(0,eu.Am)("复制成功，快去分享给好友吧",{mode:"light",position:"center",container:".player-el"}),l("onShareClickSuccess"),d.label=3;case 3:if(d.trys.push([3,6,,7]),a=String(e.roomId||""),o=String(e.userId||""),!(a&&o&&(null===(i=t.roomData)||void 0===i?void 0:null===(r=i.roomInfo)||void 0===r?void 0:r.deeplink)))return[3,5];return[4,postRoomShare(a,null===(s=t.roomData)||void 0===s?void 0:null===(u=s.roomInfo)||void 0===u?void 0:u.deeplink,"copy_link",o)];case 4:d.sent(),reportLiveReport(ns.LIVE_SHARE,{room_id:a}),d.label=5;case 5:return[3,7];case 6:return c=d.sent(),w.warn("调用分享接口失败:",c),[3,7];case 7:return[3,9];case 8:(0,eu.Am)("复制失败，请手动复制链接",{position:"center",container:".player-el"}),d.label=9;case 9:return[2]}})})).apply(this,arguments)}function onPauseHandler(){w.log("Live Player PAUSE"),l("onPlayerPause")}function onPlayingHandler(){D.value=0,w.log("Live Player PLAYING"),l("onPlayerPlaying")}function onPlayBtnClick(){w.log("Live Player PLAY_BTN_CLICK"),l("onPlayBtnClick",i.paused)}function onReloadHandler(){w.log("Live Player RELOAD"),b.clearLinkmicStyleAndSEI(),l("onPlayerReload")}function bindReloadButtonClick(){var e,t=null===(e=d.value)||void 0===e?void 0:e.querySelector(".xgplayer-reload");t&&(t.addEventListener("click",onReloadHandler),w.log("Reload button bindPlayerEvent bindReloadButtonClick"))}function unbindReloadButtonClick(){var e,t=null===(e=d.value)||void 0===e?void 0:e.querySelector(".xgplayer-reload");t&&t.removeEventListener("click",onReloadHandler)}function onVolumeClickHandler(){w.log("Live Player Volume Click"),l("onVolumeClick")}function bindVolumeButtonClick(){var e,t=null===(e=d.value)||void 0===e?void 0:e.querySelector(".xgplayer-volume");t&&(t.addEventListener("click",onVolumeClickHandler),w.log("Volume button bindPlayerEvent bindVolumeButtonClick"))}function unbindVolumeButtonClick(){var e,t=null===(e=d.value)||void 0===e?void 0:e.querySelector(".xgplayer-volume");t&&t.removeEventListener("click",onVolumeClickHandler)}function onPipClickHandler(){w.log("Live Player Pip Click"),l("onPipClick")}function bindPipButtonClick(){var e,t=null===(e=d.value)||void 0===e?void 0:e.querySelector(".xgplayer-pip");t&&(t.addEventListener("click",onPipClickHandler),w.log("Pip button bindPlayerEvent bindPipButtonClick"))}function reloadPlayer(){if(i){if(D.value<=10){w.log("reloadPlayer:",D.value);var e=null==i?void 0:i.getSelectedBitrateId();null==i||i.reloadMultiBitrate(e)}else l("onError")}D.value+=1}function onLiveEnded(){reloadPlayer(),w.log("Live Player ENDED")}function onLiveError(e){reloadPlayer(),w.warn("Live Player ERROR:",e)}function unbindPipButtonClick(){var e,t=null===(e=d.value)||void 0===e?void 0:e.querySelector(".xgplayer-pip");t&&t.removeEventListener("click",onPipClickHandler)}function bindPlayerEvent(){i.on("showDanmakuChange",onShowDanmakuChange),i.on(h.LB.CLICK_DANMAKU_SWITCH,function(e){l("onDanmakuSwitchClick",e)}),i.on("click-share",onShareClick),i.on("LINKMIC_SEI_INFO",onLinkMicSeiInfo),i.on("requestPictureInPicture",onEnterPictureInPicture),i.on("exitPictureInPicture",onExitPictureInPicture),i.on("volumechange",onVolumeChange),i.on("GEAR_CHANGE",gearChangeHandler),i.on("VIDEO_PLAY",onVideoPlayHandler),i.on("START_PLAY",onStartPlayHandler),i.on("PAUSE",onPauseHandler),i.on("PLAYING",onPlayingHandler),i.on("privateFullscreenChange",onPrivateFullscreenChange),i.on("RELOAD",onReloadHandler),i.once("ready",function(){bindReloadButtonClick(),bindVolumeButtonClick(),bindPipButtonClick()}),i.on("ended",onLiveEnded),i.on("error",onLiveError),i.on("playBtnClick",onPlayBtnClick),i.on("volumeIconClick",onVolumeClickHandler)}function unBindPlayerEvent(){if(!!i)i.off("showDanmakuChange",onShowDanmakuChange),i.off("click-share",onShareClick),i.off("LINKMIC_SEI_INFO",onLinkMicSeiInfo),i.off("requestPictureInPicture",onEnterPictureInPicture),i.off("exitPictureInPicture",onExitPictureInPicture),i.off("volumechange",onVolumeChange),i.off("GEAR_CHANGE",gearChangeHandler),i.off("VIDEO_PLAY",onVideoPlayHandler),i.off("START_PLAY",onStartPlayHandler),i.off("PAUSE",onPauseHandler),i.off("PLAYING",onPlayingHandler),i.off("privateFullscreenChange",onPrivateFullscreenChange),i.off("RELOAD",onReloadHandler),i.off("ended",onLiveEnded),i.off("error",onLiveError),i.off("playBtnClick",onPlayBtnClick),i.off("volumeIconClick",onVolumeClickHandler),unbindReloadButtonClick(),unbindVolumeButtonClick(),unbindPipButtonClick()}function collectPlayerScriptLoadTiming(){var e=(window.performance.resourcesBufferCache||[]).concat(window.performance.getEntriesByType("resource")).filter(function(e){return e.name.includes("xhs-web-player")})[0];if(!e)return{};try{return{connectEnd:e.connectEnd.toFixed(0),connectStart:e.connectStart.toFixed(0),domainLookupEnd:e.domainLookupEnd.toFixed(0),domainLookupStart:e.domainLookupStart.toFixed(0),responseEnd:e.responseEnd.toFixed(0),responseStart:e.responseStart.toFixed(0),TLSCost:e.secureConnectionStart.toFixed(0),requestStart:e.requestStart.toFixed(0)}}catch(e){var t=e instanceof Error?e.message:"未知错误";return w.warn("收集播放器脚本加载性能指标失败:",t),{}}}function normalizeUrlProtocol(e){return e?e.replace("http://","https://"):""}function buildMediaJsonFromConfig(){var t,n,r,i,a,o,u,l,s=e.mediaInfo;if(w.log("buildMediaJsonFromConfig mediaInfo:",s),!s||!s.streams||0===s.streams.length)return{ver:1,error_code:0,media:{room_id:e.roomId,host_id:"",subtitle_languages:["",""],stream_level_ids:[]},streams:[{id:1,codec:"h264",default_stream:1,master_url:normalizeUrlProtocol("https://live-source-play.xhscdn.com/live/".concat(e.roomId,".flv")),backup_urls:[normalizeUrlProtocol("https://live-source-play-bak-tx.xhscdn.com/live/".concat(e.roomId,".flv"))],max_bitrate:1e6,quality_type:"FLV",quality_type_name:"原画",bitrate_amend_ratio:1,protocol:"https"}]};var c=(s.streams||[]).filter(function(e){return e.master_url&&!e.master_url.endsWith(".m3u8")}).map(function(e){var t=normalizeUrlProtocol(e.master_url),n=(e.backup_urls||[]).map(function(e){return normalizeUrlProtocol(e)});return(0,Z._)((0,z._)({},e),{master_url:t,backup_urls:n,protocol:t.startsWith("https")?"https":"http"})});return{ver:null!==(i=s.ver)&&void 0!==i?i:1,error_code:null!==(a=s.error_code)&&void 0!==a?a:0,media:{room_id:null!==(o=null===(t=s.media)||void 0===t?void 0:t.room_id)&&void 0!==o?o:e.roomId,host_id:null!==(u=null===(n=s.media)||void 0===n?void 0:n.host_id)&&void 0!==u?u:"",subtitle_languages:["",""],stream_level_ids:null!==(l=null===(r=s.media)||void 0===r?void 0:r.stream_level_ids)&&void 0!==l?l:c.map(function(e){return e.id}).filter(function(e){return"number"==typeof e})},streams:c}}function createDom(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=document.createElement(e);return r.className=n,r.innerHTML=t,r.style.cssText="display: flex; align-items: center",r}function initPlayer(){return _initPlayer.apply(this,arguments)}function _initPlayer(){return(_initPlayer=(0,W._)(function(){var t,r,u;function importFlvPlayerSdkWithRetry(){return _importFlvPlayerSdkWithRetry.apply(this,arguments)}function _importFlvPlayerSdkWithRetry(){return(_importFlvPlayerSdkWithRetry=(0,W._)(function(){var e,t,i,a,o,u;return(0,q.Jh)(this,function(l){switch(l.label){case 0:e=function(){return!!d.value},t=function(e){return new Promise(function(t){window.setTimeout(function(){return t()},e)})},i=null,a=0,l.label=1;case 1:if(!(a<=r.length))return[3,7];l.label=2;case 2:return l.trys.push([2,4,,6]),[4,Promise.all([n.e("5980"),n.e("4182")]).then(n.t.bind(n,77166,23))];case 3:return[2,l.sent()];case 4:if(i=o=l.sent(),!e()||a>=r.length)throw i;return u=r[a],w.warn("加载播放器 SDK 失败，".concat(u,"ms 后重试（第 ").concat(a+1," 次）:"),o),[4,t(u)];case 5:return l.sent(),[3,6];case 6:return a+=1,[3,1];case 7:throw i}})})).apply(this,arguments)}return(0,q.Jh)(this,function(n){var l;if(i)return[2];return null==i||null===(t=i.destroy)||void 0===t||t.call(i),v.value=!0,setStreamLoading(!1),r=[50,100,200],u=performance.now(),importFlvPlayerSdkWithRetry().then((l=(0,W._)(function(t){var n,r,l,f,p,h;return(0,q.Jh)(this,function(g){return d.value?(c.value=performance.now()-u,reportLiveReport(ns.LIVE_PLAYER_LOAD,{loadPlayerTime:Math.round(c.value),success:1}),r=t.default,x.value=r,(null==a?void 0:a.default)&&(M=a.default.name,r.install(a.default.name,a.default.method)),(null==o?void 0:o.default)&&(L=o.default.name,r.install(o.default.name,o.default.method)),p=normalizeUrlProtocol(null==(f=(l=buildMediaJsonFromConfig()).streams.find(function(e){return"".concat(e.codec||"").toLowerCase().includes("264")})||l.streams[0])?void 0:f.master_url),setStreamLoading(!0),i=new r((h={businessLine:"web_live",el:d.value,userId:e.userId||"",fluid:!0,playsinline:!0,volume:e.volume,reportCallback:playerReport,lang:"zh-cn",autoplay:e.autoPlay,videoInit:!e.autoPlay,isLive:!0,cors:!0,reload:!0,inactive:5e3,pip:!0,showTooltips:!0,showPipTips:!1,showFullscreenTips:!1,reportCallbackOnly:!0,allowSeekAfterEnded:!0,allowPlayAfterEnded:!0,closeVideoStopPropagation:!0,closePlayVideoFocus:!0,closeVideoTouch:!0,closeVideoClick:!0,closeVideoDblclick:!0,preferResource:["265"],mediaJson:l,url:p,useCustomizedMSE:!0,useWasmPThread:!0,useMultiBitrates:!0,useLiveSkin:!0,ignores:["fullscreen"],appSettings:(null===(n=e.appSettings)||void 0===n?void 0:n.webPlayerConfig)||{},danmu:{panel:!1,live:!0,comments:[],area:{start:0,end:.85},defaultOff:!1}},(0,tX._)(h,"ignores",["loading","error","fullscreen"]),(0,tX._)(h,"showCenterPlayBtn",!1),(0,tX._)(h,"disablePictureInPicture",!0),h)),bindPlayerEvent(),v.value=!1,s.value=!1,[2]):(v.value=!1,setStreamLoading(!1),[2])})}),function(e){return l.apply(this,arguments)})).catch(function(e){v.value=!1,setStreamLoading(!1),reportLiveReport(ns.LIVE_PLAYER_LOAD,{success:0,error:(null==e?void 0:e.message)||"unknown"})}),[2]})})).apply(this,arguments)}function addDanmaku(t,n){function getEmojiUrl(t){if(!!t){if(e.redmojiMap)return e.redmojiMap[t]}}var r={fontSize:"20px",color:"#fff",lineHeight:"28px",fontWeight:"600"},a=(0,Z._)((0,z._)({},r),{border:"1px solid rgba(255, 255, 255, 0.80)",padding:"4px 12px",backgroundColor:"rgba(0,0,0,0.4)",borderRadius:"100px"}),o=createDom("xg-el",t.replace(/\[([^\]]+)\]/g,function(e){var t=getEmojiUrl(e);return t?'<img src="'.concat(t,'" width="20" height="20">'):e}),"xgplayer-el");i.danmu.sendComment({id:"10000000-1000-4000-8000-100000000000".replace(/[018]/g,function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}),txt:t,style:(null==n?void 0:n.showBorder)?a:r,mode:"scroll",el:o,duration:8e3,prior:!!(null==n?void 0:n.prior)})}(0,g.bv)(function(){try{var e;m.value=!!(null===(e=document)||void 0===e?void 0:e.pictureInPictureElement)}catch(e){w.warn("检查画中画状态失败:",e)}N=getPageRequestStartTimestamp(),nE.remove(onPlayTimeout,null),nE.once(onPlayTimeout,null,1e4)}),(0,g.YP)(v,function(e){l("sdkLoadingChange",e)},{immediate:!0}),(0,g.Jd)(function(){var e;w.log("Live Player onBeforeUnmount"),m.value=!1,y.value=!1,nE.remove(exitPipTimeoutHandler,null),nE.remove(timeoutHandler,null),nE.remove(onPlayTimeout,null),nE.remove(onStartPlayTimeout,null),unBindPlayerEvent(),null==i||null===(e=i.destroy)||void 0===e||e.call(i),i=null,x.value&&M&&x.value.uninstall(M),x.value&&L&&x.value.uninstall(L)});return(0,g.YP)(k,(r=(0,W._)(function(e){return(0,q.Jh)(this,function(t){switch(t.label){case 0:if(!e)return[3,4];return v.value=!0,setStreamLoading(!1),[4,Promise.all([n.e("5980"),n.e("5216")]).then(n.bind(n,35742))];case 1:return a=t.sent(),[4,Promise.all([n.e("5980"),n.e("1865")]).then(n.bind(n,74451))];case 2:return o=t.sent(),[4,initPlayer()];case 3:t.sent(),t.label=4;case 4:return[2]}})}),function(e){return r.apply(this,arguments)}),{immediate:!0}),u({player:i,addDanmaku:addDanmaku,setPlayerNtpTime:setPlayerNtpTime}),function(e,t){return(0,g.wg)(),(0,g.iD)("div",{class:(0,g.C_)(["player-el",{"player-el-scaled":T.value}]),elementtiming:"note-cover",style:(0,g.j5)(s.value?{backgroundImage:"url(".concat(e.cover,")"),backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"contain",position:"relative"}:{position:"relative"}),onClick:handlePlayerClick},[t[2]||(t[2]=(0,g._)("div",{class:"dynamic-background"},[(0,g._)("canvas",{id:"video-canvas",style:{position:"absolute",width:"100%",height:"100%",filter:"blur(50px)"}}),(0,g._)("div",{class:"dynamic-background",style:{background:"rgba(0, 0, 0, 0.5)"}})],-1)),(0,g._)("div",{ref_key:"playerRef",ref:d,class:"player-ref-container"},null,512),p.value?((0,g.wg)(),(0,g.iD)("div",is,t[0]||(t[0]=[(0,g.uE)('<div class="live-loading-box" data-v-4f481e9b><svg class="live-loading-spinner" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none" data-v-4f481e9b><path d="M15.9993 5.09078C9.97442 5.09078 5.09026 9.975 5.09026 16C5.09026 22.025 9.97442 26.9092 15.9993 26.9092C22.0243 26.9092 26.9084 22.025 26.9084 16C26.9084 15.3306 27.4511 14.7879 28.1206 14.7879C28.79 14.7879 29.3327 15.3306 29.3327 16C29.3327 23.3639 23.3631 29.3335 15.9993 29.3335C8.63555 29.3335 2.66602 23.3639 2.66602 16C2.66602 8.63611 8.63555 2.6665 15.9993 2.6665C16.6688 2.6665 17.2115 3.2092 17.2115 3.87864C17.2115 4.54808 16.6688 5.09078 15.9993 5.09078Z" fill="white" fill-opacity="0.3" data-v-4f481e9b></path></svg><div class="live-loading-title" data-v-4f481e9b><svg class="live-loading-line" xmlns="http://www.w3.org/2000/svg" width="40" height="1" viewBox="0 0 40 1" fill="none" data-v-4f481e9b><path d="M0 0.5H40" stroke="white" stroke-opacity="0.16" data-v-4f481e9b></path></svg><span class="live-loading-text" data-v-4f481e9b>直播加载中</span><svg class="live-loading-line" xmlns="http://www.w3.org/2000/svg" width="40" height="1" viewBox="0 0 40 1" fill="none" data-v-4f481e9b><path d="M0 0.5H40" stroke="white" stroke-opacity="0.16" data-v-4f481e9b></path></svg></div></div>',1)]))):(0,g.kq)("",!0),I.value?((0,g.wg)(),(0,g.iD)("div",ic,[_.value?((0,g.wg)(),(0,g.iD)("div",id,[t[1]||(t[1]=(0,g._)("span",{class:"pip-tip-text"},"正在「小窗」模式下播放",-1)),(0,g._)("button",{class:"pip-exit-btn",onClick:handleExitPip}," 返回大窗播放 ")])):(0,g.kq)("",!0)])):(0,g.kq)("",!0),(0,g.WI)(e.$slots,"linkmic"),(0,g.WI)(e.$slots,"anchorInfo"),(0,g.WI)(e.$slots,"danmaku")],6)}}});let ip=(0,x.default)(iv,[["__scopeId","data-v-4f481e9b"]]);var ih=n(23041),ig=(0,S.j)("reportTracker");function trackReportPageShow(e){var t={event_name:"live_report_page_show",report_type:e.report_type,track_id:e.track_id,live_type:e.live_type,live_source:e.live_source,report_source:e.report_source,report_target_id:e.report_target_id,note_id:e.note_id||""};ig.log("[举报埋点] 页面曝光:",t),window.eaglet&&window.eaglet.push({measurement_name:"live_report_page_show",measurement_data:t})}function trackReportTypeClick(e,t,n){var r={event_name:"live_report_type_click",report_type:e.report_type,track_id:e.track_id,live_type:e.live_type,live_source:e.live_source,report_source:e.report_source,report_target_id:e.report_target_id,note_id:e.note_id||"",selected_type_value:t,selected_type_label:n};ig.log("[举报埋点] 点击一级选项:",r),window.eaglet&&window.eaglet.push({measurement_name:"live_report_type_click",measurement_data:r})}function trackReportSubmitClick(e,t,n){var r={event_name:"live_report_submit_click",report_type:e.report_type,track_id:e.track_id,live_type:e.live_type,live_source:e.live_source,report_source:e.report_source,report_target_id:e.report_target_id,note_id:e.note_id||"",selected_type_value:t,selected_type_label:n};ig.log("[举报埋点] 点击提交按钮:",r),window.eaglet&&window.eaglet.push({measurement_name:"live_report_submit_click",measurement_data:r})}function trackReportSubmitSuccess(e,t,n){var r={event_name:"live_report_submit_success",report_type:e.report_type,track_id:e.track_id,live_type:e.live_type,live_source:e.live_source,report_source:e.report_source,report_target_id:e.report_target_id,note_id:e.note_id||"",selected_type_value:t,selected_type_label:n};ig.log("[举报埋点] 提交成功:",r),window.eaglet&&window.eaglet.push({measurement_name:"live_report_submit_success",measurement_data:r})}var im={class:"report-modal"},iy={class:"report-header"},iI={class:"report-title"},i_={class:"form-section"},iw={class:"report-types"},ik=["onClick"],iS={class:"section-title"},ib={class:"description-wrapper"},iC=["placeholder"],iM={key:0,class:"form-section"},iA={class:"image-evidence-header"},iL={class:"section-title image-evidence-title"},ix={class:"optional"},iT={class:"image-upload-container"},iD={class:"report-footer"},iN=(0,g.aZ)({__name:"ReportDialog",setup:function(e){var t=nH(),n=(0,g.iH)(),r=(0,g.iH)(),i=(0,g.iH)(),a=(0,S.j)("LiveReport"),o=(0,g.Fl)(function(){return{report_type:"goods"===t.liveType?"live_goods":"live_content",track_id:t.trackId,live_type:t.liveType,live_source:t.liveSource,report_source:h.f2.SOURCE,report_target_id:t.reportTargetRoomId,note_id:t.noteId||""}});(0,g.YP)(function(){return t.reportModalVisible},function(e){e&&trackReportPageShow(o.value)});var u=(0,g.Fl)(function(){return!!t.reportFormData.reportType}),l=(0,g.Fl)(function(){return t.reportFormData.description.length}),s=(0,g.Fl)(function(){return l.value>200}),c=(0,g.Fl)(function(){return!!t.reportFormData.reportType&&!s.value});function handleSelectType(e){t.reportFormData.reportType=e;var r=t.reportTypes.find(function(t){return t.value===e});r&&trackReportTypeClick(o.value,r.value,r.label),(0,g.Y3)(function(){nE.once(function(){n.value&&n.value.scrollTo({top:n.value.scrollHeight,behavior:"smooth"})},null,350)})}function refreshImageList(){t.reportFormData.imageList=(0,ei._)(t.reportFormData.imageList)}function uploadReportImages(e){return _uploadReportImages.apply(this,arguments)}function _uploadReportImages(){return(_uploadReportImages=(0,W._)(function(e){var t;return(0,q.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,ih.ZP)({bizName:"risk",scene:"plead"})];case 1:var r;return t=n.sent().uploadImage,[4,Promise.all((Array.isArray(e)?e:[e]).map((r=(0,W._)(function(e){var n,r,i;return(0,q.Jh)(this,function(o){switch(o.label){case 0:if(e.url||!e.content)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,t(e.content,!0)];case 2:return n=o.sent(),a.log("[举报图片上传] 上传成功",n),r=(null==n?void 0:n.previewUrl)||"",e.url=r,e.status="success",e.fileId=(null==n?void 0:n.fileId)||"",e.bizName=(null==n?void 0:n.bizName)||"",e.scene=(null==n?void 0:n.scene)||"",[3,4];case 3:return i=o.sent(),a.warn("[举报图片上传] 上传失败",i),e.status="failed",e.message="上传失败",[3,4];case 4:return[2]}})}),function(e){return r.apply(this,arguments)})))];case 2:return n.sent(),refreshImageList(),[2]}})})).apply(this,arguments)}function handleAfterRead(e){}function handleImageOversize(){}function handleOverUploaded(){}function handleModalToggle(e){!e&&handleClose()}function handleClose(){t.closeReportModal()}function handleSubmit(){return _handleSubmit.apply(this,arguments)}function _handleSubmit(){return(_handleSubmit=(0,W._)(function(){var e,n;return(0,q.Jh)(this,function(r){switch(r.label){case 0:if(!c.value||t.submitting)return[2];if(!(e=t.reportTypes.find(function(e){return e.value===t.reportFormData.reportType})))return a.warn("[举报埋点] 未找到选中的举报类型"),[2];trackReportSubmitClick(o.value,e.value,e.label),r.label=1;case 1:if(r.trys.push([1,5,,6]),!(t.reportFormData.imageList.length>0))return[3,3];return[4,uploadReportImages(t.reportFormData.imageList)];case 2:if(r.sent(),refreshImageList(),t.reportFormData.imageList.filter(function(e){return"failed"===e.status}).length>0)return[2];r.label=3;case 3:return[4,t.submitReport()];case 4:return r.sent()&&(trackReportSubmitSuccess(o.value,e.value,e.label),(0,eu.Am)("提交成功",{container:"#live-layout",position:"center"}),nE.once(function(){handleClose()},null,100)),[3,6];case 5:return n=r.sent(),a.warn("[举报功能] 提交异常:",n),[3,6];case 6:return[2]}})})).apply(this,arguments)}return function(e,a){return(0,g.wg)(),(0,g.j4)(g.lR,{to:"#live-layout"},[(0,g.Wm)((0,g.SU)(eu.ce),{open:(0,g.SU)(t).reportModalVisible,"disable-mask-close":!1,"onUpdate:open":handleModalToggle},{default:(0,g.w5)(function(){return[(0,g._)("div",im,[(0,g._)("div",iy,[(0,g._)("span",iI,(0,g.zw)((0,g.SU)(t).reportTitle),1),(0,g._)("div",{class:"close-btn",onClick:handleClose},[(0,g.Wm)((0,g.SU)(eu.i8),{icon:"close",size:"20"})])]),(0,g._)("div",{ref_key:"contentRef",ref:n,class:"report-content"},[(0,g._)("div",i_,[a[2]||(a[2]=(0,g._)("div",{class:"section-title"},[(0,g.Uk)(" 选择举报原因 "),(0,g._)("span",{class:"required"},"*")],-1)),(0,g._)("div",iw,[((0,g.wg)(!0),(0,g.iD)(g.HY,null,(0,g.Ko)((0,g.SU)(t).reportTypes,function(e){return(0,g.wg)(),(0,g.iD)("div",{key:e.value,class:(0,g.C_)(["type-tag",{active:(0,g.SU)(t).reportFormData.reportType===e.value}]),onClick:function(t){return handleSelectType(e.value)}},(0,g.zw)(e.label),11,ik)}),128))])]),(0,g.Wm)(g.uT,{name:"expand"},{default:(0,g.w5)(function(){return[u.value?((0,g.wg)(),(0,g.iD)("div",{key:0,ref_key:"descriptionSectionRef",ref:i,class:"form-section"},[(0,g._)("div",iS,(0,g.zw)((0,g.SU)(t).descriptionTitle),1),(0,g._)("div",ib,[(0,g.wy)((0,g._)("textarea",{ref_key:"textareaRef",ref:r,"onUpdate:modelValue":a[0]||(a[0]=function(e){return(0,g.SU)(t).reportFormData.description=e}),class:(0,g.C_)(["description-input",{"over-limit":s.value}]),placeholder:(0,g.SU)(t).descriptionPlaceholder},null,10,iC),[[g.nr,(0,g.SU)(t).reportFormData.description]]),(0,g._)("div",{class:(0,g.C_)(["char-count",{"over-limit":s.value}])},(0,g.zw)(l.value)+"/200 ",3)])],512)):(0,g.kq)("",!0)]}),_:1}),(0,g.Wm)(g.uT,{name:"expand"},{default:(0,g.w5)(function(){return[u.value?((0,g.wg)(),(0,g.iD)("div",iM,[(0,g._)("div",iA,[(0,g._)("div",iL,(0,g.zw)((0,g.SU)(t).imageTitle),1),(0,g._)("span",ix,"最多上传"+(0,g.zw)((0,g.SU)(t).maxImageCount)+"张",1)]),(0,g._)("div",iT,[(0,g.Wm)((0,g.SU)(eu.Qm),{modelValue:(0,g.SU)(t).reportFormData.imageList,"onUpdate:modelValue":a[1]||(a[1]=function(e){return(0,g.SU)(t).reportFormData.imageList=e}),"max-count":(0,g.SU)(t).maxImageCount,multiple:!0,"max-size":5e6,"max-num-in-row":4,accept:"image/jpeg,image/jpg,image/png","after-read":handleAfterRead,"show-desc":!1,onOversize:handleImageOversize,onOverUploaded:handleOverUploaded},{icon:(0,g.w5)(function(){return a[3]||(a[3]=[(0,g._)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,g._)("path",{d:"M10 4V16M4 10H16",stroke:"#868687","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])}),_:1},8,["modelValue","max-count"])])])):(0,g.kq)("",!0)]}),_:1})],512),(0,g._)("div",iD,[(0,g._)("div",{class:(0,g.C_)(["submit-btn",{disabled:!c.value||(0,g.SU)(t).submitting}]),onClick:handleSubmit}," 提交 ",2)])])]}),_:1},8,["open"])])}}});let iE=(0,x.default)(iN,[["__scopeId","data-v-002785d2"]]);var iR={class:"room-sdk-skeleton"},iU=(0,g.aZ)({__name:"RoomSdkSkeleton",setup:function(e){return function(e,t){return(0,g.wg)(),(0,g.iD)("div",iR,t[0]||(t[0]=[(0,g.uE)('<div class="sdk-skeleton-player" data-v-377845b6><div class="sdk-skeleton-topbar" data-v-377845b6><div class="skeleton-block skeleton-back" data-v-377845b6></div><div class="sdk-skeleton-anchor" data-v-377845b6><div class="skeleton-block skeleton-avatar" data-v-377845b6></div><div class="sdk-skeleton-anchor-text" data-v-377845b6><div class="skeleton-block skeleton-name" data-v-377845b6></div><div class="skeleton-block skeleton-sub" data-v-377845b6></div></div><div class="skeleton-block skeleton-follow" data-v-377845b6></div></div></div><div class="sdk-skeleton-center" data-v-377845b6><div class="sdk-loading-box" data-v-377845b6><svg class="sdk-loading-spinner" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none" data-v-377845b6><path d="M15.9993 5.09078C9.97442 5.09078 5.09026 9.975 5.09026 16C5.09026 22.025 9.97442 26.9092 15.9993 26.9092C22.0243 26.9092 26.9084 22.025 26.9084 16C26.9084 15.3306 27.4511 14.7879 28.1206 14.7879C28.79 14.7879 29.3327 15.3306 29.3327 16C29.3327 23.3639 23.3631 29.3335 15.9993 29.3335C8.63555 29.3335 2.66602 23.3639 2.66602 16C2.66602 8.63611 8.63555 2.6665 15.9993 2.6665C16.6688 2.6665 17.2115 3.2092 17.2115 3.87864C17.2115 4.54808 16.6688 5.09078 15.9993 5.09078Z" fill="white" fill-opacity="0.3" data-v-377845b6></path></svg><div class="sdk-loading-title" data-v-377845b6><span class="sdk-loading-line" data-v-377845b6></span><span class="sdk-loading-text" data-v-377845b6>直播加载中</span><span class="sdk-loading-line" data-v-377845b6></span></div></div></div></div><div class="sdk-skeleton-comment" data-v-377845b6><div class="skeleton-block skeleton-comment-panel" data-v-377845b6></div></div>',2)]))}}});let iP=(0,x.default)(iU,[["__scopeId","data-v-377845b6"]]);var iF=(0,g.aZ)({__name:"Index",props:{userInfo:{},appSettings:{},loggedIn:{type:Boolean},isLiveMode:{type:Boolean}},emits:["livePlayerNoLogin","familyAuthFailed"],setup:function(e,t){var n,r,i,a=t.emit,o=(0,S.j)("RoomIndex"),u=(0,K.yj)(),l=(0,K.tv)(),s=nw(),c=nR(),d=nF(),v=nH(),f=nm(),p=(0,g.iH)(),y=(0,g.iH)(),I=(0,g.iH)(),_=(0,g.iH)(!0),w=(0,g.iH)(null),b=(0,g.iH)(!1),M=(0,g.iH)(!1),L=(0,g.iH)(""),x=(0,g.iH)(!1),T=(0,g.iH)(),D=(0,g.iH)(!1),N=(0,g.iH)({position:"fixed",left:"0px",top:"0px",zIndex:"10000"}),removeImListener=function(){},offDissmissListener=function(){},offKickOutListener=function(){},offKickRoomOutListener=function(){},E=-1,R=-1,P=-1,F=!1;function reportHeartbeat(e){o.log("reportHeartbeat：".concat(e));var t=Date.now();(0,k.zx)(93288,(0,Z._)((0,z._)({},s.trackData),{lastTimestamp:String(P>0?P:t),trackingReason:e})),P=t}function handleSdkLoadingChange(e){b.value=e}function handlePlayerPause(){o.log("Player paused")}function handlePlayerPlaying(){var e;if(!F&&(reportHeartbeat("pull_flow_success"),F=!0),o.log("Player playing"),!1!==_.value)null===(e=p.value)||void 0===e||e.playDanmaku()}function onPlayBtnClick(e){if(e)(0,k.zx)(93017,(0,Z._)((0,z._)({},s.trackData),{channelTabType:"play"}));else{var t;if(handlePlayerPause(),(0,k.zx)(93017,(0,Z._)((0,z._)({},s.trackData),{channelTabType:"pause"})),!1===_.value)return;null===(t=p.value)||void 0===t||t.pauseDanmaku()}}function handlePlayerReload(){(0,k.zx)(93018,(0,z._)({},s.trackData)),o.log("Player reload")}function handleGearChange(e){(0,k.zx)(93019,(0,Z._)((0,z._)({},s.trackData),{channelTabName:e})),o.log("Gear change:",e)}function handleVolumeClick(){(0,k.zx)(93021,(0,z._)({},s.trackData)),o.log("Volume click")}function handleDanmakuSwitchClick(e){(0,k.zx)(93020,(0,Z._)((0,z._)({},s.trackData),{channelTabType:e?"turn_on":"turn_off"})),o.log("Danmaku switch click:",e?"turn_on":"turn_off")}function handlePipClick(){(0,k.zx)(93022,(0,z._)({},s.trackData)),o.log("Pip click")}function handleShareClick(){(0,k.zx)(93024,(0,z._)({},s.trackData)),o.log("Share click")}function handleShareClickSuccess(){(0,k.zx)(94904,(0,z._)({},s.trackData)),o.log("Share click success")}function handleCommentInputClick(){(0,k.zx)(93025,(0,z._)({},s.trackData)),o.log("Comment input click")}function handleCommentSendSuccess(){(0,k.zx)(93026,(0,z._)({},s.trackData)),o.log("Comment send success")}"undefined"!=typeof window&&nE.initWorker();var j=(0,g.iH)(!1),O=(0,g.iH)(!1),H=(0,g.iH)(!1),V=(0,g.iH)(0),Y=(0,g.iH)([]),G=(0,g.iH)(0),Q=(0,g.iH)(!1),X=(0,g.Fl)(function(){var e,t,n,r,i;return(o.log("route.params:",u.params),(null===(e=u.params)||void 0===e?void 0:e.roomId)&&(null===(t=u.params)||void 0===t?void 0:t.roomId).startsWith("dynpath"))?u.params.antiBlockAlias:(null===(n=u.params)||void 0===n?void 0:n.antiBlockAlias)&&(null===(r=u.params)||void 0===r?void 0:r.antiBlockAlias).startsWith("dynpath")?u.params.roomId:null===(i=u.params)||void 0===i?void 0:i.roomId}),$=(0,J.Jk)(d),ee=$.emojis,et=$.redmojiMap,en=(0,J.Jk)(s),er=en.roomData,ei=en.mediaInfo,ea=en.roomStatus,eo=en.pageStatus,el=en.errorMessage,es=en.hostInfo,ec=(0,J.Jk)(c),ed=ec.linkmicUsers,ev=ec.containerSize,ef=ec.contentType,ep=ec.layoutType,eh=ec.audioChatLayoutType,eg=ec.backgroundUrl,em=getOrCreateIM(),ey=(0,g.qj)(em),eI=(0,g.Fl)(function(){return!(ea.value<3)&&"error"!==eo.value&&"kickOut"!==eo.value&&"kickOutRoom"!==eo.value&&"joinRoomError"!==eo.value&&!0}),e_=(0,g.Fl)(function(){return es&&2===ea.value&&!Q.value&&"kickOut"!==eo.value&&"kickOutRoom"!==eo.value&&"joinRoomError"!==eo.value&&"error"!==eo.value&&"liveError"!==eo.value&&"liveEnded"!==eo.value});function handleOnEnded(){s.setPageStatus("liveEnded")}function handleOnError(){s.setPageStatus("liveError")}var ew=(0,g.Fl)(function(){var t,n,r,i=null!==(r=null==ey?void 0:null===(t=ey.userInfo)||void 0===t?void 0:t.role)&&void 0!==r?r:0;return adaptLinkmicUsers(ed.value,null===(n=e.userInfo)||void 0===n?void 0:n.userId,i)}),ek=(0,g.Fl)(function(){return adaptContainerSize(ev.value)}),eS=(0,g.Fl)(function(){return adaptContentType(ef.value)}),eb=(0,g.Fl)(function(){return adaptLayoutType(ep.value)}),eC=(0,g.Fl)(function(){return eh.value}),eM=(0,g.Fl)(function(){return eS.value===e4.AudioChat&&eC.value===e8.Mixed}),eA=(0,g.Fl)(function(){return L.value?ed.value.find(function(e){return e.userId===L.value}):null}),eL=(0,g.Fl)(function(){var t,n=(null===(t=e.userInfo)||void 0===t?void 0:t.userId)||"";return n&&L.value===n}),ex=(0,g.Fl)(function(){if(x.value||!s.isAnonymousRoom)return!1;var t,n,r,i=(null===(t=e.userInfo)||void 0===t?void 0:t.userId)||"";if(i&&L.value===i)return!1;var a=null!==(r=null==ey?void 0:null===(n=ey.userInfo)||void 0===n?void 0:n.role)&&void 0!==r?r:0;return 3!==a&&1!==a&&!0}),eT=(0,g.Fl)(function(){var e;return(null===(e=eA.value)||void 0===e?void 0:e.avatar)||""}),eD=(0,g.Fl)(function(){if(!eA.value)return"匿名用户";var t,n,r,i=eA.value.nickname||"";if(!s.isAnonymousRoom)return i||"无昵称";var a=(null===(t=e.userInfo)||void 0===t?void 0:t.userId)||"";return a&&L.value===a||3===(null!==(r=null==ey?void 0:null===(n=ey.userInfo)||void 0===n?void 0:n.role)&&void 0!==r?r:0)||x.value?i||"无昵称":i?"".concat(i[0],"***"):"匿名用户"});function handlePictureInPictureChange(e){H.value=e,o.log("[Index.vue] 画中画状态变化:",e?"进入画中画":"退出画中画"),reportHeartbeat("change_form")}function handleContainerSizeChange(e){o.log("[Index.vue] LinkmicLayout容器尺寸变化:",e),o.log("[Index.vue] 当前linkmicStore容器尺寸:",c.containerSize),c.updateContainerSize(e),o.log("[Index.vue] 更新后linkmicStore容器尺寸:",c.containerSize)}var eN=(0,g.Fl)(function(){return b.value&&"error"!==eo.value&&2===ea.value&&!O.value&&!Q.value});function receiveMessageHandle(t){if(o.log("im-sdk message received in Live Stream Player:",t),t.data&&t.data.type===nf.Refresh){handleUpdateRoomInfo(t.data);return}if((null==t?void 0:null===(i=t.data)||void 0===i?void 0:null===(r=i.profile)||void 0===r?void 0:r.user_id)!==(null===(a=e.userInfo)||void 0===a?void 0:a.userId)){if((null==t?void 0:null===(u=t.data)||void 0===u?void 0:u.type)===nf.TopMessageChange){o.log("Received top_message_change message:",t),s.setTopMsg(null==t?void 0:null===(f=t.data)||void 0===f?void 0:f.msg);return}if((null==t?void 0:null===(l=t.data)||void 0===l?void 0:l.type)===nf.RoomHideViewers){o.log("Received room_hide_viewers message:",t),s.setIsHideViewers(!!(null==t?void 0:null===(p=t.data)||void 0===p?void 0:p.hide_viewers));return}if((null==t?void 0:null===(c=t.data)||void 0===c?void 0:c.type)===nf.ChangeRole){var n,r,i,a,u,l,c,d,v,f,p,h,g=null==t?void 0:null===(h=t.data)||void 0===h?void 0:h.role;void 0!==g&&I.value&&I.value.updateCurrentUserRole(g);return}if((null==t?void 0:null===(d=t.data)||void 0===d?void 0:d.type)===nf.Kickout){imKickOutHandle();return}(null==t?void 0:null===(v=t.data)||void 0===v?void 0:v.type)===nf.Text&&sendDanmaku(null==t?void 0:null===(n=t.data)||void 0===n?void 0:n.desc)}}function handleUpdateRoomInfo(e){var t,n;e&&(s.setDisplayPraiseCount(null===(t=e.room_data)||void 0===t?void 0:t.praise_count),s.setDisplayMemberCount(null===(n=e.room_data)||void 0===n?void 0:n.member_count))}function sendDanmaku(e,t){var n,r,i;if(e){if("css3"===localStorage.getItem("danmuRenderType")){null===(r=y.value)||void 0===r||r.addDanmaku(e,t);return}if(w.value){null===(i=y.value)||void 0===i||i.addDanmaku(e,t);return}null===(n=p.value)||void 0===n||n.addDanmaku(e,t)}}function handleDanmuInitError(e){w.value=e}function handleShowDanmaku(e){_.value=e}function handleSendCommentNoLogin(){handleActionNoLogin(h.C9.COMMENT)}function handleSendReportNoLogin(){handleActionNoLogin(h.C9.REPORT)}function handleSendFollowNoLogin(){handleActionNoLogin(h.C9.FOLLOW)}function handleLiveFinishNoLogin(){handleActionNoLogin(h.C9.FOLLOW)}function handleActionNoLogin(e){a("livePlayerNoLogin",e)}function hideLinkmicCard(){!D.value&&(M.value=!1)}function handleGameLinkmicMainClick(e){var t=e.detail;handleLinkmicUserClick(t.userId,t.isHost,{clientX:t.clientX,clientY:t.clientY})}function handleLinkmicUserClick(e,t,n){if(L.value===e&&M.value){M.value=!1;return}M.value=!1,!t&&f.clearCommentUserInfo(),L.value=e,x.value=t,updateLinkmicCardPosition(n),M.value=!0}function updateLinkmicCardPosition(e){return _updateLinkmicCardPosition.apply(this,arguments)}function _updateLinkmicCardPosition(){return(_updateLinkmicCardPosition=(0,W._)(function(e){var t,n,r,i,a,o;return(0,q.Jh)(this,function(u){switch(u.label){case 0:return[4,(0,g.Y3)()];case 1:u.sent();return t=e.clientX,n=e.clientY,r=window.innerWidth,i=window.innerHeight,a=t+20,o=n-100,a+360>r-8?(a=t-360-20)<8&&(a=8):a<8&&(a=8),o<8?o=8:o+200>i-8&&(o=i-200-8),N.value={position:"fixed",left:"".concat(a,"px"),top:"".concat(o,"px"),zIndex:"10000"},[2]}})})).apply(this,arguments)}function handleLinkmicCardEnter(){D.value=!0,nE.remove(hideLinkmicCard,null)}function handleLinkmicCardLeave(){D.value=!1,nE.once(hideLinkmicCard,null,300)}function handleLinkmicCardClickOutside(e){if(!M.value)return;var t=e.target;if(!(T.value&&T.value.contains(t)))nE.once(hideLinkmicCard,null,100)}function handleFollowLinkmicUser(e){return _handleFollowLinkmicUser.apply(this,arguments)}function _handleFollowLinkmicUser(){return(_handleFollowLinkmicUser=(0,W._)(function(t){var n,r,i,a,u,l;return(0,q.Jh)(this,function(s){switch(s.label){case 0:if(o.log("[关注] handleFollowLinkmicUser 被调用, userId:",t),o.log("[关注] 当前登录状态:",e.loggedIn),o.log("[关注] 当前连麦用户列表:",c.linkmicUsers),!e.loggedIn)return o.warn("[关注] 用户未登录，唤起登录框"),handleActionNoLogin(h.C9.FOLLOW),[2];if(!t||t.includes("null"))return o.warn("[关注] 无效的用户ID:",t),(0,eu.Am)("无效的用户ID",{timeout:1e3,position:"center",container:".main-player"}),[2];s.label=1;case 1:return s.trys.push([1,3,,4]),o.log("[关注] 开始关注连麦用户:",t),[4,toFollow(t,X.value)];case 2:return n=s.sent(),o.log("[关注] 关注接口返回:",n),n?(o.log("[关注] 关注成功:",t,n),c.updateUserFollowStatus(t,!0),M.value&&L.value===t&&f.getAnchorInfo(t,X.value,x.value)):(o.warn("[关注] 关注失败，返回为空:",t),(0,eu.Am)("关注失败，请稍后重试",{timeout:1e3,position:"center",container:".main-player"})),[3,4];case 3:return r=s.sent(),o.warn("[关注] 关注连麦用户失败:",r),o.warn("[关注] 错误详情:",{message:null==r?void 0:r.message,response:null==r?void 0:r.response,data:null==r?void 0:null===(i=r.response)||void 0===i?void 0:i.data}),l=(null==r?void 0:null===(u=r.response)||void 0===u?void 0:null===(a=u.data)||void 0===a?void 0:a.msg)||(null==r?void 0:r.message)||"关注失败，请稍后重试",(0,eu.Am)(l,{timeout:1e3,position:"center",container:".main-player"}),[3,4];case 4:return[2]}})})).apply(this,arguments)}function handleLinkmicUserReport(t){if(o.log("[举报] handleLinkmicUserReport 被调用, userId:",t),!e.loggedIn){o.warn("[举报] 用户未登录，唤起登录框"),handleActionNoLogin(h.C9.REPORT);return}if(!t||t.includes("null")){o.warn("[举报] 无效的用户ID:",t);return}var n,r=s.hasGoods?"goods":u.query.liveType||u.query.live_type||"Interaction",i=u.query.source||u.query.live_source||"live_room",a=u.query.trackId||u.query.track_id||"",l=u.query.noteId||"",c=(null===(n=e.userInfo)||void 0===n?void 0:n.userId)||"";v.openReportModal({userId:t,roomId:X.value,liveType:r,liveSource:i,trackId:a,noteId:l,currentUserId:c})}function onLinkMicSeiInfo(e){if(e.app_data){var t=JSON.parse(e.app_data);if(t){var n=t.sequence,r=t.media_status.map(function(e){return e.uid});c.handleSEIData(e,t,c.getLinkmicRelationsRes,{roomId:X.value,userIds:r,sequence:n})}}o.log("Received Link Mic SEI Info in Room Index:",e)}(0,g.YP)(M,function(e){e?setTimeout(function(){document.addEventListener("click",handleLinkmicCardClickOutside)},0):document.removeEventListener("click",handleLinkmicCardClickOutside)});function handleRetry(){var t;(0,k.zx)(93018,(0,z._)({},s.trackData)),el.value="",s.fetchRoomInfo(X.value,(null===(t=e.userInfo)||void 0===t?void 0:t.userId)||"")}function handleRestore(){return _handleRestore.apply(this,arguments)}function _handleRestore(){return(_handleRestore=(0,W._)(function(){var t,n;return(0,q.Jh)(this,function(r){switch(r.label){case 0:if(el.value="",s.fetchRoomInfo(X.value,(null===(t=e.userInfo)||void 0===t?void 0:t.userId)||""),2!==ea.value)return[2];if("kickOut"!==eo.value)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,ey.reLogin()];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o.warn("用户重新尝试登录IM失败:",n),[3,4];case 4:return[3,6];case 5:("kickOutRoom"===eo.value||"joinRoomError"===eo.value)&&ey.joinRoom(X.value),r.label=6;case 6:return[2]}})})).apply(this,arguments)}function handleRetryPlayer(){var t;el.value="",s.fetchRoomInfo(X.value,(null===(t=e.userInfo)||void 0===t?void 0:t.userId)||"")}function dismissHandle(){var e,t;o.log("直播间被解散，执行退房操作"),s.setRoomStatus(3),null===(t=y.value)||void 0===t||null===(e=t.player)||void 0===e||e.destroy()}function imKickOutHandle(){o.warn("imKickOutHandle, 用户被踢下线，执行退房操作"),(0,eu.Am)("您已被踢出该直播间",{timeout:2e3,position:"center",container:".main-player"}),hideLinkmicCardOnKickOut(),nE.once(handleBack,null,2e3)}function kickOutHandle(){o.warn("kickOutHandle,用户被踢下线，执行退房操作"),(0,eu.Am)("您已被踢下线",{timeout:2e3,position:"center",container:".main-player"}),hideLinkmicCardOnKickOut(),s.setPageStatus("kickOut")}function kickOutRoomHandle(){o.warn("kickOutRoomHandle, 用户被踢出直播间，执行退房操作"),(0,eu.Am)("您已被踢出直播间",{timeout:2e3,position:"center",container:".main-player"}),hideLinkmicCardOnKickOut(),s.setPageStatus("kickOutRoom")}function onJoinRoomErrorHandle(e){o.warn("Join room error:",e),(0,eu.Am)("加入直播间失败",{timeout:2e3,position:"center",container:".main-player"}),hideLinkmicCardOnKickOut(),s.setPageStatus("joinRoomError")}function hideLinkmicCardOnKickOut(){M.value&&(o.log("[资料卡] 直播间被踢出，隐藏资料卡"),M.value=!1,nE.remove(hideLinkmicCard,null),D.value=!1)}function addImEvent(){o.log("添加im-sdk事件监听器"),removeImListener=ey.onMessageReceived(receiveMessageHandle,{c2c:!0,group:!0,tag:"直播间消息"}),offDissmissListener=ey.onDismiss(dismissHandle,"直播间被解散"),offKickOutListener=ey.onKickedOut(kickOutHandle,"用户被踢下线"),offKickRoomOutListener=ey.onKickedRoomOut(kickOutRoomHandle,"room用户被踢下线"),ey.on(ne.JoinRoomError,onJoinRoomErrorHandle)}function removeImEvent(){o.log("移除im-sdk事件监听器"),removeImListener(),offDissmissListener(),offKickOutListener(),offKickRoomOutListener(),ey.off(ne.JoinRoomError,onJoinRoomErrorHandle)}function setTrackData(){var t,n,r=u.query.live_type||u.query.live_type||"",i=u.query.source||u.query.live_source||"live_room",a=u.query.track_id||u.query.track_id||"",o=u.query.note_id||u.query.note_id||"",l=u.query.note_track_id||"",c=u.query.track_url||u.query.track_url||"",d=u.query.preSource||u.query.pre_source||"";s.setLiveSourceAndType(i,r,a,o,c,d,l,null===(t=e.userInfo)||void 0===t?void 0:t.userId,X.value);var v=getSessions((null===(n=e.userInfo)||void 0===n?void 0:n.userId)||"",X.value),f=v.liveSessionId,p=v.viewSessionId;s.setSessionIds(p,f)}o.log("组件挂载，开始初始化房间信息",X.value,(null===(r=e.userInfo)||void 0===r?void 0:r.userId)||""),s.fetchRoomInfo(X.value,(null===(i=e.userInfo)||void 0===i?void 0:i.userId)||"").catch(function(t){var n;o.warn("初始化房间信息失败:",t),s.fetchRoomInfo(X.value,(null===(n=e.userInfo)||void 0===n?void 0:n.userId)||"").catch(function(e){o.warn("重试初始化房间信息失败:",e)})}),(0,g.YP)(function(){return e.loggedIn},function(e,t){e&&Q.value&&(o.log("[家属鉴权] 用户已登录，重置家属鉴权失败标识"),Q.value=!1),e&&!t&&(reportHeartbeat("user_login"),j.value=!1,o.log("重置 IM 初始化标志"))});var eE=(0,g.iH)(!1);function handleFullscreenChange(e){O.value=e,(0,k.zx)(93023,(0,Z._)((0,z._)({},s.trackData),{channelTabType:e?"full_screen":"exit_full_screen"})),o.log("Fullscreen click:",e?"full_screen":"exit_full_screen")}function onCheckTimer(){return _onCheckTimer.apply(this,arguments)}function _onCheckTimer(){return(_onCheckTimer=(0,W._)(function(){var e,t,n,r,i,a;return(0,q.Jh)(this,function(u){switch(u.label){case 0:if(t=(e=nC.now())-E,-1!==E&&t>=6e4&&(o.log("Room Index 定时器心跳上报",{now:e,delta:t}),reportHeartbeat("time_interval"),E=e),!(-1!==R&&e-R>=5e3))return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,ey.syncTimeStamp()];case 2:return(n=u.sent())&&n.data&&n.data.time&&(i=n.data.time,(null===(r=y.value)||void 0===r?void 0:r.setPlayerNtpTime)&&y.value.setPlayerNtpTime(i)),[3,4];case 3:return a=u.sent(),o.warn("获取ntp时间失败",a),[3,4];case 4:R=e,u.label=5;case 5:return[2]}})})).apply(this,arguments)}(0,g.YP)(function(){return e.userInfo},function(e){(null==e?void 0:e.userId)&&!eE.value&&(setTrackData(),eE.value=!0)},{immediate:!0}),(0,g.YP)(function(){return[e.userInfo,ea.value]},(n=(0,W._)(function(t){var n,r,i,l,c,d,v,f,p,h,g,m,I,_,w,k,S,b,M,L,x;return(0,q.Jh)(this,function(T){switch(T.label){case 0:if(r=(n=(0,U._)(t,2))[0],i=n[1],o.log("initIm roomStatus",i),"number"!=typeof i||-1===i||i>=3)return"number"==typeof i&&i>=3&&(null===(c=y.value)||void 0===c||null===(l=c.player)||void 0===l||l.destroy()),[2];if(!(!j.value&&r&&r.userId&&"undefined"!=typeof window))return[3,5];!ey.isReuse&&(v=X.value||(null===(d=u.params)||void 0===d?void 0:d.roomId),o.log("initIm roomId=".concat(v)),useInitIM({userId:null!==(f=r.userId)&&void 0!==f?f:"",nickname:null!==(p=r.nickname)&&void 0!==p?p:"",sid:null!==(h=r.sid)&&void 0!==h?h:"",avatar:null!==(g=r.imageb)&&void 0!==g?g:"",roomId:v}),addImEvent()),j.value=!0,T.label=1;case 1:return T.trys.push([1,3,,4]),[4,s.postJoinRoomInfo(X.value||(null===(I=u.params)||void 0===I?void 0:I.roomId),(null===(_=e.userInfo)||void 0===_?void 0:_.userId)||"")];case 2:return m=T.sent(),[3,4];case 3:if(b=(null==(w=T.sent())?void 0:w.message)||"进房失败，请稍后再试",L="-1200013"===String(M=(null==w?void 0:w.code)||(null==w?void 0:null===(S=w.response)||void 0===S?void 0:null===(k=S.data)||void 0===k?void 0:k.code)),x="-9866"===String(M),L){if(o.warn("[家属鉴权] 家属专属直播间鉴权失败",{errorMsg:b,errorCode:M,loggedIn:e.loggedIn}),!e.loggedIn)return o.log("[家属鉴权] 用户未登录，触发登录弹窗，隐藏播放器"),Q.value=!0,s.setPageStatus("success"),a("livePlayerNoLogin","isFamily"),j.value=!1,[2];return o.warn("[家属鉴权] 用户已登录但非家属身份，踢出直播间"),(0,eu.Am)(b,{timeout:2e3,position:"center",container:".main-player"}),a("familyAuthFailed",{errorMsg:b,errorCode:M}),nE.once(handleBack,null,1500),[2]}if(x)return o.warn("进入本人直播间 进房失败",{error:w,errorMsg:b}),s.setPageStatus("ownerRoomError"),el.value=b,[2];else return o.warn("[家属鉴权] 进房失败",{error:w,errorMsg:b}),(0,eu.Am)(b||"进房失败，请稍后再试",{timeout:2e3,position:"center",container:".main-player"}),s.setPageStatus("error"),el.value=b,nE.once(handleBack,null,1500),[2];case 4:m?(G.value=Date.now(),s.getComments(X.value).then(function(){Y.value=s.comments,o.log("join_comment_info 成功",s.comments)}).catch(function(e){o.warn("join_comment_info 失败",e)})):(o.warn("[家属鉴权] 进房返回为空"),s.setPageStatus("error"),el.value="进房失败，请稍后再试",(0,eu.Am)("进房失败，请稍后再试"),nE.once(handleBack,null,1500)),T.label=5;case 5:return[2]}})}),function(e){return n.apply(this,arguments)}),{immediate:!0}),(0,g.YP)(ea,function(e,t){o.log("watch roomStatus:",t,"->",e),3===e&&nE.remove(onCheckTimer,null)},{immediate:!0});var eR=(0,g.Fl)(function(){var e;return(null===(e=es.value)||void 0===e?void 0:e.nickname)?"".concat(es.value.nickname,"的小红书直播间"):"小红书 - 你的生活兴趣社区"});function handleBack(){nE.remove(onCheckTimer,null);var e=u.query.source||"web_feed";o.log("handleBack",u.query,location.search,e),e===h.Hx.WEB_FEED||e===h.Hx.WEB_SHARE||e===h.Hx.SHARE_OUT_OF_APP?l.replace({path:"/livelist"}):e===h.Hx.WEB_SEARCH_ONEBOX||e===h.Hx.WEB_SEARCH_USER?l.replace({path:"/search_result",query:{keyword:u.query.keyword,type:u.query.type||0}}):e===h.Hx.WEB_NOTE?l.replace({path:"/explore"}):e===h.Hx.WEB_NOTE_DETAIL||e===h.Hx.WEB_NOTE_USER_CARD?l.replace({path:"/explore/".concat(u.query.note_id),query:{xsec_token:u.query.xsec_token,xsec_source:u.query.xsec_source}}):l.replace({path:"/livelist"})}if((0,eX.Kf)({title:eR}),(0,g.bv)(function(){var t=nC.now();o.log("onMounted,roomStatus=".concat(ea.value,",appSettings="),e.appSettings),c.initContainerSize(),nE.add(onCheckTimer,null,1e3),E=t,R=t,document.addEventListener("game-linkmic-main-click",handleGameLinkmicMainClick)}),(0,g.Jd)(function(){nE.remove(onCheckTimer,null),"pending"!==s.pageStatus&&"error"!==s.pageStatus&&reportHeartbeat("leave_liveroom"),nE.remove(hideLinkmicCard,null),document.removeEventListener("click",handleLinkmicCardClickOutside),document.removeEventListener("game-linkmic-main-click",handleGameLinkmicMainClick),removeImEvent(),null==ey||ey.destroy()}),!e.isLiveMode){if(e$.YF.isWeixin){var eU="".concat(window.location.origin,"/explore");window.location.href=eU}else l.replace({path:"/explore"})}return function(t,n){var r,i,a,o,u,l;return(0,g.wg)(),(0,g.iD)("div",{id:"live-layout",class:(0,g.C_)(["main-container",{"is-fullscreen":O.value}])},[(0,g._)("div",{class:(0,g.C_)(["main-player",{"is-fullscreen":O.value}])},[n[3]||(n[3]=(0,g._)("div",{class:"main-player-bg"},null,-1)),e_.value?((0,g.wg)(),(0,g.j4)(ip,{key:0,ref_key:"livePlayer",ref:y,class:(0,g.C_)({"hide-video-player":eM.value}),cover:null===(r=(0,g.SU)(er).roomInfo)||void 0===r?void 0:r.roomCover,volume:V.value,"auto-play":!0,"media-info":(0,g.SU)(ei),"room-id":X.value,"host-info":(0,g.SU)(es),"user-id":(null===(i=e.userInfo)||void 0===i?void 0:i.userId)||"","logged-in":e.loggedIn,"app-settings":e.appSettings||{},"is-danmu-show":_.value,"redmoji-map":(0,g.SU)(et),onShowDanmaku:handleShowDanmaku,onOnLinkMicSeiInfo:onLinkMicSeiInfo,onSdkLoadingChange:handleSdkLoadingChange,onNoLogin:handleActionNoLogin,onOnPlayerPause:handlePlayerPause,onOnPlayerPlaying:handlePlayerPlaying,onOnPlayerReload:handlePlayerReload,onOnGearChange:handleGearChange,onOnVolumeClick:handleVolumeClick,onOnDanmakuSwitchClick:handleDanmakuSwitchClick,onOnPipClick:handlePipClick,onOnShareClick:handleShareClick,onOnShareClickSuccess:handleShareClickSuccess,onPictureInPictureChange:handlePictureInPictureChange,onFullscreenChange:handleFullscreenChange,onOnEnded:handleOnEnded,onOnError:handleOnError,onOnPlayBtnClick:onPlayBtnClick},{linkmic:(0,g.w5)(function(){return[(0,g.Wm)(m.Z,null,{default:(0,g.w5)(function(){return[H.value?(0,g.kq)("",!0):((0,g.wg)(),(0,g.j4)(tJ,{key:0,"linkmic-users":ew.value,"container-size":ek.value,"enable-animation":!0,"content-type":eS.value,"layout-type":eb.value,"audio-chat-layout-type":eC.value,"background-url":(0,g.SU)(eg),"on-container-size-change":handleContainerSizeChange,onFollowUser:handleFollowLinkmicUser,onClickUser:handleLinkmicUserClick},{user:(0,g.w5)(function(e){var t=e.user,n=e.contentType,r=e.layoutType,i=e.audioChatLayoutType,a=e.totalUserCount;return[(0,g.Wm)(tF,{user:t,"content-type":n,"layout-type":r,"audio-chat-layout-type":i,"total-user-count":a,onFollowUser:handleFollowLinkmicUser,onClickUser:handleLinkmicUserClick},null,8,["user","content-type","layout-type","audio-chat-layout-type","total-user-count"])]}),_:1},8,["linkmic-users","container-size","content-type","layout-type","audio-chat-layout-type","background-url"]))]}),_:1})]}),danmaku:(0,g.w5)(function(){return[(0,g.Wm)(m.Z,null,{default:(0,g.w5)(function(){return[(0,g.SU)(ee)?((0,g.wg)(),(0,g.j4)(rt,{key:0,ref_key:"danmakuRef",ref:p,emojis:(0,g.SU)(ee),"show-danmaku":_.value,onOnError:handleDanmuInitError},null,8,["emojis","show-danmaku"])):(0,g.kq)("",!0)]}),_:1})]}),anchorInfo:(0,g.w5)(function(){return[(0,g.Wm)(m.Z,null,{default:(0,g.w5)(function(){var t;return[(0,g.SU)(es).avatar?((0,g.wg)(),(0,g.j4)(n6,{key:0,"user-id":(null===(t=e.userInfo)||void 0===t?void 0:t.userId)||"","logged-in":e.loggedIn,onNoLogin:handleActionNoLogin},null,8,["user-id","logged-in"])):(0,g.kq)("",!0)]}),_:1})]}),_:1},8,["class","cover","volume","media-info","room-id","host-info","user-id","logged-in","app-settings","is-danmu-show","redmoji-map"])):(0,g.kq)("",!0),eI.value?((0,g.wg)(),(0,g.j4)(ii,{key:1,cover:null===(a=(0,g.SU)(er).roomInfo)||void 0===a?void 0:a.roomCover,"room-status":(0,g.SU)(ea),"host-info":(0,g.SU)(es),"host-id":null===(u=(0,g.SU)(ei))||void 0===u?void 0:null===(o=u.media)||void 0===o?void 0:o.hostId,"room-id":X.value,"logged-in":e.loggedIn,onLiveFinishNoLogin:handleLiveFinishNoLogin},null,8,["cover","room-status","host-info","host-id","room-id","logged-in"])):(0,g.kq)("",!0),"error"===(0,g.SU)(eo)?((0,g.wg)(),(0,g.j4)(il,{key:2,onAction:handleRetry})):(0,g.kq)("",!0),"kickOut"===(0,g.SU)(eo)||"kickOutRoom"===(0,g.SU)(eo)||"joinRoomError"===(0,g.SU)(eo)?((0,g.wg)(),(0,g.j4)(il,{key:3,title:"暂停播放","action-title":"恢复",onAction:handleRestore})):(0,g.kq)("",!0),eI.value||"liveError"!==(0,g.SU)(eo)&&"liveEnded"!==(0,g.SU)(eo)?(0,g.kq)("",!0):((0,g.wg)(),(0,g.j4)(il,{key:4,title:"播放异常","action-title":"重试",onAction:handleRetryPlayer})),"ownerRoomError"===(0,g.SU)(eo)?((0,g.wg)(),(0,g.j4)(r8,{key:5,cover:null===(l=(0,g.SU)(er).roomInfo)||void 0===l?void 0:l.roomCover},null,8,["cover"])):(0,g.kq)("",!0),(0,g.Wm)((0,g.SU)(e0.Z),{src:(0,g.SU)("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyOCIgaGVpZ2h0PSIyOCIgZmlsbD0ibm9uZSIgdmlld0JveD0iMCAwIDI4IDI4Ij48cmVjdCB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iLjA4IiByeD0iOCIvPjxwYXRoIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iLjg0IiBkPSJNMTIuNDY2IDEzLjkwMWEuMTM1LjEzNSAwIDAgMCAwIC4xOGw0LjM4IDQuOTE1Yy4yMi4yNDUuMjAyLjYyNS0uMDM5Ljg0OGEuNTguNTggMCAwIDEtLjgzMi0uMDRsLTQuODIyLTUuNDFhLjYxLjYxIDAgMCAxIDAtLjgwN2w0LjgxMy01LjM5YS41OC41OCAwIDAgMSAuODMyLS4wNGMuMjQxLjIyMi4yNTkuNjAyLjA0Ljg0N3oiLz48L3N2Zz4="),class:"back-icon",onClick:handleBack},null,8,["src"])],2),(0,g._)("div",{class:(0,g.C_)(["main-comment",{"is-hidden":O.value||Q.value}])},[(0,g.Wm)(m.Z,null,{default:(0,g.w5)(function(){return["pending"===(0,g.SU)(eo)||Q.value?(0,g.kq)("",!0):((0,g.wg)(),(0,g.j4)(r2,{key:0,ref_key:"commentListRef",ref:I,im:ey,"logged-in":t.loggedIn,"history-comment-message":Y.value,"room-id":X.value,"self-enter-signal":G.value,onSendDanmaku:sendDanmaku,onSendCommentNoLogin:handleSendCommentNoLogin,onSendReportNoLogin:handleSendReportNoLogin,onSendFollowNoLogin:handleSendFollowNoLogin,onInputClick:handleCommentInputClick,onCommentSendSuccess:handleCommentSendSuccess},null,8,["im","logged-in","history-comment-message","room-id","self-enter-signal"]))]}),_:1})],2),(0,g.Wm)(m.Z,null,{default:(0,g.w5)(function(){return[(0,g.Wm)((0,g.SU)(iE))]}),_:1}),(0,g.Wm)(m.Z,null,{default:(0,g.w5)(function(){return[((0,g.wg)(),(0,g.j4)(g.lR,{to:"#live-layout"},[(0,g.Wm)(g.uT,{name:"linkmic-card-fade"},{default:(0,g.w5)(function(){return[M.value&&L.value?((0,g.wg)(),(0,g.iD)("div",{key:0,ref_key:"linkmicCardRef",ref:T,class:"linkmic-info-card-global",style:(0,g.j5)(N.value),onClick:n[2]||(n[2]=(0,g.iM)(function(){},["stop"])),onMouseenter:handleLinkmicCardEnter,onMouseleave:handleLinkmicCardLeave},[ex.value?((0,g.wg)(),(0,g.j4)(rk,{key:0,avatar:eT.value,"display-name":eD.value,"show-at":!1,"show-report":!x.value&&!eL.value,"logged-in":e.loggedIn,onOnReport:n[0]||(n[0]=function(){return handleLinkmicUserReport(L.value)}),onNoLogin:handleActionNoLogin},null,8,["avatar","display-name","show-report","logged-in"])):((0,g.wg)(),(0,g.j4)(n2,{key:1,"is-anchor":x.value,"user-id":L.value,"logged-in":e.loggedIn,"show-at":!1,"show-follow":!eL.value,"show-report":!x.value&&!eL.value,onOnReport:n[1]||(n[1]=function(){return handleLinkmicUserReport(L.value)}),onNoLogin:handleActionNoLogin},null,8,["is-anchor","user-id","logged-in","show-follow","show-report"]))],36)):(0,g.kq)("",!0)]}),_:1})]))]}),_:1}),eN.value?((0,g.wg)(),(0,g.j4)(iP,{key:0})):(0,g.kq)("",!0)],2)}}});let ij=(0,x.default)(iF,[["__scopeId","data-v-8bb5c88a"]]);(function setupDanmuDebug(){window.__DANMU_DEBUG__={switchRenderer:function(e){if(!["canvas2d","webgpu","css3"].includes(e)){console.error("无效的渲染类型");return}localStorage.setItem("danmuRenderType",e),console.log("已切换到 ".concat(e," 渲染方式，请刷新页面"));var t=new Event("danmuRenderTypeChanged");window.dispatchEvent(t)},getRenderType:function(){return localStorage.getItem("danmuRenderType")||"webgpu"},reset:function(){localStorage.removeItem("danmuRenderType")}}})();var iO=ij},76779:function(e,t,n){"use strict";n.d(t,{Bh:function(){return c},C9:function(){return l},Hx:function(){return u},LB:function(){return s},f2:function(){return o}});var r,i,a,o={SOURCE:"web_live"};var u=((r={}).WEB_FEED="web_feed",r.WEB_NOTE="web_note",r.WEB_NOTE_DETAIL="web_note_detail",r.WEB_NOTE_USER_CARD="web_note_user_card",r.WEB_SEARCH_ONEBOX="web_search_onebox",r.WEB_SEARCH_USER="web_search_user",r.SHARE_OUT_OF_APP="share_out_of_app",r.WEB_SHARE="web_share",r.WEB_URL="web_url",r);var l=((i={}).FOLLOW="follow",i.COMMENT="comment",i.REPORT="report",i.IS_FAMILY="isFamily",i);var s=((a={}).TOGGLE_SHOW_DANMAKU="toggle-show-danmaku",a.CLICK_SHARE="click-share",a.CLICK_DANMAKU_SWITCH="click-danmaku-switch",a),c=1},83166:function(e,t,n){"use strict";n.d(t,{j:function(){return getLogger}});var r=n(46490),i=n(47650),a=n(90251),o=n(51606),u=n(66993);n(57015),n(87989),n(9557),n(87535),n(75204),n(97357),n(34333),n(82427),n(36062),n(57057);var l=["error","warn","info","log"];function pad(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(e).padStart(t,"0")}function formatDate(e){var t="".concat(pad(e.getFullYear()),"-").concat(pad(e.getMonth()+1),"-").concat(pad(e.getDate())," ");return t+="".concat(pad(e.getHours()),":").concat(pad(e.getMinutes()),":").concat(pad(e.getSeconds()),".").concat(pad(e.getMilliseconds(),3)),"[".concat(t,"]")}var s=99,c=99;"undefined"!=typeof window&&"undefined"!=typeof localStorage&&(c=Number(localStorage.xhsWebLiveLogLevel)),!Number.isNaN(c)&&(s=c);var d=function(){function Logger(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];(0,r._)(this,Logger),(0,o._)(this,"transports",void 0),this.transports=t}return(0,a._)(Logger,[{key:"log",value:function log(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.transports.forEach(function(e){e.log.apply(e,(0,u._)(t))})}},{key:"info",value:function info(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.transports.forEach(function(e){e.info.apply(e,(0,u._)(t))})}},{key:"error",value:function error(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.transports.forEach(function(e){e.error.apply(e,(0,u._)(t))})}},{key:"warn",value:function warn(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.transports.forEach(function(e){e.warn.apply(e,(0,u._)(t))})}},{key:"getLogger",value:function getLogger(e){var t=this;return l.reduce(function(n,r){return n[r]=function(){for(var n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];switch(r){case"error":if(s>3)return;break;case"warn":if(s>2)return;break;case"info":if(s>1)return;break;case"log":if(s>0)return}t[r].apply(t,["".concat(formatDate(new Date),"[WEB-LIVE][").concat(e,"]")].concat((0,u._)(i)))},n},{error:function(){},warn:function(){},info:function(){},log:function(){}})}}]),Logger}(),v=[console],f=(0,i._)(d,(0,u._)(v));function getLogger(e){return f.getLogger(e)}"undefined"!=typeof window&&(window.liveLogger=f)},8306:function(e,t,n){"use strict";n.d(t,{Tp:function(){return htmlEscape},BX:function(){return formatLoginPhone},LG:function(){return formatLikeNum},_v:function(){return sleep},po:function(){return loadImage},tA:function(){return r.tA},U:function(){return isInteger},Bg:function(){return formatSEOString}}),n(43648),n(72169),n(58486),n(99808),n(87394),n(94941),n(48421),n(97357),n(34333),n(25069),n(29273);var formatLoginPhone=function(e){if(e.length>13)return e.slice(0,13);var t=e.replace(/\s+/,"").split("").filter(function(e){return/\d/.test(e)});return t.length>=4&&t.splice(3,0," "),t.length>=9&&t.splice(8,0," "),t.join("")};n(36277);var sleep=function(e){return new Promise(function(t){var n=setTimeout(function(){clearTimeout(n),t()},e)})},loadImage=function(e){return new Promise(function(t,n){if(e){var r=new Image;r.src=e,r.onload=function(){t(!0)},r.onerror=function(e){n(e)}}else n("url is empty")})};n(87989);var isInteger=function(e){return/^[0-9]\d*$/.test(String(e))},formatLikeNum=function(e){if(void 0===e)return"";var t="".concat(e);if(/[\+\u4e07]$/.test(t))return e;if(isInteger(t)){if(1e4>+e)return+e;if(1e6>+e){if(1e5>+e)return"0"===t[1]?"".concat(t[0],"万"):"".concat(t[0],".").concat(t[1],"万");var n=t.slice(0,2),r=t.slice(2,3);return"0"===r?"".concat(n,"万"):"".concat(n,".").concat(r,"万")}return 1e7>+e?"".concat(t.slice(0,3),"万"):"999万+"}return""},htmlEscape=function(e){return e.replace(/[<>"&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case'"':return"&quot;";case"//'":return"&#39;";default:return e}})},formatSEOString=function(e){return e?htmlEscape(e.replace(/[\r\n]/g," ").replace(/(#[^#]+)\[[^#]+]#/g,"$1").replace(/\[.{1,5}\]/g,"")):""},r=n(30072);n(41392)},41392:function(e,t,n){"use strict";n.d(t,{G:function(){return formatNoteTextV2}}),n(86651),n(97542),n(63712),n(43648),n(64961),n(12996),n(59564),n(97357),n(34333),n(84355),n(58486),n(72169),n(6045),n(10364),n(67673),n(87394),n(94941),n(48421),n(28636),n(87535),n(75204),n(87989),n(109),n(54060),n(20266),n(55947);var formatNoteTextV2=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.atUserList,r=void 0===n?[]:n,i=t.removeBlankLine,a=void 0!==i&&i?e.replace(/\n\s*\n/g,"\n"):e,o=r?r.map(function(e){return e.nickname}):[],u="(#.*?\\[话题\\]#)|(\\[.*?\\])";o.filter(Boolean).sort(function(e,t){return t.length-e.length}).forEach(function(e){var t=null==e?void 0:e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");u+="|(@".concat(t,")")});for(var l=RegExp(u,"g"),s=[],c=0,d=l.exec(a);d;)!function(){d.index>c&&s.push({type:"text",value:a.substring(c,d.index)});var e=d[0];if(e.startsWith("#")&&e.endsWith("[话题]#"))s.push({type:"topic",value:e.slice(1,-5)});else if(e.startsWith("[")&&e.endsWith("]"))s.push({type:"emoji",value:e});else if(e.startsWith("@")){var t=e.slice(1),n=null==r?void 0:r.find(function(e){return e.nickname===t});s.push({type:"mention",value:t,aiAgent:null==n?void 0:n.aiAgent})}else s.push({type:"text",value:e});c=l.lastIndex,d=l.exec(a)}();return c<a.length&&s.push({type:"text",value:a.substring(c)}),s}},30072:function(e,t,n){"use strict";n.d(t,{g3:function(){return getDisplayDate},tA:function(){return todayInDateRange}}),n(87989);var r=n(45634),i=n.n(r),a=n(27320),o=n.n(a),u=n(80403),l=n.n(u);function todayInDateRange(e,t){if(!t)return!1;var n=i()(e),r=i()(t[0]),a=i()(t[1]);return n.isBetween(r,a,null,"[]")}function getDisplayDate(e,t){var n=i()(e),r=t?i()(t):i()(),a=r.add(-1,"day"),o=r.diff(n,"minute"),u=r.diff(n,"day");if(o<2)return"刚刚";if(o<60)return"".concat(o,"分钟前");if(n.isSame(r,"day")){var l=r.diff(n,"hour");return"".concat(l,"小时前")}return n.isSame(a,"day")?"昨天 ".concat(n.format("HH:mm")):u>=1&&u<=7?"".concat(u,"天前"):n.year()===r.year()?"".concat(n.format("MM-DD")):n.format("YYYY-MM-DD")}i().extend(o()),i().extend(l())},15589:function(e){"use strict";e.exports=JSON.parse('{"u2":"xhs-pc-web","i8":"5.11.0"}')},48828:function(e){"use strict";e.exports=JSON.parse('{"[微笑R]":"https://picasso-static.xiaohongshu.com/fe-platform/6ae82231880cc1f1961709f0870d75c9fda9117e.png","[害羞R]":"https://picasso-static.xiaohongshu.com/fe-platform/b3e24005247a1af7081e545f32d81ce4d46ceca4.png","[失望R]":"https://picasso-static.xiaohongshu.com/fe-platform/274d668da630d35a120e8e2f6f4c6f92e564c310.png","[汗颜R]":"https://picasso-static.xiaohongshu.com/fe-platform/a3792d9dfe45d2d5fe508fd6a76c071094478f07.png","[哇R]":"https://picasso-static.xiaohongshu.com/fe-platform/4bf9381c930ba0769a15f6acb3ccc2b4339a0fe3.png","[喝奶茶R]":"https://picasso-static.xiaohongshu.com/fe-platform/183e8a8fa3f3bae442e4a85c42bd0ab46156bb57.png","[自拍R]":"https://picasso-static.xiaohongshu.com/fe-platform/c53a77c2b4c87094120e4b31074475bf159d2cf0.png","[偷笑R]":"https://picasso-static.xiaohongshu.com/fe-platform/0e549ce3e730b934cd54dc64626c430594cd23ec.png","[飞吻R]":"https://picasso-static.xiaohongshu.com/fe-platform/b0621834bba2ec0b8261d192403e888aa95e4521.png","[石化R]":"https://picasso-static.xiaohongshu.com/fe-platform/6dd6a2465801fc620967ed968cf051eadaf3644d.png","[笑哭R]":"https://picasso-static.xiaohongshu.com/fe-platform/eba2fc6cf81cc80f26a9c94c8fea0b0b50e92427.png","[赞R]":"https://picasso-static.xiaohongshu.com/fe-platform/3d2764c92f61959bece9598fc02742653ff7d286.png","[暗中观察R]":"https://picasso-static.xiaohongshu.com/fe-platform/8c0039f06846f50a569a3f47785d672c92fea808.png","[买爆R]":"https://picasso-static.xiaohongshu.com/fe-platform/8e050cfccdcaed5aa5b782cc7fe5b2a6d22b811a.png","[大笑R]":"https://picasso-static.xiaohongshu.com/fe-platform/c80b00b248813330c081eeb2f11a38506e88100b.png","[色色R]":"https://picasso-static.xiaohongshu.com/fe-platform/eecb2c239e376fe66f282a3ae3eefa12efb5961e.png","[生气R]":"https://picasso-static.xiaohongshu.com/fe-platform/d756269a0b362c89a74cb189489a97744c9232f5.png","[哭惹R]":"https://picasso-static.xiaohongshu.com/fe-platform/e69746a30a0362ccd1eccde8571866f0225c58f2.png","[萌萌哒R]":"https://picasso-static.xiaohongshu.com/fe-platform/42f30cb59e9b8230ba0b6202e2dab23717a91af0.png","[斜眼R]":"https://picasso-static.xiaohongshu.com/fe-platform/4d0295283b67bf0513fcfef07ec4a57d0ebfda91.png","[可怜R]":"https://picasso-static.xiaohongshu.com/fe-platform/ebc690ef847746c3259e9d7492a1563920a4d26f.png","[鄙视R]":"https://picasso-static.xiaohongshu.com/fe-platform/99dc85d9a79d09352a6e876e0af65241fb05efab.png","[皱眉R]":"https://picasso-static.xiaohongshu.com/fe-platform/b38cd520632fe0ce51379fb2df743baa67f09f3d.png","[抓狂R]":"https://picasso-static.xiaohongshu.com/fe-platform/18670d01d153c42a3e547ca89f8ac40e7bf4ae8e.png","[捂脸R]":"https://picasso-static.xiaohongshu.com/fe-platform/9fdeb5b943fc0ac1d867b65b478dbca6732b2394.png","[派对R]":"https://picasso-static.xiaohongshu.com/fe-platform/ed1ef2cb6cd8e3a48ff3b752b01317bb4e0d0cac.png","[吧唧R]":"https://picasso-static.xiaohongshu.com/fe-platform/f3daf7ec77dd0722065e451cf015c3c2f97f7904.png","[惊恐R]":"https://picasso-static.xiaohongshu.com/fe-platform/da18c61d523830bb9822a4c8b6cd8e2e1f1fbf7d.png","[抠鼻R]":"https://picasso-static.xiaohongshu.com/fe-platform/b55e0508dcfc5449269d0b524578fdc10999810c.png","[再见R]":"https://picasso-static.xiaohongshu.com/fe-platform/53d7029df310ccdbb67587018fbc3747fab823fc.png","[叹气R]":"https://picasso-static.xiaohongshu.com/fe-platform/a5a07ebdeb0ac0f208f0ef428f66ba5f1f7eaef4.png","[睡觉R]":"https://picasso-static.xiaohongshu.com/fe-platform/dfb2c7f84e6042435f2cc6663e6b63cf0ca246b4.png","[得意R]":"https://picasso-static.xiaohongshu.com/fe-platform/f30923a7b86fe8ca74819acf152a51c6e5e02fdb.png","[吃瓜R]":"https://picasso-static.xiaohongshu.com/fe-platform/0330af4d8b15e80c629eb9cbb158cc7522c82583.png","[扶墙R]":"https://picasso-static.xiaohongshu.com/fe-platform/0e12d96d712f3839c218f2dedf7b6821e78a8e3a.png","[黑薯问号R]":"https://picasso-static.xiaohongshu.com/fe-platform/a72932f04f2e89d3839547762a2037d218c62b31.png","[黄金薯R]":"https://picasso-static.xiaohongshu.com/fe-platform/79efc4110f6dec2deac59573f94a64b7e9cfdae4.png","[吐舌头H]":"https://picasso-static.xiaohongshu.com/fe-platform/5aa0b2c07643a215a88f2f805ae2ced7dd150ee6.png","[扯脸H]":"https://picasso-static.xiaohongshu.com/fe-platform/229221a73144192a7b7c3e949853f550a5ef24a4.png","[doge]":"https://picasso-static.xiaohongshu.com/fe-platform/16a941439d3f2fc3c23ece4128e7c90c38cf6a87.png","[惊吓H]":"https://picasso-static.xiaohongshu.com/fe-platform/da18c61d523830bb9822a4c8b6cd8e2e1f1fbf7d.png"}')}},function(e){e.O(0,["3039","5447","659","8305","8971","9035"],function(){return e(e.s="16058")}),e.O()}]);
//# sourceMappingURL=https://picasso-private-1251524319.cos.ap-shanghai.myqcloud.com/data/formula-static/formula/xhs-pc-web/index.88d36455.js.map