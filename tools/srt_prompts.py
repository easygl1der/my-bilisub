# SRT字幕优化Prompt配置
# 用于智谱GLM API的字幕优化提示词

# ==================== 主优化Prompt ====================
OPTIMIZATION_PROMPT = """你是一位专业的视频字幕编辑。你的任务是优化由AI语音识别（如Whisper）生成的视频字幕，使其更加准确、流畅、易读。

## 输入说明
你将收到一组视频字幕文本（通常5-10条），这些文本可能存在以下问题：
- 错别字和同音字错误（如"前爷爷"→"前额叶"，"cloud code"→"Cloud Code"）
- 缺少标点符号或标点使用不当
- 语句碎片化，缺乏连贯性
- 口语化表达需要适当书面化
- 专业术语大小写不规范（如"cloud code"应为"Cloud Code"）

## 优化原则

### 1. 修正错误（必须）
- 修正同音字和错别字，特别是常见错误：
  * 前爷爷 → 前额叶
  * cloud code → Cloud Code
  * srpk → SRPK（专有名词）
  * sobug → SCode
  * 其他明显的ASR错误

### 2. 标点符号（必须）
- 为每个完整的句子添加适当的标点
- 句末使用句号、问号、感叹号等
- 句内使用逗号分隔
- 对话类内容可使用冒号和引号
- 不要过度使用标点，保持简洁

### 3. 语句优化（适度）
- 适度合并碎片化的短句，使其更连贯
- 但要保持每个独立的意思分段
- 删除重复的口头禅和无意义的填充词
- 口语化表达改为书面化，但保留自然度

### 4. 专业术语（规范）
- 产品/技术名词首字母大写：Cloud Code, Claude Code, SCode, SRPK
- 保持专业术语的准确性
- 已知专有名词不要"修正"

### 5. 内容完整性（谨慎）
- 可以适度补充明显的省略主语或谓语，使句子完整
- **绝对不要**添加原文没有的新信息
- **绝对不要**改变原意
- **绝对不要**臆造对话或内容
- 如果原文意思不完整，保持原样也比添加错误信息好

### 6. 保持格式（严格必须）
- **保持每行独立，不要合并不同时间戳的字幕**
- **每行输入对应每行输出，严格一对一**
- **不要将多行合并为一行**
- **保持原文的行数、顺序和结构**
- 输出格式：每行一个优化后的字幕，按原文顺序对应

## 常见错误类型示例

### ASR同音字错误：
- 前额叶 → 前额叶 ✓
- 认知 → 认为 ✓
- 必须 → 毕须 ✓

### 大小写错误：
- cloud code → Cloud Code ✓
- claude code → Claude Code ✓
- javascript → JavaScript ✓

### 标点缺失：
- 全是干货 → 全是干货！ ✓
- 真的很好 → 真的很好。 ✓
- 怎么这样 → 怎么这样？ ✓

### 碎片化句子（适度合并）：
```
原文：
一份引爆全网的cloud code调教指南
两天就引来170多万播放

优化后：
一份引爆全网的Cloud Code调教指南，两天就引来170多万播放。
```

## 输出格式要求（极其重要）

1. **严格对应原文行数**：输出必须与输入行数完全一致，不多不少
2. **每行独立输出**：每行一个优化后的字幕文本，不要合并
3. **不要添加任何解释**：直接输出优化后的文本，不要前缀、后缀或编号
4. **保持原文顺序**：按输入顺序输出
5. **严禁合并行**：即使意思相关，也要保持分行
6. **严禁拆分行**：一行原文不要拆成多行输出

## 注意事项

- 优先级：修正错误 > 添加标点 > 适度优化 > 保持原样
- 如果某行原文已经很完美，直接输出原文
- 如果原文意思不清楚，保持原样不要乱改
- 保守优化：不确定的情况保持原文

---

## 待优化文本（{count}行）：

{text}

## 优化后的文本（{count}行）：
"""

# ==================== 简化Prompt（快速模式）====================
SIMPLE_PROMPT = """请优化以下视频字幕文本，要求：

1. **修正错别字**：前爷爷→前额叶，cloud code→Cloud Code，srpk→SRPK
2. **添加标点**：为完整句子添加句号、问号、感叹号
3. **改善流畅度**：适度合并碎片化句子，删除无意义重复词
4. **规范术语**：Cloud Code, Claude Code, SRPK 等专有名词大写
5. **保持原意**：不添加原文没有的内容
6. **严格对应**：输出行数必须与输入完全一致，每行一个，不要合并

**关键要求：**
- 每行输入对应每行输出
- 不要合并多行为一行
- 保持原文的行数和顺序

**原文（{count}行）：**
{text}

**优化后（必须{count}行，每行一个，不要合并）：**
"""

# ==================== 严格模式Prompt（保守）====================
CONSERVATIVE_PROMPT = """请对以下视频字幕进行最小化修正，只处理明显错误：

**仅处理以下问题：**
1. 明显的错别字：前爷爷→前额叶，cloud code→Cloud Code
2. 明确的标点错误：明显的缺失或错误标点
3. 明显的大小写错误：Cloud Code等专有名词

**不做以下操作：**
- 不改变句子结构
- 不合并或拆分句子
- 不补充内容
- 不删除词语（除非明显重复）

**保持原则：**
- 如果不确定，保持原样
- 宁可保守不过度修正
- 优先保证准确性

原文（{count}行）：
{text}

优化后（{count}行，每行一个）：
"""

# ==================== 激进模式Prompt（更多优化）====================
AGGRESSIVE_PROMPT = """请对以下视频字幕进行深度优化，使其更加流畅自然：

**优化方向：**
1. 全面修正ASR错误和同音字
2. 完善标点符号系统
3. 改善每个句子的完整性和流畅度
4. 口语转书面化，提升专业度
5. 适当补充省略的主语或谓语（仅限明显情况）
6. 规范所有专业术语大小写

**特殊处理：**
- 识别对话场景，添加适当的说话标记（如果有）
- 处理列表、举例等结构化内容
- 统一术语翻译（英文→中文）

**极其重要的格式要求：**
- **每行必须独立，绝对不能合并多行**
- **每行输入严格对应每行输出**
- **即使意思相关，也要保持每行独立**
- **不要改变原文的行数和结构**

原文（{count}行）：
{text}

优化后（必须{count}行，每行一个，不要合并）：
"""

# ==================== 针对不同场景的Prompt ====================

# 技术教学类视频
TECH_PROMPT = """请优化以下技术教学视频字幕，特别注意：

1. **专业术语规范**：
   - Cloud Code, Claude Code, SCode, SRPK 等专有名词必须大写
   - API, SDK, URL, JSON 等技术术语保持大写
   - 编程概念如变量、函数、算法等保持小写

2. **教学语言风格**：
   - 保持简洁明了
   - 适当使用冒号分隔说明和示例
   - 关键要点可以强调（但不要过度）

3. **准确性优先**：
   - 技术内容绝对不能改错
   - 代码、命令、路径等保持原样
   - 符号和格式严格保持

原文（{count}行）：
{text}

优化后（{count}行，每行一个）：
"""

# 访谈/对话类视频
INTERVIEW_PROMPT = """请优化以下访谈或对话视频字幕，特别注意：

1. **对话格式**：
   - 识别说话人，使用冒号和引号标记（如果明确）
   - A: "..."
   - B: "..."

2. **口语处理**：
   - 删除明显的口头禅（嗯、啊、呃等）
   - 修正重复表达
   - 保留自然的对话感

3. **标点符号**：
   - 问句用问号
   - 感叹句用感叹号
   - 陈述句用句号

4. **情感表达**：
   - 保留情感语气词
   - 保持对话的自然性

原文（{count}行）：
{text}

优化后（{count}行，每行一个）：
"""

# Vlog/生活类视频
VLOG_PROMPT = """请优化以下Vlog或生活类视频字幕，特别注意：

1. **自然口语化**：
   - 保持轻松自然的表达风格
   - 适度的语气词和感叹词
   - 避免过度书面化

2. **流畅性**：
   - 合并碎片化句子
   - 删除明显的重复和啰嗦
   - 让表达更简洁

3. **可读性**：
   - 适当断句，避免长句
   - 添加必要的标点
   - 保持逻辑清晰

4. **情感保留**：
   - 保留情绪和个性
   - 不删减有意义的表达

原文（count}行）:
{text}

优化后（count}行，每行一个）：
"""

# ==================== Prompt版本说明 ====================
"""
使用指南：

1. **OPTIMIZATION_PROMPT** （推荐）- 平衡模式，适合大多数视频
   - 修正错误 + 添加标点 + 适度优化
   - 安全且效果好

2. **SIMPLE_PROMPT** - 快速模式，处理大量字幕
   - 只处理明显问题
   - 速度更快
   - 适合批量处理

3. **TECH_PROMPT** - 技术视频专用
   - 专业术语严格规范
   - 代码和命令保持原样
   - 适合教程、编程视频

4. **INTERVIEW_PROMPT** - 访谈对话专用
   - 对话格式处理
   - 口语化优化
   - 保留说话人特征

5. **VLOG_PROMPT** - Vlog生活类
   - 自然口语化
   - 情感保留
   - 流畅简洁

选择建议：
- 默认使用 OPTIMIZATION_PROMPT
- 技术视频使用 TECH_PROMPT
- 访谈使用 INTERVIEW_PROMPT
- Vlog使用 VLOG_PROMPT
- 批量处理使用 SIMPLE_PROMPT
"""
