# Botå¤šå¹³å°é›†æˆè®¡åˆ’

## ğŸ“‹ ç›®æ ‡

æ‰©å±•ç°æœ‰çš„ `bot/video_bot.py`ï¼Œæ”¯æŒï¼š
- âœ… Bç«™è§†é¢‘åˆ†æï¼ˆå·²æœ‰ï¼‰
- ğŸ†• å°çº¢ä¹¦è§†é¢‘åˆ†æ
- ğŸ†• å°çº¢ä¹¦å›¾æ–‡åˆ†æ
- ğŸ†• è‡ªåŠ¨å¹³å°æ£€æµ‹

## ğŸ”§ å®æ–½æ–¹æ¡ˆ

### æ–¹æ¡ˆAï¼šæ‰©å±•ç°æœ‰Botï¼ˆæ¨èï¼‰
ä¿®æ”¹ `bot/video_bot.py`ï¼Œæ·»åŠ å°çº¢ä¹¦æ”¯æŒ

**ä¼˜ç‚¹**ï¼š
- å¤ç”¨ç°æœ‰ä»£ç 
- ä¿æŒä¸€è‡´æ€§
- å¿«é€Ÿå®ç°

**ç¼ºç‚¹**ï¼š
- æ–‡ä»¶ä¼šå˜å¤§
- éœ€è¦å°å¿ƒå¤„ç†å…¼å®¹æ€§

### æ–¹æ¡ˆBï¼šåˆ›å»ºæ–°Bot
åˆ›å»º `bot/multi_platform_bot.py`

**ä¼˜ç‚¹**ï¼š
- ä¸å½±å“ç°æœ‰Bot
- å¯ä»¥é‡æ–°è®¾è®¡æ¶æ„
- æ›´å¥½çš„æ¨¡å—åŒ–

**ç¼ºç‚¹**ï¼š
- ä»£ç é‡å¤
- ç»´æŠ¤æˆæœ¬é«˜

## âœ… é€‰æ‹©æ–¹æ¡ˆA - æ‰©å±•ç°æœ‰Bot

### å®æ–½æ­¥éª¤

#### 1. æ·»åŠ URLæ£€æµ‹åŠŸèƒ½
```python
def detect_platform(url: str) -> str:
    """æ£€æµ‹å¹³å°ç±»å‹"""
    if 'bilibili.com' in url:
        return 'bili'
    elif 'xiaohongshu.com' in url:
        return 'xhs'
    else:
        return 'unknown'
```

#### 2. æ·»åŠ å°çº¢ä¹¦å‘½ä»¤å¤„ç†å™¨
```python
async def xhs_command(update, context):
    """å¤„ç†å°çº¢ä¹¦é“¾æ¥"""
    url = extract_url(context)
    # è°ƒç”¨ç»Ÿä¸€åˆ†æå…¥å£
```

#### 3. ä¿®æ”¹analyzeå‘½ä»¤
```python
async def analyze_command(update, context):
    """è‡ªåŠ¨æ£€æµ‹å¹³å°å¹¶åˆ†æ"""
    url = extract_url(context)
    platform = detect_platform(url)

    if platform == 'bili':
        # è°ƒç”¨Bç«™å·¥ä½œæµ
    elif platform == 'xhs':
        # è°ƒç”¨å°çº¢ä¹¦å·¥ä½œæµ
```

#### 4. é›†æˆç»Ÿä¸€åˆ†æå…¥å£
```python
def run_unified_analyzer(url: str, options: dict):
    """è°ƒç”¨ç»Ÿä¸€åˆ†æå…¥å£"""
    cmd = ['python', 'utils/unified_content_analyzer.py', '--url', url]
    # æ·»åŠ å…¶ä»–å‚æ•°
    result = subprocess.run(cmd, ...)
```

## ğŸ“ è¯¦ç»†å®ç°

### æ–°å¢åŠŸèƒ½

1. **è‡ªåŠ¨å¹³å°æ£€æµ‹**
   - è¾“å…¥ï¼šä»»æ„URL
   - è¾“å‡ºï¼šå¹³å°ç±»å‹ + å†…å®¹ç±»å‹
   - è°ƒç”¨ï¼š`utils/unified_content_analyzer.py`

2. **å°çº¢ä¹¦æ”¯æŒ**
   - è§†é¢‘åˆ†æ
   - å›¾æ–‡åˆ†æ
   - é£æ ¼æ£€æµ‹

3. **è¿›åº¦é€šçŸ¥**
   - å®æ—¶è¿›åº¦æ›´æ–°
   - é”™è¯¯å¤„ç†
   - å®Œæˆé€šçŸ¥

### Botå‘½ä»¤

```
/start - å¼€å§‹ä½¿ç”¨
/analyze <é“¾æ¥> - è‡ªåŠ¨æ£€æµ‹å¹³å°å¹¶åˆ†æ
/bili <é“¾æ¥> - Bç«™åˆ†æ
/xhs <é“¾æ¥> - å°çº¢ä¹¦åˆ†æ
/status - æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€
/help - å¸®åŠ©ä¿¡æ¯
```

## ğŸ§ª æµ‹è¯•è®¡åˆ’

1. **Bç«™åŠŸèƒ½æµ‹è¯•**
   - å‘é€Bç«™è§†é¢‘é“¾æ¥
   - éªŒè¯åˆ†ææµç¨‹
   - æ£€æŸ¥ç»“æœè¾“å‡º

2. **å°çº¢ä¹¦åŠŸèƒ½æµ‹è¯•**
   - å‘é€å°çº¢ä¹¦è§†é¢‘é“¾æ¥
   - å‘é€å°çº¢ä¹¦å›¾æ–‡é“¾æ¥
   - éªŒè¯é£æ ¼æ£€æµ‹

3. **è‡ªåŠ¨æ£€æµ‹æµ‹è¯•**
   - æ··åˆå‘é€ä¸åŒå¹³å°é“¾æ¥
   - éªŒè¯è‡ªåŠ¨è·¯ç”±

## ğŸ“‚ æ–‡ä»¶ç»“æ„

```
bot/
â”œâ”€â”€ video_bot.py           # ç°æœ‰Botï¼ˆä¿®æ”¹ï¼‰
â”œâ”€â”€ cookie_manager.py      # Cookieç®¡ç†ï¼ˆå·²æœ‰ï¼‰
â”œâ”€â”€ bot_config.json        # Boté…ç½®ï¼ˆéœ€è¦æ›´æ–°ï¼‰
â””â”€â”€ README.md              # Botä½¿ç”¨æ–‡æ¡£

utils/
â””â”€â”€ unified_content_analyzer.py  # ç»Ÿä¸€å…¥å£ï¼ˆå·²æœ‰ï¼‰
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. é…ç½®Bot Token
```bash
# ç¼–è¾‘ config/bot_config.json
{
    "telegram_token": "YOUR_BOT_TOKEN"
}
```

### 2. å¯åŠ¨Bot
```bash
python bot/video_bot.py
```

### 3. æµ‹è¯•å‘½ä»¤
```
/analyze https://space.bilibili.com/3546607314274766
/analyze https://www.xiaohongshu.com/user/profile/12345
```

## ğŸ“Š é¢„æœŸæˆæœ

- âœ… æ”¯æŒBç«™å’Œå°çº¢ä¹¦
- âœ… è‡ªåŠ¨å¹³å°æ£€æµ‹
- âœ… ç»Ÿä¸€çš„ç”¨æˆ·ä½“éªŒ
- âœ… å®æ—¶è¿›åº¦é€šçŸ¥
- âœ… é”™è¯¯å¤„ç†å’Œé‡è¯•

---

**åˆ›å»ºæ—¶é—´**: 2026-02-23
**çŠ¶æ€**: è®¡åˆ’ä¸­
